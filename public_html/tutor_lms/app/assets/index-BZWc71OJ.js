(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function c(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(h){if(h.ep)return;h.ep=!0;const m=c(h);fetch(h.href,m)}})();function Xc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bl={exports:{}},bn={},Nl={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc;function lC(){if(Dc)return He;Dc=1;var r=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),b=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.iterator;function v(y){return y===null||typeof y!="object"?null:(y=R&&y[R]||y["@@iterator"],typeof y=="function"?y:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,q={};function p(y,K,ae){this.props=y,this.context=K,this.refs=q,this.updater=ae||I}p.prototype.isReactComponent={},p.prototype.setState=function(y,K){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,K,"setState")},p.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function G(){}G.prototype=p.prototype;function H(y,K,ae){this.props=y,this.context=K,this.refs=q,this.updater=ae||I}var T=H.prototype=new G;T.constructor=H,W(T,p.prototype),T.isPureReactComponent=!0;var $=Array.isArray,O=Object.prototype.hasOwnProperty,B={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function _(y,K,ae){var le,Be={},we=null,ee=null;if(K!=null)for(le in K.ref!==void 0&&(ee=K.ref),K.key!==void 0&&(we=""+K.key),K)O.call(K,le)&&!x.hasOwnProperty(le)&&(Be[le]=K[le]);var te=arguments.length-2;if(te===1)Be.children=ae;else if(1<te){for(var oe=Array(te),be=0;be<te;be++)oe[be]=arguments[be+2];Be.children=oe}if(y&&y.defaultProps)for(le in te=y.defaultProps,te)Be[le]===void 0&&(Be[le]=te[le]);return{$$typeof:r,type:y,key:we,ref:ee,props:Be,_owner:B.current}}function k(y,K){return{$$typeof:r,type:y.type,key:K,ref:y.ref,props:y.props,_owner:y._owner}}function j(y){return typeof y=="object"&&y!==null&&y.$$typeof===r}function J(y){var K={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(ae){return K[ae]})}var A=/\/+/g;function C(y,K){return typeof y=="object"&&y!==null&&y.key!=null?J(""+y.key):K.toString(36)}function f(y,K,ae,le,Be){var we=typeof y;(we==="undefined"||we==="boolean")&&(y=null);var ee=!1;if(y===null)ee=!0;else switch(we){case"string":case"number":ee=!0;break;case"object":switch(y.$$typeof){case r:case u:ee=!0}}if(ee)return ee=y,Be=Be(ee),y=le===""?"."+C(ee,0):le,$(Be)?(ae="",y!=null&&(ae=y.replace(A,"$&/")+"/"),f(Be,K,ae,"",function(be){return be})):Be!=null&&(j(Be)&&(Be=k(Be,ae+(!Be.key||ee&&ee.key===Be.key?"":(""+Be.key).replace(A,"$&/")+"/")+y)),K.push(Be)),1;if(ee=0,le=le===""?".":le+":",$(y))for(var te=0;te<y.length;te++){we=y[te];var oe=le+C(we,te);ee+=f(we,K,ae,oe,Be)}else if(oe=v(y),typeof oe=="function")for(y=oe.call(y),te=0;!(we=y.next()).done;)we=we.value,oe=le+C(we,te++),ee+=f(we,K,ae,oe,Be);else if(we==="object")throw K=String(y),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ee}function w(y,K,ae){if(y==null)return y;var le=[],Be=0;return f(y,le,"","",function(we){return K.call(ae,we,Be++)}),le}function F(y){if(y._status===-1){var K=y._result;K=K(),K.then(function(ae){(y._status===0||y._status===-1)&&(y._status=1,y._result=ae)},function(ae){(y._status===0||y._status===-1)&&(y._status=2,y._result=ae)}),y._status===-1&&(y._status=0,y._result=K)}if(y._status===1)return y._result.default;throw y._result}var Y={current:null},L={transition:null},S={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:L,ReactCurrentOwner:B};function D(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:w,forEach:function(y,K,ae){w(y,function(){K.apply(this,arguments)},ae)},count:function(y){var K=0;return w(y,function(){K++}),K},toArray:function(y){return w(y,function(K){return K})||[]},only:function(y){if(!j(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},He.Component=p,He.Fragment=c,He.Profiler=h,He.PureComponent=H,He.StrictMode=d,He.Suspense=N,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S,He.act=D,He.cloneElement=function(y,K,ae){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var le=W({},y.props),Be=y.key,we=y.ref,ee=y._owner;if(K!=null){if(K.ref!==void 0&&(we=K.ref,ee=B.current),K.key!==void 0&&(Be=""+K.key),y.type&&y.type.defaultProps)var te=y.type.defaultProps;for(oe in K)O.call(K,oe)&&!x.hasOwnProperty(oe)&&(le[oe]=K[oe]===void 0&&te!==void 0?te[oe]:K[oe])}var oe=arguments.length-2;if(oe===1)le.children=ae;else if(1<oe){te=Array(oe);for(var be=0;be<oe;be++)te[be]=arguments[be+2];le.children=te}return{$$typeof:r,type:y.type,key:Be,ref:we,props:le,_owner:ee}},He.createContext=function(y){return y={$$typeof:b,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:m,_context:y},y.Consumer=y},He.createElement=_,He.createFactory=function(y){var K=_.bind(null,y);return K.type=y,K},He.createRef=function(){return{current:null}},He.forwardRef=function(y){return{$$typeof:P,render:y}},He.isValidElement=j,He.lazy=function(y){return{$$typeof:E,_payload:{_status:-1,_result:y},_init:F}},He.memo=function(y,K){return{$$typeof:U,type:y,compare:K===void 0?null:K}},He.startTransition=function(y){var K=L.transition;L.transition={};try{y()}finally{L.transition=K}},He.unstable_act=D,He.useCallback=function(y,K){return Y.current.useCallback(y,K)},He.useContext=function(y){return Y.current.useContext(y)},He.useDebugValue=function(){},He.useDeferredValue=function(y){return Y.current.useDeferredValue(y)},He.useEffect=function(y,K){return Y.current.useEffect(y,K)},He.useId=function(){return Y.current.useId()},He.useImperativeHandle=function(y,K,ae){return Y.current.useImperativeHandle(y,K,ae)},He.useInsertionEffect=function(y,K){return Y.current.useInsertionEffect(y,K)},He.useLayoutEffect=function(y,K){return Y.current.useLayoutEffect(y,K)},He.useMemo=function(y,K){return Y.current.useMemo(y,K)},He.useReducer=function(y,K,ae){return Y.current.useReducer(y,K,ae)},He.useRef=function(y){return Y.current.useRef(y)},He.useState=function(y){return Y.current.useState(y)},He.useSyncExternalStore=function(y,K,ae){return Y.current.useSyncExternalStore(y,K,ae)},He.useTransition=function(){return Y.current.useTransition()},He.version="18.3.1",He}var Ac;function Ml(){return Ac||(Ac=1,Nl.exports=lC()),Nl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc;function iC(){if(wc)return bn;wc=1;var r=Ml(),u=Symbol.for("react.element"),c=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,h=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function b(P,N,U){var E,R={},v=null,I=null;U!==void 0&&(v=""+U),N.key!==void 0&&(v=""+N.key),N.ref!==void 0&&(I=N.ref);for(E in N)d.call(N,E)&&!m.hasOwnProperty(E)&&(R[E]=N[E]);if(P&&P.defaultProps)for(E in N=P.defaultProps,N)R[E]===void 0&&(R[E]=N[E]);return{$$typeof:u,type:P,key:v,ref:I,props:R,_owner:h.current}}return bn.Fragment=c,bn.jsx=b,bn.jsxs=b,bn}var kc;function oC(){return kc||(kc=1,Bl.exports=iC()),Bl.exports}var e=oC(),o=Ml();const Me=Xc(o);var Su={},Dl={exports:{}},Ft={},Al={exports:{}},wl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c;function cC(){return _c||(_c=1,(function(r){function u(L,S){var D=L.length;L.push(S);e:for(;0<D;){var y=D-1>>>1,K=L[y];if(0<h(K,S))L[y]=S,L[D]=K,D=y;else break e}}function c(L){return L.length===0?null:L[0]}function d(L){if(L.length===0)return null;var S=L[0],D=L.pop();if(D!==S){L[0]=D;e:for(var y=0,K=L.length,ae=K>>>1;y<ae;){var le=2*(y+1)-1,Be=L[le],we=le+1,ee=L[we];if(0>h(Be,D))we<K&&0>h(ee,Be)?(L[y]=ee,L[we]=D,y=we):(L[y]=Be,L[le]=D,y=le);else if(we<K&&0>h(ee,D))L[y]=ee,L[we]=D,y=we;else break e}}return S}function h(L,S){var D=L.sortIndex-S.sortIndex;return D!==0?D:L.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var b=Date,P=b.now();r.unstable_now=function(){return b.now()-P}}var N=[],U=[],E=1,R=null,v=3,I=!1,W=!1,q=!1,p=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(L){for(var S=c(U);S!==null;){if(S.callback===null)d(U);else if(S.startTime<=L)d(U),S.sortIndex=S.expirationTime,u(N,S);else break;S=c(U)}}function $(L){if(q=!1,T(L),!W)if(c(N)!==null)W=!0,F(O);else{var S=c(U);S!==null&&Y($,S.startTime-L)}}function O(L,S){W=!1,q&&(q=!1,G(_),_=-1),I=!0;var D=v;try{for(T(S),R=c(N);R!==null&&(!(R.expirationTime>S)||L&&!J());){var y=R.callback;if(typeof y=="function"){R.callback=null,v=R.priorityLevel;var K=y(R.expirationTime<=S);S=r.unstable_now(),typeof K=="function"?R.callback=K:R===c(N)&&d(N),T(S)}else d(N);R=c(N)}if(R!==null)var ae=!0;else{var le=c(U);le!==null&&Y($,le.startTime-S),ae=!1}return ae}finally{R=null,v=D,I=!1}}var B=!1,x=null,_=-1,k=5,j=-1;function J(){return!(r.unstable_now()-j<k)}function A(){if(x!==null){var L=r.unstable_now();j=L;var S=!0;try{S=x(!0,L)}finally{S?C():(B=!1,x=null)}}else B=!1}var C;if(typeof H=="function")C=function(){H(A)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,w=f.port2;f.port1.onmessage=A,C=function(){w.postMessage(null)}}else C=function(){p(A,0)};function F(L){x=L,B||(B=!0,C())}function Y(L,S){_=p(function(){L(r.unstable_now())},S)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(L){L.callback=null},r.unstable_continueExecution=function(){W||I||(W=!0,F(O))},r.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return c(N)},r.unstable_next=function(L){switch(v){case 1:case 2:case 3:var S=3;break;default:S=v}var D=v;v=S;try{return L()}finally{v=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(L,S){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var D=v;v=L;try{return S()}finally{v=D}},r.unstable_scheduleCallback=function(L,S,D){var y=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?y+D:y):D=y,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=D+K,L={id:E++,callback:S,priorityLevel:L,startTime:D,expirationTime:K,sortIndex:-1},D>y?(L.sortIndex=D,u(U,L),c(N)===null&&L===c(U)&&(q?(G(_),_=-1):q=!0,Y($,D-y))):(L.sortIndex=K,u(N,L),W||I||(W=!0,F(O))),L},r.unstable_shouldYield=J,r.unstable_wrapCallback=function(L){var S=v;return function(){var D=v;v=S;try{return L.apply(this,arguments)}finally{v=D}}}})(wl)),wl}var Sc;function dC(){return Sc||(Sc=1,Al.exports=cC()),Al.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec;function CC(){if(Ec)return Ft;Ec=1;var r=Ml(),u=dC();function c(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,h={};function m(t,s){b(t,s),b(t+"Capture",s)}function b(t,s){for(h[t]=s,t=0;t<s.length;t++)d.add(s[t])}var P=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N=Object.prototype.hasOwnProperty,U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},R={};function v(t){return N.call(R,t)?!0:N.call(E,t)?!1:U.test(t)?R[t]=!0:(E[t]=!0,!1)}function I(t,s,n,a){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W(t,s,n,a){if(s===null||typeof s>"u"||I(t,s,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(t,s,n,a,l,i,g){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=g}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){p[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];p[s]=new q(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){p[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){p[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){p[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){p[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){p[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){p[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){p[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(G,H);p[s]=new q(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(G,H);p[s]=new q(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(G,H);p[s]=new q(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){p[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),p.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){p[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function T(t,s,n,a){var l=p.hasOwnProperty(s)?p[s]:null;(l!==null?l.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,n,l,a)&&(n=null),a||l===null?v(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):l.mustUseProperty?t[l.propertyName]=n===null?l.type===3?!1:"":n:(s=l.attributeName,a=l.attributeNamespace,n===null?t.removeAttribute(s):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,a?t.setAttributeNS(a,s,n):t.setAttribute(s,n))))}var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),B=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),J=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),L=Symbol.iterator;function S(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var D=Object.assign,y;function K(t){if(y===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);y=s&&s[1]||""}return`
`+y+t}var ae=!1;function le(t,s){if(!t||ae)return"";ae=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(se){var a=se}Reflect.construct(t,[],s)}else{try{s.call()}catch(se){a=se}t.call(s.prototype)}else{try{throw Error()}catch(se){a=se}t()}}catch(se){if(se&&a&&typeof se.stack=="string"){for(var l=se.stack.split(`
`),i=a.stack.split(`
`),g=l.length-1,M=i.length-1;1<=g&&0<=M&&l[g]!==i[M];)M--;for(;1<=g&&0<=M;g--,M--)if(l[g]!==i[M]){if(g!==1||M!==1)do if(g--,M--,0>M||l[g]!==i[M]){var Q=`
`+l[g].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=g&&0<=M);break}}}finally{ae=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?K(t):""}function Be(t){switch(t.tag){case 5:return K(t.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return t=le(t.type,!1),t;case 11:return t=le(t.type.render,!1),t;case 1:return t=le(t.type,!0),t;default:return""}}function we(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case B:return"Portal";case k:return"Profiler";case _:return"StrictMode";case C:return"Suspense";case f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J:return(t.displayName||"Context")+".Consumer";case j:return(t._context.displayName||"Context")+".Provider";case A:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w:return s=t.displayName||null,s!==null?s:we(t.type)||"Memo";case F:s=t._payload,t=t._init;try{return we(t(s))}catch{}}return null}function ee(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function te(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oe(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function be(t){var s=oe(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,i=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(g){a=""+g,i.call(this,g)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ve(t){t._valueTracker||(t._valueTracker=be(t))}function ne(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),a="";return t&&(a=oe(t)?t.checked?"true":"false":t.value),t=a,t!==n?(s.setValue(t),!0):!1}function ge(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fe(t,s){var n=s.checked;return D({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $e(t,s){var n=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;n=te(s.value!=null?s.value:n),t._wrapperState={initialChecked:a,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function re(t,s){s=s.checked,s!=null&&T(t,"checked",s,!1)}function Te(t,s){re(t,s);var n=te(s.value),a=s.type;if(n!=null)a==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?de(t,s.type,n):s.hasOwnProperty("defaultValue")&&de(t,s.type,te(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function z(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function de(t,s,n){(s!=="number"||ge(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var he=Array.isArray;function Fe(t,s,n,a){if(t=t.options,s){s={};for(var l=0;l<n.length;l++)s["$"+n[l]]=!0;for(n=0;n<t.length;n++)l=s.hasOwnProperty("$"+t[n].value),t[n].selected!==l&&(t[n].selected=l),l&&a&&(t[n].defaultSelected=!0)}else{for(n=""+te(n),s=null,l=0;l<t.length;l++){if(t[l].value===n){t[l].selected=!0,a&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function ye(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(c(91));return D({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function je(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(c(92));if(he(n)){if(1<n.length)throw Error(c(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:te(n)}}function ie(t,s){var n=te(s.value),a=te(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),a!=null&&(t.defaultValue=""+a)}function Ne(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Se(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ke(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Se(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ze,st=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,a,l){MSApp.execUnsafeLocalFunction(function(){return t(s,n,a,l)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ze=ze||document.createElement("div"),ze.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ze.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function At(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var Ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xe=["Webkit","ms","Moz","O"];Object.keys(Ve).forEach(function(t){Xe.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ve[s]=Ve[t]})});function ts(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||Ve.hasOwnProperty(t)&&Ve[t]?(""+s).trim():s+"px"}function Lr(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var a=n.indexOf("--")===0,l=ts(n,s[n],a);n==="float"&&(n="cssFloat"),a?t.setProperty(n,l):t[n]=l}}var jn=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nr(t,s){if(s){if(jn[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(c(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(c(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(c(61))}if(s.style!=null&&typeof s.style!="object")throw Error(c(62))}}function ur(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function lr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ir=null,cs=null,ds=null;function zl(t){if(t=nn(t)){if(typeof ir!="function")throw Error(c(280));var s=t.stateNode;s&&(s=Qn(s),ir(t.stateNode,t.type,s))}}function Ul(t){cs?ds?ds.push(t):ds=[t]:cs=t}function Hl(){if(cs){var t=cs,s=ds;if(ds=cs=null,zl(t),s)for(t=0;t<s.length;t++)zl(s[t])}}function Yl(t,s){return t(s)}function Ql(){}var $u=!1;function Kl(t,s,n){if($u)return t(s,n);$u=!0;try{return Yl(t,s,n)}finally{$u=!1,(cs!==null||ds!==null)&&(Ql(),Hl())}}function Mr(t,s){var n=t.stateNode;if(n===null)return null;var a=Qn(n);if(a===null)return null;n=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(c(231,s,typeof n));return n}var zu=!1;if(P)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){zu=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{zu=!1}function md(t,s,n,a,l,i,g,M,Q){var se=Array.prototype.slice.call(arguments,3);try{s.apply(n,se)}catch(Ce){this.onError(Ce)}}var Or=!1,Bn=null,Nn=!1,Uu=null,xd={onError:function(t){Or=!0,Bn=t}};function gd(t,s,n,a,l,i,g,M,Q){Or=!1,Bn=null,md.apply(xd,arguments)}function hd(t,s,n,a,l,i,g,M,Q){if(gd.apply(this,arguments),Or){if(Or){var se=Bn;Or=!1,Bn=null}else throw Error(c(198));Nn||(Nn=!0,Uu=se)}}function Ys(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function Vl(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Wl(t){if(Ys(t)!==t)throw Error(c(188))}function pd(t){var s=t.alternate;if(!s){if(s=Ys(t),s===null)throw Error(c(188));return s!==t?null:t}for(var n=t,a=s;;){var l=n.return;if(l===null)break;var i=l.alternate;if(i===null){if(a=l.return,a!==null){n=a;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===n)return Wl(l),t;if(i===a)return Wl(l),s;i=i.sibling}throw Error(c(188))}if(n.return!==a.return)n=l,a=i;else{for(var g=!1,M=l.child;M;){if(M===n){g=!0,n=l,a=i;break}if(M===a){g=!0,a=l,n=i;break}M=M.sibling}if(!g){for(M=i.child;M;){if(M===n){g=!0,n=i,a=l;break}if(M===a){g=!0,a=i,n=l;break}M=M.sibling}if(!g)throw Error(c(189))}}if(n.alternate!==a)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?t:s}function Gl(t){return t=pd(t),t!==null?ql(t):null}function ql(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ql(t);if(s!==null)return s;t=t.sibling}return null}var Jl=u.unstable_scheduleCallback,Xl=u.unstable_cancelCallback,fd=u.unstable_shouldYield,yd=u.unstable_requestPaint,nt=u.unstable_now,bd=u.unstable_getCurrentPriorityLevel,Hu=u.unstable_ImmediatePriority,Zl=u.unstable_UserBlockingPriority,Dn=u.unstable_NormalPriority,vd=u.unstable_LowPriority,ei=u.unstable_IdlePriority,An=null,ss=null;function jd(t){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(An,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Dd,Bd=Math.log,Nd=Math.LN2;function Dd(t){return t>>>=0,t===0?32:31-(Bd(t)/Nd|0)|0}var wn=64,kn=4194304;function $r(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _n(t,s){var n=t.pendingLanes;if(n===0)return 0;var a=0,l=t.suspendedLanes,i=t.pingedLanes,g=n&268435455;if(g!==0){var M=g&~l;M!==0?a=$r(M):(i&=g,i!==0&&(a=$r(i)))}else g=n&~l,g!==0?a=$r(g):i!==0&&(a=$r(i));if(a===0)return 0;if(s!==0&&s!==a&&(s&l)===0&&(l=a&-a,i=s&-s,l>=i||l===16&&(i&4194240)!==0))return s;if((a&4)!==0&&(a|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)n=31-Kt(s),l=1<<n,a|=t[n],s&=~l;return a}function Ad(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wd(t,s){for(var n=t.suspendedLanes,a=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes;0<i;){var g=31-Kt(i),M=1<<g,Q=l[g];Q===-1?((M&n)===0||(M&a)!==0)&&(l[g]=Ad(M,s)):Q<=s&&(t.expiredLanes|=M),i&=~M}}function Yu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ti(){var t=wn;return wn<<=1,(wn&4194240)===0&&(wn=64),t}function Qu(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function zr(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Kt(s),t[s]=n}function kd(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<n;){var l=31-Kt(n),i=1<<l;s[l]=0,a[l]=-1,t[l]=-1,n&=~i}}function Ku(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var a=31-Kt(n),l=1<<a;l&s|t[a]&s&&(t[a]|=s),n&=~l}}var We=0;function si(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ri,Vu,ni,ui,ai,Wu=!1,Sn=[],js=null,Bs=null,Ns=null,Ur=new Map,Hr=new Map,Ds=[],_d="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function li(t,s){switch(t){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Ur.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(s.pointerId)}}function Yr(t,s,n,a,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[l]},s!==null&&(s=nn(s),s!==null&&Vu(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function Sd(t,s,n,a,l){switch(s){case"focusin":return js=Yr(js,t,s,n,a,l),!0;case"dragenter":return Bs=Yr(Bs,t,s,n,a,l),!0;case"mouseover":return Ns=Yr(Ns,t,s,n,a,l),!0;case"pointerover":var i=l.pointerId;return Ur.set(i,Yr(Ur.get(i)||null,t,s,n,a,l)),!0;case"gotpointercapture":return i=l.pointerId,Hr.set(i,Yr(Hr.get(i)||null,t,s,n,a,l)),!0}return!1}function ii(t){var s=Qs(t.target);if(s!==null){var n=Ys(s);if(n!==null){if(s=n.tag,s===13){if(s=Vl(n),s!==null){t.blockedOn=s,ai(t.priority,function(){ni(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function En(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=qu(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);ar=a,n.target.dispatchEvent(a),ar=null}else return s=nn(n),s!==null&&Vu(s),t.blockedOn=n,!1;s.shift()}return!0}function oi(t,s,n){En(t)&&n.delete(s)}function Ed(){Wu=!1,js!==null&&En(js)&&(js=null),Bs!==null&&En(Bs)&&(Bs=null),Ns!==null&&En(Ns)&&(Ns=null),Ur.forEach(oi),Hr.forEach(oi)}function Qr(t,s){t.blockedOn===s&&(t.blockedOn=null,Wu||(Wu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Ed)))}function Kr(t){function s(l){return Qr(l,t)}if(0<Sn.length){Qr(Sn[0],t);for(var n=1;n<Sn.length;n++){var a=Sn[n];a.blockedOn===t&&(a.blockedOn=null)}}for(js!==null&&Qr(js,t),Bs!==null&&Qr(Bs,t),Ns!==null&&Qr(Ns,t),Ur.forEach(s),Hr.forEach(s),n=0;n<Ds.length;n++)a=Ds[n],a.blockedOn===t&&(a.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)ii(n),n.blockedOn===null&&Ds.shift()}var or=$.ReactCurrentBatchConfig,Fn=!0;function Fd(t,s,n,a){var l=We,i=or.transition;or.transition=null;try{We=1,Gu(t,s,n,a)}finally{We=l,or.transition=i}}function Td(t,s,n,a){var l=We,i=or.transition;or.transition=null;try{We=4,Gu(t,s,n,a)}finally{We=l,or.transition=i}}function Gu(t,s,n,a){if(Fn){var l=qu(t,s,n,a);if(l===null)ma(t,s,a,Tn,n),li(t,a);else if(Sd(l,t,s,n,a))a.stopPropagation();else if(li(t,a),s&4&&-1<_d.indexOf(t)){for(;l!==null;){var i=nn(l);if(i!==null&&ri(i),i=qu(t,s,n,a),i===null&&ma(t,s,a,Tn,n),i===l)break;l=i}l!==null&&a.stopPropagation()}else ma(t,s,a,null,n)}}var Tn=null;function qu(t,s,n,a){if(Tn=null,t=lr(a),t=Qs(t),t!==null)if(s=Ys(t),s===null)t=null;else if(n=s.tag,n===13){if(t=Vl(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Tn=t,null}function ci(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bd()){case Hu:return 1;case Zl:return 4;case Dn:case vd:return 16;case ei:return 536870912;default:return 16}default:return 16}}var As=null,Ju=null,In=null;function di(){if(In)return In;var t,s=Ju,n=s.length,a,l="value"in As?As.value:As.textContent,i=l.length;for(t=0;t<n&&s[t]===l[t];t++);var g=n-t;for(a=1;a<=g&&s[n-a]===l[i-a];a++);return In=l.slice(t,1<a?1-a:void 0)}function Pn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ln(){return!0}function Ci(){return!1}function Tt(t){function s(n,a,l,i,g){this._reactName=n,this._targetInst=l,this.type=a,this.nativeEvent=i,this.target=g,this.currentTarget=null;for(var M in t)t.hasOwnProperty(M)&&(n=t[M],this[M]=n?n(i):i[M]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ln:Ci,this.isPropagationStopped=Ci,this}return D(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ln)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ln)},persist:function(){},isPersistent:Ln}),s}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=Tt(cr),Vr=D({},cr,{view:0,detail:0}),Id=Tt(Vr),Zu,ea,Wr,Mn=D({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wr&&(Wr&&t.type==="mousemove"?(Zu=t.screenX-Wr.screenX,ea=t.screenY-Wr.screenY):ea=Zu=0,Wr=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ea}}),mi=Tt(Mn),Pd=D({},Mn,{dataTransfer:0}),Ld=Tt(Pd),Md=D({},Vr,{relatedTarget:0}),ta=Tt(Md),Rd=D({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Od=Tt(Rd),$d=D({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zd=Tt($d),Ud=D({},cr,{data:0}),xi=Tt(Ud),Hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Qd[t])?!!s[t]:!1}function sa(){return Kd}var Vd=D({},Vr,{key:function(t){if(t.key){var s=Hd[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(t){return t.type==="keypress"?Pn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wd=Tt(Vd),Gd=D({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=Tt(Gd),qd=D({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),Jd=Tt(qd),Xd=D({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zd=Tt(Xd),e0=D({},Mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t0=Tt(e0),s0=[9,13,27,32],ra=P&&"CompositionEvent"in window,Gr=null;P&&"documentMode"in document&&(Gr=document.documentMode);var r0=P&&"TextEvent"in window&&!Gr,hi=P&&(!ra||Gr&&8<Gr&&11>=Gr),pi=" ",fi=!1;function yi(t,s){switch(t){case"keyup":return s0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bi(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dr=!1;function n0(t,s){switch(t){case"compositionend":return bi(s);case"keypress":return s.which!==32?null:(fi=!0,pi);case"textInput":return t=s.data,t===pi&&fi?null:t;default:return null}}function u0(t,s){if(dr)return t==="compositionend"||!ra&&yi(t,s)?(t=di(),In=Ju=As=null,dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hi&&s.locale!=="ko"?null:s.data;default:return null}}var a0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!a0[t.type]:s==="textarea"}function ji(t,s,n,a){Ul(a),s=Un(s,"onChange"),0<s.length&&(n=new Xu("onChange","change",null,n,a),t.push({event:n,listeners:s}))}var qr=null,Jr=null;function l0(t){$i(t,0)}function Rn(t){var s=hr(t);if(ne(s))return t}function i0(t,s){if(t==="change")return s}var Bi=!1;if(P){var na;if(P){var ua="oninput"in document;if(!ua){var Ni=document.createElement("div");Ni.setAttribute("oninput","return;"),ua=typeof Ni.oninput=="function"}na=ua}else na=!1;Bi=na&&(!document.documentMode||9<document.documentMode)}function Di(){qr&&(qr.detachEvent("onpropertychange",Ai),Jr=qr=null)}function Ai(t){if(t.propertyName==="value"&&Rn(Jr)){var s=[];ji(s,Jr,t,lr(t)),Kl(l0,s)}}function o0(t,s,n){t==="focusin"?(Di(),qr=s,Jr=n,qr.attachEvent("onpropertychange",Ai)):t==="focusout"&&Di()}function c0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rn(Jr)}function d0(t,s){if(t==="click")return Rn(s)}function C0(t,s){if(t==="input"||t==="change")return Rn(s)}function m0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Vt=typeof Object.is=="function"?Object.is:m0;function Xr(t,s){if(Vt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var l=n[a];if(!N.call(s,l)||!Vt(t[l],s[l]))return!1}return!0}function wi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ki(t,s){var n=wi(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=s&&a>=s)return{node:n,offset:s-t};t=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wi(n)}}function _i(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?_i(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Si(){for(var t=window,s=ge();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=ge(t.document)}return s}function aa(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function x0(t){var s=Si(),n=t.focusedElem,a=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&_i(n.ownerDocument.documentElement,n)){if(a!==null&&aa(n)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=n.textContent.length,i=Math.min(a.start,l);a=a.end===void 0?i:Math.min(a.end,l),!t.extend&&i>a&&(l=a,a=i,i=l),l=ki(n,i);var g=ki(n,a);l&&g&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(g.node,g.offset)):(s.setEnd(g.node,g.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var g0=P&&"documentMode"in document&&11>=document.documentMode,Cr=null,la=null,Zr=null,ia=!1;function Ei(t,s,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ia||Cr==null||Cr!==ge(a)||(a=Cr,"selectionStart"in a&&aa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Zr&&Xr(Zr,a)||(Zr=a,a=Un(la,"onSelect"),0<a.length&&(s=new Xu("onSelect","select",null,s,n),t.push({event:s,listeners:a}),s.target=Cr)))}function On(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var mr={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionend:On("Transition","TransitionEnd")},oa={},Fi={};P&&(Fi=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function $n(t){if(oa[t])return oa[t];if(!mr[t])return t;var s=mr[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in Fi)return oa[t]=s[n];return t}var Ti=$n("animationend"),Ii=$n("animationiteration"),Pi=$n("animationstart"),Li=$n("transitionend"),Mi=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(t,s){Mi.set(t,s),m(s,[t])}for(var ca=0;ca<Ri.length;ca++){var da=Ri[ca],h0=da.toLowerCase(),p0=da[0].toUpperCase()+da.slice(1);ws(h0,"on"+p0)}ws(Ti,"onAnimationEnd"),ws(Ii,"onAnimationIteration"),ws(Pi,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(Li,"onTransitionEnd"),b("onMouseEnter",["mouseout","mouseover"]),b("onMouseLeave",["mouseout","mouseover"]),b("onPointerEnter",["pointerout","pointerover"]),b("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var en="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(en));function Oi(t,s,n){var a=t.type||"unknown-event";t.currentTarget=n,hd(a,s,void 0,t),t.currentTarget=null}function $i(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],l=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var g=a.length-1;0<=g;g--){var M=a[g],Q=M.instance,se=M.currentTarget;if(M=M.listener,Q!==i&&l.isPropagationStopped())break e;Oi(l,M,se),i=Q}else for(g=0;g<a.length;g++){if(M=a[g],Q=M.instance,se=M.currentTarget,M=M.listener,Q!==i&&l.isPropagationStopped())break e;Oi(l,M,se),i=Q}}}if(Nn)throw t=Uu,Nn=!1,Uu=null,t}function qe(t,s){var n=s[ya];n===void 0&&(n=s[ya]=new Set);var a=t+"__bubble";n.has(a)||(zi(s,t,2,!1),n.add(a))}function Ca(t,s,n){var a=0;s&&(a|=4),zi(n,t,a,s)}var zn="_reactListening"+Math.random().toString(36).slice(2);function tn(t){if(!t[zn]){t[zn]=!0,d.forEach(function(n){n!=="selectionchange"&&(f0.has(n)||Ca(n,!1,t),Ca(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[zn]||(s[zn]=!0,Ca("selectionchange",!1,s))}}function zi(t,s,n,a){switch(ci(s)){case 1:var l=Fd;break;case 4:l=Td;break;default:l=Gu}n=l.bind(null,s,n,t),l=void 0,!zu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),a?l!==void 0?t.addEventListener(s,n,{capture:!0,passive:l}):t.addEventListener(s,n,!0):l!==void 0?t.addEventListener(s,n,{passive:l}):t.addEventListener(s,n,!1)}function ma(t,s,n,a,l){var i=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var M=a.stateNode.containerInfo;if(M===l||M.nodeType===8&&M.parentNode===l)break;if(g===4)for(g=a.return;g!==null;){var Q=g.tag;if((Q===3||Q===4)&&(Q=g.stateNode.containerInfo,Q===l||Q.nodeType===8&&Q.parentNode===l))return;g=g.return}for(;M!==null;){if(g=Qs(M),g===null)return;if(Q=g.tag,Q===5||Q===6){a=i=g;continue e}M=M.parentNode}}a=a.return}Kl(function(){var se=i,Ce=lr(n),me=[];e:{var ce=Mi.get(t);if(ce!==void 0){var De=Xu,ke=t;switch(t){case"keypress":if(Pn(n)===0)break e;case"keydown":case"keyup":De=Wd;break;case"focusin":ke="focus",De=ta;break;case"focusout":ke="blur",De=ta;break;case"beforeblur":case"afterblur":De=ta;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=Jd;break;case Ti:case Ii:case Pi:De=Od;break;case Li:De=Zd;break;case"scroll":De=Id;break;case"wheel":De=t0;break;case"copy":case"cut":case"paste":De=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=gi}var _e=(s&4)!==0,ut=!_e&&t==="scroll",X=_e?ce!==null?ce+"Capture":null:ce;_e=[];for(var V=se,Z;V!==null;){Z=V;var pe=Z.stateNode;if(Z.tag===5&&pe!==null&&(Z=pe,X!==null&&(pe=Mr(V,X),pe!=null&&_e.push(sn(V,pe,Z)))),ut)break;V=V.return}0<_e.length&&(ce=new De(ce,ke,null,n,Ce),me.push({event:ce,listeners:_e}))}}if((s&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",ce&&n!==ar&&(ke=n.relatedTarget||n.fromElement)&&(Qs(ke)||ke[Cs]))break e;if((De||ce)&&(ce=Ce.window===Ce?Ce:(ce=Ce.ownerDocument)?ce.defaultView||ce.parentWindow:window,De?(ke=n.relatedTarget||n.toElement,De=se,ke=ke?Qs(ke):null,ke!==null&&(ut=Ys(ke),ke!==ut||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(De=null,ke=se),De!==ke)){if(_e=mi,pe="onMouseLeave",X="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(_e=gi,pe="onPointerLeave",X="onPointerEnter",V="pointer"),ut=De==null?ce:hr(De),Z=ke==null?ce:hr(ke),ce=new _e(pe,V+"leave",De,n,Ce),ce.target=ut,ce.relatedTarget=Z,pe=null,Qs(Ce)===se&&(_e=new _e(X,V+"enter",ke,n,Ce),_e.target=Z,_e.relatedTarget=ut,pe=_e),ut=pe,De&&ke)t:{for(_e=De,X=ke,V=0,Z=_e;Z;Z=xr(Z))V++;for(Z=0,pe=X;pe;pe=xr(pe))Z++;for(;0<V-Z;)_e=xr(_e),V--;for(;0<Z-V;)X=xr(X),Z--;for(;V--;){if(_e===X||X!==null&&_e===X.alternate)break t;_e=xr(_e),X=xr(X)}_e=null}else _e=null;De!==null&&Ui(me,ce,De,_e,!1),ke!==null&&ut!==null&&Ui(me,ut,ke,_e,!0)}}e:{if(ce=se?hr(se):window,De=ce.nodeName&&ce.nodeName.toLowerCase(),De==="select"||De==="input"&&ce.type==="file")var Ee=i0;else if(vi(ce))if(Bi)Ee=C0;else{Ee=c0;var Ie=o0}else(De=ce.nodeName)&&De.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Ee=d0);if(Ee&&(Ee=Ee(t,se))){ji(me,Ee,n,Ce);break e}Ie&&Ie(t,ce,se),t==="focusout"&&(Ie=ce._wrapperState)&&Ie.controlled&&ce.type==="number"&&de(ce,"number",ce.value)}switch(Ie=se?hr(se):window,t){case"focusin":(vi(Ie)||Ie.contentEditable==="true")&&(Cr=Ie,la=se,Zr=null);break;case"focusout":Zr=la=Cr=null;break;case"mousedown":ia=!0;break;case"contextmenu":case"mouseup":case"dragend":ia=!1,Ei(me,n,Ce);break;case"selectionchange":if(g0)break;case"keydown":case"keyup":Ei(me,n,Ce)}var Pe;if(ra)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else dr?yi(t,n)&&(Re="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Re="onCompositionStart");Re&&(hi&&n.locale!=="ko"&&(dr||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&dr&&(Pe=di()):(As=Ce,Ju="value"in As?As.value:As.textContent,dr=!0)),Ie=Un(se,Re),0<Ie.length&&(Re=new xi(Re,t,null,n,Ce),me.push({event:Re,listeners:Ie}),Pe?Re.data=Pe:(Pe=bi(n),Pe!==null&&(Re.data=Pe)))),(Pe=r0?n0(t,n):u0(t,n))&&(se=Un(se,"onBeforeInput"),0<se.length&&(Ce=new xi("onBeforeInput","beforeinput",null,n,Ce),me.push({event:Ce,listeners:se}),Ce.data=Pe))}$i(me,s)})}function sn(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Un(t,s){for(var n=s+"Capture",a=[];t!==null;){var l=t,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Mr(t,n),i!=null&&a.unshift(sn(t,i,l)),i=Mr(t,s),i!=null&&a.push(sn(t,i,l))),t=t.return}return a}function xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ui(t,s,n,a,l){for(var i=s._reactName,g=[];n!==null&&n!==a;){var M=n,Q=M.alternate,se=M.stateNode;if(Q!==null&&Q===a)break;M.tag===5&&se!==null&&(M=se,l?(Q=Mr(n,i),Q!=null&&g.unshift(sn(n,Q,M))):l||(Q=Mr(n,i),Q!=null&&g.push(sn(n,Q,M)))),n=n.return}g.length!==0&&t.push({event:s,listeners:g})}var y0=/\r\n?/g,b0=/\u0000|\uFFFD/g;function Hi(t){return(typeof t=="string"?t:""+t).replace(y0,`
`).replace(b0,"")}function Hn(t,s,n){if(s=Hi(s),Hi(t)!==s&&n)throw Error(c(425))}function Yn(){}var xa=null,ga=null;function ha(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pa=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Yi=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof Yi<"u"?function(t){return Yi.resolve(null).then(t).catch(B0)}:pa;function B0(t){setTimeout(function(){throw t})}function fa(t,s){var n=s,a=0;do{var l=n.nextSibling;if(t.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(a===0){t.removeChild(l),Kr(s);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=l}while(n);Kr(s)}function ks(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Qi(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var gr=Math.random().toString(36).slice(2),rs="__reactFiber$"+gr,rn="__reactProps$"+gr,Cs="__reactContainer$"+gr,ya="__reactEvents$"+gr,N0="__reactListeners$"+gr,D0="__reactHandles$"+gr;function Qs(t){var s=t[rs];if(s)return s;for(var n=t.parentNode;n;){if(s=n[Cs]||n[rs]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=Qi(t);t!==null;){if(n=t[rs])return n;t=Qi(t)}return s}t=n,n=t.parentNode}return null}function nn(t){return t=t[rs]||t[Cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(c(33))}function Qn(t){return t[rn]||null}var ba=[],pr=-1;function _s(t){return{current:t}}function Je(t){0>pr||(t.current=ba[pr],ba[pr]=null,pr--)}function Ge(t,s){pr++,ba[pr]=t.current,t.current=s}var Ss={},ft=_s(Ss),wt=_s(!1),Ks=Ss;function fr(t,s){var n=t.type.contextTypes;if(!n)return Ss;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in n)l[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function kt(t){return t=t.childContextTypes,t!=null}function Kn(){Je(wt),Je(ft)}function Ki(t,s,n){if(ft.current!==Ss)throw Error(c(168));Ge(ft,s),Ge(wt,n)}function Vi(t,s,n){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var l in a)if(!(l in s))throw Error(c(108,ee(t)||"Unknown",l));return D({},n,a)}function Vn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,Ks=ft.current,Ge(ft,t),Ge(wt,wt.current),!0}function Wi(t,s,n){var a=t.stateNode;if(!a)throw Error(c(169));n?(t=Vi(t,s,Ks),a.__reactInternalMemoizedMergedChildContext=t,Je(wt),Je(ft),Ge(ft,t)):Je(wt),Ge(wt,n)}var ms=null,Wn=!1,va=!1;function Gi(t){ms===null?ms=[t]:ms.push(t)}function A0(t){Wn=!0,Gi(t)}function Es(){if(!va&&ms!==null){va=!0;var t=0,s=We;try{var n=ms;for(We=1;t<n.length;t++){var a=n[t];do a=a(!0);while(a!==null)}ms=null,Wn=!1}catch(l){throw ms!==null&&(ms=ms.slice(t+1)),Jl(Hu,Es),l}finally{We=s,va=!1}}return null}var yr=[],br=0,Gn=null,qn=0,Rt=[],Ot=0,Vs=null,xs=1,gs="";function Ws(t,s){yr[br++]=qn,yr[br++]=Gn,Gn=t,qn=s}function qi(t,s,n){Rt[Ot++]=xs,Rt[Ot++]=gs,Rt[Ot++]=Vs,Vs=t;var a=xs;t=gs;var l=32-Kt(a)-1;a&=~(1<<l),n+=1;var i=32-Kt(s)+l;if(30<i){var g=l-l%5;i=(a&(1<<g)-1).toString(32),a>>=g,l-=g,xs=1<<32-Kt(s)+l|n<<l|a,gs=i+t}else xs=1<<i|n<<l|a,gs=t}function ja(t){t.return!==null&&(Ws(t,1),qi(t,1,0))}function Ba(t){for(;t===Gn;)Gn=yr[--br],yr[br]=null,qn=yr[--br],yr[br]=null;for(;t===Vs;)Vs=Rt[--Ot],Rt[Ot]=null,gs=Rt[--Ot],Rt[Ot]=null,xs=Rt[--Ot],Rt[Ot]=null}var It=null,Pt=null,Ze=!1,Wt=null;function Ji(t,s){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function Xi(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,It=t,Pt=ks(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,It=t,Pt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=Vs!==null?{id:xs,overflow:gs}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,It=t,Pt=null,!0):!1;default:return!1}}function Na(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Da(t){if(Ze){var s=Pt;if(s){var n=s;if(!Xi(t,s)){if(Na(t))throw Error(c(418));s=ks(n.nextSibling);var a=It;s&&Xi(t,s)?Ji(a,n):(t.flags=t.flags&-4097|2,Ze=!1,It=t)}}else{if(Na(t))throw Error(c(418));t.flags=t.flags&-4097|2,Ze=!1,It=t}}}function Zi(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function Jn(t){if(t!==It)return!1;if(!Ze)return Zi(t),Ze=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ha(t.type,t.memoizedProps)),s&&(s=Pt)){if(Na(t))throw eo(),Error(c(418));for(;s;)Ji(t,s),s=ks(s.nextSibling)}if(Zi(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){Pt=ks(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}Pt=null}}else Pt=It?ks(t.stateNode.nextSibling):null;return!0}function eo(){for(var t=Pt;t;)t=ks(t.nextSibling)}function vr(){Pt=It=null,Ze=!1}function Aa(t){Wt===null?Wt=[t]:Wt.push(t)}var w0=$.ReactCurrentBatchConfig;function un(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var a=n.stateNode}if(!a)throw Error(c(147,t));var l=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(g){var M=l.refs;g===null?delete M[i]:M[i]=g},s._stringRef=i,s)}if(typeof t!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,t))}return t}function Xn(t,s){throw t=Object.prototype.toString.call(s),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function to(t){var s=t._init;return s(t._payload)}function so(t){function s(X,V){if(t){var Z=X.deletions;Z===null?(X.deletions=[V],X.flags|=16):Z.push(V)}}function n(X,V){if(!t)return null;for(;V!==null;)s(X,V),V=V.sibling;return null}function a(X,V){for(X=new Map;V!==null;)V.key!==null?X.set(V.key,V):X.set(V.index,V),V=V.sibling;return X}function l(X,V){return X=Os(X,V),X.index=0,X.sibling=null,X}function i(X,V,Z){return X.index=Z,t?(Z=X.alternate,Z!==null?(Z=Z.index,Z<V?(X.flags|=2,V):Z):(X.flags|=2,V)):(X.flags|=1048576,V)}function g(X){return t&&X.alternate===null&&(X.flags|=2),X}function M(X,V,Z,pe){return V===null||V.tag!==6?(V=pl(Z,X.mode,pe),V.return=X,V):(V=l(V,Z),V.return=X,V)}function Q(X,V,Z,pe){var Ee=Z.type;return Ee===x?Ce(X,V,Z.props.children,pe,Z.key):V!==null&&(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===F&&to(Ee)===V.type)?(pe=l(V,Z.props),pe.ref=un(X,V,Z),pe.return=X,pe):(pe=ju(Z.type,Z.key,Z.props,null,X.mode,pe),pe.ref=un(X,V,Z),pe.return=X,pe)}function se(X,V,Z,pe){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=fl(Z,X.mode,pe),V.return=X,V):(V=l(V,Z.children||[]),V.return=X,V)}function Ce(X,V,Z,pe,Ee){return V===null||V.tag!==7?(V=sr(Z,X.mode,pe,Ee),V.return=X,V):(V=l(V,Z),V.return=X,V)}function me(X,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=pl(""+V,X.mode,Z),V.return=X,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return Z=ju(V.type,V.key,V.props,null,X.mode,Z),Z.ref=un(X,null,V),Z.return=X,Z;case B:return V=fl(V,X.mode,Z),V.return=X,V;case F:var pe=V._init;return me(X,pe(V._payload),Z)}if(he(V)||S(V))return V=sr(V,X.mode,Z,null),V.return=X,V;Xn(X,V)}return null}function ce(X,V,Z,pe){var Ee=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Ee!==null?null:M(X,V,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case O:return Z.key===Ee?Q(X,V,Z,pe):null;case B:return Z.key===Ee?se(X,V,Z,pe):null;case F:return Ee=Z._init,ce(X,V,Ee(Z._payload),pe)}if(he(Z)||S(Z))return Ee!==null?null:Ce(X,V,Z,pe,null);Xn(X,Z)}return null}function De(X,V,Z,pe,Ee){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return X=X.get(Z)||null,M(V,X,""+pe,Ee);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:return X=X.get(pe.key===null?Z:pe.key)||null,Q(V,X,pe,Ee);case B:return X=X.get(pe.key===null?Z:pe.key)||null,se(V,X,pe,Ee);case F:var Ie=pe._init;return De(X,V,Z,Ie(pe._payload),Ee)}if(he(pe)||S(pe))return X=X.get(Z)||null,Ce(V,X,pe,Ee,null);Xn(V,pe)}return null}function ke(X,V,Z,pe){for(var Ee=null,Ie=null,Pe=V,Re=V=0,Ct=null;Pe!==null&&Re<Z.length;Re++){Pe.index>Re?(Ct=Pe,Pe=null):Ct=Pe.sibling;var Qe=ce(X,Pe,Z[Re],pe);if(Qe===null){Pe===null&&(Pe=Ct);break}t&&Pe&&Qe.alternate===null&&s(X,Pe),V=i(Qe,V,Re),Ie===null?Ee=Qe:Ie.sibling=Qe,Ie=Qe,Pe=Ct}if(Re===Z.length)return n(X,Pe),Ze&&Ws(X,Re),Ee;if(Pe===null){for(;Re<Z.length;Re++)Pe=me(X,Z[Re],pe),Pe!==null&&(V=i(Pe,V,Re),Ie===null?Ee=Pe:Ie.sibling=Pe,Ie=Pe);return Ze&&Ws(X,Re),Ee}for(Pe=a(X,Pe);Re<Z.length;Re++)Ct=De(Pe,X,Re,Z[Re],pe),Ct!==null&&(t&&Ct.alternate!==null&&Pe.delete(Ct.key===null?Re:Ct.key),V=i(Ct,V,Re),Ie===null?Ee=Ct:Ie.sibling=Ct,Ie=Ct);return t&&Pe.forEach(function($s){return s(X,$s)}),Ze&&Ws(X,Re),Ee}function _e(X,V,Z,pe){var Ee=S(Z);if(typeof Ee!="function")throw Error(c(150));if(Z=Ee.call(Z),Z==null)throw Error(c(151));for(var Ie=Ee=null,Pe=V,Re=V=0,Ct=null,Qe=Z.next();Pe!==null&&!Qe.done;Re++,Qe=Z.next()){Pe.index>Re?(Ct=Pe,Pe=null):Ct=Pe.sibling;var $s=ce(X,Pe,Qe.value,pe);if($s===null){Pe===null&&(Pe=Ct);break}t&&Pe&&$s.alternate===null&&s(X,Pe),V=i($s,V,Re),Ie===null?Ee=$s:Ie.sibling=$s,Ie=$s,Pe=Ct}if(Qe.done)return n(X,Pe),Ze&&Ws(X,Re),Ee;if(Pe===null){for(;!Qe.done;Re++,Qe=Z.next())Qe=me(X,Qe.value,pe),Qe!==null&&(V=i(Qe,V,Re),Ie===null?Ee=Qe:Ie.sibling=Qe,Ie=Qe);return Ze&&Ws(X,Re),Ee}for(Pe=a(X,Pe);!Qe.done;Re++,Qe=Z.next())Qe=De(Pe,X,Re,Qe.value,pe),Qe!==null&&(t&&Qe.alternate!==null&&Pe.delete(Qe.key===null?Re:Qe.key),V=i(Qe,V,Re),Ie===null?Ee=Qe:Ie.sibling=Qe,Ie=Qe);return t&&Pe.forEach(function(aC){return s(X,aC)}),Ze&&Ws(X,Re),Ee}function ut(X,V,Z,pe){if(typeof Z=="object"&&Z!==null&&Z.type===x&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case O:e:{for(var Ee=Z.key,Ie=V;Ie!==null;){if(Ie.key===Ee){if(Ee=Z.type,Ee===x){if(Ie.tag===7){n(X,Ie.sibling),V=l(Ie,Z.props.children),V.return=X,X=V;break e}}else if(Ie.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===F&&to(Ee)===Ie.type){n(X,Ie.sibling),V=l(Ie,Z.props),V.ref=un(X,Ie,Z),V.return=X,X=V;break e}n(X,Ie);break}else s(X,Ie);Ie=Ie.sibling}Z.type===x?(V=sr(Z.props.children,X.mode,pe,Z.key),V.return=X,X=V):(pe=ju(Z.type,Z.key,Z.props,null,X.mode,pe),pe.ref=un(X,V,Z),pe.return=X,X=pe)}return g(X);case B:e:{for(Ie=Z.key;V!==null;){if(V.key===Ie)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){n(X,V.sibling),V=l(V,Z.children||[]),V.return=X,X=V;break e}else{n(X,V);break}else s(X,V);V=V.sibling}V=fl(Z,X.mode,pe),V.return=X,X=V}return g(X);case F:return Ie=Z._init,ut(X,V,Ie(Z._payload),pe)}if(he(Z))return ke(X,V,Z,pe);if(S(Z))return _e(X,V,Z,pe);Xn(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,V!==null&&V.tag===6?(n(X,V.sibling),V=l(V,Z),V.return=X,X=V):(n(X,V),V=pl(Z,X.mode,pe),V.return=X,X=V),g(X)):n(X,V)}return ut}var jr=so(!0),ro=so(!1),Zn=_s(null),eu=null,Br=null,wa=null;function ka(){wa=Br=eu=null}function _a(t){var s=Zn.current;Je(Zn),t._currentValue=s}function Sa(t,s,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===n)break;t=t.return}}function Nr(t,s){eu=t,wa=Br=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(_t=!0),t.firstContext=null)}function $t(t){var s=t._currentValue;if(wa!==t)if(t={context:t,memoizedValue:s,next:null},Br===null){if(eu===null)throw Error(c(308));Br=t,eu.dependencies={lanes:0,firstContext:t}}else Br=Br.next=t;return s}var Gs=null;function Ea(t){Gs===null?Gs=[t]:Gs.push(t)}function no(t,s,n,a){var l=s.interleaved;return l===null?(n.next=n,Ea(s)):(n.next=l.next,l.next=n),s.interleaved=n,hs(t,a)}function hs(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fs=!1;function Fa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uo(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ps(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ts(t,s,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ye&2)!==0){var l=a.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s,hs(t,n)}return l=a.interleaved,l===null?(s.next=s,Ea(a)):(s.next=l.next,l.next=s),a.interleaved=s,hs(t,n)}function tu(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,Ku(t,n)}}function ao(t,s){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var l=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?l=i=g:i=i.next=g,n=n.next}while(n!==null);i===null?l=i=s:i=i.next=s}else l=i=s;n={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function su(t,s,n,a){var l=t.updateQueue;Fs=!1;var i=l.firstBaseUpdate,g=l.lastBaseUpdate,M=l.shared.pending;if(M!==null){l.shared.pending=null;var Q=M,se=Q.next;Q.next=null,g===null?i=se:g.next=se,g=Q;var Ce=t.alternate;Ce!==null&&(Ce=Ce.updateQueue,M=Ce.lastBaseUpdate,M!==g&&(M===null?Ce.firstBaseUpdate=se:M.next=se,Ce.lastBaseUpdate=Q))}if(i!==null){var me=l.baseState;g=0,Ce=se=Q=null,M=i;do{var ce=M.lane,De=M.eventTime;if((a&ce)===ce){Ce!==null&&(Ce=Ce.next={eventTime:De,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ke=t,_e=M;switch(ce=s,De=n,_e.tag){case 1:if(ke=_e.payload,typeof ke=="function"){me=ke.call(De,me,ce);break e}me=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=_e.payload,ce=typeof ke=="function"?ke.call(De,me,ce):ke,ce==null)break e;me=D({},me,ce);break e;case 2:Fs=!0}}M.callback!==null&&M.lane!==0&&(t.flags|=64,ce=l.effects,ce===null?l.effects=[M]:ce.push(M))}else De={eventTime:De,lane:ce,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Ce===null?(se=Ce=De,Q=me):Ce=Ce.next=De,g|=ce;if(M=M.next,M===null){if(M=l.shared.pending,M===null)break;ce=M,M=ce.next,ce.next=null,l.lastBaseUpdate=ce,l.shared.pending=null}}while(!0);if(Ce===null&&(Q=me),l.baseState=Q,l.firstBaseUpdate=se,l.lastBaseUpdate=Ce,s=l.shared.interleaved,s!==null){l=s;do g|=l.lane,l=l.next;while(l!==s)}else i===null&&(l.shared.lanes=0);Xs|=g,t.lanes=g,t.memoizedState=me}}function lo(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],l=a.callback;if(l!==null){if(a.callback=null,a=n,typeof l!="function")throw Error(c(191,l));l.call(a)}}}var an={},ns=_s(an),ln=_s(an),on=_s(an);function qs(t){if(t===an)throw Error(c(174));return t}function Ta(t,s){switch(Ge(on,s),Ge(ln,t),Ge(ns,an),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ke(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ke(s,t)}Je(ns),Ge(ns,s)}function Dr(){Je(ns),Je(ln),Je(on)}function io(t){qs(on.current);var s=qs(ns.current),n=Ke(s,t.type);s!==n&&(Ge(ln,t),Ge(ns,n))}function Ia(t){ln.current===t&&(Je(ns),Je(ln))}var et=_s(0);function ru(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pa=[];function La(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var nu=$.ReactCurrentDispatcher,Ma=$.ReactCurrentBatchConfig,Js=0,tt=null,lt=null,ct=null,uu=!1,cn=!1,dn=0,k0=0;function yt(){throw Error(c(321))}function Ra(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Vt(t[n],s[n]))return!1;return!0}function Oa(t,s,n,a,l,i){if(Js=i,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,nu.current=t===null||t.memoizedState===null?F0:T0,t=n(a,l),cn){i=0;do{if(cn=!1,dn=0,25<=i)throw Error(c(301));i+=1,ct=lt=null,s.updateQueue=null,nu.current=I0,t=n(a,l)}while(cn)}if(nu.current=iu,s=lt!==null&&lt.next!==null,Js=0,ct=lt=tt=null,uu=!1,s)throw Error(c(300));return t}function $a(){var t=dn!==0;return dn=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?tt.memoizedState=ct=t:ct=ct.next=t,ct}function zt(){if(lt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var s=ct===null?tt.memoizedState:ct.next;if(s!==null)ct=s,lt=t;else{if(t===null)throw Error(c(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?tt.memoizedState=ct=t:ct=ct.next=t}return ct}function Cn(t,s){return typeof s=="function"?s(t):s}function za(t){var s=zt(),n=s.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=t;var a=lt,l=a.baseQueue,i=n.pending;if(i!==null){if(l!==null){var g=l.next;l.next=i.next,i.next=g}a.baseQueue=l=i,n.pending=null}if(l!==null){i=l.next,a=a.baseState;var M=g=null,Q=null,se=i;do{var Ce=se.lane;if((Js&Ce)===Ce)Q!==null&&(Q=Q.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),a=se.hasEagerState?se.eagerState:t(a,se.action);else{var me={lane:Ce,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};Q===null?(M=Q=me,g=a):Q=Q.next=me,tt.lanes|=Ce,Xs|=Ce}se=se.next}while(se!==null&&se!==i);Q===null?g=a:Q.next=M,Vt(a,s.memoizedState)||(_t=!0),s.memoizedState=a,s.baseState=g,s.baseQueue=Q,n.lastRenderedState=a}if(t=n.interleaved,t!==null){l=t;do i=l.lane,tt.lanes|=i,Xs|=i,l=l.next;while(l!==t)}else l===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function Ua(t){var s=zt(),n=s.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=t;var a=n.dispatch,l=n.pending,i=s.memoizedState;if(l!==null){n.pending=null;var g=l=l.next;do i=t(i,g.action),g=g.next;while(g!==l);Vt(i,s.memoizedState)||(_t=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),n.lastRenderedState=i}return[i,a]}function oo(){}function co(t,s){var n=tt,a=zt(),l=s(),i=!Vt(a.memoizedState,l);if(i&&(a.memoizedState=l,_t=!0),a=a.queue,Ha(xo.bind(null,n,a,t),[t]),a.getSnapshot!==s||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,mn(9,mo.bind(null,n,a,l,s),void 0,null),dt===null)throw Error(c(349));(Js&30)!==0||Co(n,s,l)}return l}function Co(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function mo(t,s,n,a){s.value=n,s.getSnapshot=a,go(s)&&ho(t)}function xo(t,s,n){return n(function(){go(s)&&ho(t)})}function go(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Vt(t,n)}catch{return!0}}function ho(t){var s=hs(t,1);s!==null&&Xt(s,t,1,-1)}function po(t){var s=us();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:t},s.queue=t,t=t.dispatch=E0.bind(null,tt,t),[s.memoizedState,t]}function mn(t,s,n,a){return t={tag:t,create:s,destroy:n,deps:a,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,s.lastEffect=t)),t}function fo(){return zt().memoizedState}function au(t,s,n,a){var l=us();tt.flags|=t,l.memoizedState=mn(1|s,n,void 0,a===void 0?null:a)}function lu(t,s,n,a){var l=zt();a=a===void 0?null:a;var i=void 0;if(lt!==null){var g=lt.memoizedState;if(i=g.destroy,a!==null&&Ra(a,g.deps)){l.memoizedState=mn(s,n,i,a);return}}tt.flags|=t,l.memoizedState=mn(1|s,n,i,a)}function yo(t,s){return au(8390656,8,t,s)}function Ha(t,s){return lu(2048,8,t,s)}function bo(t,s){return lu(4,2,t,s)}function vo(t,s){return lu(4,4,t,s)}function jo(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Bo(t,s,n){return n=n!=null?n.concat([t]):null,lu(4,4,jo.bind(null,s,t),n)}function Ya(){}function No(t,s){var n=zt();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&Ra(s,a[1])?a[0]:(n.memoizedState=[t,s],t)}function Do(t,s){var n=zt();s=s===void 0?null:s;var a=n.memoizedState;return a!==null&&s!==null&&Ra(s,a[1])?a[0]:(t=t(),n.memoizedState=[t,s],t)}function Ao(t,s,n){return(Js&21)===0?(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n):(Vt(n,s)||(n=ti(),tt.lanes|=n,Xs|=n,t.baseState=!0),s)}function _0(t,s){var n=We;We=n!==0&&4>n?n:4,t(!0);var a=Ma.transition;Ma.transition={};try{t(!1),s()}finally{We=n,Ma.transition=a}}function wo(){return zt().memoizedState}function S0(t,s,n){var a=Ms(t);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},ko(t))_o(s,n);else if(n=no(t,s,n,a),n!==null){var l=Bt();Xt(n,t,a,l),So(n,s,a)}}function E0(t,s,n){var a=Ms(t),l={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(ko(t))_o(s,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var g=s.lastRenderedState,M=i(g,n);if(l.hasEagerState=!0,l.eagerState=M,Vt(M,g)){var Q=s.interleaved;Q===null?(l.next=l,Ea(s)):(l.next=Q.next,Q.next=l),s.interleaved=l;return}}catch{}finally{}n=no(t,s,l,a),n!==null&&(l=Bt(),Xt(n,t,a,l),So(n,s,a))}}function ko(t){var s=t.alternate;return t===tt||s!==null&&s===tt}function _o(t,s){cn=uu=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function So(t,s,n){if((n&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,n|=a,s.lanes=n,Ku(t,n)}}var iu={readContext:$t,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},F0={readContext:$t,useCallback:function(t,s){return us().memoizedState=[t,s===void 0?null:s],t},useContext:$t,useEffect:yo,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,au(4194308,4,jo.bind(null,s,t),n)},useLayoutEffect:function(t,s){return au(4194308,4,t,s)},useInsertionEffect:function(t,s){return au(4,2,t,s)},useMemo:function(t,s){var n=us();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var a=us();return s=n!==void 0?n(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=S0.bind(null,tt,t),[a.memoizedState,t]},useRef:function(t){var s=us();return t={current:t},s.memoizedState=t},useState:po,useDebugValue:Ya,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=po(!1),s=t[0];return t=_0.bind(null,t[1]),us().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var a=tt,l=us();if(Ze){if(n===void 0)throw Error(c(407));n=n()}else{if(n=s(),dt===null)throw Error(c(349));(Js&30)!==0||Co(a,s,n)}l.memoizedState=n;var i={value:n,getSnapshot:s};return l.queue=i,yo(xo.bind(null,a,i,t),[t]),a.flags|=2048,mn(9,mo.bind(null,a,i,n,s),void 0,null),n},useId:function(){var t=us(),s=dt.identifierPrefix;if(Ze){var n=gs,a=xs;n=(a&~(1<<32-Kt(a)-1)).toString(32)+n,s=":"+s+"R"+n,n=dn++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=k0++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},T0={readContext:$t,useCallback:No,useContext:$t,useEffect:Ha,useImperativeHandle:Bo,useInsertionEffect:bo,useLayoutEffect:vo,useMemo:Do,useReducer:za,useRef:fo,useState:function(){return za(Cn)},useDebugValue:Ya,useDeferredValue:function(t){var s=zt();return Ao(s,lt.memoizedState,t)},useTransition:function(){var t=za(Cn)[0],s=zt().memoizedState;return[t,s]},useMutableSource:oo,useSyncExternalStore:co,useId:wo,unstable_isNewReconciler:!1},I0={readContext:$t,useCallback:No,useContext:$t,useEffect:Ha,useImperativeHandle:Bo,useInsertionEffect:bo,useLayoutEffect:vo,useMemo:Do,useReducer:Ua,useRef:fo,useState:function(){return Ua(Cn)},useDebugValue:Ya,useDeferredValue:function(t){var s=zt();return lt===null?s.memoizedState=t:Ao(s,lt.memoizedState,t)},useTransition:function(){var t=Ua(Cn)[0],s=zt().memoizedState;return[t,s]},useMutableSource:oo,useSyncExternalStore:co,useId:wo,unstable_isNewReconciler:!1};function Gt(t,s){if(t&&t.defaultProps){s=D({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function Qa(t,s,n,a){s=t.memoizedState,n=n(a,s),n=n==null?s:D({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var a=Bt(),l=Ms(t),i=ps(a,l);i.payload=s,n!=null&&(i.callback=n),s=Ts(t,i,l),s!==null&&(Xt(s,t,l,a),tu(s,t,l))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var a=Bt(),l=Ms(t),i=ps(a,l);i.tag=1,i.payload=s,n!=null&&(i.callback=n),s=Ts(t,i,l),s!==null&&(Xt(s,t,l,a),tu(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=Bt(),a=Ms(t),l=ps(n,a);l.tag=2,s!=null&&(l.callback=s),s=Ts(t,l,a),s!==null&&(Xt(s,t,a,n),tu(s,t,a))}};function Eo(t,s,n,a,l,i,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,g):s.prototype&&s.prototype.isPureReactComponent?!Xr(n,a)||!Xr(l,i):!0}function Fo(t,s,n){var a=!1,l=Ss,i=s.contextType;return typeof i=="object"&&i!==null?i=$t(i):(l=kt(s)?Ks:ft.current,a=s.contextTypes,i=(a=a!=null)?fr(t,l):Ss),s=new s(n,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ou,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=i),s}function To(t,s,n,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,a),s.state!==t&&ou.enqueueReplaceState(s,s.state,null)}function Ka(t,s,n,a){var l=t.stateNode;l.props=n,l.state=t.memoizedState,l.refs={},Fa(t);var i=s.contextType;typeof i=="object"&&i!==null?l.context=$t(i):(i=kt(s)?Ks:ft.current,l.context=fr(t,i)),l.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Qa(t,s,i,n),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&ou.enqueueReplaceState(l,l.state,null),su(t,n,l,a),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Ar(t,s){try{var n="",a=s;do n+=Be(a),a=a.return;while(a);var l=n}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:l,digest:null}}function Va(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function Wa(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var P0=typeof WeakMap=="function"?WeakMap:Map;function Io(t,s,n){n=ps(-1,n),n.tag=3,n.payload={element:null};var a=s.value;return n.callback=function(){hu||(hu=!0,ol=a),Wa(t,s)},n}function Po(t,s,n){n=ps(-1,n),n.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var l=s.value;n.payload=function(){return a(l)},n.callback=function(){Wa(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wa(t,s),typeof a!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var g=s.stack;this.componentDidCatch(s.value,{componentStack:g!==null?g:""})}),n}function Lo(t,s,n){var a=t.pingCache;if(a===null){a=t.pingCache=new P0;var l=new Set;a.set(s,l)}else l=a.get(s),l===void 0&&(l=new Set,a.set(s,l));l.has(n)||(l.add(n),t=G0.bind(null,t,s,n),s.then(t,t))}function Mo(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ro(t,s,n,a,l){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=ps(-1,1),s.tag=2,Ts(n,s,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=l,t)}var L0=$.ReactCurrentOwner,_t=!1;function jt(t,s,n,a){s.child=t===null?ro(s,null,n,a):jr(s,t.child,n,a)}function Oo(t,s,n,a,l){n=n.render;var i=s.ref;return Nr(s,l),a=Oa(t,s,n,a,i,l),n=$a(),t!==null&&!_t?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,fs(t,s,l)):(Ze&&n&&ja(s),s.flags|=1,jt(t,s,a,l),s.child)}function $o(t,s,n,a,l){if(t===null){var i=n.type;return typeof i=="function"&&!hl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=i,zo(t,s,i,a,l)):(t=ju(n.type,null,a,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,(t.lanes&l)===0){var g=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xr,n(g,a)&&t.ref===s.ref)return fs(t,s,l)}return s.flags|=1,t=Os(i,a),t.ref=s.ref,t.return=s,s.child=t}function zo(t,s,n,a,l){if(t!==null){var i=t.memoizedProps;if(Xr(i,a)&&t.ref===s.ref)if(_t=!1,s.pendingProps=a=i,(t.lanes&l)!==0)(t.flags&131072)!==0&&(_t=!0);else return s.lanes=t.lanes,fs(t,s,l)}return Ga(t,s,n,a,l)}function Uo(t,s,n){var a=s.pendingProps,l=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(kr,Lt),Lt|=n;else{if((n&1073741824)===0)return t=i!==null?i.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ge(kr,Lt),Lt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:n,Ge(kr,Lt),Lt|=a}else i!==null?(a=i.baseLanes|n,s.memoizedState=null):a=n,Ge(kr,Lt),Lt|=a;return jt(t,s,l,n),s.child}function Ho(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function Ga(t,s,n,a,l){var i=kt(n)?Ks:ft.current;return i=fr(s,i),Nr(s,l),n=Oa(t,s,n,a,i,l),a=$a(),t!==null&&!_t?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,fs(t,s,l)):(Ze&&a&&ja(s),s.flags|=1,jt(t,s,n,l),s.child)}function Yo(t,s,n,a,l){if(kt(n)){var i=!0;Vn(s)}else i=!1;if(Nr(s,l),s.stateNode===null)du(t,s),Fo(s,n,a),Ka(s,n,a,l),a=!0;else if(t===null){var g=s.stateNode,M=s.memoizedProps;g.props=M;var Q=g.context,se=n.contextType;typeof se=="object"&&se!==null?se=$t(se):(se=kt(n)?Ks:ft.current,se=fr(s,se));var Ce=n.getDerivedStateFromProps,me=typeof Ce=="function"||typeof g.getSnapshotBeforeUpdate=="function";me||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M!==a||Q!==se)&&To(s,g,a,se),Fs=!1;var ce=s.memoizedState;g.state=ce,su(s,a,g,l),Q=s.memoizedState,M!==a||ce!==Q||wt.current||Fs?(typeof Ce=="function"&&(Qa(s,n,Ce,a),Q=s.memoizedState),(M=Fs||Eo(s,n,M,a,ce,Q,se))?(me||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=Q),g.props=a,g.state=Q,g.context=se,a=M):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{g=s.stateNode,uo(t,s),M=s.memoizedProps,se=s.type===s.elementType?M:Gt(s.type,M),g.props=se,me=s.pendingProps,ce=g.context,Q=n.contextType,typeof Q=="object"&&Q!==null?Q=$t(Q):(Q=kt(n)?Ks:ft.current,Q=fr(s,Q));var De=n.getDerivedStateFromProps;(Ce=typeof De=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M!==me||ce!==Q)&&To(s,g,a,Q),Fs=!1,ce=s.memoizedState,g.state=ce,su(s,a,g,l);var ke=s.memoizedState;M!==me||ce!==ke||wt.current||Fs?(typeof De=="function"&&(Qa(s,n,De,a),ke=s.memoizedState),(se=Fs||Eo(s,n,se,a,ce,ke,Q)||!1)?(Ce||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ke,Q),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ke,Q)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||M===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=ke),g.props=a,g.state=ke,g.context=Q,a=se):(typeof g.componentDidUpdate!="function"||M===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),a=!1)}return qa(t,s,n,a,i,l)}function qa(t,s,n,a,l,i){Ho(t,s);var g=(s.flags&128)!==0;if(!a&&!g)return l&&Wi(s,n,!1),fs(t,s,i);a=s.stateNode,L0.current=s;var M=g&&typeof n.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&g?(s.child=jr(s,t.child,null,i),s.child=jr(s,null,M,i)):jt(t,s,M,i),s.memoizedState=a.state,l&&Wi(s,n,!0),s.child}function Qo(t){var s=t.stateNode;s.pendingContext?Ki(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Ki(t,s.context,!1),Ta(t,s.containerInfo)}function Ko(t,s,n,a,l){return vr(),Aa(l),s.flags|=256,jt(t,s,n,a),s.child}var Ja={dehydrated:null,treeContext:null,retryLane:0};function Xa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vo(t,s,n){var a=s.pendingProps,l=et.current,i=!1,g=(s.flags&128)!==0,M;if((M=g)||(M=t!==null&&t.memoizedState===null?!1:(l&2)!==0),M?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Ge(et,l&1),t===null)return Da(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(g=a.children,t=a.fallback,i?(a=s.mode,i=s.child,g={mode:"hidden",children:g},(a&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=g):i=Bu(g,a,0,null),t=sr(t,a,n,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Xa(n),s.memoizedState=Ja,t):Za(s,g));if(l=t.memoizedState,l!==null&&(M=l.dehydrated,M!==null))return M0(t,s,g,a,M,l,n);if(i){i=a.fallback,g=s.mode,l=t.child,M=l.sibling;var Q={mode:"hidden",children:a.children};return(g&1)===0&&s.child!==l?(a=s.child,a.childLanes=0,a.pendingProps=Q,s.deletions=null):(a=Os(l,Q),a.subtreeFlags=l.subtreeFlags&14680064),M!==null?i=Os(M,i):(i=sr(i,g,n,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,g=t.child.memoizedState,g=g===null?Xa(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},i.memoizedState=g,i.childLanes=t.childLanes&~n,s.memoizedState=Ja,a}return i=t.child,t=i.sibling,a=Os(i,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=n),a.return=s,a.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=a,s.memoizedState=null,a}function Za(t,s){return s=Bu({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function cu(t,s,n,a){return a!==null&&Aa(a),jr(s,t.child,null,n),t=Za(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function M0(t,s,n,a,l,i,g){if(n)return s.flags&256?(s.flags&=-257,a=Va(Error(c(422))),cu(t,s,g,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,l=s.mode,a=Bu({mode:"visible",children:a.children},l,0,null),i=sr(i,l,g,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,(s.mode&1)!==0&&jr(s,t.child,null,g),s.child.memoizedState=Xa(g),s.memoizedState=Ja,i);if((s.mode&1)===0)return cu(t,s,g,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var M=a.dgst;return a=M,i=Error(c(419)),a=Va(i,a,void 0),cu(t,s,g,a)}if(M=(g&t.childLanes)!==0,_t||M){if(a=dt,a!==null){switch(g&-g){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(a.suspendedLanes|g))!==0?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,hs(t,l),Xt(a,t,l,-1))}return gl(),a=Va(Error(c(421))),cu(t,s,g,a)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=q0.bind(null,t),l._reactRetry=s,null):(t=i.treeContext,Pt=ks(l.nextSibling),It=s,Ze=!0,Wt=null,t!==null&&(Rt[Ot++]=xs,Rt[Ot++]=gs,Rt[Ot++]=Vs,xs=t.id,gs=t.overflow,Vs=s),s=Za(s,a.children),s.flags|=4096,s)}function Wo(t,s,n){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),Sa(t.return,s,n)}function el(t,s,n,a,l){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:l}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=n,i.tailMode=l)}function Go(t,s,n){var a=s.pendingProps,l=a.revealOrder,i=a.tail;if(jt(t,s,a.children,n),a=et.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wo(t,n,s);else if(t.tag===19)Wo(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ge(et,a),(s.mode&1)===0)s.memoizedState=null;else switch(l){case"forwards":for(n=s.child,l=null;n!==null;)t=n.alternate,t!==null&&ru(t)===null&&(l=n),n=n.sibling;n=l,n===null?(l=s.child,s.child=null):(l=n.sibling,n.sibling=null),el(s,!1,l,n,i);break;case"backwards":for(n=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&ru(t)===null){s.child=l;break}t=l.sibling,l.sibling=n,n=l,l=t}el(s,!0,n,null,i);break;case"together":el(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function du(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function fs(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),Xs|=s.lanes,(n&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(c(153));if(s.child!==null){for(t=s.child,n=Os(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=Os(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function R0(t,s,n){switch(s.tag){case 3:Qo(s),vr();break;case 5:io(s);break;case 1:kt(s.type)&&Vn(s);break;case 4:Ta(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,l=s.memoizedProps.value;Ge(Zn,a._currentValue),a._currentValue=l;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Ge(et,et.current&1),s.flags|=128,null):(n&s.child.childLanes)!==0?Vo(t,s,n):(Ge(et,et.current&1),t=fs(t,s,n),t!==null?t.sibling:null);Ge(et,et.current&1);break;case 19:if(a=(n&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Go(t,s,n);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ge(et,et.current),a)break;return null;case 22:case 23:return s.lanes=0,Uo(t,s,n)}return fs(t,s,n)}var qo,tl,Jo,Xo;qo=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},tl=function(){},Jo=function(t,s,n,a){var l=t.memoizedProps;if(l!==a){t=s.stateNode,qs(ns.current);var i=null;switch(n){case"input":l=fe(t,l),a=fe(t,a),i=[];break;case"select":l=D({},l,{value:void 0}),a=D({},a,{value:void 0}),i=[];break;case"textarea":l=ye(t,l),a=ye(t,a),i=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Yn)}nr(n,a);var g;n=null;for(se in l)if(!a.hasOwnProperty(se)&&l.hasOwnProperty(se)&&l[se]!=null)if(se==="style"){var M=l[se];for(g in M)M.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(h.hasOwnProperty(se)?i||(i=[]):(i=i||[]).push(se,null));for(se in a){var Q=a[se];if(M=l!=null?l[se]:void 0,a.hasOwnProperty(se)&&Q!==M&&(Q!=null||M!=null))if(se==="style")if(M){for(g in M)!M.hasOwnProperty(g)||Q&&Q.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in Q)Q.hasOwnProperty(g)&&M[g]!==Q[g]&&(n||(n={}),n[g]=Q[g])}else n||(i||(i=[]),i.push(se,n)),n=Q;else se==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,M=M?M.__html:void 0,Q!=null&&M!==Q&&(i=i||[]).push(se,Q)):se==="children"?typeof Q!="string"&&typeof Q!="number"||(i=i||[]).push(se,""+Q):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(h.hasOwnProperty(se)?(Q!=null&&se==="onScroll"&&qe("scroll",t),i||M===Q||(i=[])):(i=i||[]).push(se,Q))}n&&(i=i||[]).push("style",n);var se=i;(s.updateQueue=se)&&(s.flags|=4)}},Xo=function(t,s,n,a){n!==a&&(s.flags|=4)};function xn(t,s){if(!Ze)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function bt(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(s)for(var l=t.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=a,t.childLanes=n,s}function O0(t,s,n){var a=s.pendingProps;switch(Ba(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(s),null;case 1:return kt(s.type)&&Kn(),bt(s),null;case 3:return a=s.stateNode,Dr(),Je(wt),Je(ft),La(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Jn(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wt!==null&&(Cl(Wt),Wt=null))),tl(t,s),bt(s),null;case 5:Ia(s);var l=qs(on.current);if(n=s.type,t!==null&&s.stateNode!=null)Jo(t,s,n,a,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(c(166));return bt(s),null}if(t=qs(ns.current),Jn(s)){a=s.stateNode,n=s.type;var i=s.memoizedProps;switch(a[rs]=s,a[rn]=i,t=(s.mode&1)!==0,n){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(l=0;l<en.length;l++)qe(en[l],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":$e(a,i),qe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},qe("invalid",a);break;case"textarea":je(a,i),qe("invalid",a)}nr(n,i),l=null;for(var g in i)if(i.hasOwnProperty(g)){var M=i[g];g==="children"?typeof M=="string"?a.textContent!==M&&(i.suppressHydrationWarning!==!0&&Hn(a.textContent,M,t),l=["children",M]):typeof M=="number"&&a.textContent!==""+M&&(i.suppressHydrationWarning!==!0&&Hn(a.textContent,M,t),l=["children",""+M]):h.hasOwnProperty(g)&&M!=null&&g==="onScroll"&&qe("scroll",a)}switch(n){case"input":ve(a),z(a,i,!0);break;case"textarea":ve(a),Ne(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Yn)}a=l,s.updateQueue=a,a!==null&&(s.flags|=4)}else{g=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Se(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=g.createElement(n,{is:a.is}):(t=g.createElement(n),n==="select"&&(g=t,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):t=g.createElementNS(t,n),t[rs]=s,t[rn]=a,qo(t,s,!1,!1),s.stateNode=t;e:{switch(g=ur(n,a),n){case"dialog":qe("cancel",t),qe("close",t),l=a;break;case"iframe":case"object":case"embed":qe("load",t),l=a;break;case"video":case"audio":for(l=0;l<en.length;l++)qe(en[l],t);l=a;break;case"source":qe("error",t),l=a;break;case"img":case"image":case"link":qe("error",t),qe("load",t),l=a;break;case"details":qe("toggle",t),l=a;break;case"input":$e(t,a),l=fe(t,a),qe("invalid",t);break;case"option":l=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},l=D({},a,{value:void 0}),qe("invalid",t);break;case"textarea":je(t,a),l=ye(t,a),qe("invalid",t);break;default:l=a}nr(n,l),M=l;for(i in M)if(M.hasOwnProperty(i)){var Q=M[i];i==="style"?Lr(t,Q):i==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&st(t,Q)):i==="children"?typeof Q=="string"?(n!=="textarea"||Q!=="")&&At(t,Q):typeof Q=="number"&&At(t,""+Q):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(h.hasOwnProperty(i)?Q!=null&&i==="onScroll"&&qe("scroll",t):Q!=null&&T(t,i,Q,g))}switch(n){case"input":ve(t),z(t,a,!1);break;case"textarea":ve(t),Ne(t);break;case"option":a.value!=null&&t.setAttribute("value",""+te(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Fe(t,!!a.multiple,i,!1):a.defaultValue!=null&&Fe(t,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Yn)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bt(s),null;case 6:if(t&&s.stateNode!=null)Xo(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(c(166));if(n=qs(on.current),qs(ns.current),Jn(s)){if(a=s.stateNode,n=s.memoizedProps,a[rs]=s,(i=a.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:Hn(a.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hn(a.nodeValue,n,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[rs]=s,s.stateNode=a}return bt(s),null;case 13:if(Je(et),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Pt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)eo(),vr(),s.flags|=98560,i=!1;else if(i=Jn(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(c(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));i[rs]=s}else vr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;bt(s),i=!1}else Wt!==null&&(Cl(Wt),Wt=null),i=!0;if(!i)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=n,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(et.current&1)!==0?it===0&&(it=3):gl())),s.updateQueue!==null&&(s.flags|=4),bt(s),null);case 4:return Dr(),tl(t,s),t===null&&tn(s.stateNode.containerInfo),bt(s),null;case 10:return _a(s.type._context),bt(s),null;case 17:return kt(s.type)&&Kn(),bt(s),null;case 19:if(Je(et),i=s.memoizedState,i===null)return bt(s),null;if(a=(s.flags&128)!==0,g=i.rendering,g===null)if(a)xn(i,!1);else{if(it!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=ru(t),g!==null){for(s.flags|=128,xn(i,!1),a=g.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=n,n=s.child;n!==null;)i=n,t=a,i.flags&=14680066,g=i.alternate,g===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=g.childLanes,i.lanes=g.lanes,i.child=g.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=g.memoizedProps,i.memoizedState=g.memoizedState,i.updateQueue=g.updateQueue,i.type=g.type,t=g.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(et,et.current&1|2),s.child}t=t.sibling}i.tail!==null&&nt()>_r&&(s.flags|=128,a=!0,xn(i,!1),s.lanes=4194304)}else{if(!a)if(t=ru(g),t!==null){if(s.flags|=128,a=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),xn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!g.alternate&&!Ze)return bt(s),null}else 2*nt()-i.renderingStartTime>_r&&n!==1073741824&&(s.flags|=128,a=!0,xn(i,!1),s.lanes=4194304);i.isBackwards?(g.sibling=s.child,s.child=g):(n=i.last,n!==null?n.sibling=g:s.child=g,i.last=g)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=nt(),s.sibling=null,n=et.current,Ge(et,a?n&1|2:n&1),s):(bt(s),null);case 22:case 23:return xl(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(Lt&1073741824)!==0&&(bt(s),s.subtreeFlags&6&&(s.flags|=8192)):bt(s),null;case 24:return null;case 25:return null}throw Error(c(156,s.tag))}function $0(t,s){switch(Ba(s),s.tag){case 1:return kt(s.type)&&Kn(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Dr(),Je(wt),Je(ft),La(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Ia(s),null;case 13:if(Je(et),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(c(340));vr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Je(et),null;case 4:return Dr(),null;case 10:return _a(s.type._context),null;case 22:case 23:return xl(),null;case 24:return null;default:return null}}var Cu=!1,vt=!1,z0=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function wr(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){rt(t,s,a)}else n.current=null}function sl(t,s,n){try{n()}catch(a){rt(t,s,a)}}var Zo=!1;function U0(t,s){if(xa=Fn,t=Si(),aa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var l=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var g=0,M=-1,Q=-1,se=0,Ce=0,me=t,ce=null;t:for(;;){for(var De;me!==n||l!==0&&me.nodeType!==3||(M=g+l),me!==i||a!==0&&me.nodeType!==3||(Q=g+a),me.nodeType===3&&(g+=me.nodeValue.length),(De=me.firstChild)!==null;)ce=me,me=De;for(;;){if(me===t)break t;if(ce===n&&++se===l&&(M=g),ce===i&&++Ce===a&&(Q=g),(De=me.nextSibling)!==null)break;me=ce,ce=me.parentNode}me=De}n=M===-1||Q===-1?null:{start:M,end:Q}}else n=null}n=n||{start:0,end:0}}else n=null;for(ga={focusedElem:t,selectionRange:n},Fn=!1,Ae=s;Ae!==null;)if(s=Ae,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ae=t;else for(;Ae!==null;){s=Ae;try{var ke=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var _e=ke.memoizedProps,ut=ke.memoizedState,X=s.stateNode,V=X.getSnapshotBeforeUpdate(s.elementType===s.type?_e:Gt(s.type,_e),ut);X.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var Z=s.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(pe){rt(s,s.return,pe)}if(t=s.sibling,t!==null){t.return=s.return,Ae=t;break}Ae=s.return}return ke=Zo,Zo=!1,ke}function gn(t,s,n){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&t)===t){var i=l.destroy;l.destroy=void 0,i!==void 0&&sl(s,n,i)}l=l.next}while(l!==a)}}function mu(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var a=n.create;n.destroy=a()}n=n.next}while(n!==s)}}function rl(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function ec(t){var s=t.alternate;s!==null&&(t.alternate=null,ec(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[rs],delete s[rn],delete s[ya],delete s[N0],delete s[D0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tc(t){return t.tag===5||t.tag===3||t.tag===4}function sc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nl(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Yn));else if(a!==4&&(t=t.child,t!==null))for(nl(t,s,n),t=t.sibling;t!==null;)nl(t,s,n),t=t.sibling}function ul(t,s,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(ul(t,s,n),t=t.sibling;t!==null;)ul(t,s,n),t=t.sibling}var xt=null,qt=!1;function Is(t,s,n){for(n=n.child;n!==null;)rc(t,s,n),n=n.sibling}function rc(t,s,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(An,n)}catch{}switch(n.tag){case 5:vt||wr(n,s);case 6:var a=xt,l=qt;xt=null,Is(t,s,n),xt=a,qt=l,xt!==null&&(qt?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(qt?(t=xt,n=n.stateNode,t.nodeType===8?fa(t.parentNode,n):t.nodeType===1&&fa(t,n),Kr(t)):fa(xt,n.stateNode));break;case 4:a=xt,l=qt,xt=n.stateNode.containerInfo,qt=!0,Is(t,s,n),xt=a,qt=l;break;case 0:case 11:case 14:case 15:if(!vt&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var i=l,g=i.destroy;i=i.tag,g!==void 0&&((i&2)!==0||(i&4)!==0)&&sl(n,s,g),l=l.next}while(l!==a)}Is(t,s,n);break;case 1:if(!vt&&(wr(n,s),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(M){rt(n,s,M)}Is(t,s,n);break;case 21:Is(t,s,n);break;case 22:n.mode&1?(vt=(a=vt)||n.memoizedState!==null,Is(t,s,n),vt=a):Is(t,s,n);break;default:Is(t,s,n)}}function nc(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new z0),s.forEach(function(a){var l=J0.bind(null,t,a);n.has(a)||(n.add(a),a.then(l,l))})}}function Jt(t,s){var n=s.deletions;if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];try{var i=t,g=s,M=g;e:for(;M!==null;){switch(M.tag){case 5:xt=M.stateNode,qt=!1;break e;case 3:xt=M.stateNode.containerInfo,qt=!0;break e;case 4:xt=M.stateNode.containerInfo,qt=!0;break e}M=M.return}if(xt===null)throw Error(c(160));rc(i,g,l),xt=null,qt=!1;var Q=l.alternate;Q!==null&&(Q.return=null),l.return=null}catch(se){rt(l,s,se)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)uc(s,t),s=s.sibling}function uc(t,s){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(s,t),as(t),a&4){try{gn(3,t,t.return),mu(3,t)}catch(_e){rt(t,t.return,_e)}try{gn(5,t,t.return)}catch(_e){rt(t,t.return,_e)}}break;case 1:Jt(s,t),as(t),a&512&&n!==null&&wr(n,n.return);break;case 5:if(Jt(s,t),as(t),a&512&&n!==null&&wr(n,n.return),t.flags&32){var l=t.stateNode;try{At(l,"")}catch(_e){rt(t,t.return,_e)}}if(a&4&&(l=t.stateNode,l!=null)){var i=t.memoizedProps,g=n!==null?n.memoizedProps:i,M=t.type,Q=t.updateQueue;if(t.updateQueue=null,Q!==null)try{M==="input"&&i.type==="radio"&&i.name!=null&&re(l,i),ur(M,g);var se=ur(M,i);for(g=0;g<Q.length;g+=2){var Ce=Q[g],me=Q[g+1];Ce==="style"?Lr(l,me):Ce==="dangerouslySetInnerHTML"?st(l,me):Ce==="children"?At(l,me):T(l,Ce,me,se)}switch(M){case"input":Te(l,i);break;case"textarea":ie(l,i);break;case"select":var ce=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var De=i.value;De!=null?Fe(l,!!i.multiple,De,!1):ce!==!!i.multiple&&(i.defaultValue!=null?Fe(l,!!i.multiple,i.defaultValue,!0):Fe(l,!!i.multiple,i.multiple?[]:"",!1))}l[rn]=i}catch(_e){rt(t,t.return,_e)}}break;case 6:if(Jt(s,t),as(t),a&4){if(t.stateNode===null)throw Error(c(162));l=t.stateNode,i=t.memoizedProps;try{l.nodeValue=i}catch(_e){rt(t,t.return,_e)}}break;case 3:if(Jt(s,t),as(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Kr(s.containerInfo)}catch(_e){rt(t,t.return,_e)}break;case 4:Jt(s,t),as(t);break;case 13:Jt(s,t),as(t),l=t.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(il=nt())),a&4&&nc(t);break;case 22:if(Ce=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(se=vt)||Ce,Jt(s,t),vt=se):Jt(s,t),as(t),a&8192){if(se=t.memoizedState!==null,(t.stateNode.isHidden=se)&&!Ce&&(t.mode&1)!==0)for(Ae=t,Ce=t.child;Ce!==null;){for(me=Ae=Ce;Ae!==null;){switch(ce=Ae,De=ce.child,ce.tag){case 0:case 11:case 14:case 15:gn(4,ce,ce.return);break;case 1:wr(ce,ce.return);var ke=ce.stateNode;if(typeof ke.componentWillUnmount=="function"){a=ce,n=ce.return;try{s=a,ke.props=s.memoizedProps,ke.state=s.memoizedState,ke.componentWillUnmount()}catch(_e){rt(a,n,_e)}}break;case 5:wr(ce,ce.return);break;case 22:if(ce.memoizedState!==null){ic(me);continue}}De!==null?(De.return=ce,Ae=De):ic(me)}Ce=Ce.sibling}e:for(Ce=null,me=t;;){if(me.tag===5){if(Ce===null){Ce=me;try{l=me.stateNode,se?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(M=me.stateNode,Q=me.memoizedProps.style,g=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,M.style.display=ts("display",g))}catch(_e){rt(t,t.return,_e)}}}else if(me.tag===6){if(Ce===null)try{me.stateNode.nodeValue=se?"":me.memoizedProps}catch(_e){rt(t,t.return,_e)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===t)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===t)break e;for(;me.sibling===null;){if(me.return===null||me.return===t)break e;Ce===me&&(Ce=null),me=me.return}Ce===me&&(Ce=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Jt(s,t),as(t),a&4&&nc(t);break;case 21:break;default:Jt(s,t),as(t)}}function as(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(tc(n)){var a=n;break e}n=n.return}throw Error(c(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(At(l,""),a.flags&=-33);var i=sc(t);ul(t,i,l);break;case 3:case 4:var g=a.stateNode.containerInfo,M=sc(t);nl(t,M,g);break;default:throw Error(c(161))}}catch(Q){rt(t,t.return,Q)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function H0(t,s,n){Ae=t,ac(t)}function ac(t,s,n){for(var a=(t.mode&1)!==0;Ae!==null;){var l=Ae,i=l.child;if(l.tag===22&&a){var g=l.memoizedState!==null||Cu;if(!g){var M=l.alternate,Q=M!==null&&M.memoizedState!==null||vt;M=Cu;var se=vt;if(Cu=g,(vt=Q)&&!se)for(Ae=l;Ae!==null;)g=Ae,Q=g.child,g.tag===22&&g.memoizedState!==null?oc(l):Q!==null?(Q.return=g,Ae=Q):oc(l);for(;i!==null;)Ae=i,ac(i),i=i.sibling;Ae=l,Cu=M,vt=se}lc(t)}else(l.subtreeFlags&8772)!==0&&i!==null?(i.return=l,Ae=i):lc(t)}}function lc(t){for(;Ae!==null;){var s=Ae;if((s.flags&8772)!==0){var n=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:vt||mu(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!vt)if(n===null)a.componentDidMount();else{var l=s.elementType===s.type?n.memoizedProps:Gt(s.type,n.memoizedProps);a.componentDidUpdate(l,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&lo(s,i,a);break;case 3:var g=s.updateQueue;if(g!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}lo(s,g,n)}break;case 5:var M=s.stateNode;if(n===null&&s.flags&4){n=M;var Q=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&n.focus();break;case"img":Q.src&&(n.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var se=s.alternate;if(se!==null){var Ce=se.memoizedState;if(Ce!==null){var me=Ce.dehydrated;me!==null&&Kr(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}vt||s.flags&512&&rl(s)}catch(ce){rt(s,s.return,ce)}}if(s===t){Ae=null;break}if(n=s.sibling,n!==null){n.return=s.return,Ae=n;break}Ae=s.return}}function ic(t){for(;Ae!==null;){var s=Ae;if(s===t){Ae=null;break}var n=s.sibling;if(n!==null){n.return=s.return,Ae=n;break}Ae=s.return}}function oc(t){for(;Ae!==null;){var s=Ae;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{mu(4,s)}catch(Q){rt(s,n,Q)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var l=s.return;try{a.componentDidMount()}catch(Q){rt(s,l,Q)}}var i=s.return;try{rl(s)}catch(Q){rt(s,i,Q)}break;case 5:var g=s.return;try{rl(s)}catch(Q){rt(s,g,Q)}}}catch(Q){rt(s,s.return,Q)}if(s===t){Ae=null;break}var M=s.sibling;if(M!==null){M.return=s.return,Ae=M;break}Ae=s.return}}var Y0=Math.ceil,xu=$.ReactCurrentDispatcher,al=$.ReactCurrentOwner,Ut=$.ReactCurrentBatchConfig,Ye=0,dt=null,at=null,gt=0,Lt=0,kr=_s(0),it=0,hn=null,Xs=0,gu=0,ll=0,pn=null,St=null,il=0,_r=1/0,ys=null,hu=!1,ol=null,Ps=null,pu=!1,Ls=null,fu=0,fn=0,cl=null,yu=-1,bu=0;function Bt(){return(Ye&6)!==0?nt():yu!==-1?yu:yu=nt()}function Ms(t){return(t.mode&1)===0?1:(Ye&2)!==0&&gt!==0?gt&-gt:w0.transition!==null?(bu===0&&(bu=ti()),bu):(t=We,t!==0||(t=window.event,t=t===void 0?16:ci(t.type)),t)}function Xt(t,s,n,a){if(50<fn)throw fn=0,cl=null,Error(c(185));zr(t,n,a),((Ye&2)===0||t!==dt)&&(t===dt&&((Ye&2)===0&&(gu|=n),it===4&&Rs(t,gt)),Et(t,a),n===1&&Ye===0&&(s.mode&1)===0&&(_r=nt()+500,Wn&&Es()))}function Et(t,s){var n=t.callbackNode;wd(t,s);var a=_n(t,t===dt?gt:0);if(a===0)n!==null&&Xl(n),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(n!=null&&Xl(n),s===1)t.tag===0?A0(dc.bind(null,t)):Gi(dc.bind(null,t)),j0(function(){(Ye&6)===0&&Es()}),n=null;else{switch(si(a)){case 1:n=Hu;break;case 4:n=Zl;break;case 16:n=Dn;break;case 536870912:n=ei;break;default:n=Dn}n=yc(n,cc.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function cc(t,s){if(yu=-1,bu=0,(Ye&6)!==0)throw Error(c(327));var n=t.callbackNode;if(Sr()&&t.callbackNode!==n)return null;var a=_n(t,t===dt?gt:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=vu(t,a);else{s=a;var l=Ye;Ye|=2;var i=mc();(dt!==t||gt!==s)&&(ys=null,_r=nt()+500,er(t,s));do try{V0();break}catch(M){Cc(t,M)}while(!0);ka(),xu.current=i,Ye=l,at!==null?s=0:(dt=null,gt=0,s=it)}if(s!==0){if(s===2&&(l=Yu(t),l!==0&&(a=l,s=dl(t,l))),s===1)throw n=hn,er(t,0),Rs(t,a),Et(t,nt()),n;if(s===6)Rs(t,a);else{if(l=t.current.alternate,(a&30)===0&&!Q0(l)&&(s=vu(t,a),s===2&&(i=Yu(t),i!==0&&(a=i,s=dl(t,i))),s===1))throw n=hn,er(t,0),Rs(t,a),Et(t,nt()),n;switch(t.finishedWork=l,t.finishedLanes=a,s){case 0:case 1:throw Error(c(345));case 2:tr(t,St,ys);break;case 3:if(Rs(t,a),(a&130023424)===a&&(s=il+500-nt(),10<s)){if(_n(t,0)!==0)break;if(l=t.suspendedLanes,(l&a)!==a){Bt(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=pa(tr.bind(null,t,St,ys),s);break}tr(t,St,ys);break;case 4:if(Rs(t,a),(a&4194240)===a)break;for(s=t.eventTimes,l=-1;0<a;){var g=31-Kt(a);i=1<<g,g=s[g],g>l&&(l=g),a&=~i}if(a=l,a=nt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Y0(a/1960))-a,10<a){t.timeoutHandle=pa(tr.bind(null,t,St,ys),a);break}tr(t,St,ys);break;case 5:tr(t,St,ys);break;default:throw Error(c(329))}}}return Et(t,nt()),t.callbackNode===n?cc.bind(null,t):null}function dl(t,s){var n=pn;return t.current.memoizedState.isDehydrated&&(er(t,s).flags|=256),t=vu(t,s),t!==2&&(s=St,St=n,s!==null&&Cl(s)),t}function Cl(t){St===null?St=t:St.push.apply(St,t)}function Q0(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var l=n[a],i=l.getSnapshot;l=l.value;try{if(!Vt(i(),l))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rs(t,s){for(s&=~ll,s&=~gu,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Kt(s),a=1<<n;t[n]=-1,s&=~a}}function dc(t){if((Ye&6)!==0)throw Error(c(327));Sr();var s=_n(t,0);if((s&1)===0)return Et(t,nt()),null;var n=vu(t,s);if(t.tag!==0&&n===2){var a=Yu(t);a!==0&&(s=a,n=dl(t,a))}if(n===1)throw n=hn,er(t,0),Rs(t,s),Et(t,nt()),n;if(n===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,tr(t,St,ys),Et(t,nt()),null}function ml(t,s){var n=Ye;Ye|=1;try{return t(s)}finally{Ye=n,Ye===0&&(_r=nt()+500,Wn&&Es())}}function Zs(t){Ls!==null&&Ls.tag===0&&(Ye&6)===0&&Sr();var s=Ye;Ye|=1;var n=Ut.transition,a=We;try{if(Ut.transition=null,We=1,t)return t()}finally{We=a,Ut.transition=n,Ye=s,(Ye&6)===0&&Es()}}function xl(){Lt=kr.current,Je(kr)}function er(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v0(n)),at!==null)for(n=at.return;n!==null;){var a=n;switch(Ba(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Kn();break;case 3:Dr(),Je(wt),Je(ft),La();break;case 5:Ia(a);break;case 4:Dr();break;case 13:Je(et);break;case 19:Je(et);break;case 10:_a(a.type._context);break;case 22:case 23:xl()}n=n.return}if(dt=t,at=t=Os(t.current,null),gt=Lt=s,it=0,hn=null,ll=gu=Xs=0,St=pn=null,Gs!==null){for(s=0;s<Gs.length;s++)if(n=Gs[s],a=n.interleaved,a!==null){n.interleaved=null;var l=a.next,i=n.pending;if(i!==null){var g=i.next;i.next=l,a.next=g}n.pending=a}Gs=null}return t}function Cc(t,s){do{var n=at;try{if(ka(),nu.current=iu,uu){for(var a=tt.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}uu=!1}if(Js=0,ct=lt=tt=null,cn=!1,dn=0,al.current=null,n===null||n.return===null){it=1,hn=s,at=null;break}e:{var i=t,g=n.return,M=n,Q=s;if(s=gt,M.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var se=Q,Ce=M,me=Ce.tag;if((Ce.mode&1)===0&&(me===0||me===11||me===15)){var ce=Ce.alternate;ce?(Ce.updateQueue=ce.updateQueue,Ce.memoizedState=ce.memoizedState,Ce.lanes=ce.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var De=Mo(g);if(De!==null){De.flags&=-257,Ro(De,g,M,i,s),De.mode&1&&Lo(i,se,s),s=De,Q=se;var ke=s.updateQueue;if(ke===null){var _e=new Set;_e.add(Q),s.updateQueue=_e}else ke.add(Q);break e}else{if((s&1)===0){Lo(i,se,s),gl();break e}Q=Error(c(426))}}else if(Ze&&M.mode&1){var ut=Mo(g);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Ro(ut,g,M,i,s),Aa(Ar(Q,M));break e}}i=Q=Ar(Q,M),it!==4&&(it=2),pn===null?pn=[i]:pn.push(i),i=g;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var X=Io(i,Q,s);ao(i,X);break e;case 1:M=Q;var V=i.type,Z=i.stateNode;if((i.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Ps===null||!Ps.has(Z)))){i.flags|=65536,s&=-s,i.lanes|=s;var pe=Po(i,M,s);ao(i,pe);break e}}i=i.return}while(i!==null)}gc(n)}catch(Ee){s=Ee,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function mc(){var t=xu.current;return xu.current=iu,t===null?iu:t}function gl(){(it===0||it===3||it===2)&&(it=4),dt===null||(Xs&268435455)===0&&(gu&268435455)===0||Rs(dt,gt)}function vu(t,s){var n=Ye;Ye|=2;var a=mc();(dt!==t||gt!==s)&&(ys=null,er(t,s));do try{K0();break}catch(l){Cc(t,l)}while(!0);if(ka(),Ye=n,xu.current=a,at!==null)throw Error(c(261));return dt=null,gt=0,it}function K0(){for(;at!==null;)xc(at)}function V0(){for(;at!==null&&!fd();)xc(at)}function xc(t){var s=fc(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,s===null?gc(t):at=s,al.current=null}function gc(t){var s=t;do{var n=s.alternate;if(t=s.return,(s.flags&32768)===0){if(n=O0(n,s,Lt),n!==null){at=n;return}}else{if(n=$0(n,s),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,at=null;return}}if(s=s.sibling,s!==null){at=s;return}at=s=t}while(s!==null);it===0&&(it=5)}function tr(t,s,n){var a=We,l=Ut.transition;try{Ut.transition=null,We=1,W0(t,s,n,a)}finally{Ut.transition=l,We=a}return null}function W0(t,s,n,a){do Sr();while(Ls!==null);if((Ye&6)!==0)throw Error(c(327));n=t.finishedWork;var l=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kd(t,i),t===dt&&(at=dt=null,gt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||pu||(pu=!0,yc(Dn,function(){return Sr(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=Ut.transition,Ut.transition=null;var g=We;We=1;var M=Ye;Ye|=4,al.current=null,U0(t,n),uc(n,t),x0(ga),Fn=!!xa,ga=xa=null,t.current=n,H0(n),yd(),Ye=M,We=g,Ut.transition=i}else t.current=n;if(pu&&(pu=!1,Ls=t,fu=l),i=t.pendingLanes,i===0&&(Ps=null),jd(n.stateNode),Et(t,nt()),s!==null)for(a=t.onRecoverableError,n=0;n<s.length;n++)l=s[n],a(l.value,{componentStack:l.stack,digest:l.digest});if(hu)throw hu=!1,t=ol,ol=null,t;return(fu&1)!==0&&t.tag!==0&&Sr(),i=t.pendingLanes,(i&1)!==0?t===cl?fn++:(fn=0,cl=t):fn=0,Es(),null}function Sr(){if(Ls!==null){var t=si(fu),s=Ut.transition,n=We;try{if(Ut.transition=null,We=16>t?16:t,Ls===null)var a=!1;else{if(t=Ls,Ls=null,fu=0,(Ye&6)!==0)throw Error(c(331));var l=Ye;for(Ye|=4,Ae=t.current;Ae!==null;){var i=Ae,g=i.child;if((Ae.flags&16)!==0){var M=i.deletions;if(M!==null){for(var Q=0;Q<M.length;Q++){var se=M[Q];for(Ae=se;Ae!==null;){var Ce=Ae;switch(Ce.tag){case 0:case 11:case 15:gn(8,Ce,i)}var me=Ce.child;if(me!==null)me.return=Ce,Ae=me;else for(;Ae!==null;){Ce=Ae;var ce=Ce.sibling,De=Ce.return;if(ec(Ce),Ce===se){Ae=null;break}if(ce!==null){ce.return=De,Ae=ce;break}Ae=De}}}var ke=i.alternate;if(ke!==null){var _e=ke.child;if(_e!==null){ke.child=null;do{var ut=_e.sibling;_e.sibling=null,_e=ut}while(_e!==null)}}Ae=i}}if((i.subtreeFlags&2064)!==0&&g!==null)g.return=i,Ae=g;else e:for(;Ae!==null;){if(i=Ae,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:gn(9,i,i.return)}var X=i.sibling;if(X!==null){X.return=i.return,Ae=X;break e}Ae=i.return}}var V=t.current;for(Ae=V;Ae!==null;){g=Ae;var Z=g.child;if((g.subtreeFlags&2064)!==0&&Z!==null)Z.return=g,Ae=Z;else e:for(g=V;Ae!==null;){if(M=Ae,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:mu(9,M)}}catch(Ee){rt(M,M.return,Ee)}if(M===g){Ae=null;break e}var pe=M.sibling;if(pe!==null){pe.return=M.return,Ae=pe;break e}Ae=M.return}}if(Ye=l,Es(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(An,t)}catch{}a=!0}return a}finally{We=n,Ut.transition=s}}return!1}function hc(t,s,n){s=Ar(n,s),s=Io(t,s,1),t=Ts(t,s,1),s=Bt(),t!==null&&(zr(t,1,s),Et(t,s))}function rt(t,s,n){if(t.tag===3)hc(t,t,n);else for(;s!==null;){if(s.tag===3){hc(s,t,n);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ps===null||!Ps.has(a))){t=Ar(n,t),t=Po(s,t,1),s=Ts(s,t,1),t=Bt(),s!==null&&(zr(s,1,t),Et(s,t));break}}s=s.return}}function G0(t,s,n){var a=t.pingCache;a!==null&&a.delete(s),s=Bt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(gt&n)===n&&(it===4||it===3&&(gt&130023424)===gt&&500>nt()-il?er(t,0):ll|=n),Et(t,s)}function pc(t,s){s===0&&((t.mode&1)===0?s=1:(s=kn,kn<<=1,(kn&130023424)===0&&(kn=4194304)));var n=Bt();t=hs(t,s),t!==null&&(zr(t,s,n),Et(t,n))}function q0(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),pc(t,n)}function J0(t,s){var n=0;switch(t.tag){case 13:var a=t.stateNode,l=t.memoizedState;l!==null&&(n=l.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(c(314))}a!==null&&a.delete(s),pc(t,n)}var fc;fc=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||wt.current)_t=!0;else{if((t.lanes&n)===0&&(s.flags&128)===0)return _t=!1,R0(t,s,n);_t=(t.flags&131072)!==0}else _t=!1,Ze&&(s.flags&1048576)!==0&&qi(s,qn,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;du(t,s),t=s.pendingProps;var l=fr(s,ft.current);Nr(s,n),l=Oa(null,s,a,t,l,n);var i=$a();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,kt(a)?(i=!0,Vn(s)):i=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Fa(s),l.updater=ou,s.stateNode=l,l._reactInternals=s,Ka(s,a,t,n),s=qa(null,s,a,!0,i,n)):(s.tag=0,Ze&&i&&ja(s),jt(null,s,l,n),s=s.child),s;case 16:a=s.elementType;e:{switch(du(t,s),t=s.pendingProps,l=a._init,a=l(a._payload),s.type=a,l=s.tag=Z0(a),t=Gt(a,t),l){case 0:s=Ga(null,s,a,t,n);break e;case 1:s=Yo(null,s,a,t,n);break e;case 11:s=Oo(null,s,a,t,n);break e;case 14:s=$o(null,s,a,Gt(a.type,t),n);break e}throw Error(c(306,a,""))}return s;case 0:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:Gt(a,l),Ga(t,s,a,l,n);case 1:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:Gt(a,l),Yo(t,s,a,l,n);case 3:e:{if(Qo(s),t===null)throw Error(c(387));a=s.pendingProps,i=s.memoizedState,l=i.element,uo(t,s),su(s,a,null,n);var g=s.memoizedState;if(a=g.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){l=Ar(Error(c(423)),s),s=Ko(t,s,a,n,l);break e}else if(a!==l){l=Ar(Error(c(424)),s),s=Ko(t,s,a,n,l);break e}else for(Pt=ks(s.stateNode.containerInfo.firstChild),It=s,Ze=!0,Wt=null,n=ro(s,null,a,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vr(),a===l){s=fs(t,s,n);break e}jt(t,s,a,n)}s=s.child}return s;case 5:return io(s),t===null&&Da(s),a=s.type,l=s.pendingProps,i=t!==null?t.memoizedProps:null,g=l.children,ha(a,l)?g=null:i!==null&&ha(a,i)&&(s.flags|=32),Ho(t,s),jt(t,s,g,n),s.child;case 6:return t===null&&Da(s),null;case 13:return Vo(t,s,n);case 4:return Ta(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=jr(s,null,a,n):jt(t,s,a,n),s.child;case 11:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:Gt(a,l),Oo(t,s,a,l,n);case 7:return jt(t,s,s.pendingProps,n),s.child;case 8:return jt(t,s,s.pendingProps.children,n),s.child;case 12:return jt(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(a=s.type._context,l=s.pendingProps,i=s.memoizedProps,g=l.value,Ge(Zn,a._currentValue),a._currentValue=g,i!==null)if(Vt(i.value,g)){if(i.children===l.children&&!wt.current){s=fs(t,s,n);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var M=i.dependencies;if(M!==null){g=i.child;for(var Q=M.firstContext;Q!==null;){if(Q.context===a){if(i.tag===1){Q=ps(-1,n&-n),Q.tag=2;var se=i.updateQueue;if(se!==null){se=se.shared;var Ce=se.pending;Ce===null?Q.next=Q:(Q.next=Ce.next,Ce.next=Q),se.pending=Q}}i.lanes|=n,Q=i.alternate,Q!==null&&(Q.lanes|=n),Sa(i.return,n,s),M.lanes|=n;break}Q=Q.next}}else if(i.tag===10)g=i.type===s.type?null:i.child;else if(i.tag===18){if(g=i.return,g===null)throw Error(c(341));g.lanes|=n,M=g.alternate,M!==null&&(M.lanes|=n),Sa(g,n,s),g=i.sibling}else g=i.child;if(g!==null)g.return=i;else for(g=i;g!==null;){if(g===s){g=null;break}if(i=g.sibling,i!==null){i.return=g.return,g=i;break}g=g.return}i=g}jt(t,s,l.children,n),s=s.child}return s;case 9:return l=s.type,a=s.pendingProps.children,Nr(s,n),l=$t(l),a=a(l),s.flags|=1,jt(t,s,a,n),s.child;case 14:return a=s.type,l=Gt(a,s.pendingProps),l=Gt(a.type,l),$o(t,s,a,l,n);case 15:return zo(t,s,s.type,s.pendingProps,n);case 17:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:Gt(a,l),du(t,s),s.tag=1,kt(a)?(t=!0,Vn(s)):t=!1,Nr(s,n),Fo(s,a,l),Ka(s,a,l,n),qa(null,s,a,!0,t,n);case 19:return Go(t,s,n);case 22:return Uo(t,s,n)}throw Error(c(156,s.tag))};function yc(t,s){return Jl(t,s)}function X0(t,s,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,s,n,a){return new X0(t,s,n,a)}function hl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z0(t){if(typeof t=="function")return hl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A)return 11;if(t===w)return 14}return 2}function Os(t,s){var n=t.alternate;return n===null?(n=Ht(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ju(t,s,n,a,l,i){var g=2;if(a=t,typeof t=="function")hl(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case x:return sr(n.children,l,i,s);case _:g=8,l|=8;break;case k:return t=Ht(12,n,s,l|2),t.elementType=k,t.lanes=i,t;case C:return t=Ht(13,n,s,l),t.elementType=C,t.lanes=i,t;case f:return t=Ht(19,n,s,l),t.elementType=f,t.lanes=i,t;case Y:return Bu(n,l,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:g=10;break e;case J:g=9;break e;case A:g=11;break e;case w:g=14;break e;case F:g=16,a=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return s=Ht(g,n,s,l),s.elementType=t,s.type=a,s.lanes=i,s}function sr(t,s,n,a){return t=Ht(7,t,a,s),t.lanes=n,t}function Bu(t,s,n,a){return t=Ht(22,t,a,s),t.elementType=Y,t.lanes=n,t.stateNode={isHidden:!1},t}function pl(t,s,n){return t=Ht(6,t,null,s),t.lanes=n,t}function fl(t,s,n){return s=Ht(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function eC(t,s,n,a,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function yl(t,s,n,a,l,i,g,M,Q){return t=new eC(t,s,n,M,Q),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Ht(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(i),t}function tC(t,s,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:a==null?null:""+a,children:t,containerInfo:s,implementation:n}}function bc(t){if(!t)return Ss;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(c(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(c(171))}if(t.tag===1){var n=t.type;if(kt(n))return Vi(t,n,s)}return s}function vc(t,s,n,a,l,i,g,M,Q){return t=yl(n,a,!0,t,l,i,g,M,Q),t.context=bc(null),n=t.current,a=Bt(),l=Ms(n),i=ps(a,l),i.callback=s??null,Ts(n,i,l),t.current.lanes=l,zr(t,l,a),Et(t,a),t}function Nu(t,s,n,a){var l=s.current,i=Bt(),g=Ms(l);return n=bc(n),s.context===null?s.context=n:s.pendingContext=n,s=ps(i,g),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Ts(l,s,g),t!==null&&(Xt(t,l,g,i),tu(t,l,g)),g}function Du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jc(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function bl(t,s){jc(t,s),(t=t.alternate)&&jc(t,s)}function sC(){return null}var Bc=typeof reportError=="function"?reportError:function(t){console.error(t)};function vl(t){this._internalRoot=t}Au.prototype.render=vl.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(c(409));Nu(t,s,null,null)},Au.prototype.unmount=vl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Zs(function(){Nu(null,t,null,null)}),s[Cs]=null}};function Au(t){this._internalRoot=t}Au.prototype.unstable_scheduleHydration=function(t){if(t){var s=ui();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Ds.length&&s!==0&&s<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&ii(t)}};function jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nc(){}function rC(t,s,n,a,l){if(l){if(typeof a=="function"){var i=a;a=function(){var se=Du(g);i.call(se)}}var g=vc(s,a,t,0,null,!1,!1,"",Nc);return t._reactRootContainer=g,t[Cs]=g.current,tn(t.nodeType===8?t.parentNode:t),Zs(),g}for(;l=t.lastChild;)t.removeChild(l);if(typeof a=="function"){var M=a;a=function(){var se=Du(Q);M.call(se)}}var Q=yl(t,0,!1,null,null,!1,!1,"",Nc);return t._reactRootContainer=Q,t[Cs]=Q.current,tn(t.nodeType===8?t.parentNode:t),Zs(function(){Nu(s,Q,n,a)}),Q}function ku(t,s,n,a,l){var i=n._reactRootContainer;if(i){var g=i;if(typeof l=="function"){var M=l;l=function(){var Q=Du(g);M.call(Q)}}Nu(s,g,t,l)}else g=rC(n,s,t,l,a);return Du(g)}ri=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=$r(s.pendingLanes);n!==0&&(Ku(s,n|1),Et(s,nt()),(Ye&6)===0&&(_r=nt()+500,Es()))}break;case 13:Zs(function(){var a=hs(t,1);if(a!==null){var l=Bt();Xt(a,t,1,l)}}),bl(t,1)}},Vu=function(t){if(t.tag===13){var s=hs(t,134217728);if(s!==null){var n=Bt();Xt(s,t,134217728,n)}bl(t,134217728)}},ni=function(t){if(t.tag===13){var s=Ms(t),n=hs(t,s);if(n!==null){var a=Bt();Xt(n,t,s,a)}bl(t,s)}},ui=function(){return We},ai=function(t,s){var n=We;try{return We=t,s()}finally{We=n}},ir=function(t,s,n){switch(s){case"input":if(Te(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var a=n[s];if(a!==t&&a.form===t.form){var l=Qn(a);if(!l)throw Error(c(90));ne(a),Te(a,l)}}}break;case"textarea":ie(t,n);break;case"select":s=n.value,s!=null&&Fe(t,!!n.multiple,s,!1)}},Yl=ml,Ql=Zs;var nC={usingClientEntryPoint:!1,Events:[nn,hr,Qn,Ul,Hl,ml]},yn={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uC={bundleType:yn.bundleType,version:yn.version,rendererPackageName:yn.rendererPackageName,rendererConfig:yn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gl(t),t===null?null:t.stateNode},findFiberByHostInstance:yn.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{An=_u.inject(uC),ss=_u}catch{}}return Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC,Ft.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jl(s))throw Error(c(200));return tC(t,s,null,n)},Ft.createRoot=function(t,s){if(!jl(t))throw Error(c(299));var n=!1,a="",l=Bc;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=yl(t,1,!1,null,null,n,!1,a,l),t[Cs]=s.current,tn(t.nodeType===8?t.parentNode:t),new vl(s)},Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=Gl(s),t=t===null?null:t.stateNode,t},Ft.flushSync=function(t){return Zs(t)},Ft.hydrate=function(t,s,n){if(!wu(s))throw Error(c(200));return ku(null,t,s,!0,n)},Ft.hydrateRoot=function(t,s,n){if(!jl(t))throw Error(c(405));var a=n!=null&&n.hydratedSources||null,l=!1,i="",g=Bc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),s=vc(s,null,t,1,n??null,l,!1,i,g),t[Cs]=s.current,tn(t),a)for(t=0;t<a.length;t++)n=a[t],l=n._getVersion,l=l(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,l]:s.mutableSourceEagerHydrationData.push(n,l);return new Au(s)},Ft.render=function(t,s,n){if(!wu(s))throw Error(c(200));return ku(null,t,s,!1,n)},Ft.unmountComponentAtNode=function(t){if(!wu(t))throw Error(c(40));return t._reactRootContainer?(Zs(function(){ku(null,null,t,!1,function(){t._reactRootContainer=null,t[Cs]=null})}),!0):!1},Ft.unstable_batchedUpdates=ml,Ft.unstable_renderSubtreeIntoContainer=function(t,s,n,a){if(!wu(n))throw Error(c(200));if(t==null||t._reactInternals===void 0)throw Error(c(38));return ku(t,s,n,!1,a)},Ft.version="18.3.1-next-f1338f8080-20240426",Ft}var Fc;function mC(){if(Fc)return Dl.exports;Fc=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(u){console.error(u)}}return r(),Dl.exports=CC(),Dl.exports}var Tc;function xC(){if(Tc)return Su;Tc=1;var r=mC();return Su.createRoot=r.createRoot,Su.hydrateRoot=r.hydrateRoot,Su}var gC=xC();const hC=Xc(gC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,c,d)=>d?d.toUpperCase():c.toLowerCase()),Ic=r=>{const u=fC(r);return u.charAt(0).toUpperCase()+u.slice(1)},Zc=(...r)=>r.filter((u,c,d)=>!!u&&u.trim()!==""&&d.indexOf(u)===c).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=o.forwardRef(({color:r="currentColor",size:u=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:h="",children:m,iconNode:b,...P},N)=>o.createElement("svg",{ref:N,...yC,width:u,height:u,stroke:r,strokeWidth:d?Number(c)*24/Number(u):c,className:Zc("lucide",h),...P},[...b.map(([U,E])=>o.createElement(U,E)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(r,u)=>{const c=o.forwardRef(({className:d,...h},m)=>o.createElement(bC,{ref:m,iconNode:u,className:Zc(`lucide-${pC(Ic(r))}`,`lucide-${r}`,d),...h}));return c.displayName=Ic(r),c};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mu=Oe("arrow-left",vC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Il=Oe("award",jC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ht=Oe("book-open",BC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],DC=Oe("book-plus",NC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Iu=Oe("briefcase",AC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],kC=Oe("calendar",wC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],SC=Oe("chart-column",_C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pl=Oe("check",EC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rr=Oe("chevron-down",FC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yt=Oe("chevron-right",TC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],PC=Oe("chevron-up",IC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],is=Oe("circle-check-big",LC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],os=Oe("clipboard-check",MC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Er=Oe("clipboard-list",RC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Fr=Oe("clock",OC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zC=Oe("compass",$C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Tr=Oe("download",UC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Fu=Oe("file-question",HC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vs=Oe("file-text",YC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ru=Oe("folder-open",QC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],VC=Oe("folder-plus",KC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Pc=Oe("folder-tree",WC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qC=Oe("funnel",GC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],kl=Oe("graduation-cap",JC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ZC=Oe("heart",XC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ir=Oe("info",em);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],sm=Oe("layers",tm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],nm=Oe("library",rm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Lc=Oe("link",um);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ed=Oe("list",am);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zt=Oe("loader-circle",lm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Us=Oe("message-square",im);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Rl=Oe("play",om);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mt=Oe("plus",cm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Cm=Oe("refresh-cw",dm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],es=Oe("save",mm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Dt=Oe("search",xm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],td=Oe("settings",gm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qt=Oe("square-pen",hm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],pt=Oe("trash-2",pm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ll=Oe("upload",fm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bm=Oe("user",ym);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],vn=Oe("users",vm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Pr=Oe("video",jm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ot=Oe("x",Bm);function Ue(r){const u=new URLSearchParams;Object.entries(r).forEach(([d,h])=>{h==null||h===""||u.set(d,String(h))});const c=u.toString();return c?`?${c}`:""}async function xe(r,u){const c=await fetch(r,u),d=c.headers.get("content-type")||"",h=await c.text();let m=null;const b=h.trim();if(d.includes("application/json")||b.startsWith("{")||b.startsWith("["))try{m=JSON.parse(h)}catch{m=null}if(!m||typeof m.rst_code!="string"){const N=c.ok?"\uC11C\uBC84 \uC751\uB2F5\uC774 JSON\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.":`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958(${c.status}). \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.`;throw new Error(N)}return m}const ue={async getDashboard(){return xe("/tutor_lms/api/dashboard.jsp")},async getCourseResolve(r){const u=`/tutor_lms/api/course_resolve.jsp${Ue({course_id:r.courseId,source_type:r.sourceType})}`;return xe(u)},async getPrograms(r={}){const u=`/tutor_lms/api/program_list.jsp${Ue({s_keyword:r.keyword})}`;return xe(u)},async getHomeworkSubmissions(r={}){const u=`/tutor_lms/api/homework_submissions.jsp${Ue({s_keyword:r.keyword,page:r.page,page_size:r.pageSize,start_date:r.startDate,end_date:r.endDate,status:r.status})}`;return xe(u)},async getQnaManageList(r={}){const u=`/tutor_lms/api/qna_manage_list.jsp${Ue({s_keyword:r.keyword,page:r.page,page_size:r.pageSize,start_date:r.startDate,end_date:r.endDate,status:r.status})}`;return xe(u)},async getProgram(r){const u=`/tutor_lms/api/program_view.jsp${Ue({id:r})}`;return xe(u)},async createProgram(r){const u=new URLSearchParams;return u.set("course_nm",r.courseName),u.set("start_date",r.startDate),u.set("end_date",r.endDate),u.set("plan_json",r.planJson),xe("/tutor_lms/api/program_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getProgramCourses(r){const u=`/tutor_lms/api/program_course_list.jsp${Ue({program_id:r.programId})}`;return xe(u)},async modifyProgram(r){const u=new URLSearchParams;return u.set("id",String(r.id)),u.set("course_nm",r.courseName),r.startDate!==void 0&&u.set("start_date",r.startDate),r.endDate!==void 0&&u.set("end_date",r.endDate),r.planJson!==void 0&&u.set("plan_json",r.planJson),xe("/tutor_lms/api/program_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteProgram(r){const u=new URLSearchParams;return u.set("id",String(r.id)),xe("/tutor_lms/api/program_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseYears(r={}){const u=`/tutor_lms/api/course_years.jsp${Ue({tutor_id:r.tutorId})}`;return xe(u)},async getMyCourses(r={}){const u=`/tutor_lms/api/course_list.jsp${Ue({year:r.year,s_keyword:r.keyword})}`;return xe(u)},async getPolyCourses(r={}){const u=`/tutor_lms/api/course_list_poly.jsp${Ue({year:r.year})}`;return xe(u)},async getMyCoursesCombined(r={tab:"prism"}){const u=`/tutor_lms/api/course_list_combined.jsp${Ue({tab:r.tab,year:r.year,s_keyword:r.keyword,page:r.page,page_size:r.pageSize,haksa_category:r.haksaCategory,haksa_grad:r.haksaGrad,haksa_curriculum:r.haksaCurriculum,sort_order:r.sortOrder})}`;return xe(u)},async getTutors(){return xe("/tutor_lms/api/tutor_list.jsp")},async copyCourse(r){const u=new URLSearchParams;return u.set("source_course_id",String(r.sourceCourseId)),u.set("course_nm",r.courseName),u.set("tutor_id",String(r.tutorId)),xe("/tutor_lms/api/course_copy.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async setCourseProgram(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("program_id",String(r.programId)),xe("/tutor_lms/api/course_set_program.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseInfo(r){const u=`/tutor_lms/api/course_info_get.jsp${Ue({course_id:r.courseId,_t:Date.now()})}`;return xe(u)},async updateCourseInfo(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("content1",r.content1),u.set("content2",r.content2),xe("/tutor_lms/api/course_info_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCourseEvaluation(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("assign_progress",String(r.assignProgress)),u.set("assign_exam",String(r.assignExam)),u.set("assign_homework",String(r.assignHomework)),u.set("assign_forum",String(r.assignForum)),u.set("assign_etc",String(r.assignEtc)),u.set("assign_survey_yn",r.assignSurveyYn),u.set("push_survey_yn",r.pushSurveyYn),u.set("pass_yn",r.passYn),u.set("limit_total_score",String(r.limitTotalScore)),u.set("limit_progress",String(r.limitProgress)),u.set("complete_limit_progress",String(r.completeLimitProgress)),u.set("complete_limit_total_score",String(r.completeLimitTotalScore)),xe("/tutor_lms/api/course_evaluation_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCourseCertificateSettings(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("cert_complete_yn",r.certCompleteYn),u.set("cert_template_id",String(r.certTemplateId)),u.set("pass_cert_template_id",String(r.passCertTemplateId)),u.set("complete_no_yn",r.completeNoYn),u.set("complete_prefix",r.completePrefix),u.set("postfix_cnt",String(r.postfixCnt)),u.set("postfix_type",r.postfixType),u.set("postfix_ord",r.postfixOrd),xe("/tutor_lms/api/course_certificate_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async createCourse(r){const u=new URLSearchParams;return u.set("course_nm",r.courseName),u.set("year",r.year),u.set("study_sdate",r.studyStartDate),u.set("study_edate",r.studyEndDate),r.programId&&u.set("program_id",String(r.programId)),r.categoryId&&u.set("category_id",String(r.categoryId)),r.semester&&u.set("semester",r.semester),r.credit!==void 0&&r.credit!==null&&String(r.credit)!==""&&u.set("credit",String(r.credit)),r.lessonTime!==void 0&&r.lessonTime!==null&&String(r.lessonTime)!==""&&u.set("lesson_time",String(r.lessonTime)),r.content1&&u.set("content1",r.content1),r.content2&&u.set("content2",r.content2),r.courseFile&&u.set("course_file",r.courseFile),xe("/tutor_lms/api/course_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseCategories(){return xe("/tutor_lms/api/course_categories.jsp")},async getLearners(r={}){const u=`/tutor_lms/api/learner_list.jsp${Ue({s_keyword:r.keyword,dept_id:r.deptId,s_dept:r.deptKeyword,page:r.page,limit:r.limit})}`;return xe(u)},async uploadCourseImage(r){const u=new FormData;return u.set("course_file",r.file),r.courseId&&u.set("course_id",String(r.courseId)),xe("/tutor_lms/api/course_image_upload.jsp",{method:"POST",body:u})},async getKollusList(r={}){const u=`/tutor_lms/api/kollus_list.jsp${Ue({s_keyword:r.keyword,s_channel:r.channelKey,s_category:r.categoryKey,page:r.page,limit:r.limit,version:r.version})}`;return xe(u)},async getContentRecommendations(r){const u=new URLSearchParams;return r.courseName&&u.set("course_name",r.courseName),r.courseIntro&&u.set("course_intro",r.courseIntro),r.courseDetail&&u.set("course_detail",r.courseDetail),r.lessonTitle&&u.set("lesson_title",r.lessonTitle),r.lessonDescription&&u.set("lesson_description",r.lessonDescription),r.keywords&&u.set("keywords",r.keywords),r.topK!==void 0&&u.set("top_k",String(r.topK)),r.similarityThreshold!==void 0&&u.set("similarity_threshold",String(r.similarityThreshold)),xe("/tutor_lms/api/content_recommend.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getKollusWishlistList(r={}){const u=`/tutor_lms/api/kollus_wishlist_list.jsp${Ue({s_keyword:r.keyword,page:r.page,limit:r.limit})}`;return xe(u)},async toggleKollusWishlist(r){const u=new URLSearchParams;return u.set("media_content_key",r.mediaContentKey),r.title&&u.set("title",r.title),r.snapshotUrl&&u.set("snapshot_url",r.snapshotUrl),r.categoryKey&&u.set("category_key",r.categoryKey),r.categoryName&&u.set("category_nm",r.categoryName),r.originalFileName&&u.set("original_file_name",r.originalFileName),r.totalTime!==void 0&&u.set("total_time",String(r.totalTime)),r.contentWidth!==void 0&&u.set("content_width",String(r.contentWidth)),r.contentHeight!==void 0&&u.set("content_height",String(r.contentHeight)),xe("/tutor_lms/api/kollus_wishlist_toggle.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async upsertKollusLesson(r){const u=new URLSearchParams;return u.set("media_content_key",r.mediaContentKey),r.title&&u.set("title",r.title),r.totalTime!==void 0&&u.set("total_time",String(r.totalTime)),r.contentWidth!==void 0&&u.set("content_width",String(r.contentWidth)),r.contentHeight!==void 0&&u.set("content_height",String(r.contentHeight)),xe("/tutor_lms/api/kollus_lesson_upsert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async upsertExternalLinkLesson(r){const u=new URLSearchParams;return u.set("url",r.url),u.set("title",r.title),r.totalTime!==void 0&&u.set("total_time",String(r.totalTime)),xe("/tutor_lms/api/external_link_lesson_upsert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCurriculum(r){const u=`/tutor_lms/api/curriculum_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async insertCurriculumSection(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("section_nm",r.sectionName),xe("/tutor_lms/api/curriculum_section_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async modifyCurriculumSection(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("section_id",String(r.sectionId)),u.set("section_nm",r.sectionName),xe("/tutor_lms/api/curriculum_section_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteCurriculumSection(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("section_id",String(r.sectionId)),xe("/tutor_lms/api/curriculum_section_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async addCurriculumLesson(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("section_id",String(r.sectionId)),r.lessonId&&u.set("lesson_id",String(r.lessonId)),r.url&&u.set("url",r.url),r.title&&u.set("title",r.title),xe("/tutor_lms/api/curriculum_lesson_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteCurriculumLesson(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("lesson_id",String(r.lessonId)),xe("/tutor_lms/api/curriculum_lesson_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCurriculumLesson(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("lesson_id",String(r.lessonId)),r.chapter!==void 0&&u.set("chapter",String(r.chapter)),r.sectionId!==void 0&&u.set("section_id",String(r.sectionId)),r.completeTime!==void 0&&u.set("complete_time",String(r.completeTime)),r.tutorId!==void 0&&u.set("tutor_id",String(r.tutorId)),r.startDate!==void 0&&u.set("start_date",r.startDate),r.endDate!==void 0&&u.set("end_date",r.endDate),xe("/tutor_lms/api/curriculum_lesson_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseStudents(r){const u=`/tutor_lms/api/course_students_list.jsp${Ue({course_id:r.courseId,s_keyword:r.keyword})}`;return xe(u)},async getHaksaCourseStudents(r){const u=`/tutor_lms/api/haksa_students_list.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode,s_keyword:r.keyword})}`;return xe(u)},async getHaksaCourseEval(r){const u=`/tutor_lms/api/haksa_course_eval_get.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return xe(u)},async updateHaksaCourseEval(r){const u=new URLSearchParams;return u.set("course_code",r.courseCode),u.set("open_year",r.openYear),u.set("open_term",r.openTerm),u.set("bunban_code",r.bunbanCode),u.set("group_code",r.groupCode),u.set("eval_json",r.evalJson),xe("/tutor_lms/api/haksa_course_eval_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaCurriculum(r){const u=`/tutor_lms/api/haksa_curriculum_get.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return xe(u)},async updateHaksaCurriculum(r){const u=new URLSearchParams;return u.set("course_code",r.courseCode),u.set("open_year",r.openYear),u.set("open_term",r.openTerm),u.set("bunban_code",r.bunbanCode),u.set("group_code",r.groupCode),u.set("curriculum_json",r.curriculumJson),xe("/tutor_lms/api/haksa_curriculum_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaExams(r){const u=`/tutor_lms/api/haksa_exam_get.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return xe(u)},async updateHaksaExams(r){const u=new URLSearchParams;return u.set("course_code",r.courseCode),u.set("open_year",r.openYear),u.set("open_term",r.openTerm),u.set("bunban_code",r.bunbanCode),u.set("group_code",r.groupCode),u.set("exams_json",r.examsJson),xe("/tutor_lms/api/haksa_exam_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaGrades(r){const u=`/tutor_lms/api/haksa_grade_list.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return xe(u)},async resolveHaksaCourse(r){const u=`/tutor_lms/api/haksa_resolve.jsp${Ue({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return xe(u)},async updateHaksaGrades(r){const u=new URLSearchParams;return u.set("course_code",r.courseCode),u.set("open_year",r.openYear),u.set("open_term",r.openTerm),u.set("bunban_code",r.bunbanCode),u.set("group_code",r.groupCode),u.set("grades_json",r.gradesJson),xe("/tutor_lms/api/haksa_grade_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async addCourseStudents(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("user_ids",r.userIds.join(",")),xe("/tutor_lms/api/course_students_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async removeCourseStudent(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("user_id",String(r.userId)),xe("/tutor_lms/api/course_students_remove.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getProgressSummary(r){const u=`/tutor_lms/api/progress_summary.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async getProgressStudents(r){const u=`/tutor_lms/api/progress_students.jsp${Ue({course_id:r.courseId,lesson_id:r.lessonId})}`;return xe(u)},async getProgressDetail(r){const u=`/tutor_lms/api/progress_detail.jsp${Ue({course_id:r.courseId,course_user_id:r.courseUserId,lesson_id:r.lessonId})}`;return xe(u)},async getExams(r){const u=`/tutor_lms/api/exam_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async createExam(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("title",r.title),u.set("description",r.description??""),u.set("examDate",r.examDate),u.set("examTime",r.examTime),r.examEndDate&&u.set("examEndDate",r.examEndDate),r.examEndTime&&u.set("examEndTime",r.examEndTime),u.set("duration",String(r.duration)),u.set("questionCount",String(r.questionCount??0)),u.set("totalScore",String(r.totalScore??100)),u.set("allowRetake",String(!!r.allowRetake)),u.set("showResults",String(r.showResults??!0)),u.set("onoff_type",r.onoffType??"F"),xe("/tutor_lms/api/exam_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateExam(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("exam_id",String(r.examId)),u.set("title",r.title),u.set("description",r.description??""),u.set("examDate",r.examDate),u.set("examTime",r.examTime),r.examEndDate&&u.set("examEndDate",r.examEndDate),r.examEndTime&&u.set("examEndTime",r.examEndTime),u.set("duration",String(r.duration)),u.set("questionCount",String(r.questionCount??0)),u.set("totalScore",String(r.totalScore??100)),u.set("allowRetake",String(!!r.allowRetake)),u.set("showResults",String(r.showResults??!0)),u.set("onoff_type",r.onoffType??"F"),xe("/tutor_lms/api/exam_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async linkExam(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("exam_id",String(r.examId)),r.startDate&&u.set("start_date",r.startDate),r.endDate&&u.set("end_date",r.endDate),r.assignScore!==void 0&&u.set("assign_score",String(r.assignScore)),r.allowRetake!==void 0&&u.set("retry_yn",r.allowRetake?"Y":"N"),r.showResults!==void 0&&u.set("result_yn",r.showResults?"Y":"N"),xe("/tutor_lms/api/exam_link.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteExam(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("exam_id",String(r.examId)),xe("/tutor_lms/api/exam_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getExamUsers(r){const u=`/tutor_lms/api/exam_users.jsp${Ue({course_id:r.courseId,exam_id:r.examId})}`;return xe(u)},async updateExamScore(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("exam_id",String(r.examId)),u.set("course_user_id",String(r.courseUserId)),u.set("marking_score",String(r.markingScore)),xe("/tutor_lms/api/exam_score_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async cancelExamSubmit(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("exam_id",String(r.examId)),u.set("course_user_id",String(r.courseUserId)),xe("/tutor_lms/api/exam_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworks(r){const u=`/tutor_lms/api/homework_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async createHomework(r){const u=new FormData;return u.set("course_id",String(r.courseId)),u.set("title",r.title),u.set("description",r.description),u.set("dueDate",r.dueDate),u.set("dueTime",r.dueTime),u.set("totalScore",String(r.totalScore)),u.set("onoff_type",r.onoffType??"N"),r.file&&u.set("homework_file",r.file),xe("/tutor_lms/api/homework_insert.jsp",{method:"POST",body:u})},async updateHomework(r){const u=new FormData;return u.set("course_id",String(r.courseId)),u.set("homework_id",String(r.homeworkId)),u.set("title",r.title),u.set("description",r.description),u.set("dueDate",r.dueDate),u.set("dueTime",r.dueTime),u.set("totalScore",String(r.totalScore)),u.set("onoff_type",r.onoffType??"N"),r.file&&u.set("homework_file",r.file),xe("/tutor_lms/api/homework_modify.jsp",{method:"POST",body:u})},async deleteHomework(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("homework_id",String(r.homeworkId)),xe("/tutor_lms/api/homework_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworkUsers(r){const u=`/tutor_lms/api/homework_users.jsp${Ue({course_id:r.courseId,homework_id:r.homeworkId})}`;return xe(u)},async updateHomeworkFeedback(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("homework_id",String(r.homeworkId)),u.set("course_user_id",String(r.courseUserId)),u.set("marking_score",String(r.markingScore)),u.set("feedback",r.feedback),xe("/tutor_lms/api/homework_feedback_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async cancelHomeworkSubmit(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("homework_id",String(r.homeworkId)),u.set("course_user_id",String(r.courseUserId)),xe("/tutor_lms/api/homework_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async appendHomeworkTask(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("homework_id",String(r.homeworkId)),u.set("course_user_id",String(r.courseUserId)),u.set("task",r.task),xe("/tutor_lms/api/homework_task_append.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async confirmHomeworkTask(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("task_id",String(r.taskId)),u.set("feedback",r.feedback),xe("/tutor_lms/api/homework_task_confirm.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworkTasks(r){const u=`/tutor_lms/api/homework_task_list.jsp${Ue({course_id:r.courseId,homework_id:r.homeworkId,course_user_id:r.courseUserId})}`;return xe(u)},async getMaterials(r){const u=`/tutor_lms/api/materials_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async uploadMaterial(r){const u=new FormData;u.set("course_id",String(r.courseId)),u.set("title",r.title),u.set("content",r.content??""),u.set("library_link",r.link??""),r.file&&u.set("library_file",r.file);const c=`/tutor_lms/api/materials_upload.jsp${Ue({course_id:r.courseId})}`;return xe(c,{method:"POST",body:u})},async deleteMaterial(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("library_id",String(r.libraryId)),xe("/tutor_lms/api/materials_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getQnas(r){const u=`/tutor_lms/api/qna_list.jsp${Ue({course_id:r.courseId,s_keyword:r.keyword})}`;return xe(u)},async getQnaDetail(r){const u=`/tutor_lms/api/qna_view.jsp${Ue({course_id:r.courseId,post_id:r.postId})}`;return xe(u)},async answerQna(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("post_id",String(r.postId)),u.set("content",r.content),xe("/tutor_lms/api/qna_answer.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getGrades(r){const u=`/tutor_lms/api/grades_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async recalcGrades(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),r.courseUserId&&u.set("course_user_id",String(r.courseUserId)),xe("/tutor_lms/api/grades_recalc.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCompletions(r){const u=`/tutor_lms/api/completion_list.jsp${Ue({course_id:r.courseId})}`;return xe(u)},async updateCompletion(r){const u=new URLSearchParams;return u.set("course_id",String(r.courseId)),u.set("action",r.action),u.set("course_user_ids",r.courseUserIds.join(",")),xe("/tutor_lms/api/completion_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCertificateTemplates(r={}){const u=`/tutor_lms/api/certificate_templates.jsp${Ue({template_type:r.templateType})}`;return xe(u)},async issueCertificate(r){const u=`/tutor_lms/api/certificate_issue.jsp${Ue({course_user_id:r.courseUserId,type:r.type})}`;return xe(u)},async getQuestionCategories(){return xe("/tutor_lms/api/question_category_list.jsp")},async createQuestionCategory(r){const u=new URLSearchParams;return u.set("category_nm",r.categoryName),r.parentId!==void 0&&u.set("parent_id",String(r.parentId)),xe("/tutor_lms/api/question_category_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateQuestionCategory(r){const u=new URLSearchParams;return u.set("id",String(r.id)),u.set("category_nm",r.categoryName),r.parentId!==void 0&&u.set("parent_id",String(r.parentId)),xe("/tutor_lms/api/question_category_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteQuestionCategory(r){const u=new URLSearchParams;return u.set("id",String(r.id)),xe("/tutor_lms/api/question_category_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getQuestionBankList(r={}){const u=`/tutor_lms/api/question_bank_list.jsp${Ue({category_id:r.categoryId,question_type:r.questionType,s_keyword:r.keyword,page:r.page,limit:r.limit})}`;return xe(u)},async createQuestion(r){const u=new URLSearchParams;return r.categoryId&&u.set("category_id",String(r.categoryId)),u.set("question_type",String(r.questionType)),u.set("question",r.question),r.questionText&&u.set("question_text",r.questionText),r.grade&&u.set("grade",String(r.grade)),u.set("answer",r.answer),r.description&&u.set("description",r.description),r.points&&u.set("points",String(r.points)),r.items&&r.items.forEach((c,d)=>{u.set(`item${d+1}`,c)}),xe("/tutor_lms/api/question_bank_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateQuestion(r){const u=new URLSearchParams;return u.set("id",String(r.id)),r.categoryId!==void 0&&u.set("category_id",String(r.categoryId)),r.questionType!==void 0&&u.set("question_type",String(r.questionType)),r.question!==void 0&&u.set("question",r.question),r.questionText!==void 0&&u.set("question_text",r.questionText),r.grade!==void 0&&u.set("grade",String(r.grade)),r.answer!==void 0&&u.set("answer",r.answer),r.description!==void 0&&u.set("description",r.description),r.points!==void 0&&u.set("points",String(r.points)),r.items&&r.items.forEach((c,d)=>{u.set(`item${d+1}`,c)}),xe("/tutor_lms/api/question_bank_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteQuestion(r){const u=new URLSearchParams;return u.set("id",String(r.id)),xe("/tutor_lms/api/question_bank_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getExamTemplates(r={}){const u=`/tutor_lms/api/exam_template_list.jsp${Ue({page:r.page,limit:r.limit})}`;return xe(u)},async createExamTemplate(r){const u=new URLSearchParams;return u.set("exam_nm",r.examName),r.examTime&&u.set("exam_time",String(r.examTime)),r.questionCnt!==void 0&&u.set("question_cnt",String(r.questionCnt)),r.shuffleYn!==void 0&&u.set("shuffle_yn",r.shuffleYn?"Y":"N"),r.showResultYn!==void 0&&u.set("show_result_yn",r.showResultYn?"Y":"N"),r.passingScore!==void 0&&u.set("passing_score",String(r.passingScore)),r.questionIds&&u.set("question_ids",r.questionIds.join(",")),r.content&&u.set("content",r.content),xe("/tutor_lms/api/exam_template_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateExamTemplate(r){const u=new URLSearchParams;return u.set("id",String(r.id)),r.examName&&u.set("exam_nm",r.examName),r.examTime&&u.set("exam_time",String(r.examTime)),r.questionCnt!==void 0&&u.set("question_cnt",String(r.questionCnt)),r.shuffleYn!==void 0&&u.set("shuffle_yn",r.shuffleYn?"Y":"N"),r.showResultYn!==void 0&&u.set("show_result_yn",r.showResultYn?"Y":"N"),r.passingScore!==void 0&&u.set("passing_score",String(r.passingScore)),r.questionIds&&u.set("question_ids",r.questionIds.join(",")),r.content!==void 0&&u.set("content",r.content),xe("/tutor_lms/api/exam_template_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteExamTemplate(r){const u=new URLSearchParams;return u.set("id",String(r.id)),xe("/tutor_lms/api/exam_template_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})}};function Nm(r){if(!r)return null;try{const u=JSON.parse(r);return!u||typeof u!="object"?null:u}catch{return null}}function sd({isOpen:r,onClose:u,onSelect:c,selectedCourse:d}){const[h,m]=o.useState(""),[b,P]=o.useState("\uC804\uCCB4"),[N,U]=o.useState(d),[E,R]=o.useState([]),[v,I]=o.useState(!1),[W,q]=o.useState(null);o.useEffect(()=>{if(!r)return;let T=!1;return U(d),m(""),P("\uC804\uCCB4"),(async()=>{I(!0),q(null);try{const O=await ue.getPrograms();if(O.rst_code!=="0000")throw new Error(O.rst_message);const x=(O.rst_data??[]).map(_=>{var j,J,A,C,f,w,F,Y;const k=Nm(_.plan_json);return{id:String(_.id),classification:((J=(j=k==null?void 0:k.basic)==null?void 0:j.classification)==null?void 0:J.label)||((C=(A=k==null?void 0:k.basic)==null?void 0:A.classification)==null?void 0:C.value)||"\uBBF8\uBD84\uB958",name:_.course_nm||((f=k==null?void 0:k.basic)==null?void 0:f.courseName)||`\uACFC\uC815 ${_.id}`,department:((w=k==null?void 0:k.basic)==null?void 0:w.department)||"",major:((F=k==null?void 0:k.basic)==null?void 0:F.major)||"",departmentName:((Y=k==null?void 0:k.basic)==null?void 0:Y.departmentName)||""}});T||R(x)}catch(O){T||q(O instanceof Error?O.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{T||I(!1)}})(),()=>{T=!0}},[r,d]);const p=o.useMemo(()=>{const T=h.trim().toLowerCase();return E.filter($=>{const O=[$.name,$.department,$.major,$.departmentName].map(_=>String(_||"").toLowerCase()).filter(Boolean),B=T===""||O.some(_=>_.includes(T)),x=b==="\uC804\uCCB4"||$.classification===b;return B&&x})},[E,h,b]),G=()=>{c(N),u()},H=()=>{U(d),u()};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"\uC18C\uC18D \uACFC\uC815 \uC120\uD0DD"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"\uAC1C\uC124\uB41C \uACFC\uC815 \uC911 \uD558\uB098\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uBBF8\uC120\uD0DD\uC73C\uB85C \uB458 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ot,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:h,onChange:T=>m(T.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:b,onChange:T=>P(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{onClick:()=>U(null),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${N===null?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:"\uBBF8\uC120\uD0DD"}),e.jsx("p",{className:"text-gray-700",children:"\uC18C\uC18D \uACFC\uC815 \uC5C6\uC74C"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD2B9\uC815 \uACFC\uC815\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC740 \uB3C5\uB9BD \uACFC\uBAA9\uC73C\uB85C \uAC1C\uC124\uB429\uB2C8\uB2E4."})]}),N===null&&e.jsx(is,{className:"w-6 h-6 text-blue-600"})]})}),W?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:W})}):v?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):p.length===0?e.jsxs("div",{className:"py-16 text-center text-gray-500",children:[e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]}):p.map(T=>e.jsx("div",{onClick:()=>U(T),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${(N==null?void 0:N.id)===T.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:T.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:T.id})]}),e.jsx("h4",{className:"text-gray-900 mb-1",children:T.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:[T.department,T.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:T.departmentName||"-"})]})]}),(N==null?void 0:N.id)===T.id&&e.jsx(is,{className:"w-6 h-6 text-blue-600 ml-4"})]})},T.id))]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:N===null?e.jsx("span",{children:"\uBBF8\uC120\uD0DD \uC0C1\uD0DC\uC785\uB2C8\uB2E4"}):e.jsxs("span",{children:["\uC120\uD0DD\uB41C \uACFC\uC815: ",e.jsx("span",{className:"text-blue-600",children:N.name})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})}):null}function Hs(r){if(!r)return null;const u=(r.haksaCourseCode||"").trim(),c=(r.haksaOpenYear||"").trim(),d=(r.haksaOpenTerm||"").trim(),h=(r.haksaBunbanCode||"").trim(),m=(r.haksaGroupCode||"").trim();return!u||!c||!d||!h||!m?null:{courseCode:u,openYear:c,openTerm:d,bunbanCode:h,groupCode:m}}function Le(r,u=0){const c=Number(r);return Number.isFinite(c)?Math.trunc(c):u}function Dm(r,u="N"){return r==="Y"?"Y":r==="N"?"N":u}function bs(r){return Number.isFinite(r)?Math.min(100,Math.max(0,r)):0}function Ol(r,u){const c=Array.isArray(r)?r[0]:r;if(!c||typeof c!="object")return;const d=c;return d[u]??d[u.toUpperCase()]}function ls(r,u,c=""){const d=Ol(r,u);return d==null?c:String(d)}function Nt(r,u,c=0){return Le(Ol(r,u),c)}function zs(r,u,c="N"){return Dm(Ol(r,u),c)}function Eu({course:r,onCourseUpdated:u,initialSubTab:c="basic"}){const d=(r==null?void 0:r.sourceType)==="haksa"||!!(r!=null&&r.haksaCourseCode||r!=null&&r.haksaOpenYear||r!=null&&r.haksaOpenTerm||r!=null&&r.haksaBunbanCode||r!=null&&r.haksaGroupCode)||String((r==null?void 0:r.courseType)||"").includes("\uD559\uC0AC"),h=Le((r==null?void 0:r.mappedCourseId)??(r==null?void 0:r.id),0),[m,b]=o.useState(c),[P,N]=o.useState(null),[U,E]=o.useState(!1),[R,v]=o.useState(null),I=zs(P,"pass_yn","N")==="Y",W=async()=>{if(d){N(null),E(!1);return}if(h<=0){N(null),v("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}E(!0),v(null);try{const q=await ue.getCourseInfo({courseId:h});if(q.rst_code!=="0000")throw new Error(q.rst_message);N(q.rst_data??null)}catch(q){N(null),v(q instanceof Error?q.message:"\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{E(!1)}};return o.useEffect(()=>{W()},[h,m]),o.useEffect(()=>{m==="certificate"&&!I&&b("evaluation")},[I,m]),o.useEffect(()=>{b(c)},[c]),e.jsxs("div",{className:"space-y-6",children:[U&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!U&&R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:R}),!U&&!R&&m==="basic"&&e.jsx(Am,{course:r,courseId:h,detail:P,onReload:W,onCourseUpdated:u,isHaksa:d}),!U&&!R&&m==="evaluation"&&(d?e.jsx(Sm,{course:r}):e.jsx(wm,{courseId:h,detail:P,onReload:W})),!U&&!R&&!d&&m==="completion"&&e.jsx(km,{courseId:h,detail:P,onReload:W}),!U&&!R&&!d&&m==="certificate"&&I&&e.jsx(_m,{courseId:h,detail:P,onReload:W})]})}function Am({course:r,courseId:u,detail:c,onReload:d,onCourseUpdated:h,isHaksa:m=!1}){const[b,P]=o.useState(!1),[N,U]=o.useState(!1),[E,R]=o.useState(null),[v,I]=o.useState(""),[W,q]=o.useState(""),[p,G]=o.useState(!1),[H,T]=o.useState({courseName:"",courseType:"",programId:0,programName:""});o.useEffect(()=>{I(ls(c,"content1","")),q(ls(c,"content2",""))},[c]);const $=()=>{T({courseName:(r==null?void 0:r.subjectName)??ls(c,"course_nm",""),courseType:(r==null?void 0:r.courseType)??"",programId:Le((r==null?void 0:r.programId)??0,0),programName:(r==null?void 0:r.programName)??ls(c,"program_nm","-")}),G(!0)},O=()=>{G(!1),R(null)},B=p&&H.programId>0?{id:String(H.programId),classification:"\uACFC\uC815",name:H.programName,department:"-",major:"-",departmentName:"-"}:r&&0<Le(r.programId,0)?{id:String(r.programId),classification:"\uACFC\uC815",name:r.programName,department:"-",major:"-",departmentName:"-"}:null,x=async w=>{if(p){T(Y=>({...Y,programId:w?Le(w.id,0):0,programName:w?w.name:"-"})),P(!1);return}if(!u){R("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}const F=w?Le(w.id,0):0;if(w&&!F){R("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}U(!0),R(null);try{const Y=await ue.setCourseProgram({courseId:u,programId:F});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);h==null||h({...r,programId:F,programName:w?w.name:"-"}),await d()}catch(Y){R(Y instanceof Error?Y.message:"\uC18C\uC18D \uACFC\uC815 \uBCC0\uACBD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1),P(!1)}},_=async()=>{if(!u){R("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}U(!0),R(null);try{const w=Le((r==null?void 0:r.programId)??0,0);if(H.programId!==w){const F=await ue.setCourseProgram({courseId:u,programId:H.programId});if(F.rst_code!=="0000")throw new Error(F.rst_message)}h==null||h({...r,programId:H.programId,programName:H.programName}),await d(),G(!1)}catch(w){R(w instanceof Error?w.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}},k=async()=>{if(!u){R("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}U(!0),R(null);try{const w=await ue.updateCourseInfo({courseId:u,content1:v,content2:W});if(w.rst_code!=="0000")throw new Error(w.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await d()}catch(w){R(w instanceof Error?w.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}},j=(r==null?void 0:r.subjectName)??(c==null?void 0:c.course_nm)??"-",J=(r==null?void 0:r.courseId)??(c==null?void 0:c.course_id_conv)??(c==null?void 0:c.course_cd)??(c!=null&&c.id?String(c.id):u?String(u):"-"),A=(r==null?void 0:r.programName)??(c==null?void 0:c.program_nm)??"-",C=(r==null?void 0:r.period)??(c==null?void 0:c.period_conv)??"-",f=Le((r==null?void 0:r.students)??(c==null?void 0:c.student_cnt),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAE30\uBCF8 \uC815\uBCF4"}),!m&&!p&&e.jsxs("button",{onClick:$,disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]}),!m&&p&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:O,disabled:N,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-60",children:e.jsx("span",{children:"\uCDE8\uC18C"})}),e.jsxs("button",{onClick:()=>void _(),disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:N?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),m&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB41C \uB370\uC774\uD130\uC785\uB2C8\uB2E4. \uAE30\uBCF8 \uC815\uBCF4\uB294 \uC77D\uAE30 \uC804\uC6A9\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:E}),m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4DA} \uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uD55C\uAE00)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCourseName)||j||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uC601\uBB38)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCourseEname)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaCourseCode)||J||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uBD84\uBC18\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaBunbanCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uD615\uD0DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCategory)||(r==null?void 0:r.courseType)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD3D0\uAC15\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaVisible)==="Y"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(r==null?void 0:r.haksaVisible)==="Y"?"\uC815\uC0C1":(r==null?void 0:r.haksaVisible)==="N"?"\uD3D0\uAC15":(r==null?void 0:r.haksaVisible)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4C5} \uAC1C\uC124 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uC5F0\uB3C4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaOpenYear)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uD559\uAE30"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaOpenTerm)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC8FC\uCC28"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaWeek)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC2DC\uC791\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaStartdate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC885\uB8CC\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaEnddate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB300\uC0C1\uD559\uB144"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:r!=null&&r.haksaGrade?`${r.haksaGrade}\uD559\uB144`:"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F3EB} \uD559\uACFC/\uACFC\uC815 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaDeptName)||A||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaDeptCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaGradName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaGradCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCurriculumName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaCurriculumCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uBD80/\uB300\uD559\uC6D0 \uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaGroupCode)||"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F393} \uAC15\uC758 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC694\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaDayCd)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2DC\uAC04"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaHour1)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2E4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaClassroom)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC601\uBB38\uAC15\uC88C\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaEnglish)==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:(r==null?void 0:r.haksaEnglish)==="Y"?"\uC601\uBB38\uAC15\uC88C":(r==null?void 0:r.haksaEnglish)==="N"?"\uAD6D\uBB38\uAC15\uC88C":(r==null?void 0:r.haksaEnglish)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4CB} \uAE30\uD0C0 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaTypeSyllabus)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uC874\uC7AC\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaIsSyllabus)==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(r==null?void 0:r.haksaIsSyllabus)==="Y"?"\uC788\uC74C":(r==null?void 0:r.haksaIsSyllabus)==="N"?"\uC5C6\uC74C":(r==null?void 0:r.haksaIsSyllabus)||"-"})})]})]})]})]}):p?e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:j}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uACFC\uBAA9\uBA85\uC740 \uC218\uC815\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:J})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:(r==null?void 0:r.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsxs("button",{type:"button",onClick:()=>P(!0),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 text-left hover:border-blue-500 hover:ring-1 hover:ring-blue-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:H.programName}),e.jsx(Qt,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"\uD074\uB9AD\uD558\uC5EC \uC18C\uC18D \uACFC\uC815\uC744 \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:[f,"\uBA85"]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:J})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:(r==null?void 0:r.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:A})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:[f,"\uBA85"]})]})]}),e.jsx(sd,{isOpen:b,onClose:()=>P(!1),onSelect:w=>{x(w)},selectedCourse:B}),!m&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:v,onChange:w=>I(w.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uBAA9 \uC18C\uAC1C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uC2B5 \uBAA9\uD45C"}),e.jsx("textarea",{value:W,onChange:w=>q(w.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uC2B5 \uBAA9\uD45C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void k(),disabled:N,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:N?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})]})}function wm({courseId:r,detail:u,onReload:c}){const[d,h]=o.useState(!1),[m,b]=o.useState(null),[P,N]=o.useState({assignProgress:100,assignExam:0,assignHomework:0,assignForum:0,assignEtc:0,limitTotalScore:60,limitProgress:60,completeLimitProgress:60,completeLimitTotalScore:60,assignSurveyYn:"N",pushSurveyYn:"N",passYn:"N"});o.useEffect(()=>{u&&N({assignProgress:Nt(u,"assign_progress",100),assignExam:Nt(u,"assign_exam",0),assignHomework:Nt(u,"assign_homework",0),assignForum:Nt(u,"assign_forum",0),assignEtc:Nt(u,"assign_etc",0),limitTotalScore:Nt(u,"limit_total_score",60),limitProgress:Nt(u,"limit_progress",60),completeLimitProgress:Nt(u,"complete_limit_progress",60),completeLimitTotalScore:Nt(u,"complete_limit_total_score",60),assignSurveyYn:zs(u,"assign_survey_yn","N"),pushSurveyYn:zs(u,"push_survey_yn","N"),passYn:zs(u,"pass_yn","N")})},[u]);const U=o.useMemo(()=>P.assignProgress+P.assignExam+P.assignHomework+P.assignForum+P.assignEtc,[P.assignEtc,P.assignExam,P.assignForum,P.assignHomework,P.assignProgress]),E=P.passYn==="Y",R=async()=>{if(!r){b("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}h(!0),b(null);try{const I=await ue.updateCourseEvaluation({courseId:r,assignProgress:bs(P.assignProgress),assignExam:bs(P.assignExam),assignHomework:bs(P.assignHomework),assignForum:bs(P.assignForum),assignEtc:bs(P.assignEtc),assignSurveyYn:P.assignSurveyYn,pushSurveyYn:P.pushSurveyYn,passYn:P.passYn,limitTotalScore:bs(P.limitTotalScore),limitProgress:bs(P.limitProgress),completeLimitProgress:bs(P.completeLimitProgress),completeLimitTotalScore:bs(P.completeLimitTotalScore)});if(I.rst_code!=="0000")throw new Error(I.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(I){b(I instanceof Error?I.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{h(!1)}},v="w-full px-3 py-2 border border-gray-300 rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uAD8C\uC7A5: \uD569\uACC4 100)"})]}),e.jsxs("div",{className:`text-sm ${U===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",U]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D(\uC9C4\uB3C4)"}),e.jsx("input",{type:"number",value:P.assignProgress,onChange:I=>N(W=>({...W,assignProgress:Le(I.target.value,0)})),className:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:P.assignExam,onChange:I=>N(W=>({...W,assignExam:Le(I.target.value,0)})),className:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:P.assignHomework,onChange:I=>N(W=>({...W,assignHomework:Le(I.target.value,0)})),className:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD1A0\uB860"}),e.jsx("input",{type:"number",value:P.assignForum,onChange:I=>N(W=>({...W,assignForum:Le(I.target.value,0)})),className:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:P.assignEtc,onChange:I=>N(W=>({...W,assignEtc:Le(I.target.value,0)})),className:v})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uD569\uACA9) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC544\uB798 \uAE30\uC900\uC740 \uC218\uB8CC/\uD569\uACA9 \uD310\uC815 \uBC0F \uC131\uC801 \uC0C1\uD0DC \uD45C\uC2DC(\uBBF8\uB2EC/\uC218\uB8CC/\uD569\uACA9)\uC5D0 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."}),!E&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 text-orange-800 px-4 py-3 rounded-lg text-sm",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9\uC774 \uAEBC\uC838 \uC788\uC5B4\uC694. \uADF8\uB798\uC11C \uC9C0\uAE08\uC740 \u201C\uD569\uACA9 \uAE30\uC900\u201D \uC785\uB825\uCE78\uC744 \uC7A0\uAC00\uB450\uC5C8\uC2B5\uB2C8\uB2E4. (\uC218\uB8CC \uAE30\uC900\uB9CC \uC0AC\uC6A9\uB429\uB2C8\uB2E4)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:P.limitTotalScore,onChange:I=>N(W=>({...W,limitTotalScore:Le(I.target.value,0)})),className:`${v}${E?"":" bg-gray-100 text-gray-500"}`,disabled:!E})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:P.limitProgress,onChange:I=>N(W=>({...W,limitProgress:Le(I.target.value,0)})),className:`${v}${E?"":" bg-gray-100 text-gray-500"}`,disabled:!E})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uC644\uB8CC) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294 \uD658\uACBD\uC5D0\uC11C\uB294 \u201C\uC218\uB8CC(\uC644\uB8CC)\u201D\uAC00 \uCD5C\uC885 \uC0C1\uD0DC\uAC00 \uB429\uB2C8\uB2E4."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:P.completeLimitTotalScore,onChange:I=>N(W=>({...W,completeLimitTotalScore:Le(I.target.value,0)})),className:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:P.completeLimitProgress,onChange:I=>N(W=>({...W,completeLimitProgress:Le(I.target.value,0)})),className:v})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC635\uC158"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38\uCC38\uC5EC \uD3EC\uD568"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uC870\uAC74\uC5D0 \uC124\uBB38\uCC38\uC5EC \uC5EC\uBD80\uB97C \uD3EC\uD568\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.assignSurveyYn==="Y",onChange:I=>N(W=>({...W,assignSurveyYn:I.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38 \uB3C5\uB824"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC124\uBB38 \uB3C5\uB824 \uBA54\uC2DC\uC9C0/\uD45C\uC2DC \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.pushSurveyYn==="Y",onChange:I=>N(W=>({...W,pushSurveyYn:I.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uBA74 \u201C\uD569\uACA9\uC99D\u201D \uBC1C\uAE09\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.passYn==="Y",onChange:I=>N(W=>({...W,passYn:I.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void R(),disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:d?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function rd(r){const u=(r.template_nm||"").trim(),c=(r.template_cd||"").trim();return u&&c?`${u} (${c})`:u||c||`\uD15C\uD50C\uB9BF #${r.id}`}function km({courseId:r,detail:u,onReload:c}){const[d,h]=o.useState([]),[m,b]=o.useState(!1),[P,N]=o.useState(!1),[U,E]=o.useState(null),[R,v]=o.useState("Y"),[I,W]=o.useState(0),[q,p]=o.useState("N"),[G,H]=o.useState(""),[T,$]=o.useState(0),[O,B]=o.useState("R"),[x,_]=o.useState("A");o.useEffect(()=>{let j=!1;return(async()=>{b(!0);try{const A=await ue.getCertificateTemplates({templateType:"C"});if(A.rst_code!=="0000")throw new Error(A.rst_message);j||h(A.rst_data??[])}catch{j||h([])}finally{j||b(!1)}})(),()=>{j=!0}},[]),o.useEffect(()=>{u&&(v(zs(u,"cert_complete_yn","Y")),W(Nt(u,"cert_template_id",0)),p(zs(u,"complete_no_yn","N")),H(ls(u,"complete_prefix","")),$(Nt(u,"postfix_cnt",0)),B(ls(u,"postfix_type","R")==="C"?"C":"R"),_(ls(u,"postfix_ord","A")==="D"?"D":"A"))},[u]);const k=async()=>{if(!r){E("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!u){E("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}N(!0),E(null);try{const j=await ue.updateCourseCertificateSettings({courseId:r,certCompleteYn:R,certTemplateId:I,passCertTemplateId:Nt(u,"pass_cert_template_id",0),completeNoYn:q,completePrefix:G,postfixCnt:Math.max(0,Le(T,0)),postfixType:O,postfixOrd:x});if(j.rst_code!=="0000")throw new Error(j.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(j){E(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}};return e.jsxs("div",{className:"space-y-6",children:[U&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:U}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uC99D \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC\uC99D \uCD9C\uB825 \uBC84\uD2BC\uC744 \uC0AC\uC6A9\uD560\uC9C0 \uC5EC\uBD80\uB97C \uC124\uC815\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:R==="Y",onChange:j=>v(j.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uC99D \uD15C\uD50C\uB9BF"}),e.jsxs("select",{value:I,onChange:j=>W(Le(j.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:m,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),d.map(j=>e.jsx("option",{value:j.id,children:rd(j)},j.id))]}),m&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uBC88\uD638 \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uCC98\uB9AC \uC2DC \uC218\uB8CC\uBC88\uD638\uB97C \uC0DD\uC131/\uBD80\uC5EC\uD558\uB294 \uADDC\uCE59\uC785\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:q==="Y",onChange:j=>p(j.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uC55E\uC790\uB9AC(\uC811\uB450)"}),e.jsx("input",{type:"text",value:G,onChange:j=>H(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"\uC608: 2025-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uB4B7\uC790\uB9AC\uC218"}),e.jsx("input",{type:"number",value:T,onChange:j=>$(Le(j.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right",min:0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB4B7\uC790\uB9AC \uBC29\uC2DD"}),e.jsxs("select",{value:O,onChange:j=>B(j.target.value==="C"?"C":"R"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"R",children:"\uC218\uAC15\uC21C\uBC88"}),e.jsx("option",{value:"C",children:"\uC218\uAC15\uC0DD\uC544\uC774\uB514"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C \uBC29\uC2DD"}),e.jsxs("select",{value:x,onChange:j=>_(j.target.value==="D"?"D":"A"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"A",children:"\uC624\uB984\uCC28\uC21C"}),e.jsx("option",{value:"D",children:"\uB0B4\uB9BC\uCC28\uC21C"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void k(),disabled:P,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:P?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function _m({courseId:r,detail:u,onReload:c}){const[d,h]=o.useState([]),[m,b]=o.useState(!1),[P,N]=o.useState(!1),[U,E]=o.useState(null),[R,v]=o.useState(0);o.useEffect(()=>{let W=!1;return(async()=>{b(!0);try{const p=await ue.getCertificateTemplates({templateType:"P"});if(p.rst_code!=="0000")throw new Error(p.rst_message);W||h(p.rst_data??[])}catch{W||h([])}finally{W||b(!1)}})(),()=>{W=!0}},[]),o.useEffect(()=>{u&&v(Nt(u,"pass_cert_template_id",0))},[u]);const I=async()=>{if(!r){E("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!u){E("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}N(!0),E(null);try{const W=await ue.updateCourseCertificateSettings({courseId:r,certCompleteYn:zs(u,"cert_complete_yn","Y"),certTemplateId:Nt(u,"cert_template_id",0),passCertTemplateId:R,completeNoYn:zs(u,"complete_no_yn","N"),completePrefix:ls(u,"complete_prefix",""),postfixCnt:Nt(u,"postfix_cnt",0),postfixType:ls(u,"postfix_type","R")==="C"?"C":"R",postfixOrd:ls(u,"postfix_ord","A")==="D"?"D":"A"});if(W.rst_code!=="0000")throw new Error(W.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(W){E(W instanceof Error?W.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}};return e.jsxs("div",{className:"space-y-6",children:[U&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:U}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD569\uACA9\uC99D \uD15C\uD50C\uB9BF"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9\uC99D \uCD9C\uB825 \uC2DC \uC0AC\uC6A9\uD560 \uD15C\uD50C\uB9BF\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4. (\uBBF8\uC9C0\uC815\uC774\uBA74 \uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4)"}),e.jsxs("select",{value:R,onChange:W=>v(Le(W.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:m,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),d.map(W=>e.jsx("option",{value:W.id,children:rd(W)},W.id))]}),m&&e.jsx("p",{className:"text-sm text-gray-500",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void I(),disabled:P,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:P?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function Sm({course:r}){const u=o.useMemo(()=>Hs({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),c=r==null?void 0:r.id,[d,h]=o.useState({attendance:20,exam:40,assignment:30,etc:10}),[m,b]=o.useState({"A+":95,A:90,"B+":85,B:80,"C+":75,C:70,"D+":65,D:60,F:0}),[P,N]=o.useState(!1),[U,E]=o.useState(!1),[R,v]=o.useState(null);o.useEffect(()=>{if(!u)return;let p=!1;return(async()=>{E(!0),v(null);try{const H=await ue.getHaksaCourseEval(u);if(H.rst_code!=="0000")throw new Error(H.rst_message);const T=Array.isArray(H.rst_data)?H.rst_data[0]:H.rst_data,$=(T==null?void 0:T.eval_json)||"";if($)try{const O=JSON.parse($);if(!p){h(O.weights);const B=O.cutoffs||{};b({"A+":Le(B["A+"],95),A:Le(B.A,90),"B+":Le(B["B+"],85),B:Le(B.B,80),"C+":Le(B["C+"],75),C:Le(B.C,70),"D+":Le(B["D+"],65),D:Le(B.D,60),F:Math.max(0,Le(B.D??60,60)-1)})}return}catch{}if(c)try{const O=localStorage.getItem(`haksa_eval_weights_${c}`),B=localStorage.getItem(`haksa_eval_cutoffs_${c}`);if(O&&B){const x={weights:JSON.parse(O),cutoffs:JSON.parse(B)};if(!p){h(x.weights);const _=x.cutoffs||{};b({"A+":Le(_["A+"],95),A:Le(_.A,90),"B+":Le(_["B+"],85),B:Le(_.B,80),"C+":Le(_["C+"],75),C:Le(_.C,70),"D+":Le(_["D+"],65),D:Le(_.D,60),F:Math.max(0,Le(_.D??60,60)-1)})}await ue.updateHaksaCourseEval({...u,evalJson:JSON.stringify(x)})}}catch{}}catch(H){p||v(H instanceof Error?H.message:"\uD3C9\uAC00 \uAE30\uC900\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{p||E(!1)}})(),()=>{p=!0}},[u,c]);const I=d.attendance+d.exam+d.assignment+d.etc,W=()=>{if(!u){v("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}N(!0),v(null),(async()=>{try{const p={weights:d,cutoffs:{...m,F:Math.max(0,Le(m.D,60)-1)}},G=await ue.updateHaksaCourseEval({...u,evalJson:JSON.stringify(p)});if(G.rst_code!=="0000")throw new Error(G.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(p){v(p instanceof Error?p.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}})()},q="w-full px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:R}),U&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC544\uB798 \uC124\uC815\uC740 \uC774 \uACFC\uBAA9\uC758 \uC131\uC801 \uD310\uC815 \uAE30\uC900\uC73C\uB85C \uC0AC\uC6A9\uB429\uB2C8\uB2E4."]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{className:`text-sm font-medium ${I===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",I]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D"}),e.jsx("input",{type:"number",value:d.attendance,onChange:p=>h(G=>({...G,attendance:Le(p.target.value,0)})),className:q,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:d.exam,onChange:p=>h(G=>({...G,exam:Le(p.target.value,0)})),className:q,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:d.assignment,onChange:p=>h(G=>({...G,assignment:Le(p.target.value,0)})),className:q,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:d.etc,onChange:p=>h(G=>({...G,etc:Le(p.target.value,0)})),className:q,min:0,max:100})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC131\uC801 \uB4F1\uAE09 \uAE30\uC900 (A+~D)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uAC01 \uB4F1\uAE09\uC758 \uCD5C\uC18C \uC810\uC218\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uD574\uB2F9 \uC810\uC218 \uC774\uC0C1\uC774\uBA74 \uD574\uB2F9 \uB4F1\uAE09)"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2 text-center",children:"A+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["A+"],onChange:p=>b(G=>({...G,"A+":Le(p.target.value,95)})),className:`${q} bg-blue-100 border-blue-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-1",children:"~100\uC810"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2 text-center",children:"A \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.A,onChange:p=>b(G=>({...G,A:Le(p.target.value,90)})),className:`${q} bg-blue-50 border-blue-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["A+"]-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2 text-center",children:"B+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["B+"],onChange:p=>b(G=>({...G,"B+":Le(p.target.value,85)})),className:`${q} bg-green-100 border-green-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.A-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2 text-center",children:"B \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.B,onChange:p=>b(G=>({...G,B:Le(p.target.value,80)})),className:`${q} bg-green-50 border-green-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["B+"]-1,"\uC810"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-2 text-center",children:"C+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["C+"],onChange:p=>b(G=>({...G,"C+":Le(p.target.value,75)})),className:`${q} bg-yellow-100 border-yellow-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.B-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2 text-center",children:"C \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.C,onChange:p=>b(G=>({...G,C:Le(p.target.value,70)})),className:`${q} bg-yellow-50 border-yellow-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["C+"]-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800 mb-2 text-center",children:"D+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["D+"],onChange:p=>b(G=>({...G,"D+":Le(p.target.value,65)})),className:`${q} bg-orange-100 border-orange-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.C-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2 text-center",children:"D \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.D,onChange:p=>b(G=>({...G,D:Le(p.target.value,60)})),className:`${q} bg-orange-50 border-orange-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["D+"]-1,"\uC810"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\uB4F1\uAE09 \uC694\uC57D"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsxs("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full",children:["A+: ",m["A+"],"~100\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:["A: ",m.A,"~",m["A+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-green-200 text-green-800 rounded-full",children:["B+: ",m["B+"],"~",m.A-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full",children:["B: ",m.B,"~",m["B+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-200 text-yellow-800 rounded-full",children:["C+: ",m["C+"],"~",m.B-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:["C: ",m.C,"~",m["C+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-200 text-orange-800 rounded-full",children:["D+: ",m["D+"],"~",m.C-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full",children:["D: ",m.D,"~",m["D+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full",children:["F: 0~",m.D-1,"\uC810"]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:W,disabled:P,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:P?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function Mc({isOpen:r,onClose:u,onSave:c,mode:d="create",showWeekSession:h=!1,weekCount:m=15,initialData:b}){const[N,U]=o.useState({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null});if(o.useEffect(()=>{r&&d==="edit"&&b?U({title:b.title||"",description:b.description||"",dueDate:b.dueDate||"",dueTime:b.dueTime||"",totalScore:b.totalScore??100,submissionType:b.submissionType||"file",fileTypes:b.fileTypes||"",maxFileSize:b.maxFileSize??10,allowLateSubmission:b.allowLateSubmission??!1,latePenalty:b.latePenalty??0,weekNumber:b.weekNumber??1,sessionNumber:b.sessionNumber??1,file:null}):r&&d==="create"&&U({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null})},[r,d,b]),!r)return null;const E=v=>{v.preventDefault(),c(N),u()},R=d==="edit";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:R?"\uACFC\uC81C \uC218\uC815":"\uACFC\uC81C \uB4F1\uB85D"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.title,onChange:v=>U({...N,title:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),h&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:N.weekNumber,onChange:v=>U({...N,weekNumber:parseInt(v.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:m},(v,I)=>I+1).map(v=>e.jsxs("option",{value:v,children:[v,"\uC8FC\uCC28"]},v))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:N.sessionNumber,onChange:v=>U({...N,sessionNumber:parseInt(v.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(v,I)=>I+1).map(v=>e.jsxs("option",{value:v,children:[v,"\uCC28\uC2DC"]},v))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:N.description,onChange:v=>U({...N,description:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:N.dueDate,onChange:v=>U({...N,dueDate:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:N.dueTime,onChange:v=>U({...N,dueTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:N.totalScore,onChange:v=>U({...N,totalScore:parseInt(v.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N.submissionType,onChange:v=>U({...N,submissionType:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(N.submissionType==="file"||N.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:v=>{const I=v.target.files&&v.target.files[0]?v.target.files[0]:null;U({...N,file:I})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),N.file&&e.jsx("button",{type:"button",onClick:()=>U({...N,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),N.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",N.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:N.fileTypes,onChange:v=>U({...N,fileTypes:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:N.maxFileSize,onChange:v=>U({...N,maxFileSize:parseInt(v.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:N.allowLateSubmission,onChange:v=>U({...N,allowLateSubmission:v.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),N.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:N.latePenalty,onChange:v=>U({...N,latePenalty:parseInt(v.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:R?"\uC218\uC815":"\uB4F1\uB85D"})]})]})]})})}function Em({isOpen:r,onClose:u,onEdit:c,assignment:d}){if(!r||!d)return null;const h=()=>{u(),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"bg-purple-600 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"\uACFC\uC81C \uC0C1\uC138 \uC815\uBCF4"}),e.jsx("button",{onClick:u,className:"text-white/80 hover:text-white transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C\uBA85"})]}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:d.title})]}),d.description&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uC124\uBA85"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-3 rounded-lg",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(kC,{className:"w-4 h-4"}),e.jsx("span",{children:"\uB9C8\uAC10\uC77C"})]}),e.jsx("p",{className:"text-gray-900 font-medium",children:d.dueDate||"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Il,{className:"w-4 h-4"}),e.jsx("span",{children:"\uBC30\uC810"})]}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[d.totalScore||0,"\uC810"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[e.jsx(vn,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC81C\uCD9C \uD604\uD669"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full",style:{width:d.total&&d.total>0?`${(d.submitted||0)/d.total*100}%`:"0%"}})}),e.jsxs("span",{className:"text-gray-900 font-medium whitespace-nowrap",children:[d.submitted||0," / ",d.total||0,"\uBA85"]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"\uB2EB\uAE30"}),e.jsxs("button",{onClick:h,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]})]})]})})}function Fm({isOpen:r,onClose:u,courseId:c,task:d,onRefresh:h}){const[m,b]=o.useState((d==null?void 0:d.feedback)||""),[P,N]=o.useState(!1);if(!r||!d)return null;const U=async()=>{N(!0);try{const E=await ue.confirmHomeworkTask({courseId:c,taskId:d.id,feedback:m});if(E.rst_code!=="0000")throw new Error(E.rst_message);alert("\uD3C9\uAC00\uC644\uB8CC \uCC98\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),h(),u()}catch(E){alert(E instanceof Error?E.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCD94\uAC00 \uACFC\uC81C \uC0C1\uC138 \uD655\uC778"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(Us,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uC9C0\uC2DC \uB0B4\uC6A9"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 text-gray-800 text-sm whitespace-pre-wrap",children:d.task}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fr,{className:"w-3 h-3"}),"\uBD80\uC5EC: ",d.reg_date_conv]})})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(bm,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD559\uC0DD \uC81C\uCD9C \uB0B4\uC6A9"})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${d.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:d.submit_yn_label})]}),d.submit_yn==="Y"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[d.subject&&e.jsx("div",{className:"font-semibold text-gray-900 mb-2 border-b border-gray-200 pb-2",children:d.subject}),e.jsx("div",{className:"text-gray-800 text-sm whitespace-pre-wrap min-h-[100px]",children:d.content||"\uB0B4\uC6A9 \uC5C6\uC74C"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uC81C\uCD9C: ",d.submit_date_conv]})]}):e.jsx("div",{className:"py-10 text-center text-gray-400 border border-dashed border-gray-200 rounded-lg",children:"\uC544\uC9C1 \uC81C\uCD9C\uB41C \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD50\uC218\uC790 \uD53C\uB4DC\uBC31 \uBC0F \uD3C9\uAC00"})]}),e.jsx("textarea",{value:m,onChange:E=>b(E.target.value),placeholder:"\uCD94\uAC00 \uACFC\uC81C\uC5D0 \uB300\uD55C \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none min-h-[120px]"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 font-semibold",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uB2EB\uAE30"}),d.submit_yn==="Y"&&e.jsx("button",{onClick:U,disabled:P,className:"px-6 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:P?e.jsx("span",{children:"\uCC98\uB9AC \uC911..."}):e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD3C9\uAC00\uC644\uB8CC(\uD655\uC778)"})]})})]})]})]})}function Ou({isOpen:r,onClose:u,onSelect:c,multiSelect:d=!0,onMultiSelect:h,recommendContext:m,excludeLessonIds:b}){const P="recommend",[U,E]=o.useState(""),[R,v]=o.useState(""),[I,W]=o.useState(P),[q,p]=o.useState(""),[G,H]=o.useState(""),[T,$]=o.useState(""),[O,B]=o.useState(!1),[x,_]=o.useState([]),[k,j]=o.useState([]),[J,A]=o.useState(0),[C,f]=o.useState(1),[w,F]=o.useState(!1),[Y,L]=o.useState(!1),[S,D]=o.useState(!1),[y,K]=o.useState(null),[ae,le]=o.useState([]),[Be,we]=o.useState([]),[ee,te]=o.useState(!1),[oe,be]=o.useState(""),[ve,ne]=o.useState(new Set),[ge,fe]=o.useState(null),$e=20,re=(ie,Ne)=>{if(ie.stopPropagation(),!Ne.mediaKey)return;const Se=`/kollus/preview.jsp?key=${encodeURIComponent(Ne.mediaKey)}`,Ke=Math.max(Number(Ne.contentWidth??0),900),ze=Math.max(Number(Ne.contentHeight??0),506);window.open(Se,"_blank",`width=${Ke},height=${ze},resizable=yes,scrollbars=yes`)||K("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};Me.useEffect(()=>{r&&(E(""),v(""),W(P),f(1),_([]),A(0),we([]),le([]),be(""),ne(new Set),p(""),H(""),$(""))},[r]),Me.useEffect(()=>{r&&(f(1),_([]),A(0),ne(new Set),K(null))},[r,I]),Me.useEffect(()=>{r&&I==="all"&&(f(1),_([]),A(0),ne(new Set))},[r,I,U,R]),Me.useEffect(()=>{r||ne(new Set)},[r]),Me.useEffect(()=>{if(!r||I!=="all")return;let ie=!1;const Ne=setTimeout(()=>{(async()=>{const Ke=C===1;F(Ke),L(!Ke),K(null);try{const ze=await ue.getKollusList({keyword:U,categoryKey:R||void 0,page:C,limit:$e});if(ze.rst_code!=="0000")throw new Error(ze.rst_message);const At=(ze.rst_data??[]).map(Xe=>({id:String(Xe.id||Xe.media_content_key),mediaKey:Xe.media_content_key,title:Xe.title,description:Xe.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${Xe.original_file_name}`:"",category:Xe.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:Xe.thumbnail||Xe.snapshot_url||"",duration:Xe.duration||"-",totalTime:Number(Xe.total_time??0),contentWidth:Number(Xe.content_width??0),contentHeight:Number(Xe.content_height??0),originalFileName:Xe.original_file_name||""})),Ve=Array.isArray(ze.rst_categories)?ze.rst_categories:[];ie||(_(Xe=>Ke?At:[...Xe,...At]),A(Number(ze.rst_total??At.length)),Ve.length>0&&j(Ve))}catch(ze){ie||K(ze instanceof Error?ze.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ie||(F(!1),L(!1))}})()},250);return()=>{ie=!0,clearTimeout(Ne)}},[r,I,U,R,C]),Me.useEffect(()=>{if(!r||I!=="recommend")return;let ie=!1;const Ne=setTimeout(()=>{(async()=>{const Ke=JSON.stringify({courseName:(m==null?void 0:m.courseName)??"",courseIntro:(m==null?void 0:m.courseIntro)??"",courseDetail:(m==null?void 0:m.courseDetail)??"",lessonTitle:(m==null?void 0:m.lessonTitle)??"",lessonDescription:(m==null?void 0:m.lessonDescription)??"",keywords:U??"",topK:120,similarityThreshold:.2});if(!(ae.length>0&&oe===Ke)){te(!0),K(null);try{const ze=await ue.getContentRecommendations({courseName:m==null?void 0:m.courseName,courseIntro:m==null?void 0:m.courseIntro,courseDetail:m==null?void 0:m.courseDetail,lessonTitle:m==null?void 0:m.lessonTitle,lessonDescription:m==null?void 0:m.lessonDescription,keywords:U,topK:120,similarityThreshold:.2});if(ze.rst_code!=="0000")throw new Error(ze.rst_message);const At=(ze.rst_data??[]).map((Ve,Xe)=>{const ts=String(Ve.lesson_id??Ve.id??Ve.media_content_key??"").trim();return{id:ts?`${ts}__${Xe}`:String(Xe),mediaKey:Ve.media_content_key||ts,title:Ve.title,description:"",category:Ve.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:Ve.thumbnail||Ve.snapshot_url||"",duration:Ve.duration||"-",totalTime:Number(Ve.total_time??0),contentWidth:Number(Ve.content_width??0),contentHeight:Number(Ve.content_height??0),lessonId:ts||void 0,originalFileName:Ve.original_file_name||"",score:Ve.score?Number(Ve.score):void 0,summary:Ve.summary||"",keywords:Ve.keywords||""}});ie||(le(At),be(Ke))}catch(ze){ie||K(ze instanceof Error?ze.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ie||te(!1)}}})()},250);return()=>{ie=!0,clearTimeout(Ne)}},[r,I,U,ae.length,oe,m==null?void 0:m.courseName,m==null?void 0:m.courseIntro,m==null?void 0:m.courseDetail,m==null?void 0:m.lessonTitle,m==null?void 0:m.lessonDescription]),Me.useEffect(()=>{if(!r||I!=="recommend")return;const ie=new Set;(b??[]).forEach(Se=>{ie.add(String(Se))});const Ne=ae.filter(Se=>!(!Se.lessonId||ie.has(Se.lessonId))).slice(0,50);we(Ne)},[r,I,b,ae]);const Te=I==="recommend"?Be:x,z=I==="recommend"?Be.length:J,de=ie=>{if(d){ne(Ne=>{const Se=new Set(Ne);return Se.has(ie.id)?Se.delete(ie.id):Se.add(ie.id),Se});return}he(ie)},he=async ie=>{try{if(D(!0),ie.lessonId){const ze={...ie,id:ie.lessonId};c(ze),u();return}const Ne=await ue.upsertKollusLesson({mediaContentKey:ie.mediaKey,title:ie.title,totalTime:ie.totalTime,contentWidth:ie.contentWidth,contentHeight:ie.contentHeight});if(Ne.rst_code!=="0000")throw new Error(Ne.rst_message);const Se=Number(Ne.rst_data??0),Ke={...ie,lessonId:Se,id:String(Se)};c(Ke),u()}catch(Ne){K(Ne instanceof Error?Ne.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}},Fe=async()=>{const ie=Te.filter(Ne=>ve.has(Ne.id));if(ie.length!==0)try{D(!0);const Ne=await Promise.all(ie.map(async Se=>{if(Se.lessonId)return{...Se,id:Se.lessonId};const Ke=await ue.upsertKollusLesson({mediaContentKey:Se.mediaKey,title:Se.title,totalTime:Se.totalTime,contentWidth:Se.contentWidth,contentHeight:Se.contentHeight});if(Ke.rst_code!=="0000")throw new Error(Ke.rst_message);const ze=Number(Ke.rst_data??0);return{...Se,lessonId:ze,id:String(ze)}}));h?h(Ne):Ne.forEach(Se=>c(Se)),u()}catch(Ne){K(Ne instanceof Error?Ne.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}},ye=()=>{const ie=Te.map(Se=>Se.id),Ne=ie.length>0&&ie.every(Se=>ve.has(Se));ne(Se=>{const Ke=new Set(Se);return Ne?ie.forEach(ze=>Ke.delete(ze)):ie.forEach(ze=>Ke.add(ze)),Ke})},je=async()=>{if(!q.trim()){K("URL\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!G.trim()){K("\uAC15\uC758\uBA85\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!q.startsWith("http://")&&!q.startsWith("https://")){K("URL\uC740 http:// \uB610\uB294 https://\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4.");return}try{B(!0),K(null);const ie=await ue.upsertExternalLinkLesson({url:q.trim(),title:G.trim(),totalTime:typeof T=="number"?T:void 0});if(ie.rst_code!=="0000")throw new Error(ie.rst_message);const Ne=Number(ie.rst_data??0),Se={id:String(Ne),mediaKey:q.trim(),title:G.trim(),description:"",category:"\uC678\uBD80\uB9C1\uD06C",thumbnail:"",totalTime:typeof T=="number"?T:0,lessonId:Ne};h?h([Se]):c(Se),u()}catch(ie){K(ie instanceof Error?ie.message:"\uC678\uBD80\uB9C1\uD06C \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B(!1)}};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-gray-900",children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ot,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>W("recommend"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${I==="recommend"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"\uCD94\uCC9C"}),e.jsx("button",{type:"button",onClick:()=>W("all"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${I==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"\uC804\uCCB4"}),e.jsxs("button",{type:"button",onClick:()=>W("external"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${I==="external"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Lc,{className:"w-4 h-4"}),"\uC678\uBD80\uB9C1\uD06C"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",z,"\uAC74"]})]}),I!=="external"&&e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:U,onChange:ie=>E(ie.target.value),placeholder:I==="recommend"?"\uCD94\uCC9C \uD0A4\uC6CC\uB4DC \uCD94\uAC00...":"\uC81C\uBAA9\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),I==="all"&&e.jsxs("select",{value:R,onChange:ie=>v(ie.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),k.map(ie=>e.jsx("option",{value:ie.key,children:ie.name},ie.key))]})]}),I!=="external"&&e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",e.jsx("span",{className:"text-blue-600 font-medium",children:I==="all"?J:z}),"\uAC74"]}),d&&e.jsxs("button",{onClick:Fe,disabled:ve.size===0||S,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${ve.size>0&&!S?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Pl,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC120\uD0DD\uCD94\uAC00 (",ve.size,"\uAC74)"]})]})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:y}),I==="external"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uC678\uBD80 URL\uB85C \uCF58\uD150\uCE20 \uCD94\uAC00"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"url",value:q,onChange:ie=>p(ie.target.value),placeholder:"https://example.com/video",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Vimeo \uB4F1 \uC678\uBD80 \uC601\uC0C1 URL\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\uAC15\uC758\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:G,onChange:ie=>H(ie.target.value),placeholder:"\uAC15\uC758 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uD559\uC2B5\uC2DC\uAC04 (\uBD84)"}),e.jsx("input",{type:"number",min:"0",value:T,onChange:ie=>$(ie.target.value===""?"":Number(ie.target.value)),placeholder:"\uC608: 30",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{type:"button",onClick:je,disabled:O,className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[e.jsx(Lc,{className:"w-4 h-4"}),O?"\uCD94\uAC00 \uC911...":"\uC678\uBD80\uB9C1\uD06C \uCD94\uAC00"]})})]})]}),I!=="external"&&(w||ee)&&e.jsx("div",{className:"py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),I!=="external"&&!w&&!ee&&e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[d&&e.jsx("th",{className:"px-3 py-2 w-10",children:e.jsx("input",{type:"checkbox",checked:Te.length>0&&Te.every(ie=>ve.has(ie.id)),onChange:ye,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"No"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:I==="recommend"?"\uC81C\uBAA9 / \uD0A4\uC6CC\uB4DC":"\uAC15\uC758\uBA85"}),I!=="recommend"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uC2DC\uAC04"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uC6D0\uBCF8\uD30C\uC77C"})]}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uBBF8\uB9AC\uBCF4\uAE30"}),I==="recommend"&&e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uB0B4\uC6A9"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Te.map((ie,Ne)=>e.jsxs(Me.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-blue-50 cursor-pointer transition-colors ${ve.has(ie.id)?"bg-blue-50":""}`,onClick:()=>de(ie),children:[d&&e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:ve.has(ie.id),onChange:()=>{},className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:Ne+1}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:ie.category})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("div",{className:"truncate font-medium",children:ie.title}),I==="recommend"&&ie.keywords&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:ie.keywords.split(",").slice(0,5).map((Se,Ke)=>e.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:Se.trim()},Ke))})]})}),I!=="recommend"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-600",children:ie.totalTime?`${ie.totalTime}\uBD84`:ie.duration}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-500 max-w-xs truncate",children:ie.originalFileName||"-"})]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsxs("button",{type:"button",onClick:Se=>re(Se,ie),disabled:!ie.mediaKey,className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"\uC601\uC0C1 \uBBF8\uB9AC\uBCF4\uAE30",children:[e.jsx(Rl,{className:"w-3 h-3"}),e.jsx("span",{children:"\uBBF8\uB9AC\uBCF4\uAE30"})]})}),I==="recommend"&&e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:Se=>{Se.stopPropagation(),fe(ge===ie.id?null:ie.id)},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 rounded transition-colors",children:ge===ie.id?"\uB2EB\uAE30":"\uBCF4\uAE30"})})]}),I==="recommend"&&ge===ie.id&&ie.summary&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:d?5:4,className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:[e.jsx("strong",{className:"text-gray-900",children:"\uC694\uC57D:"})," ",ie.summary]})})})]},ie.id))})]}),Te.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:I==="recommend"?"\uCD94\uCC9C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]}),!w&&!ee&&I==="all"&&x.length<J&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"button",onClick:()=>f(ie=>ie+1),disabled:Y,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:Y?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})})]})]})}):null}const nd=({courseId:r,courseName:u,onClose:c,onSaveComplete:d,embedded:h=!1})=>{const[m,b]=Me.useState([]),[P,N]=Me.useState([]),[U,E]=Me.useState(!1),[R,v]=Me.useState(!1),[I,W]=Me.useState(null),[q,p]=Me.useState(!1),[G,H]=Me.useState(null),T=Me.useCallback(async()=>{if(r){E(!0),W(null);try{const L=await ue.getCurriculum({courseId:r});if(L.rst_code!=="0000")throw new Error(L.rst_message);const S=L.rst_data??[],D=new Map;S.forEach(K=>{const ae=K.section_id||0;D.has(ae)||D.set(ae,{sectionId:ae,sectionName:K.section_nm||`${K.chapter}\uCC28\uC2DC`,lessons:[]}),D.get(ae).lessons.push({lessonId:K.lesson_id,lessonName:K.lesson_nm||"",lessonType:K.lesson_type||"",lessonTypeConv:K.lesson_type_conv||"",onoffType:K.onoff_type||"",onoffTypeConv:K.onoff_type_conv||"",totalTime:K.total_time_min||0,completeTime:K.complete_time_min||0,duration:K.duration_conv||"",chapter:K.chapter})});const y=Array.from(D.values());b(y),N(JSON.parse(JSON.stringify(y)))}catch(L){W(L instanceof Error?L.message:"\uCC28\uC2DC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{E(!1)}}},[r]);Me.useEffect(()=>{T()},[T]);const $=()=>{const L=Date.now();b([...m,{sectionId:L,sectionName:`${m.length+1}\uCC28\uC2DC`,lessons:[],isNew:!0}])},O=(L,S)=>{b(m.map(D=>D.sectionId===L?{...D,sectionName:S}:D))},B=L=>{b(m.filter(S=>S.sectionId!==L))},x=L=>{H(L),p(!0)},_=L=>{G!==null&&L.forEach(S=>k(G,S)),p(!1),H(null)},k=(L,S)=>{b(D=>D.map(y=>{if(y.sectionId===L){const K=S.lessonId??S.id;if(y.lessons.find(le=>String(le.lessonId)===String(K)))return y;const ae={lessonId:K,lessonName:S.title,lessonType:S.lessonType||S.lesson_type||"05",lessonTypeConv:S.category||"",totalTime:S.totalTime||0,completeTime:S.totalTime||0,duration:S.duration||"",isNew:!0};return{...y,lessons:[...y.lessons,ae]}}return y}))},j=(L,S)=>{b(m.map(D=>D.sectionId===L?{...D,lessons:D.lessons.filter(y=>y.lessonId!==S)}:D))},J=(L,S,D)=>{b(m.map(y=>y.sectionId===L?{...y,lessons:y.lessons.map(K=>K.lessonId===S?{...K,completeTime:D}:K)}:y))},A=(L,S)=>{S!==0&&b(m.map(D=>{if(D.sectionId===L){const y=[...D.lessons];return[y[S-1],y[S]]=[y[S],y[S-1]],{...D,lessons:y}}return D}))},C=(L,S)=>{b(m.map(D=>{if(D.sectionId===L){if(S>=D.lessons.length-1)return D;const y=[...D.lessons];return[y[S],y[S+1]]=[y[S+1],y[S]],{...D,lessons:y}}return D}))},f=async()=>{v(!0),W(null);try{const L=new Set;P.forEach(ae=>{ae.lessons.forEach(le=>{le.isNew||L.add(Number(le.lessonId))})});const S=new Set;m.forEach(ae=>{ae.lessons.forEach(le=>{le.isNew||S.add(Number(le.lessonId))})});for(const ae of L)if(!S.has(ae)){const le=await ue.deleteCurriculumLesson({courseId:r,lessonId:ae});if(le.rst_code!=="0000")throw new Error(le.rst_message)}const D=new Set(P.map(ae=>ae.sectionId)),y=new Set(m.filter(ae=>!ae.isNew).map(ae=>ae.sectionId));for(const ae of D)!y.has(ae)&&ae!==0&&await ue.deleteCurriculumSection({courseId:r,sectionId:ae});for(const ae of m)if(ae.isNew){const le=await ue.insertCurriculumSection({courseId:r,sectionName:ae.sectionName});if(le.rst_code!=="0000")throw new Error(le.rst_message);ae.sectionId=le.rst_data||ae.sectionId,ae.isNew=!1}for(const ae of m)for(const le of ae.lessons)if(le.isNew){const Be=await ue.addCurriculumLesson({courseId:r,sectionId:ae.sectionId,lessonId:Number(le.lessonId)});if(Be.rst_code!=="0000")throw new Error(Be.rst_message);le.isNew=!1}let K=0;for(const ae of m)for(const le of ae.lessons)K++,le.isNew||await ue.updateCurriculumLesson({courseId:r,lessonId:Number(le.lessonId),chapter:K,sectionId:ae.sectionId,completeTime:le.completeTime});alert("\uCC28\uC2DC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await T(),d==null||d()}catch(L){const S=L instanceof Error?L.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";W(S),alert("\uC800\uC7A5 \uC2E4\uD328: "+S)}finally{v(!1)}},w=m.reduce((L,S)=>L+S.lessons.length,0),F=h?"bg-white":"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",Y=h?"":"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col";return e.jsxs("div",{className:F,children:[e.jsxs("div",{className:Y,children:[!h&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCC28\uC2DC \uD3B8\uC9D1"}),u&&e.jsx("p",{className:"text-sm text-gray-600",children:u})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:h?"":"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCC28\uC2DC ",m.length,"\uAC1C \xB7 \uB808\uC2A8 ",w,"\uAC1C"]}),e.jsxs("button",{type:"button",onClick:$,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),U&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),I&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:I}),!U&&m.map((L,S)=>e.jsxs("div",{className:"mb-4 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[S+1,"\uCC28\uC2DC"]}),e.jsx("input",{type:"text",value:L.sectionName,onChange:D=>O(L.sectionId,D.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),L.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC2E0\uADDC"})]}),e.jsx("button",{type:"button",onClick:()=>B(L.sectionId),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(pt,{className:"w-5 h-5"})})]}),e.jsxs("button",{type:"button",onClick:()=>x(L.sectionId),className:"flex items-center gap-2 px-3 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors mb-3",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC601\uC0C1 \uCD94\uAC00"})]}),L.lessons.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uAD6C\uBD84"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uAC15\uC758\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC778\uC815\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC0AD\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC21C\uC11C"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.lessons.map((D,y)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-medium",children:y+1}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.onoffType==="N"?"bg-green-100 text-green-700":D.onoffType==="F"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700"}`,children:D.onoffTypeConv||(D.onoffType==="N"?"\uC628\uB77C\uC778":D.onoffType==="F"?"\uC624\uD504\uB77C\uC778":"\uBE14\uB80C\uB514\uB4DC")})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900",children:D.lessonName}),D.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"\uC2E0\uADDC"})]})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-600",children:[D.totalTime||D.duration||"-","\uBD84"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",min:"0",value:D.completeTime||"",onChange:K=>J(L.sectionId,D.lessonId,Number(K.target.value)),className:"w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uBD84"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>j(L.sectionId,D.lessonId),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>A(L.sectionId,y),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:y===0,children:e.jsx(PC,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>C(L.sectionId,y),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:y===L.lessons.length-1,children:e.jsx(rr,{className:"w-4 h-4"})})]})})]},D.lessonId))})]})})]},L.sectionId))]}),e.jsxs("div",{className:`flex items-center justify-end gap-3 p-4 ${h?"mt-4":"border-t border-gray-200"}`,children:[!h&&c&&e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:f,disabled:R,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:R?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]}),e.jsx(Ou,{isOpen:q,onClose:()=>{p(!1),H(null)},onSelect:()=>{},onMultiSelect:_,multiSelect:!0})]})},ud=r=>({id:String(r.id),title:r.exam_nm,description:r.content||"",questionIds:r.range_idx?r.range_idx.split(",").filter(Boolean):[],duration:r.exam_time||60,totalPoints:r.total_points||0,passingScore:r.assign1||60,shuffleQuestions:r.shuffle_yn==="Y",showResults:!0,createdAt:r.reg_date||new Date().toISOString()}),Tm=r=>{let u="multiple_choice";return(r.question_type===3||r.question_type===4)&&(u="short_answer"),{id:String(r.id),type:u,title:r.question,content:r.question_text,points:r.score||5,categoryId:r.category_id?String(r.category_id):void 0}},Im=async()=>{try{const r=await ue.getExamTemplates();return r.rst_code==="0000"?(r.rst_data??[]).map(ud):[]}catch{return[]}};function Pm(){const[r,u]=o.useState([]),[c,d]=o.useState([]),[h,m]=o.useState([]),[b,P]=o.useState(!0),[N,U]=o.useState(!1),[E,R]=o.useState(null),[v,I]=o.useState(""),[W,q]=o.useState(!1),[p,G]=o.useState(null),[H,T]=o.useState(!1),[$,O]=o.useState(new Set),[B,x]=o.useState(""),[_,k]=o.useState(!1),[j,J]=o.useState({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),A=async()=>{try{P(!0),R(null);const ee=await ue.getExamTemplates();if(ee.rst_code!=="0000")throw new Error(ee.rst_message);const te=(ee.rst_data??[]).map(ud);u(te)}catch(ee){R(ee instanceof Error?ee.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}};o.useEffect(()=>{A()},[]);const C=async()=>{try{const ee=await ue.getQuestionCategories();ee.rst_code==="0000"&&m(ee.rst_data??[])}catch(ee){console.error("\uCE74\uD14C\uACE0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",ee)}},f=async ee=>{try{k(!0);const te=await ue.getQuestionBankList({categoryId:ee?Number(ee):void 0,limit:200});if(te.rst_code!=="0000")throw new Error(te.rst_message);const oe=(te.rst_data??[]).map(Tm);d(oe)}catch(te){R(te instanceof Error?te.message:"\uBB38\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{k(!1)}},w=r.filter(ee=>!v||ee.title.toLowerCase().includes(v.toLowerCase())),F=c.filter(ee=>!B||ee.categoryId===B),Y=()=>{G(null),J({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),q(!0)},L=ee=>{G(ee),J({title:ee.title,description:ee.description,questionIds:ee.questionIds,duration:ee.duration,passingScore:ee.passingScore,shuffleQuestions:ee.shuffleQuestions,showResults:ee.showResults}),q(!0)},S=async()=>{if(j.title.trim())try{if(U(!0),R(null),p){const ee=await ue.updateExamTemplate({id:Number(p.id),examName:j.title.trim(),examTime:j.duration,questionCnt:j.questionIds.length,shuffleYn:j.shuffleQuestions,passingScore:j.passingScore,questionIds:j.questionIds,content:j.description.trim()});if(ee.rst_code!=="0000")throw new Error(ee.rst_message)}else{const ee=await ue.createExamTemplate({examName:j.title.trim(),examTime:j.duration,questionCnt:j.questionIds.length,shuffleYn:j.shuffleQuestions,passingScore:j.passingScore,questionIds:j.questionIds,content:j.description.trim()});if(ee.rst_code!=="0000")throw new Error(ee.rst_message)}await A(),q(!1)}catch(ee){R(ee instanceof Error?ee.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}},D=async ee=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{U(!0);const te=await ue.deleteExamTemplate({id:Number(ee)});if(te.rst_code!=="0000")throw new Error(te.rst_message);await A()}catch(te){R(te instanceof Error?te.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}},y=async()=>{O(new Set(j.questionIds)),T(!0),await Promise.all([C(),f()])},K=async ee=>{x(ee),await f(ee||void 0)},ae=ee=>{O(te=>{const oe=new Set(te);return oe.has(ee)?oe.delete(ee):oe.add(ee),oe})},le=()=>{J(ee=>({...ee,questionIds:Array.from($)})),T(!1)},we=(()=>{const ee=j.questionIds.map(oe=>c.find(be=>be.id===oe)).filter(Boolean),te=ee.reduce((oe,be)=>oe+be.points,0);return{count:ee.length,totalPoints:te}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uC2DC\uD5D8\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC744 \uC0DD\uC131\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:Y,disabled:N,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uC0DD\uC131"})]})]}),E&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[E,e.jsx("button",{onClick:()=>R(null),className:"ml-2 underline",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:v,onChange:ee=>I(ee.target.value),placeholder:"\uC2DC\uD5D8 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),b?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Zt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):e.jsx("div",{className:"grid gap-4",children:w.length>0?w.map(ee=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ee.title}),ee.description&&e.jsx("p",{className:"text-gray-500 mt-1",children:ee.description}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fu,{className:"w-4 h-4 text-indigo-500"}),e.jsxs("span",{children:[ee.questionIds.length,"\uBB38\uC81C"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{children:[ee.duration,"\uBD84"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"\uD569\uACA9:"}),e.jsxs("span",{className:"font-medium",children:[ee.passingScore,"\uC810"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>L(ee),disabled:N,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Qt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>D(ee.id),disabled:N,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-5 h-5"})})]})]})},ee.id)):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm text-center py-16 text-gray-400",children:[e.jsx(Er,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:Y,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uC2DC\uD5D8 \uC0DD\uC131\uD558\uAE30"})]})}),W&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>q(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p?"\uC2DC\uD5D8 \uC218\uC815":"\uC2DC\uD5D8 \uC0DD\uC131"}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:j.title,onChange:ee=>J(te=>({...te,title:ee.target.value})),placeholder:"\uC608: \uC911\uAC04\uACE0\uC0AC",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:j.description,onChange:ee=>J(te=>({...te,description:ee.target.value})),placeholder:"\uC2DC\uD5D8\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCD9C\uC81C \uBB38\uC81C"}),e.jsxs("button",{type:"button",onClick:y,className:"w-full flex items-center justify-between px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-400 hover:text-indigo-600 transition-colors",children:[e.jsx("span",{children:j.questionIds.length>0?`${we.count}\uBB38\uC81C \uC120\uD0DD\uB428 (\uCD1D ${we.totalPoints}\uC810)`:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBB38\uC81C \uC120\uD0DD"}),e.jsx(Fu,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC2DC\uAC04 (\uBD84)"}),e.jsx("input",{type:"number",value:j.duration,onChange:ee=>J(te=>({...te,duration:parseInt(ee.target.value)||0})),min:1,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD569\uACA9 \uC810\uC218"}),e.jsx("input",{type:"number",value:j.passingScore,onChange:ee=>J(te=>({...te,passingScore:parseInt(ee.target.value)||0})),min:0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.shuffleQuestions,onChange:ee=>J(te=>({...te,shuffleQuestions:ee.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uBB38\uC81C \uC21C\uC11C \uB79C\uB364 \uBC30\uCE58"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showResults,onChange:ee=>J(te=>({...te,showResults:ee.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC2DC\uD5D8 \uC885\uB8CC \uD6C4 \uACB0\uACFC \uACF5\uAC1C"})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:S,disabled:!j.title.trim()||N,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[N?e.jsx(Zt,{className:"w-4 h-4 animate-spin"}):e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["\uBB38\uC81C \uC120\uD0DD (",$.size,"\uAC1C \uC120\uD0DD\uB428)"]}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-shrink-0 px-6 py-3 border-b border-gray-100 bg-gray-50",children:e.jsxs("select",{value:B,onChange:ee=>K(ee.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),h.map(ee=>e.jsx("option",{value:ee.id,children:ee.category_nm},ee.id))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:_?e.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-400",children:[e.jsx(Zt,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"\uBB38\uC81C \uBD88\uB7EC\uC624\uB294 \uC911..."})]}):F.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:F.map(ee=>e.jsx("div",{className:`px-6 py-4 cursor-pointer transition-colors ${$.has(ee.id)?"bg-indigo-50":"hover:bg-gray-50"}`,onClick:()=>ae(ee.id),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center mt-0.5 ${$.has(ee.id)?"border-indigo-500 bg-indigo-500 text-white":"border-gray-300"}`,children:$.has(ee.id)&&e.jsx(Pl,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ee.title}),ee.content&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 truncate",children:ee.content}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full ${ee.type==="multiple_choice"?"bg-blue-100 text-blue-700":ee.type==="short_answer"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:ee.type==="multiple_choice"?"\uAC1D\uAD00\uC2DD":ee.type==="short_answer"?"\uC8FC\uAD00\uC2DD":"OX\uD615"}),e.jsxs("span",{children:[ee.points,"\uC810"]})]})]})]})},ee.id))}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Fu,{className:"w-10 h-10 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBA3C\uC800 \uBB38\uC81C\uB97C \uCD94\uAC00\uD574\uC8FC\uC138\uC694."})]})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:le,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(Pl,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})]})]})}const _l=()=>{const r=new Date().toISOString().split("T")[0],u=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0];return{startDate:r,startTime:"09:00",endDate:u,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}},Sl=()=>({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,file:null}),El=()=>({title:"",description:"",link:"",file:null});function Lm({isOpen:r,onClose:u,weekNumber:c,onAdd:d}){const[h,m]=o.useState(null),[b,P]=o.useState(""),[N,U]=o.useState(""),[E,R]=o.useState(Sl()),[v,I]=o.useState(El()),[W,q]=o.useState(!1),[p,G]=o.useState(null),[H,T]=o.useState([]),[$,O]=o.useState(""),[B,x]=o.useState(_l());o.useEffect(()=>{if(!r||h!=="exam")return;let S=!1;return(async()=>{try{const y=await Im();S||T(y)}catch{S||T([])}})(),()=>{S=!0}},[r,h]);const _=H.find(S=>S.id===$);if(o.useEffect(()=>{_&&x(S=>({...S,points:_.totalPoints}))},[_]),!r)return null;const k=S=>{var D;if(S.preventDefault(),!!h){if(h==="video"){if(!p)return;d({weekNumber:c,type:h,title:b.trim()||p.title,description:N.trim()||void 0,duration:p.duration,mediaKey:p.mediaKey,lessonId:p.lessonId,originalVideoTitle:p.title})}else if(h==="exam"){if(!$)return;d({weekNumber:c,type:h,title:(_==null?void 0:_.title)||"\uC2DC\uD5D8",description:((D=_==null?void 0:_.description)==null?void 0:D.trim())||void 0,examId:$,examSettings:{startDate:B.startDate,startTime:B.startTime,endDate:B.endDate,endTime:B.endTime,points:B.points,allowRetake:B.allowRetake,retakeScore:B.retakeScore,retakeCount:B.retakeCount,showResults:B.showResults}})}else if(h==="assignment"){if(!E.title.trim()||!E.description.trim()||!E.dueDate||!E.dueTime)return;d({weekNumber:c,type:h,title:E.title.trim(),description:E.description.trim(),assignmentSettings:{dueDate:E.dueDate,dueTime:E.dueTime,totalScore:Number(E.totalScore||0),submissionType:E.submissionType,fileTypes:E.fileTypes.trim()||void 0,maxFileSize:Number(E.maxFileSize||0),allowLateSubmission:E.allowLateSubmission,latePenalty:Number(E.latePenalty||0),fileName:E.file?E.file.name:void 0}})}else if(h==="document"){if(!v.title.trim())return;const y=v.link.trim(),K=v.file?v.file.name:"";if(!y&&!K)return;d({weekNumber:c,type:h,title:v.title.trim(),description:v.description.trim()||void 0,documentSettings:{link:y||void 0,fileName:K||void 0}})}j(),u()}},j=()=>{m(null),P(""),U(""),G(null),O(""),x(_l()),R(Sl()),I(El())},J=S=>{G({mediaKey:S.mediaKey,lessonId:S.lessonId,title:S.title,duration:S.duration||(S.totalTime?`${S.totalTime}\uBD84`:void 0)}),q(!1)},A=[{type:"video",icon:Pr,label:"\uB3D9\uC601\uC0C1",color:"blue",desc:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC120\uD0DD"},{type:"exam",icon:Er,label:"\uC2DC\uD5D8",color:"red",desc:"\uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uC2DC\uD5D8\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4"},{type:"assignment",icon:ht,label:"\uACFC\uC81C",color:"purple",desc:"\uD574\uB2F9 \uC8FC\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD569\uB2C8\uB2E4"},{type:"document",icon:vs,label:"\uD559\uC2B5\uC790\uB8CC",color:"green",desc:"PDF, \uBB38\uC11C \uB4F1 \uD559\uC2B5\uC790\uB8CC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"}],C=(S,D)=>{if(D)switch(S){case"blue":return"border-blue-500 bg-blue-50 text-blue-700";case"red":return"border-red-500 bg-red-50 text-red-700";case"purple":return"border-purple-500 bg-purple-50 text-purple-700";case"green":return"border-green-500 bg-green-50 text-green-700";default:return"border-gray-500 bg-gray-50 text-gray-700"}return"border-gray-200 hover:border-gray-300 hover:bg-gray-50"},f=S=>{switch(S){case"blue":return"text-blue-600";case"red":return"text-red-600";case"purple":return"text-purple-600";case"green":return"text-green-600";default:return"text-gray-600"}},w=h==="assignment"&&(!E.title.trim()||!E.description.trim()||!E.dueDate||!E.dueTime),F=h==="document"&&(!v.title.trim()||!v.link.trim()&&!v.file),Y=!h||h==="video"&&!p||h==="exam"&&!$||w||F,L=h==="exam"?"\uC2DC\uD5D8\uCD94\uAC00":h==="assignment"?"\uB4F1\uB85D":h==="document"?"\uC5C5\uB85C\uB4DC":"\uCD94\uAC00\uD558\uAE30";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[c,"\uC8FC\uCC28 \uCF58\uD150\uCE20 \uCD94\uAC00"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"\uCD94\uAC00\uD560 \uCF58\uD150\uCE20 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\uCF58\uD150\uCE20 \uC720\uD615"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map(({type:S,icon:D,label:y,color:K,desc:ae})=>e.jsxs("button",{type:"button",onClick:()=>{m(S),G(null),O(""),P(""),U(""),R(Sl()),I(El()),x(_l())},className:`flex flex-col items-start p-4 border-2 rounded-lg transition-all ${C(K,h===S)}`,children:[e.jsx(D,{className:`w-6 h-6 mb-2 ${h===S?"":f(K)}`}),e.jsx("span",{className:"font-medium",children:y}),e.jsx("span",{className:`text-xs mt-1 ${h===S?"opacity-80":"text-gray-500"}`,children:ae})]},S))})]}),h&&e.jsxs(e.Fragment,{children:[h==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),p?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:p.title}),p.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",p.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>q(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>q(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx(Ru,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),p&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:b,onChange:S=>P(S.target.value),placeholder:p.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:N,onChange:S=>U(S.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),h==="exam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),H.length>0?e.jsxs("select",{value:$,onChange:S=>O(S.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),H.map(S=>e.jsxs("option",{value:S.id,children:[S.title," (",S.questionIds.length,"\uBB38\uC81C, ",S.totalPoints,"\uC810)"]},S.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx(Er,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC2DC\uD5D8\uAD00\uB9AC \uBA54\uB274\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),$&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:B.startDate,onChange:S=>x(D=>({...D,startDate:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:B.startTime,onChange:S=>x(D=>({...D,startTime:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:B.endDate,onChange:S=>x(D=>({...D,endDate:S.target.value})),min:B.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:B.endTime,onChange:S=>x(D=>({...D,endTime:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:B.points,onChange:S=>x(D=>({...D,points:parseInt(S.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.allowRetake,onChange:S=>x(D=>({...D,allowRetake:S.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),B.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:B.retakeScore,onChange:S=>x(D=>({...D,retakeScore:parseInt(S.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:B.retakeCount,onChange:S=>x(D=>({...D,retakeCount:parseInt(S.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B.showResults,onChange:S=>x(D=>({...D,showResults:S.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),h==="assignment"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:E.title,onChange:S=>R({...E,title:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:E.description,onChange:S=>R({...E,description:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:E.dueDate,onChange:S=>R({...E,dueDate:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:E.dueTime,onChange:S=>R({...E,dueTime:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:E.totalScore,onChange:S=>R({...E,totalScore:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:E.submissionType,onChange:S=>R({...E,submissionType:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(E.submissionType==="file"||E.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:S=>{const D=S.target.files&&S.target.files[0]?S.target.files[0]:null;R({...E,file:D})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),E.file&&e.jsx("button",{type:"button",onClick:()=>R({...E,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),E.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",E.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:E.fileTypes,onChange:S=>R({...E,fileTypes:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:E.maxFileSize,onChange:S=>R({...E,maxFileSize:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E.allowLateSubmission,onChange:S=>R({...E,allowLateSubmission:S.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),E.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:E.latePenalty,onChange:S=>R({...E,latePenalty:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]})]}),h==="document"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.title,onChange:S=>I({...v,title:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:v.description,onChange:S=>I({...v,description:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:v.link,onChange:S=>I({...v,link:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:S=>{var D;return I({...v,file:((D=S.target.files)==null?void 0:D[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."}),v.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",v.file.name]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:Y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L})]})]})]})]}),e.jsx(Ou,{isOpen:W,onClose:()=>q(!1),onSelect:J,multiSelect:!1,recommendContext:{lessonTitle:b,lessonDescription:N}})]})}function Mm({isOpen:r,onClose:u,content:c,onSave:d}){const[h,m]=o.useState(""),[b,P]=o.useState(""),[N,U]=o.useState(""),[E,R]=o.useState(!1),[v,I]=o.useState(null);if(o.useEffect(()=>{if(c){const H=c.originalVideoTitle||c.title,T=c.title!==H;m(T?c.title:""),P(c.description||""),U(c.duration||""),c.type==="video"&&c.mediaKey?I({mediaKey:c.mediaKey,lessonId:c.lessonId,title:c.originalVideoTitle||c.title,duration:c.duration}):I(null)}},[c]),!r||!c)return null;const W=H=>{if(H.preventDefault(),c.type==="video"){if(!v)return;d({...c,title:h.trim()||v.title,description:b.trim()||void 0,duration:v.duration,mediaKey:v.mediaKey,lessonId:v.lessonId,originalVideoTitle:v.title})}else{if(!h.trim())return;d({...c,title:h.trim(),description:b.trim()||void 0})}},q=H=>{I({mediaKey:H.mediaKey,lessonId:H.lessonId,title:H.title,duration:H.duration||(H.totalTime?`${H.totalTime}\uBD84`:void 0)}),R(!1)},p=H=>{switch(H){case"video":return"\uB3D9\uC601\uC0C1";case"exam":return"\uC2DC\uD5D8";case"assignment":return"\uACFC\uC81C";case"document":return"\uD559\uC2B5\uC790\uB8CC"}},G=H=>{switch(H){case"video":return e.jsx(Pr,{className:"w-5 h-5 text-blue-600"});case"exam":return e.jsx(Er,{className:"w-5 h-5 text-red-600"});case"assignment":return e.jsx(ht,{className:"w-5 h-5 text-purple-600"});case"document":return e.jsx(vs,{className:"w-5 h-5 text-green-600"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[G(c.type),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[p(c.type)," \uD3B8\uC9D1"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[c.weekNumber,"\uC8FC\uCC28"]})]})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:W,className:"p-6 space-y-6",children:[c.type==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),v?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:v.title}),v.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",v.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>R(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>R(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx(Ru,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),v&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:h,onChange:H=>m(H.target.value),placeholder:v.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]})]}),c.type!=="video"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p(c.type)," \uC81C\uBAA9",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",value:h,onChange:H=>m(H.target.value),placeholder:"\uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:b,onChange:H=>P(H.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:c.type==="video"&&!v||c.type!=="video"&&!h.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\uC800\uC7A5"})]})]})]})]}),e.jsx(Ou,{isOpen:E,onClose:()=>R(!1),onSelect:q,multiSelect:!1,recommendContext:{lessonTitle:h||(v==null?void 0:v.title)||"",lessonDescription:b}})]})}const Rm=r=>`haksa_curriculum_v2_${r}`,Om=r=>{const u=`haksa_curriculum_${r}`;try{const c=localStorage.getItem(u);if(!c)return null;const d=JSON.parse(c);if(!d.length)return null;const h=new Map;d.forEach(b=>{const P=b.weekNumber||1;h.has(P)||h.set(P,[]),h.get(P).push(b)});const m=[];return h.forEach((b,P)=>{m.push({weekNumber:P,sessions:[{sessionId:`session_migrated_${P}_${Date.now()}`,sessionName:"1\uCC28\uC2DC",contents:b,isExpanded:!0}]})}),localStorage.removeItem(u),m.length>0?m:null}catch{return null}},$m=r=>Array.from({length:r},(u,c)=>({weekNumber:c+1,title:`${c+1}\uC8FC\uCC28`,isExpanded:c===0,sessions:[]})),Fl=(r,u)=>Array.from({length:u},(c,d)=>r.find(m=>m.weekNumber===d+1)||{weekNumber:d+1,title:`${d+1}\uC8FC\uCC28`,isExpanded:d===0,sessions:[]});function zm({courseId:r,course:u}){const c=(u==null?void 0:u.sourceType)==="haksa",d=o.useMemo(()=>Hs({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),h=(()=>{if(u!=null&&u.haksaWeek){const te=parseInt(u.haksaWeek,10);if(!isNaN(te)&&te>0)return te}return 15})(),[m,b]=o.useState(()=>$m(h)),[P,N]=o.useState(!1),[U,E]=o.useState(null),[R,v]=o.useState(!1),I=o.useRef(!0),W=o.useRef([]),q=o.useRef(d),p=o.useMemo(()=>Fl(m,h),[h,m]);o.useEffect(()=>{W.current=p},[p]),o.useEffect(()=>{q.current=d},[d]),o.useEffect(()=>()=>{I.current=!1},[]),o.useEffect(()=>{c&&!d&&E("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[c,d]),o.useEffect(()=>{if(!c||!d)return;let te=!1;return(async()=>{N(!0),E(null);try{const be=await ue.getHaksaCurriculum(d);if(be.rst_code!=="0000")throw new Error(be.rst_message);const ve=Array.isArray(be.rst_data)?be.rst_data[0]:be.rst_data,ne=(ve==null?void 0:ve.curriculum_json)||"";if(ne){const ge=JSON.parse(ne);te||b(Fl(ge,h))}else if(u!=null&&u.id){let ge=null;try{const fe=localStorage.getItem(Rm(u.id));fe&&(ge=JSON.parse(fe))}catch{}if(ge||(ge=Om(u.id)),ge&&!te){const fe=Fl(ge,h);b(fe),await ue.updateHaksaCurriculum({...d,curriculumJson:JSON.stringify(fe)})}}}catch(be){te||E(be instanceof Error?be.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{te||(N(!1),v(!0))}})(),()=>{te=!0}},[c,d,u==null?void 0:u.id,h]),o.useEffect(()=>{if(!c||!d||!R)return;const te=setTimeout(()=>{(async()=>{try{const oe=await ue.updateHaksaCurriculum({...d,curriculumJson:JSON.stringify(p)});if(oe.rst_code!=="0000")throw new Error(oe.rst_message)}catch(oe){I.current&&E(oe instanceof Error?oe.message:"\uAC15\uC758\uBAA9\uCC28 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},400);return()=>clearTimeout(te)},[c,d,R,p]),o.useEffect(()=>()=>{!c||!q.current||!R||ue.updateHaksaCurriculum({...q.current,curriculumJson:JSON.stringify(W.current)})},[c,R]);const[G,H]=o.useState(!1),[T,$]=o.useState(1),[O,B]=o.useState(null),[x,_]=o.useState(!1),[k,j]=o.useState(null),[J,A]=o.useState(null),C=te=>{b(oe=>oe.map(be=>be.weekNumber===te?{...be,isExpanded:!be.isExpanded}:be))},f=(te,oe)=>{b(be=>be.map(ve=>ve.weekNumber===te?{...ve,sessions:ve.sessions.map(ne=>ne.sessionId===oe?{...ne,isExpanded:!ne.isExpanded}:ne)}:ve))},w=te=>{b(oe=>oe.map(be=>{if(be.weekNumber===te){const ve=be.sessions.length+1,ne={sessionId:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionName:`${ve}\uCC28\uC2DC`,contents:[],isExpanded:!0};return{...be,sessions:[...be.sessions,ne]}}return be}))},F=(te,oe,be)=>{b(ve=>ve.map(ne=>ne.weekNumber===te?{...ne,sessions:ne.sessions.map(ge=>ge.sessionId===oe?{...ge,sessionName:be}:ge)}:ne))},Y=(te,oe)=>{confirm("\uC774 \uCC28\uC2DC\uC640 \uD3EC\uD568\uB41C \uBAA8\uB4E0 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&b(be=>be.map(ve=>ve.weekNumber===te?{...ve,sessions:ve.sessions.filter(ne=>ne.sessionId!==oe)}:ve))},L=(te,oe)=>{$(te),B(oe),H(!0)},S=(te,oe)=>{j(te),A(oe),_(!0)},D=te=>{if(!O)return;const oe={...te,id:`content_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()};b(be=>be.map(ve=>ve.weekNumber===T?{...ve,sessions:ve.sessions.map(ne=>ne.sessionId===O?{...ne,contents:[...ne.contents,oe]}:ne)}:ve))},y=(te,oe,be)=>{confirm("\uC774 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&b(ve=>ve.map(ne=>ne.weekNumber===te?{...ne,sessions:ne.sessions.map(ge=>ge.sessionId===oe?{...ge,contents:ge.contents.filter(fe=>fe.id!==be)}:ge)}:ne))},K=te=>{J&&(b(oe=>oe.map(be=>({...be,sessions:be.sessions.map(ve=>ve.sessionId===J?{...ve,contents:ve.contents.map(ne=>ne.id===te.id?te:ne)}:ve)}))),_(!1),j(null),A(null))},ae=te=>{switch(te){case"video":return e.jsx(Pr,{className:"w-4 h-4 text-blue-600"});case"exam":return e.jsx(Er,{className:"w-4 h-4 text-red-600"});case"assignment":return e.jsx(ht,{className:"w-4 h-4 text-purple-600"});case"document":return e.jsx(vs,{className:"w-4 h-4 text-green-600"})}},le=te=>{switch(te){case"video":return e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"\uB3D9\uC601\uC0C1"});case"exam":return e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"\uC2DC\uD5D8"});case"assignment":return e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"\uACFC\uC81C"});case"document":return e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC790\uB8CC"})}},Be=p.flatMap(te=>te.sessions.flatMap(oe=>oe.contents)),ee={sessions:p.reduce((te,oe)=>te+oe.sessions.length,0),total:Be.length,videos:Be.filter(te=>te.type==="video").length,exams:Be.filter(te=>te.type==="exam").length,assignments:Be.filter(te=>te.type==="assignment").length,documents:Be.filter(te=>te.type==="document").length};return c?e.jsxs("div",{className:"space-y-4",children:[U&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:U}),P&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uC8FC\uCC28\uBCC4 \uAC15\uC758\uBAA9\uCC28"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:["\uCD1D ",h,"\uC8FC\uCC28"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:(u==null?void 0:u.haksaCourseName)||(u==null?void 0:u.subjectName)||"\uAC15\uC88C\uBA85 \uC5C6\uC74C"})]}),(ee.sessions>0||ee.total>0)&&e.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[e.jsxs("div",{className:"px-4 py-3 bg-indigo-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-indigo-600",children:ee.sessions}),e.jsx("div",{className:"text-xs text-indigo-600",children:"\uCC28\uC2DC"})]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:ee.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"\uC804\uCCB4"})]}),e.jsxs("div",{className:"px-4 py-3 bg-blue-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:ee.videos}),e.jsx("div",{className:"text-xs text-blue-600",children:"\uB3D9\uC601\uC0C1"})]}),e.jsxs("div",{className:"px-4 py-3 bg-red-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-red-600",children:ee.exams}),e.jsx("div",{className:"text-xs text-red-600",children:"\uC2DC\uD5D8"})]}),e.jsxs("div",{className:"px-4 py-3 bg-purple-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-purple-600",children:ee.assignments}),e.jsx("div",{className:"text-xs text-purple-600",children:"\uACFC\uC81C"})]}),e.jsxs("div",{className:"px-4 py-3 bg-green-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-green-600",children:ee.documents}),e.jsx("div",{className:"text-xs text-green-600",children:"\uC790\uB8CC"})]})]}),e.jsx("div",{className:"space-y-2",children:p.map(te=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>C(te.weekNumber),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[te.isExpanded?e.jsx(rr,{className:"w-5 h-5 text-gray-500"}):e.jsx(Yt,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:te.title}),te.sessions.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[te.sessions.length,"\uAC1C \uCC28\uC2DC"]})]}),e.jsxs("button",{onClick:oe=>{oe.stopPropagation(),w(te.weekNumber)},className:"flex items-center gap-1 px-3 py-1.5 text-sm text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),te.isExpanded&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-white space-y-3",children:te.sessions.length>0?te.sessions.map((oe,be)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 bg-indigo-50/50 cursor-pointer hover:bg-indigo-50 transition-colors",onClick:()=>f(te.weekNumber,oe.sessionId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[oe.isExpanded?e.jsx(rr,{className:"w-4 h-4 text-indigo-500"}):e.jsx(Yt,{className:"w-4 h-4 text-indigo-500"}),e.jsx("input",{type:"text",value:oe.sessionName,onChange:ve=>F(te.weekNumber,oe.sessionId,ve.target.value),onClick:ve=>ve.stopPropagation(),className:"px-2 py-1 bg-white border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),oe.contents.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 text-xs rounded",children:[oe.contents.length,"\uAC1C \uCF58\uD150\uCE20"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ve=>{ve.stopPropagation(),L(te.weekNumber,oe.sessionId)},className:"flex items-center gap-1 px-2.5 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[e.jsx(mt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{onClick:ve=>{ve.stopPropagation(),Y(te.weekNumber,oe.sessionId)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"\uCC28\uC2DC \uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]})]}),oe.isExpanded&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-white",children:oe.contents.length>0?e.jsx("div",{className:"space-y-2",children:oe.contents.map(ve=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-lg group hover:bg-gray-100 transition-colors",children:[ae(ve.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800 truncate",children:ve.title}),le(ve.type)]}),ve.description&&e.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:ve.description})]}),ve.duration&&e.jsx("span",{className:"text-sm text-gray-500 flex-shrink-0",children:ve.duration}),e.jsx("button",{onClick:()=>S(ve,oe.sessionId),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uD3B8\uC9D1",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(te.weekNumber,oe.sessionId,ve.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]},ve.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>L(te.weekNumber,oe.sessionId),className:"mt-2 text-sm text-blue-600 hover:underline",children:"+ \uCF58\uD150\uCE20 \uCD94\uAC00\uD558\uAE30"})]})})]},oe.sessionId)):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>w(te.weekNumber),className:"mt-2 text-sm text-indigo-600 hover:underline",children:"+ \uCC28\uC2DC \uCD94\uAC00\uD558\uAE30"})]})})]},te.weekNumber))}),e.jsx(Lm,{isOpen:G,onClose:()=>H(!1),weekNumber:T,onAdd:D}),e.jsx(Mm,{isOpen:x,onClose:()=>{_(!1),j(null),A(null)},content:k,onSave:K})]}):e.jsx(nd,{courseId:r,embedded:!0})}function Rc(r){if(r==null)return"";const u=String(r),c=/[",\r\n]/.test(u),d=u.replace(/"/g,'""');return c?`"${d}"`:d}function Um(r,u){const c=[];return c.push(r.map(Rc).join(",")),u.forEach(d=>{c.push(d.map(Rc).join(","))}),c.join(`\r
`)}function Pu(r,u,c){const d=`\uFEFF${Um(u,c)}`,h=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(h),b=document.createElement("a");b.href=m,b.download=r,document.body.appendChild(b),b.click(),b.remove(),URL.revokeObjectURL(m)}function Hm(r){return r.split(",").map(u=>u.trim()).filter(u=>/^\d+$/.test(u)).map(u=>Number(u)).filter(u=>u>0)}function Ym({courseId:r,course:u}){const c=Number((u==null?void 0:u.mappedCourseId)??r),d=(u==null?void 0:u.sourceType)==="haksa",[h,m]=o.useState([]),[b,P]=o.useState([]),[N,U]=o.useState(!1),[E,R]=o.useState(null),[v,I]=o.useState(""),W=async O=>{U(!0),R(null);try{const B=await ue.getCourseStudents({courseId:c,keyword:O??v});if(B.rst_code!=="0000")throw new Error(B.rst_message);m(B.rst_data??[])}catch(B){R(B instanceof Error?B.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}};o.useEffect(()=>{if(d)return;let O=!1;return(async()=>{U(!0),R(null);try{const x=await ue.getCourseStudents({courseId:c});if(x.rst_code!=="0000")throw new Error(x.rst_message);O||m(x.rst_data??[])}catch(x){O||R(x instanceof Error?x.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{O||U(!1)}})(),()=>{O=!0}},[c,d]);const q=async O=>{if(!(u!=null&&u.haksaCourseCode)){R("\uD559\uC0AC \uACFC\uBAA9 \uCF54\uB4DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}U(!0),R(null);try{const B=await ue.getHaksaCourseStudents({courseCode:u.haksaCourseCode,openYear:u.haksaOpenYear,openTerm:u.haksaOpenTerm,bunbanCode:u.haksaBunbanCode,groupCode:u.haksaGroupCode,keyword:O});if(B.rst_code!=="0000")throw new Error(B.rst_message);P(B.rst_data??[])}catch(B){R(B instanceof Error?B.message:"\uD559\uC0AC \uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}};o.useEffect(()=>{d&&q("")},[d,u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]);const p=h.length,G=async()=>{const O=window.prompt(`\uCD94\uAC00\uD560 \uC218\uAC15\uC0DD user_id\uB97C \uCF64\uB9C8(,)\uB85C \uAD6C\uBD84\uD574 \uC785\uB825\uD574\uC8FC\uC138\uC694.
\uC608) 12,34,56`);if(O===null)return;const B=Hm(O);if(B.length===0){alert("\uC785\uB825\uAC12\uC5D0\uC11C user_id(\uC22B\uC790)\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");return}try{const x=await ue.addCourseStudents({courseId:c,userIds:B});if(x.rst_code!=="0000")throw new Error(x.rst_message);const _=Number(x.rst_data??0),k=Number(x.rst_skipped??0);alert(`\uCD94\uAC00 \uC644\uB8CC: ${_}\uBA85${k>0?` (\uC911\uBCF5 ${k}\uBA85 \uC81C\uC678)`:""}`),await W()}catch(x){alert(x instanceof Error?x.message:"\uC218\uAC15\uC0DD \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},H=async(O,B)=>{if(window.confirm(`${B||"\uD574\uB2F9 \uC218\uAC15\uC0DD"}\uC744(\uB97C) \uACFC\uBAA9\uC5D0\uC11C \uC81C\uC678\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const _=await ue.removeCourseStudent({courseId:c,userId:O});if(_.rst_code!=="0000")throw new Error(_.rst_message);await W()}catch(_){alert(_ instanceof Error?_.message:"\uC218\uAC15\uC0DD \uC81C\uC678 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},T=o.useMemo(()=>[...h].sort((O,B)=>String(O.name||"").localeCompare(String(B.name||""))),[h]),$=()=>{const O=new Date().toISOString().slice(0,10).replace(/-/g,""),B=`course_${c}_students_${O}.csv`,x=["No","course_user_id","user_id","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uC9C4\uB3C4\uC728(%)"],_=T.map((k,j)=>{const J=Number(k.progress??k.progress_ratio??0);return[j+1,k.course_user_id,k.user_id,k.student_id??"",k.name??"",k.email??"",Math.round(J)]});Pu(B,x,_)};if(d){const O=b.length,B=[...b].sort((_,k)=>String(_.name||"").localeCompare(String(k.name||""))),x=()=>{const _=new Date().toISOString().slice(0,10).replace(/-/g,""),k=`haksa_course_${(u==null?void 0:u.haksaCourseCode)||"unknown"}_students_${_}.csv`,j=["No","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uD734\uB300\uD3F0","\uC0C1\uD0DC"],J=B.map((A,C)=>[C+1,A.student_id??"",A.name??"",A.email??"",A.mobile??"",A.visible==="Y"?"\uC815\uC0C1":A.visible==="N"?"\uD3D0\uAC15":A.visible??""]);Pu(k,j,J)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(Ir,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC218\uAC15\uC0DD \uBAA9\uB85D\uC740 \uD559\uC0AC View\uB97C \uC77D\uC5B4\uC624\uB294 \uBC29\uC2DD\uC73C\uB85C \uC81C\uACF5\uB429\uB2C8\uB2E4(\uC77D\uAE30 \uC804\uC6A9)."]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",O,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:v,onChange:_=>I(_.target.value),placeholder:"\uD559\uBC88/\uC774\uB984/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>q(v),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),N&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),E&&e.jsx("div",{className:"text-sm text-red-600",children:E}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD734\uB300\uD3F0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[B.map((_,k)=>{const j=_.visible==="Y"?"\uC815\uC0C1":_.visible==="N"?"\uD3D0\uAC15":_.visible||"-";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:k+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:_.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:_.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:_.email||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:_.mobile||"-"}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:j})]},`${_.student_id}-${k}`)}),!N&&!E&&B.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",p,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:v,onChange:O=>I(O.target.value),placeholder:"\uC774\uB984/\uC544\uC774\uB514/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>W(v),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uAC15\uC0DD \uCD94\uAC00"})]}),e.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),N&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),E&&e.jsx("div",{className:"text-sm text-red-600",children:E}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[T.map((O,B)=>{const x=Number(O.progress??O.progress_ratio??0);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:B+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:O.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:O.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:O.email||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${Math.max(0,Math.min(100,x))}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(x),"%"]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("button",{onClick:()=>H(Number(O.user_id),O.name),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(pt,{className:"w-4 h-4"}),"\uC81C\uC678"]})})]},O.course_user_id||`${O.user_id}-${B}`)}),!N&&!E&&T.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function Oc({isOpen:r,onClose:u,detail:c}){return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uB3C4 \uC0C1\uC138"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"p-5 space-y-3",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"text-gray-900",children:c.name||"-"})," (",c.student_id||"-",")"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uCC28\uC2DC: ",c.chapter?`${c.chapter}\uCC28\uC2DC`:"-"," \xB7 ",c.lesson_nm||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC9C4\uB3C4\uC728: ",Math.round(Number(c.ratio??0)),"%"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uD559\uC2B5\uC2DC\uAC04: ",c.study_time_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uB9C8\uC9C0\uB9C9 \uD559\uC2B5: ",c.last_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC5EC\uBD80: ",c.complete_yn==="Y"?"\uC644\uB8CC":"\uBBF8\uC644\uB8CC"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC77C\uC2DC: ",c.complete_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uBCF4\uAE30\uD69F\uC218: ",Number(c.view_cnt??0),"\uD68C"]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),e.jsx("div",{className:"flex justify-end p-5 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uD655\uC778"})})]})}):null}function Qm({courseId:r,course:u}){const c=(u==null?void 0:u.sourceType)==="haksa",d=c?Number((u==null?void 0:u.mappedCourseId)??0):r,[h,m]=o.useState(null),b=h&&h>0?h:d,P=o.useMemo(()=>Hs({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[N,U]=o.useState([]),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState(!1),[p,G]=o.useState([]),[H,T]=o.useState(!1),[$,O]=o.useState(null),[B,x]=o.useState(null),[_,k]=o.useState(null),[j,J]=o.useState([]),[A,C]=o.useState(!1),[f,w]=o.useState(null),[F,Y]=o.useState(""),[L,S]=o.useState(!1),[D,y]=o.useState(null);o.useEffect(()=>{x(null),k(null),J([]),Y("")},[r,u==null?void 0:u.mappedCourseId,u==null?void 0:u.sourceType]),o.useEffect(()=>{if(!c){m(null);return}if(d>0){m(null);return}if(!P){I("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let ne=!1;return(async()=>{q(!0),I(null);try{const fe=await ue.resolveHaksaCourse(P);if(fe.rst_code!=="0000")throw new Error(fe.rst_message);const $e=Array.isArray(fe.rst_data)?fe.rst_data[0]:fe.rst_data,re=Number(($e==null?void 0:$e.mapped_course_id)??0);if(!re||Number.isNaN(re))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");ne||m(re)}catch(fe){ne||(m(null),I(fe instanceof Error?fe.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{ne||q(!1)}})(),()=>{ne=!0}},[c,d,P]),o.useEffect(()=>{if(!c||!P){U([]);return}let ne=!1;return(async()=>{R(!0),I(null);try{const fe=await ue.getHaksaCurriculum(P);if(fe.rst_code!=="0000")throw new Error(fe.rst_message);const $e=Array.isArray(fe.rst_data)?fe.rst_data[0]:fe.rst_data,re=($e==null?void 0:$e.curriculum_json)||"",Te=re?JSON.parse(re):[];ne||U(Array.isArray(Te)?Te:[])}catch(fe){ne||(U([]),I(fe instanceof Error?fe.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{ne||R(!1)}})(),()=>{ne=!0}},[c,P]),o.useEffect(()=>{if(!b)return;let ne=!1;return(async()=>{T(!0),O(null);try{const fe=await ue.getProgressSummary({courseId:b});if(fe.rst_code!=="0000")throw new Error(fe.rst_message);const $e=fe.rst_data??[];if(ne)return;G($e),!c&&!B&&$e.length>0&&x(Number($e[0].lesson_id))}catch(fe){ne||O(fe instanceof Error?fe.message:"\uC9C4\uB3C4 \uC694\uC57D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ne||T(!1)}})(),()=>{ne=!0}},[b,c]);const K=o.useMemo(()=>{const ne=new Map;return p.forEach(ge=>{ne.set(Number(ge.lesson_id),ge)}),ne},[p]),ae=o.useMemo(()=>c?[...N].sort((ge,fe)=>{const $e=Number(ge.weekNumber??0),re=Number(fe.weekNumber??0);return $e-re}).map((ge,fe)=>{const $e=Number(ge.weekNumber??0),re=Number.isFinite($e)&&$e>0?$e:fe+1,Te=ge.title||`${re}\uC8FC\uCC28`,de=(Array.isArray(ge.sessions)?ge.sessions:[]).map((he,Fe)=>{const je=(Array.isArray(he.contents)?he.contents:[]).filter(Ne=>String(Ne.type||"").toLowerCase()==="video"),ie=je.map(Ne=>({lessonId:Number(Ne.lessonId??0),title:Ne.title||Ne.originalVideoTitle||"\uB3D9\uC601\uC0C1"})).filter(Ne=>Ne.lessonId>0);return{sessionId:String(he.sessionId||`${re}-${Fe+1}`),sessionName:he.sessionName||`${Fe+1}\uCC28\uC2DC`,weekNumber:re,weekTitle:Te,videoLessons:ie,videoCount:je.length}});return{weekNumber:re,weekTitle:Te,sessions:de}}):[],[N,c]),le=o.useMemo(()=>ae.flatMap(ne=>ne.sessions),[ae]);o.useEffect(()=>{if(!c||_==="overall")return;if(le.length===0){k(null),x(null);return}if(_&&le.some($e=>$e.sessionId===_))return;const ge=le.find($e=>$e.videoLessons.length>0),fe=le[0];k((ge??fe).sessionId)},[c,le,_]),o.useEffect(()=>{var fe;if(!c)return;if(_==="overall"){x(-1);return}const ne=le.find($e=>$e.sessionId===_),ge=((fe=ne==null?void 0:ne.videoLessons[0])==null?void 0:fe.lessonId)??null;x(ge)},[c,_,le]);const Be=o.useMemo(()=>p.find(ne=>Number(ne.lesson_id)===Number(B)),[p,B]),we=o.useMemo(()=>le.find(ne=>ne.sessionId===_)??null,[le,_]),ee=o.useMemo(()=>!we||!B?null:we.videoLessons.find(ne=>ne.lessonId===B)??null,[we,B]),te=ne=>{if(ne.videoLessons.length===0)return null;const ge=ne.videoLessons.map(re=>K.get(re.lessonId)).filter(re=>!!re);if(ge.length===0)return null;const fe=ge.reduce((re,Te)=>re+Number(Te.complete_rate??0),0)/ge.length,$e=ge.reduce((re,Te)=>re+Number(Te.avg_ratio??0),0)/ge.length;return{completeRate:fe,avgRatio:$e}},oe=async ne=>{if(b){C(!0),w(null);try{const ge=await ue.getProgressStudents({courseId:b,lessonId:ne});if(ge.rst_code!=="0000")throw new Error(ge.rst_message);J(ge.rst_data??[])}catch(ge){w(ge instanceof Error?ge.message:"\uC9C4\uB3C4 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C(!1)}}};o.useEffect(()=>{B===null||B===0||!b||oe(B)},[B,b]);const be=o.useMemo(()=>{const ne=F.trim().toLowerCase();return ne?j.filter(ge=>{const fe=String(ge.name||"").toLowerCase(),$e=String(ge.student_id||"").toLowerCase(),re=String(ge.email||"").toLowerCase();return fe.includes(ne)||$e.includes(ne)||re.includes(ne)}):j},[j,F]),ve=async ne=>{if(!(!B||!b)){S(!0),y(null);try{const ge=await ue.getProgressDetail({courseId:b,courseUserId:Number(ne.course_user_id),lessonId:Number(B)});if(ge.rst_code!=="0000")throw new Error(ge.rst_message);y(ge.rst_data??null)}catch(ge){alert(ge instanceof Error?ge.message:"\uC9C4\uB3C4 \uC0C1\uC138 \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),S(!1)}}};return c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(Ir,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:["\uD559\uC0AC \uACFC\uBAA9\uC740 ",e.jsx("strong",{children:"\uC8FC\uCC28/\uCC28\uC2DC \uAE30\uC900"}),"\uC73C\uB85C \uC9C4\uB3C4\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4. \uB3D9\uC601\uC0C1 \uCF58\uD150\uCE20\uAC00 \uC788\uB294 \uCC28\uC2DC\uB9CC \uC9C4\uB3C4 \uB370\uC774\uD130\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4."]})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),W&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg text-sm",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700",children:"\uC8FC\uCC28\uBCC4 \uCC28\uC2DC \uBAA9\uB85D"}),E&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),$&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:$}),!E&&ae.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[e.jsx("button",{onClick:()=>{k("overall"),x(-1)},className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${_==="overall"?"bg-purple-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}),e.jsx("div",{className:"text-xs text-gray-600",children:"\uC804\uCCB4 \uC9C4\uB3C4\uC728 \uD655\uC778"})]}),e.jsx(Yt,{className:`w-4 h-4 ${_==="overall"?"text-purple-600":"text-gray-400"}`})]})}),ae.map(ne=>e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 bg-gray-50 border-b border-gray-200",children:[ne.weekTitle,ne.sessions.length>0?` \xB7 ${ne.sessions.length}\uAC1C \uCC28\uC2DC`:""]}),e.jsx("div",{className:"divide-y divide-gray-200",children:ne.sessions.map(ge=>{const fe=ge.sessionId===_,$e=te(ge),re=ge.videoCount>0?`\uB3D9\uC601\uC0C1 ${ge.videoCount}\uAC1C`:"\uB3D9\uC601\uC0C1 \uC5C6\uC74C";return e.jsx("button",{onClick:()=>k(ge.sessionId),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${fe?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:ge.sessionName}),e.jsxs("div",{className:"text-xs text-gray-600",children:[re,$e?` \xB7 \uC644\uB8CC ${Math.round($e.completeRate)}% \xB7 \uD3C9\uADE0 ${Math.round($e.avgRatio)}%`:""]})]}),e.jsx(Yt,{className:`w-4 h-4 text-gray-400 ${fe?"text-blue-600":""}`})]})},ge.sessionId)})})]},`week-${ne.weekNumber}`))]})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700 min-w-0 flex-1 truncate",children:_==="overall"?e.jsx("span",{className:"text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}):we?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[we.weekTitle," \xB7 ",we.sessionName]}),ee&&e.jsxs("span",{className:"text-gray-600",children:[" \xB7 ",ee.title]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[we&&we.videoLessons.length>1&&e.jsx("select",{value:B??"",onChange:ne=>x(Number(ne.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 max-w-[200px] truncate",children:we.videoLessons.map(ne=>e.jsx("option",{value:ne.lessonId,children:ne.title},ne.lessonId))}),e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:F,onChange:ne=>Y(ne.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),we&&we.videoLessons.length===0&&e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"\uC120\uD0DD\uD55C \uCC28\uC2DC\uC5D0\uB294 \uB3D9\uC601\uC0C1 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),A&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),(B===-1||B)&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uCD1D \uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:B===-1?"\uC804\uCCB4 \uC9C4\uB3C4\uC728":"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:B===-1?"\uC218\uB8CC\uC5EC\uBD80":"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),B!==-1&&e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[be.map(ne=>{const ge=Math.max(0,Math.min(100,Number(ne.ratio??0))),fe=ne.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ne.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ne.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ne.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${B===-1?"bg-purple-600":fe?"bg-green-600":"bg-blue-600"}`,style:{width:`${ge}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(ge),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B===-1?e.jsx("span",{className:`px-2 py-1 rounded text-xs ${fe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:fe?"\uC218\uB8CC":"\uBBF8\uC218\uB8CC"}):ne.last_date_conv||"-"}),B!==-1&&e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:e.jsx("button",{onClick:()=>ve(ne),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors whitespace-nowrap",children:"\uBCF4\uAE30"})})]},ne.course_user_id)}),!A&&!f&&be.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:B===-1?5:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]}),e.jsx(Oc,{isOpen:L,onClose:()=>S(!1),detail:D})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700",children:"\uCC28\uC2DC \uBAA9\uB85D"}),H&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),$&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:$}),!H&&!$&&p.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[e.jsx("button",{onClick:()=>x(-1),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${B===-1?"bg-purple-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}),e.jsx("div",{className:"text-xs text-gray-600",children:"\uC804\uCCB4 \uC9C4\uB3C4\uC728 \uD655\uC778"})]}),e.jsx(Yt,{className:`w-4 h-4 ${B===-1?"text-purple-600":"text-gray-400"}`})]})}),p.map(ne=>{const ge=Number(ne.lesson_id)===Number(B),fe=Number(ne.complete_rate??0);return e.jsx("button",{onClick:()=>x(Number(ne.lesson_id)),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${ge?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm text-gray-900 truncate",children:[ne.chapter,". ",ne.lesson_nm||"-"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["\uC644\uB8CC ",Math.round(fe),"% \xB7 \uD3C9\uADE0 ",Math.round(Number(ne.avg_ratio??0)),"%"]})]}),e.jsx(Yt,{className:`w-4 h-4 text-gray-400 ${ge?"text-blue-600":""}`})]})},`${ne.lesson_id}-${ne.chapter}`)})]})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700 min-w-0 flex-1 truncate",children:B===-1?e.jsx("span",{className:"text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}):Be?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[Be.chapter,"\uCC28\uC2DC"]}),e.jsxs("span",{className:"text-gray-600",children:[" \xB7 ",Be.lesson_nm]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:F,onChange:ne=>Y(ne.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),A&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uCD1D \uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:B===-1?"\uC804\uCCB4 \uC9C4\uB3C4\uC728":"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:B===-1?"\uC218\uB8CC\uC5EC\uBD80":"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),B!==-1&&e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[be.map(ne=>{const ge=Math.max(0,Math.min(100,Number(ne.ratio??0))),fe=ne.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ne.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ne.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:ne.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${B===-1?"bg-purple-600":fe?"bg-green-600":"bg-blue-600"}`,style:{width:`${ge}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(ge),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B===-1?e.jsx("span",{className:`px-2 py-1 rounded text-xs ${fe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:fe?"\uC218\uB8CC":"\uBBF8\uC218\uB8CC"}):ne.last_date_conv||"-"}),B!==-1&&e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:e.jsx("button",{onClick:()=>ve(ne),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors whitespace-nowrap",children:"\uBCF4\uAE30"})})]},ne.course_user_id)}),!A&&!f&&be.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:B===-1?5:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]}),e.jsx(Oc,{isOpen:L,onClose:()=>S(!1),detail:D})]})}const Lu=r=>{if(r!=null&&r.haksaWeek){const u=parseInt(r.haksaWeek,10);if(!Number.isNaN(u)&&u>0)return u}return 15},Km=r=>`${r}\uCC28\uC2DC`,$l=async({haksaKey:r,weekNumber:u,sessionNumber:c,content:d})=>{if(!r)throw new Error("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uAC15\uC758\uBAA9\uCC28\uC5D0 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");const h=await ue.getHaksaCurriculum(r);if(h.rst_code!=="0000")throw new Error(h.rst_message);const m=Array.isArray(h.rst_data)?h.rst_data[0]:h.rst_data,b=(m==null?void 0:m.curriculum_json)||"";let P=[];if(b)try{const W=JSON.parse(b);P=Array.isArray(W)?W:[]}catch{P=[]}const N=Number(u||1),U=Number(c||1),E=Km(U);let R=P.find(W=>W.weekNumber===N);R||(R={weekNumber:N,title:`${N}\uC8FC\uCC28`,isExpanded:!0,sessions:[]},P.push(R)),Array.isArray(R.sessions)||(R.sessions=[]);let v=R.sessions.find(W=>W.sessionName===E);v||(v={sessionId:`session_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,sessionName:E,isExpanded:!0,contents:[]},R.sessions.push(v)),Array.isArray(v.contents)||(v.contents=[]),v.contents.push({...d,id:`content_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,createdAt:new Date().toISOString(),weekNumber:N});const I=await ue.updateHaksaCurriculum({...r,curriculumJson:JSON.stringify(P)});if(I.rst_code!=="0000")throw new Error(I.rst_message)},$c=["info-basic","info-evaluation","info-completion"],zc=["assignment-management","assignment-feedback"];function ad({course:r,onBack:u,initialTab:c,initialQnaPostId:d,onTabChange:h}){const[m,b]=o.useState(r),P=k=>!k||k==="info"?"info-basic":k==="assignment"?"assignment-management":k,N=P(c),[U,E]=o.useState(N),[R,v]=o.useState(()=>$c.includes(N)),[I,W]=o.useState(()=>zc.includes(N));o.useEffect(()=>{if(!c)return;const k=P(c);E(k),v($c.includes(k)),W(zc.includes(k))},[c]),o.useEffect(()=>{h==null||h(U)},[U,h]),o.useEffect(()=>{window.scrollTo(0,0)},[]),o.useEffect(()=>{b(r)},[r]);const q=[{id:"info",label:"\uACFC\uBAA9\uC815\uBCF4",icon:Ir,isSubTab:!1,hasSubTabs:!0},{id:"curriculum",label:"\uAC15\uC758\uBAA9\uCC28",icon:ed,isSubTab:!1},{id:"students",label:"\uC218\uAC15\uC0DD",icon:vn,isSubTab:!1},{id:"attendance",label:"\uC9C4\uB3C4/\uCD9C\uC11D",icon:os,isSubTab:!1},{id:"exam",label:"\uC2DC\uD5D8",icon:vs,isSubTab:!1},{id:"assignment",label:"\uACFC\uC81C",icon:Iu,isSubTab:!1,hasSubTabs:!0},{id:"materials",label:"\uC790\uB8CC",icon:Ru,isSubTab:!1},{id:"qna",label:"Q&A",icon:Us,isSubTab:!1},{id:"grades",label:"\uC131\uC801\uAD00\uB9AC",icon:Il,isSubTab:!1},{id:"completion",label:"\uC218\uB8CC\uAD00\uB9AC",icon:is,isSubTab:!1}],p=[{id:"info-basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Ir},{id:"info-evaluation",label:"\uD3C9\uAC00/\uC218\uB8CC \uAE30\uC900",icon:os},{id:"info-completion",label:"\uC218\uB8CC\uC99D",icon:Il}],G=[{id:"assignment-management",label:"\uACFC\uC81C \uAD00\uB9AC",icon:Iu},{id:"assignment-feedback",label:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC",icon:Us}],H=k=>{k==="info"?(v(!R),R||E("info-basic")):k==="assignment"?(W(!I),I||E("assignment-management")):(E(k),x.map(j=>j.id).includes(k)||v(!1),["assignment-management","assignment-feedback"].includes(k)||W(!1))},T=Number((m==null?void 0:m.mappedCourseId)??m.id),$=(m==null?void 0:m.sourceType)==="haksa"&&(!(m!=null&&m.mappedCourseId)||Number.isNaN(T)||T<=0),O=(m==null?void 0:m.sourceType)==="haksa"||!!(m!=null&&m.haksaCourseCode||m!=null&&m.haksaOpenYear||m!=null&&m.haksaOpenTerm||m!=null&&m.haksaBunbanCode||m!=null&&m.haksaGroupCode)||String((m==null?void 0:m.courseType)||"").includes("\uD559\uC0AC"),B=O?q.filter(k=>k.id!=="completion"):q,x=O?p.filter(k=>k.id!=="info-completion"):p;o.useEffect(()=>{O&&(U==="completion"||U==="info-completion")&&E("info-basic")},[U,O]);const _=()=>{switch(U){case"info":case"info-basic":return e.jsx(Eu,{course:m,onCourseUpdated:b,initialSubTab:"basic"});case"info-evaluation":return e.jsx(Eu,{course:m,onCourseUpdated:b,initialSubTab:"evaluation"});case"info-completion":return O?e.jsx(Eu,{course:m,onCourseUpdated:b,initialSubTab:"basic"}):e.jsx(Eu,{course:m,onCourseUpdated:b,initialSubTab:"completion"});case"curriculum":return e.jsx(zm,{courseId:T,course:m});case"students":return e.jsx(Ym,{courseId:T,course:m});case"attendance":return e.jsx(Qm,{courseId:T,course:m});case"exam":return $?e.jsx(Vm,{course:m}):e.jsx(Wm,{courseId:T,course:m});case"assignment":return e.jsx(qm,{courseId:T,course:m});case"assignment-management":return e.jsx(ld,{courseId:T,course:m});case"assignment-feedback":return e.jsx(id,{courseId:T});case"materials":return e.jsx(Jm,{courseId:T,showWeekSession:(m==null?void 0:m.sourceType)==="haksa",weekCount:Lu(m),course:m});case"qna":return e.jsx(Xm,{courseId:T,initialPostId:d});case"grades":return(m==null?void 0:m.sourceType)==="haksa"?e.jsx(od,{course:m}):e.jsx(Zm,{courseId:T});case"completion":return O?null:e.jsx(ex,{courseId:T,course:m});default:return null}};return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"fixed w-64",style:{maxHeight:"calc(100vh - 40px)",overflowY:"auto"},children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Mu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("nav",{className:"flex flex-col",children:B.map(k=>{const j=k.icon,J=k.id==="info",A=k.id==="assignment",C=U===k.id||J&&x.map(f=>f.id).includes(U)||A&&(U==="assignment-management"||U==="assignment-feedback");return e.jsxs(Me.Fragment,{children:[e.jsxs("button",{onClick:()=>H(k.id),className:`flex items-center justify-between px-4 py-3 border-l-4 transition-colors text-left ${C?"border-blue-600 bg-blue-50 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:k.label})]}),(J||A)&&((J?R:I)?e.jsx(rr,{className:"w-4 h-4"}):e.jsx(Yt,{className:"w-4 h-4"}))]}),J&&R&&e.jsx("div",{className:"bg-gray-50",children:x.map(f=>{const w=f.icon;return e.jsxs("button",{onClick:()=>{E(f.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${U===f.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id)})}),A&&I&&e.jsx("div",{className:"bg-gray-50",children:G.map(f=>{const w=f.icon;return e.jsxs("button",{onClick:()=>{E(f.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${U===f.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id)})})]},k.id)})})})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:m.subjectName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["\uACFC\uC815ID: ",m.courseId]}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:m.courseType}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:m.period}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsxs("span",{children:["\uC218\uAC15\uC0DD: ",m.students,"\uBA85"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:_()})]})]})})}function Vm({course:r}){const u=o.useMemo(()=>Hs({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),[c,d]=o.useState([]),[h,m]=o.useState(!1),[b,P]=o.useState(null);return o.useEffect(()=>{if(!u){P("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),d([]);return}let N=!1;return(async()=>{m(!0),P(null);try{const E=await ue.getHaksaCurriculum(u);if(E.rst_code!=="0000")throw new Error(E.rst_message);const R=Array.isArray(E.rst_data)?E.rst_data[0]:E.rst_data,v=(R==null?void 0:R.curriculum_json)||"";if(!v){N||d([]);return}const I=JSON.parse(v),q=(Array.isArray(I)?I.flatMap(p=>(p.sessions||[]).flatMap(G=>G.contents||[])):[]).filter(p=>String(p.type||"").toLowerCase()==="exam");N||d(q)}catch(E){N||(d([]),P(E instanceof Error?E.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{N||m(!1)}})(),()=>{N=!0}},[u]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg text-sm",children:["\uD559\uC0AC \uACFC\uBAA9\uC758 \uC2DC\uD5D8\uC740 ",e.jsx("b",{children:"\uAC15\uC758\uBAA9\uCC28"}),"\uC5D0\uC11C \uC8FC\uCC28/\uCC28\uC2DC\uC5D0 \uB4F1\uB85D\uD55C \uD56D\uBAA9\uC744 \uAE30\uC900\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),b&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:b}),h&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!h&&c.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded-full",children:["\uCD1D ",c.length,"\uAC1C"]})]}),c.map(N=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:N.title||"\uC2DC\uD5D8"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[N.weekNumber||1,"\uC8FC\uCC28"]})]}),N.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:N.description}),N.examSettings&&e.jsxs("div",{className:"mt-2 ml-7 text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["\uBC30\uC810: ",N.examSettings.points??0,"\uC810"]}),e.jsxs("div",{children:["\uC7AC\uC751\uC2DC:"," ",N.examSettings.allowRetake?`\uAC00\uB2A5 (${N.examSettings.retakeScore??0}\uC810 \uBBF8\uB9CC, ${N.examSettings.retakeCount??0}\uD68C)`:"\uBD88\uAC00"]}),e.jsxs("div",{children:["\uACB0\uACFC\uB178\uCD9C: ",N.examSettings.showResults===!1?"\uBE44\uB178\uCD9C":"\uB178\uCD9C"]})]})]}),N.createdAt&&e.jsx("div",{className:"text-sm text-gray-400 flex-shrink-0",children:new Date(N.createdAt).toLocaleDateString("ko-KR")})]})},N.id))]}):!h&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(vs,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uC2DC\uD5D8\uC744 \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})}function Wm({courseId:r,course:u}){const c=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(r)||r<=0),d=o.useMemo(()=>Hs({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[h,m]=o.useState(null),[b,P]=o.useState(!1),[N,U]=o.useState([]),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState([]),[p,G]=o.useState(!1),H=o.useRef([]),T=o.useRef(d),[$,O]=o.useState(null),[B,x]=o.useState({}),_=new Date().toISOString().split("T")[0],k=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[j,J]=o.useState({startDate:_,startTime:"09:00",endDate:k,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!c||!d)return;let F=!1;return(async()=>{G(!1),I(null);try{const L=await ue.getHaksaExams(d);if(L.rst_code!=="0000")throw new Error(L.rst_message);const S=Array.isArray(L.rst_data)?L.rst_data[0]:L.rst_data,D=(S==null?void 0:S.exams_json)||"";if(D){const y=JSON.parse(D);F||q(Array.isArray(y)?y:[]);return}if(u!=null&&u.id)try{const y=localStorage.getItem(`haksa_exams_${u.id}`);if(y){const K=JSON.parse(y);F||q(Array.isArray(K)?K:[]),await ue.updateHaksaExams({...d,examsJson:y})}}catch{F||q([])}}catch(L){F||I(L instanceof Error?L.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F||G(!0)}})(),()=>{F=!0}},[c,d,u==null?void 0:u.id]),o.useEffect(()=>{c&&!d&&I("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[c,d]),o.useEffect(()=>{H.current=W},[W]),o.useEffect(()=>{T.current=d},[d]),o.useEffect(()=>()=>{!c||!T.current||!p||ue.updateHaksaExams({...T.current,examsJson:JSON.stringify(H.current)})},[c,p]),o.useEffect(()=>{if(r&&!c)try{const F=localStorage.getItem(`prism_exam_settings_${r}`);F&&x(JSON.parse(F))}catch{x({})}},[r,c]);const A=async()=>{if(!(!r||c)){R(!0),I(null);try{const F=await ue.getExams({courseId:r});if(F.rst_code!=="0000")throw new Error(F.rst_message);const L=(F.rst_data??[]).map(S=>({id:Number(S.exam_id),title:S.exam_nm,date:S.start_date_conv||S.start_date||"-",duration:S.exam_time?`${S.exam_time}\uBD84`:"-",submitted:Number(S.submitted_cnt??0),total:Number(S.total_cnt??0)}));U(L)}catch(F){I(F instanceof Error?F.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}}};o.useEffect(()=>{c||A()},[r,c]);const C=F=>{const Y=B[F.id]||{};O(F),J({startDate:Y.startDate||_,startTime:Y.startTime||"09:00",endDate:Y.endDate||k,endTime:Y.endTime||"18:00",points:Y.points||0,allowRetake:Y.allowRetake||!1,retakeScore:Y.retakeScore||0,retakeCount:Y.retakeCount||0,showResults:Y.showResults!==!1})},f=()=>{if(!$)return;const F={...B,[$.id]:{...j}};if(x(F),r)try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(F))}catch{}O(null)},w=async F=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const Y=await ue.deleteExam({courseId:r,examId:F});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);const L={...B};if(delete L[F],x(L),r)try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(L))}catch{}await A(),alert("\uC2DC\uD5D8\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Y){alert(Y instanceof Error?Y.message:"\uC2DC\uD5D8 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};if(c)return e.jsx(tx,{haksaKey:d,haksaExams:W,setHaksaExams:q,weekCount:Lu(u)});if(h!==null){const F=N.find(Y=>Y.id===h);return e.jsx(Gm,{courseId:r,examId:h,exam:F,onBack:()=>m(null),onRefresh:()=>void A()})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),v&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:v}),E&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!E&&N.length>0&&e.jsx("div",{className:"space-y-3",children:N.map(F=>{const Y=B[F.id]||{};return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>m(F.id),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(os,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:F.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[F.submitted,"/",F.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[Y.startDate||F.date||"-"," ",Y.startTime||""," ~ ",Y.endDate||"-"," ",Y.endTime||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uC2DC\uAC04"}),e.jsx("span",{className:"text-gray-900",children:F.duration})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[Y.points||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:Y.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",Y.retakeScore,"\uC810 \uBBF8\uB9CC, ",Y.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:Y.showResults!==!1?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:L=>{L.stopPropagation(),C(F)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:L=>{L.stopPropagation(),w(F.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]})]})},F.id)})}),!E&&N.length===0&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(os,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]})]}),e.jsx(sx,{isOpen:b,onClose:()=>P(!1),weekCount:Lu(u),showWeekSession:(u==null?void 0:u.sourceType)==="haksa",onSave:async F=>{try{const Y=(F.startDate||new Date().toISOString().split("T")[0]).replace(/-/g,"")+"090000",L=(F.endDate||new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]).replace(/-/g,"")+"180000",S=await ue.linkExam({courseId:r,examId:F.examId,startDate:Y,endDate:L,assignScore:F.points||100,allowRetake:F.allowRetake||!1,showResults:F.showResults!==!1});if(S.rst_code!=="0000")throw new Error(S.rst_message);if((u==null?void 0:u.sourceType)==="haksa")try{await $l({haksaKey:d,weekNumber:F.weekNumber,sessionNumber:F.sessionNumber,content:{type:"exam",title:F.title,description:F.description||"",examId:String(F.examId),examSettings:{points:F.points,allowRetake:F.allowRetake,retakeScore:F.retakeScore,retakeCount:F.retakeCount,showResults:F.showResults,startDate:F.startDate,endDate:F.endDate}}})}catch(y){alert(y instanceof Error?y.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}const D={...B,[F.examId]:{startDate:F.startDate,startTime:"09:00",endDate:F.endDate,endTime:"18:00",points:F.points,allowRetake:F.allowRetake,retakeScore:F.retakeScore,retakeCount:F.retakeCount,showResults:F.showResults,weekNumber:F.weekNumber,sessionNumber:F.sessionNumber}};x(D);try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(D))}catch{}await A(),alert("\uC2DC\uD5D8\uC774 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Y){alert(Y instanceof Error?Y.message:"\uC2DC\uD5D8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}}),$&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>O(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>O(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:$.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:j.startDate,onChange:F=>J(Y=>({...Y,startDate:F.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:j.startTime,onChange:F=>J(Y=>({...Y,startTime:F.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:j.endDate,onChange:F=>J(Y=>({...Y,endDate:F.target.value})),min:j.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:j.endTime,onChange:F=>J(Y=>({...Y,endTime:F.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:j.points,onChange:F=>J(Y=>({...Y,points:parseInt(F.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.allowRetake,onChange:F=>J(Y=>({...Y,allowRetake:F.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),j.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:j.retakeScore,onChange:F=>J(Y=>({...Y,retakeScore:parseInt(F.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:j.retakeCount,onChange:F=>J(Y=>({...Y,retakeCount:parseInt(F.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showResults,onChange:F=>J(Y=>({...Y,showResults:F.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>O(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:f,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function Gm({courseId:r,examId:u,exam:c,onBack:d,onRefresh:h}){const[m,b]=o.useState(null),[P,N]=o.useState(""),[U,E]=o.useState([]),[R,v]=o.useState(!1),[I,W]=o.useState(null),q=(c==null?void 0:c.title)??"\uC2DC\uD5D8",p=(c==null?void 0:c.date)??"-",G=(c==null?void 0:c.duration)??"-",H=async()=>{if(!(!r||!u)){v(!0),W(null);try{const A=await ue.getExamUsers({courseId:r,examId:u});if(A.rst_code!=="0000")throw new Error(A.rst_message);const f=(A.rst_data??[]).map(w=>({courseUserId:Number(w.course_user_id),studentId:w.login_id,name:w.user_nm,score:Number(w.marking_score??0),submitted:!!w.submitted,submittedAt:w.submitted_at??"-"}));E(f)}catch(A){W(A instanceof Error?A.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}}};o.useEffect(()=>{H()},[r,u]);const T=U.filter(A=>A.submitted),$={average:T.length>0?Math.round(T.reduce((A,C)=>A+C.score,0)/T.length*10)/10:0,highest:T.length>0?Math.max(...T.map(A=>A.score)):0,lowest:T.length>0?Math.min(...T.map(A=>A.score)):0,submitted:T.length,total:U.length},B=(()=>{const A=[{range:"90-100",min:90,max:100,count:0},{range:"80-89",min:80,max:89,count:0},{range:"70-79",min:70,max:79,count:0},{range:"60-69",min:60,max:69,count:0},{range:"0-59",min:0,max:59,count:0}];return T.forEach(C=>{const f=A.find(w=>C.score>=w.min&&C.score<=w.max);f&&f.count++}),A})(),x=()=>{const A=new Date().toISOString().slice(0,10).replace(/-/g,""),C=`course_${r}_exam_${u}_${A}.csv`,f=["No","\uD559\uBC88","\uC774\uB984","\uC81C\uCD9C\uC5EC\uBD80","\uC81C\uCD9C\uC2DC\uAC04","\uC810\uC218"],w=U.map((F,Y)=>[Y+1,F.studentId??"",F.name??"",F.submitted?"Y":"N",F.submittedAt??"",F.submitted?Number(F.score??0):""]);Pu(C,f,w)},_=(A,C)=>{b(A),N(C.toString())},k=async A=>{const C=parseInt(P,10);if(isNaN(C)||C<0||C>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}try{const f=await ue.updateExamScore({courseId:r,examId:u,courseUserId:A,markingScore:C});if(f.rst_code!=="0000")throw new Error(f.rst_message);await H(),h(),b(null),N("")}catch(f){alert(f instanceof Error?f.message:"\uC810\uC218 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},j=()=>{b(null),N("")},J=async A=>{if(confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uC2DC\uD5D8 \uC751\uC2DC\uB97C \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const C=await ue.cancelExamSubmit({courseId:r,examId:u,courseUserId:A});if(C.rst_code!=="0000")throw new Error(C.rst_message);await H(),h(),alert("\uC751\uC2DC\uAC00 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(C){alert(C instanceof Error?C.message:"\uC751\uC2DC \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Mu,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:q}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC2DC\uD5D8\uC77C: ",p," \xB7 \uC2DC\uD5D8\uC2DC\uAC04: ",G]})]})]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC"})]})]}),I&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:I}),R&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-700 mb-1",children:"\uD3C9\uADE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-blue-900",children:[$.average,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"\uCD5C\uACE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[$.highest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-red-700 mb-1",children:"\uCD5C\uC800 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-red-900",children:[$.lowest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-1",children:"\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-purple-900",children:[$.submitted,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1",children:"\uBBF8\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[$.total-$.submitted,"\uBA85"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:"\uC810\uC218 \uBD84\uD3EC"}),e.jsx("div",{className:"space-y-3",children:B.map(A=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[A.range,"\uC810"]}),e.jsxs("span",{className:"text-sm text-gray-900",children:[A.count,"\uBA85"]})]}),e.jsx("div",{className:"w-full h-8 bg-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 flex items-center justify-end px-2",style:{width:$.submitted>0?`${A.count/$.submitted*100}%`:"0%"},children:A.count>0&&e.jsxs("span",{className:"text-xs text-white",children:[Math.round(A.count/$.submitted*100),"%"]})})})]},A.range))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD559\uC0DD\uBCC4 \uC810\uC218"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC810\uC218\uB97C \uD074\uB9AD\uD558\uC5EC \uC218\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCC44\uC810"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:U.map((A,C)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:C+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:A.studentId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:A.name}),e.jsx("td",{className:"px-4 py-4 text-center",children:A.submitted?m===A.courseUserId?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:P,onChange:f=>N(f.target.value),onKeyDown:f=>{f.key==="Enter"?k(A.courseUserId):f.key==="Escape"&&j()},className:"w-16 px-2 py-1 border border-blue-500 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>k(A.courseUserId),className:"p-1 text-green-600 hover:bg-green-100 rounded transition-colors",title:"\uC800\uC7A5",children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx("button",{onClick:j,className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uCDE8\uC18C",children:e.jsx(pt,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>_(A.courseUserId,A.score),className:`inline-flex items-center justify-center px-3 py-1 rounded-lg hover:opacity-80 transition-opacity ${A.score>=90?"bg-green-100 text-green-700":A.score>=80?"bg-blue-100 text-blue-700":A.score>=70?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[A.score,"\uC810"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:A.submitted?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:[e.jsx(is,{className:"w-3 h-3"}),"\uC81C\uCD9C \uC644\uB8CC"]}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:"\uBBF8\uC81C\uCD9C"})}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:A.submittedAt}),e.jsx("td",{className:"px-4 py-4 text-center",children:A.submitted&&m!==A.courseUserId&&e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>_(A.courseUserId,A.score),className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"\uC810\uC218 \uC218\uC815",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>J(A.courseUserId),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uC751\uC2DC \uCDE8\uC18C",children:e.jsx(pt,{className:"w-4 h-4"})})]})})]},A.courseUserId))})]})})]})]})}function qm({courseId:r,course:u}){const[c,d]=o.useState("management");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>d("management"),className:`px-4 py-2 transition-colors ${c==="management"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uACFC\uC81C \uAD00\uB9AC"}),e.jsx("button",{onClick:()=>d("feedback"),className:`px-4 py-2 transition-colors ${c==="feedback"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC"})]}),c==="management"&&e.jsx(ld,{courseId:r,course:u}),c==="feedback"&&e.jsx(id,{courseId:r})]})}function ld({courseId:r,course:u}){const[c,d]=o.useState(!1),[h,m]=o.useState(!1),[b,P]=o.useState(null),[N,U]=o.useState(!1),[E,R]=o.useState(null),v=Number((u==null?void 0:u.mappedCourseId)??r),I=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(v)||v<=0),W=Lu(u),q=(u==null?void 0:u.sourceType)==="haksa",p=o.useMemo(()=>Hs({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[G,H]=o.useState([]),[T,$]=o.useState(!1),[O,B]=o.useState(null),[x,_]=o.useState([]),[k,j]=o.useState(!1);o.useEffect(()=>{if(!I||!p)return;let w=!1;return(async()=>{j(!0),B(null);try{const Y=await ue.getHaksaCurriculum(p);if(Y.rst_code!=="0000")throw new Error(Y.rst_message);const L=Array.isArray(Y.rst_data)?Y.rst_data[0]:Y.rst_data,S=(L==null?void 0:L.curriculum_json)||"";if(!S){w||_([]);return}const D=JSON.parse(S),K=(Array.isArray(D)?D.flatMap(ae=>(ae.sessions||[]).flatMap(le=>le.contents||[])):[]).filter(ae=>{const le=String(ae.type||"").toLowerCase();return le==="assignment"||le==="homework"});w||_(K)}catch(Y){w||(_([]),B(Y instanceof Error?Y.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{w||j(!1)}})(),()=>{w=!0}},[I,p]);const J=async()=>{if(!(!r||I)){$(!0),B(null);try{const w=await ue.getHomeworks({courseId:r});if(w.rst_code!=="0000")throw new Error(w.rst_message);const Y=(w.rst_data??[]).map(L=>({id:Number(L.homework_id),title:L.homework_nm||L.module_nm||"\uACFC\uC81C",description:L.content||"",dueDate:L.end_date_conv||L.end_date||"-",totalScore:Number(L.assign_score??100),submitted:Number(L.submitted_cnt??0),total:Number(L.total_cnt??0)}));H(Y)}catch(w){B(w instanceof Error?w.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{$(!1)}}};if(o.useEffect(()=>{I||J()},[r,I]),I)return e.jsxs("div",{className:"space-y-4",children:[O&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:O}),k&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),x.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C"}),e.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:["\uCD1D ",x.length,"\uAC1C"]})]}),x.map(w=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[w.weekNumber,"\uC8FC\uCC28"]})]}),w.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:w.description})]}),e.jsx("div",{className:"text-sm text-gray-400",children:new Date(w.createdAt).toLocaleDateString("ko-KR")})]})},w.id))]}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(ht,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uACFC\uC81C\uB97C \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]});const A=w=>{let F="",Y="";if(w.dueDate){const L=w.dueDate.replace(/-/g,"");L.length>=8&&(F=`${L.slice(0,4)}-${L.slice(4,6)}-${L.slice(6,8)}`),L.length>=12&&(Y=`${L.slice(8,10)}:${L.slice(10,12)}`)}P({id:w.id,title:w.title||"",description:w.description||"",dueDate:F,dueTime:Y||"23:59",totalScore:w.totalScore||100}),m(!0)},C=async w=>{if(b)try{const F=await ue.updateHomework({courseId:r,homeworkId:b.id,title:w.title,description:w.description,dueDate:w.dueDate,dueTime:w.dueTime,totalScore:Number(w.totalScore||0),file:w.file});if(F.rst_code!=="0000")throw new Error(F.rst_message);await J(),alert("\uACFC\uC81C\uAC00 \uC218\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),m(!1),P(null)}catch(F){alert(F instanceof Error?F.message:"\uACFC\uC81C \uC218\uC815 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},f=(w,F)=>{(async()=>{if(confirm(`\uACFC\uC81C "${F}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774\uBBF8 \uC81C\uCD9C \uB0B4\uC5ED\uC774 \uC788\uB294 \uACBD\uC6B0, \uC11C\uBC84\uC5D0\uC11C \uC0AD\uC81C\uAC00 \uCC28\uB2E8\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`))try{const L=await ue.deleteHomework({courseId:r,homeworkId:w});if(L.rst_code!=="0000")throw new Error(L.rst_message);await J(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(L){alert(L instanceof Error?L.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Iu,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uB4F1\uB85D"})]})}),O&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:O}),T&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!T&&G.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694."}),!T&&G.length>0&&e.jsx("div",{className:"space-y-3",children:G.map(w=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{R(w),U(!0)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Iu,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[w.submitted,"/",w.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uB9C8\uAC10\uC77C"}),e.jsx("span",{className:"text-gray-900",children:w.dueDate||"-"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[w.totalScore||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC81C\uCD9C \uD604\uD669"}),e.jsxs("span",{className:"text-gray-900",children:[w.submitted," / ",w.total,"\uBA85"]})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:F=>{F.stopPropagation(),A(w)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:F=>{F.stopPropagation(),f(w.id,w.title)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]})]})},w.id))})]}),e.jsx(Mc,{isOpen:c,onClose:()=>d(!1),showWeekSession:q,weekCount:W,onSave:w=>{(async()=>{try{const F=await ue.createHomework({courseId:r,title:w.title,description:w.description,dueDate:w.dueDate,dueTime:w.dueTime,totalScore:Number(w.totalScore||0),onoffType:"N",file:w.file});if(F.rst_code!=="0000")throw new Error(F.rst_message);if((u==null?void 0:u.sourceType)==="haksa")try{await $l({haksaKey:p,weekNumber:Number(w.weekNumber||1),sessionNumber:Number(w.sessionNumber||1),content:{type:"assignment",title:w.title,description:w.description,dueDate:w.dueDate,dueTime:w.dueTime,totalScore:Number(w.totalScore||0)}})}catch(Y){alert(Y instanceof Error?Y.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await J(),alert("\uACFC\uC81C\uAC00 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(F){alert(F instanceof Error?F.message:"\uACFC\uC81C \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()}}),e.jsx(Mc,{isOpen:h,onClose:()=>{m(!1),P(null)},onSave:C,mode:"edit",showWeekSession:q,weekCount:W,initialData:b||void 0}),e.jsx(Em,{isOpen:N,onClose:()=>{U(!1),R(null)},onEdit:()=>{E&&A(E)},assignment:E})]})}function id({courseId:r}){const[u,c]=o.useState([]),[d,h]=o.useState(null),[m,b]=o.useState([]),[P,N]=o.useState(null),[U,E]=o.useState("0"),[R,v]=o.useState(""),[I,W]=o.useState(!1),[q,p]=o.useState(!1),[G,H]=o.useState(null),T=D=>D===!0||D===1||D==="1"||D==="Y"||D==="true",$=async()=>{var D;if(r){W(!0),H(null);try{const y=await ue.getHomeworks({courseId:r});if(y.rst_code!=="0000")throw new Error(y.rst_message);const ae=(y.rst_data??[]).map(Be=>({id:Number(Be.homework_id),title:Be.homework_nm||Be.module_nm||"\uACFC\uC81C"}));c(ae);const le=((D=ae[0])==null?void 0:D.id)??null;h(Be=>Be&&ae.some(we=>we.id===Be)?Be:le),le||(b([]),N(null),E("0"),v(""))}catch(y){H(y instanceof Error?y.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{W(!1)}}},O=async D=>{if(!(!r||!D)){p(!0),H(null);try{const y=await ue.getHomeworkUsers({courseId:r,homeworkId:D});if(y.rst_code!=="0000")throw new Error(y.rst_message);const ae=(y.rst_data??[]).map(le=>({courseUserId:Number(le.course_user_id),studentId:le.login_id,name:le.user_nm,submitted:T(le.submitted),submittedAt:le.submitted_at??"-",confirm:T(le.confirm),markingScore:Number(le.marking_score??0),scoreConv:le.score_conv??"",feedback:le.feedback??"",taskCnt:Number(le.task_cnt??0)}));b(ae),N(le=>le&&ae.some(Be=>Be.courseUserId===le)?le:null)}catch(y){H(y instanceof Error?y.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{p(!1)}}};o.useEffect(()=>{$()},[r]),o.useEffect(()=>{d&&O(d)},[r,d]);const B=m.find(D=>D.courseUserId===P)??null,x=D=>{N(D);const y=m.find(K=>K.courseUserId===D);E(String((y==null?void 0:y.markingScore)??0)),v(String((y==null?void 0:y.feedback)??""))},_=()=>{if(!d||!P)return;const D=parseInt(U,10);if(isNaN(D)||D<0||D>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}(async()=>{try{const y=await ue.updateHomeworkFeedback({courseId:r,homeworkId:d,courseUserId:P,markingScore:D,feedback:R});if(y.rst_code!=="0000")throw new Error(y.rst_message);await O(d),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(y){alert(y instanceof Error?y.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},k=()=>{!d||!P||confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uACFC\uC81C \uC81C\uCD9C\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(async()=>{try{const D=await ue.cancelHomeworkSubmit({courseId:r,homeworkId:d,courseUserId:P});if(D.rst_code!=="0000")throw new Error(D.rst_message);await O(d),N(null),E("0"),v(""),alert("\uC81C\uCD9C\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(D){alert(D instanceof Error?D.message:"\uC81C\uCD9C \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},j=()=>{if(!d||!P)return;const D=prompt("\uCD94\uAC00\uACFC\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");!D||!D.trim()||(async()=>{try{const y=await ue.appendHomeworkTask({courseId:r,homeworkId:d,courseUserId:P,task:D.trim()});if(y.rst_code!=="0000")throw new Error(y.rst_message);await O(d),alert("\uCD94\uAC00\uACFC\uC81C\uAC00 \uBD80\uC5EC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(y){alert(y instanceof Error?y.message:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},[J,A]=o.useState([]),[C,f]=o.useState(!1),[w,F]=o.useState(null),Y=async(D,y)=>{f(!0);try{const K=await ue.getHomeworkTasks({courseId:r,homeworkId:D,courseUserId:y});if(K.rst_code!=="0000")throw new Error(K.rst_message);A(K.rst_data??[])}catch{A([])}finally{f(!1)}},L=D=>{x(D),d&&Y(d,D)},S={total:m.length,needFeedback:m.filter(D=>D.submitted&&!D.confirm).length,doneFeedback:m.filter(D=>D.confirm).length};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"\uACFC\uC81C \uC120\uD0DD:"}),e.jsxs("select",{value:d??"",onChange:D=>{const y=D.target.value?Number(D.target.value):null;h(y),N(null),E("0"),v("")},disabled:I||u.length===0,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[u.length===0&&e.jsx("option",{value:"",children:"\uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),u.map(D=>e.jsx("option",{value:D.id,children:D.title},D.id))]})]}),G&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:G}),q&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),u.length===0&&!I?e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uBA3C\uC800 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694. (\uACFC\uC81C \uAD00\uB9AC \uD0ED\uC5D0\uC11C \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.)"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 rounded-t-lg border border-b-0 border-gray-200",children:e.jsxs("h4",{className:"text-gray-900",children:["\uC218\uAC15\uC0DD \uBAA9\uB85D (",m.length,"\uBA85)"]})}),e.jsxs("div",{className:"border border-gray-200 rounded-b-lg divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:[m.map(D=>{const y=P===D.courseUserId,K=D.submitted?D.confirm?{label:"\uD53C\uB4DC\uBC31 \uC644\uB8CC",className:"bg-green-100 text-green-700"}:{label:"\uD53C\uB4DC\uBC31 \uD544\uC694",className:"bg-orange-100 text-orange-700"}:{label:"\uBBF8\uC81C\uCD9C",className:"bg-red-100 text-red-700"};return e.jsxs("button",{onClick:()=>L(D.courseUserId),className:`w-full p-4 text-left transition-colors ${y?"bg-blue-50 border-l-4 border-blue-600":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 mb-1",children:D.name}),e.jsx("div",{className:"text-sm text-gray-600",children:D.studentId})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${K.className}`,children:K.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["\uC81C\uCD9C: ",D.submittedAt]}),e.jsxs("span",{children:["\uC810\uC218: ",D.markingScore,"\uC810",D.scoreConv?` (${D.scoreConv})`:""]})]}),0<D.taskCnt&&e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:["\uCD94\uAC00\uACFC\uC81C ",D.taskCnt,"\uAC74"]})]},D.courseUserId)}),m.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]})]}),e.jsx("div",{children:B?e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsxs("h4",{className:"text-gray-900",children:[B.name," (",B.studentId,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC81C\uCD9C\uC2DC\uAC04: ",B.submittedAt]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC810\uC218(0~100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:U,onChange:D=>E(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 border border-blue-200 text-blue-700 rounded-lg hover:bg-blue-50 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD53C\uB4DC\uBC31"}),e.jsx("textarea",{value:R,onChange:D=>v(D.target.value),placeholder:"\uD559\uC0DD\uC5D0\uAC8C \uC804\uB2EC\uD560 \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{E(String(B.markingScore??0)),v(String(B.feedback??""))},className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),B.submitted&&e.jsx("button",{onClick:k,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\uC81C\uCD9C \uCDE8\uC18C"}),e.jsx("button",{onClick:_,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC800\uC7A5"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 mb-2",children:"\uD53C\uB4DC\uBC31 \uC548\uB0B4"}),e.jsxs("div",{className:"text-sm text-blue-700",children:["- \uC800\uC7A5\uC744 \uB204\uB974\uBA74 \uC810\uC218/\uD53C\uB4DC\uBC31\uC774 DB\uC5D0 \uC800\uC7A5\uB418\uACE0, \uC131\uC801(\uACFC\uC81C \uC810\uC218)\uC5D0 \uC989\uC2DC \uBC18\uC601\uB429\uB2C8\uB2E4.",e.jsx("br",{}),"- \uC624\uD504\uB77C\uC778 \uACFC\uC81C\uCC98\uB7FC \uC81C\uCD9C \uAE30\uB85D\uC774 \uC5C6\uC5B4\uB3C4, \uD544\uC694\uD558\uBA74 \uC810\uC218 \uC785\uB825\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."]})]}),J.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D (",J.length,"\uAC74)"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-200 max-h-[300px] overflow-y-auto",children:J.map(D=>e.jsxs("button",{onClick:()=>F(D),className:"w-full text-left p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium group-hover:text-blue-600",children:D.task_preview}),e.jsx("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:D.need_review?e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded border border-orange-200",children:"\uC7AC\uD3C9\uAC00 \uD544\uC694"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${D.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:D.submit_yn_label}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${D.confirm_yn==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:D.confirm_yn_label})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uBD80\uC5EC: ",D.reg_date_conv,D.submit_yn==="Y"&&e.jsxs("span",{className:"ml-3",children:["\uC81C\uCD9C: ",D.submit_date_conv]})]}),D.subject&&e.jsxs("div",{className:"mt-1 text-xs text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"\uC81C\uCD9C \uC81C\uBAA9:"})," ",D.subject]})]},D.id))}),e.jsx("div",{className:"mt-2 text-[11px] text-gray-400",children:"* \uAC01 \uD56D\uBAA9\uC744 \uD074\uB9AD\uD558\uBA74 \uC81C\uCD9C \uC0C1\uC138 \uB0B4\uC6A9 \uD655\uC778 \uBC0F \uD3C9\uAC00\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),C&&e.jsx("div",{className:"text-center text-gray-500 text-sm py-2",children:"\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}):e.jsx("div",{className:"border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Us,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{children:"\uD559\uC0DD\uC744 \uC120\uD0DD\uD558\uC5EC"}),e.jsx("p",{children:"\uC810\uC218\uC640 \uD53C\uB4DC\uBC31\uC744 \uC800\uC7A5\uD558\uC138\uC694"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"\uCD1D \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[S.total,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-orange-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uD544\uC694"}),e.jsxs("div",{className:"text-2xl text-orange-900",children:[S.needFeedback,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uC644\uB8CC"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[S.doneFeedback,"\uBA85"]})]})]})]}),e.jsx(Fm,{isOpen:!!w,onClose:()=>F(null),courseId:r,task:w,onRefresh:()=>{d&&P&&(Y(d,P),O(d))}})]})}function Jm({courseId:r,showWeekSession:u=!1,weekCount:c=15,course:d}){const[h,m]=o.useState(!1),[b,P]=o.useState([]),[N,U]=o.useState(!1),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState(!1),[p,G]=o.useState(null),H=(d==null?void 0:d.sourceType)==="haksa",T=H?Number((d==null?void 0:d.mappedCourseId)??0):Number.isFinite(r)?r:0,$=p&&p>0?p:T,[O,B]=o.useState({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1}),x=o.useMemo(()=>Hs({haksaCourseCode:d==null?void 0:d.haksaCourseCode,haksaOpenYear:d==null?void 0:d.haksaOpenYear,haksaOpenTerm:d==null?void 0:d.haksaOpenTerm,haksaBunbanCode:d==null?void 0:d.haksaBunbanCode,haksaGroupCode:d==null?void 0:d.haksaGroupCode}),[d==null?void 0:d.haksaCourseCode,d==null?void 0:d.haksaOpenYear,d==null?void 0:d.haksaOpenTerm,d==null?void 0:d.haksaBunbanCode,d==null?void 0:d.haksaGroupCode]),_=()=>{B({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1})};o.useEffect(()=>{if(!H){G(null);return}if(T>0){G(null);return}if(!x){I("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let C=!1;return(async()=>{q(!0),I(null);try{const w=await ue.resolveHaksaCourse(x);if(w.rst_code!=="0000")throw new Error(w.rst_message);const F=Array.isArray(w.rst_data)?w.rst_data[0]:w.rst_data,Y=Number((F==null?void 0:F.mapped_course_id)??0);if(!Y||Number.isNaN(Y))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");C||G(Y)}catch(w){C||(G(null),I(w instanceof Error?w.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{C||q(!1)}})(),()=>{C=!0}},[H,T,x]);const k=async()=>{if($){U(!0),I(null);try{const C=await ue.getMaterials({courseId:$});if(C.rst_code!=="0000")throw new Error(C.rst_message);const w=(C.rst_data??[]).map(F=>({id:Number(F.library_id),title:F.library_nm,uploadDate:F.upload_date_conv||"-",size:F.file_size_conv||"-",downloadUrl:F.file_url||F.library_link||"",hasFile:!!F.file_url,hasLink:!!F.library_link}));P(w)}catch(C){I(C instanceof Error?C.message:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}}};o.useEffect(()=>{k()},[$]);const j=C=>{const f=C.downloadUrl;if(!f){alert("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uD30C\uC77C/\uB9C1\uD06C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}window.open(f,"_blank","noopener,noreferrer")},J=(C,f)=>{(async()=>{if(!$){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(confirm(`\uC790\uB8CC "${f}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const F=await ue.deleteMaterial({courseId:$,libraryId:C});if(F.rst_code!=="0000")throw new Error(F.rst_message);await k(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(F){alert(F instanceof Error?F.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},A=()=>{(async()=>{var F;const C=O.title.trim(),f=!!O.file,w=!!O.link.trim();if(!C){alert("\uC790\uB8CC\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!$){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(!f&&!w){alert("\uC790\uB8CC \uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC694\uD569\uB2C8\uB2E4.");return}R(!0);try{const Y=await ue.uploadMaterial({courseId:$,title:C,content:O.content,link:O.link,file:O.file});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);if((d==null?void 0:d.sourceType)==="haksa")try{await $l({haksaKey:x,weekNumber:Number(O.weekNumber||1),sessionNumber:Number(O.sessionNumber||1),content:{type:"document",title:O.title,description:O.content,link:O.link,fileName:((F=O.file)==null?void 0:F.name)||""}})}catch(L){alert(L instanceof Error?L.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC790\uB8CC\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await k(),m(!1),_(),alert("\uC5C5\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Y){alert(Y instanceof Error?Y.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ll,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"})]})}),v&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:v}),W&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-700 rounded-lg",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),N&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!N&&b.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uC790\uB8CC\uB97C \uC5C5\uB85C\uB4DC\uD574 \uC8FC\uC138\uC694."}),e.jsx("div",{className:"space-y-2",children:b.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ru,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:C.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:[C.uploadDate," \xB7 ",C.size,C.hasLink&&!C.hasFile&&e.jsx("span",{className:"ml-2",children:"(\uB9C1\uD06C)"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(C),className:"px-3 py-1.5 text-sm text-blue-700 hover:bg-blue-50 rounded transition-colors",children:"\uB2E4\uC6B4\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>J(C.id,C.title),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]})]},C.id))})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>{m(!1),_()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsxs("form",{onSubmit:C=>{C.preventDefault(),A()},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:O.title,onChange:C=>B({...O,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),u&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:O.weekNumber,onChange:C=>B({...O,weekNumber:parseInt(C.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:c},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:O.sessionNumber,onChange:C=>B({...O,sessionNumber:parseInt(C.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:O.content,onChange:C=>B({...O,content:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:O.link,onChange:C=>B({...O,link:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:C=>{var f;return B({...O,file:((f=C.target.files)==null?void 0:f[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),_()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:E,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:E,children:E?"\uC5C5\uB85C\uB4DC \uC911...":"\uC5C5\uB85C\uB4DC"})]})]})]})})]})}function Xm({courseId:r,initialPostId:u}){const[c,d]=o.useState(""),[h,m]=o.useState([]),[b,P]=o.useState(!1),[N,U]=o.useState(null),[E,R]=o.useState(null),[v,I]=o.useState(null),[W,q]=o.useState(!1),[p,G]=o.useState(""),H=o.useRef(!1),T=x=>x===!0||x===1||x==="1"||x==="Y"||x==="true",$=async x=>{if(r){P(!0),U(null);try{const _=await ue.getQnas({courseId:r,keyword:x==null?void 0:x.keyword});if(_.rst_code!=="0000")throw new Error(_.rst_message);const j=(_.rst_data??[]).map(J=>({id:Number(J.id),subject:J.subject,student:J.user_nm||J.login_id||"-",date:J.reg_date_conv||"-",answered:T(J.answered)||Number(J.proc_status??0)===1}));m(j)}catch(_){U(_ instanceof Error?_.message:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}}},O=async x=>{if(!(!r||!x)){q(!0),U(null);try{const _=await ue.getQnaDetail({courseId:r,postId:x});if(_.rst_code!=="0000")throw new Error(_.rst_message);const k=Array.isArray(_.rst_data)?_.rst_data[0]:_.rst_data;I(k??null),G(String((k==null?void 0:k.answer_content)??""))}catch(_){U(_ instanceof Error?_.message:"Q&A \uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{q(!1)}}};o.useEffect(()=>{$({keyword:c.trim()?c.trim():void 0})},[r]),o.useEffect(()=>{H.current=!1,R(null),I(null),G("")},[r]),o.useEffect(()=>{u&&(H.current||(H.current=!0,R(u)))},[u]),o.useEffect(()=>{E&&O(E)},[r,E]);const B=()=>{if(!E)return;const x=p.trim();if(!x){alert("\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const _=await ue.answerQna({courseId:r,postId:E,content:x});if(_.rst_code!=="0000")throw new Error(_.rst_message);await O(E),await $({keyword:c.trim()?c.trim():void 0}),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(_){alert(_ instanceof Error?_.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};if(E){const x=v?T(v.answered):!1;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{R(null),I(null),G("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Mu,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:"Q&A"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC9C8\uBB38 \uC0C1\uC138 \uBC0F \uB2F5\uBCC0"})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${x?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"})]}),N&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:N}),W&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:v.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[v.question_user_nm," \xB7 ",v.question_reg_date_conv||"-"]})]}),e.jsx("div",{className:"p-4 text-sm text-gray-800 prose max-w-none",dangerouslySetInnerHTML:{__html:v.question_content||""}})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-900",children:"\uB2F5\uBCC0"}),e.jsx("div",{className:"text-xs text-gray-500",children:v.answer_reg_date_conv?`\uCD5C\uADFC \uC800\uC7A5: ${v.answer_reg_date_conv}`:""})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("textarea",{value:p,onChange:_=>G(_.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694..."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:x?"\uB2F5\uBCC0 \uC218\uC815":"\uB2F5\uBCC0 \uB4F1\uB85D"})})]})]})]})]})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),placeholder:"\uAC80\uC0C9\uC5B4(\uC81C\uBAA9)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:x=>{x.key==="Enter"&&$({keyword:c.trim()?c.trim():void 0})}}),e.jsx("button",{onClick:()=>void $({keyword:c.trim()?c.trim():void 0}),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]}),N&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:N}),b&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!b&&h.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"Q&A \uAE00\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("div",{className:"space-y-4",children:h.map(x=>e.jsx("button",{onClick:()=>R(x.id),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:x.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[x.student," \xB7 ",x.date]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${x.answered?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x.answered?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"}),e.jsx(Yt,{className:"w-5 h-5 text-gray-400"})]})]})},x.id))})]})}function Zm({courseId:r}){const[u,c]=o.useState([]),[d,h]=o.useState(null),[m,b]=o.useState(!1),[P,N]=o.useState(!1),[U,E]=o.useState(null),R=(B,x=0)=>{const _=Number(B);return Number.isFinite(_)?_:x},v=B=>{if(!d)return;const x=Array.isArray(d)?d[0]:d;if(!(!x||typeof x!="object"))return x[B]??x[B.toUpperCase()]},I=async()=>{if(r){b(!0),E(null);try{const B=await ue.getGrades({courseId:r});if(B.rst_code!=="0000")throw new Error(B.rst_message);const _=(B.rst_data??[]).map(k=>({courseUserId:Number(k.course_user_id),studentId:k.login_id,name:k.user_nm,progressRatio:R(k.progress_ratio,0),examScore:R(k.exam_score,0),homeworkScore:R(k.homework_score,0),etcScore:R(k.etc_score,0),totalScore:R(k.total_score,0),statusLabel:k.status_label||""}));c(_),h(B.rst_course??null)}catch(B){E(B instanceof Error?B.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{b(!1)}}};o.useEffect(()=>{I()},[r]);const W=B=>B==="\uD569\uACA9"?"bg-green-100 text-green-700":B==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700",q={progressRate:R(v("complete_limit_progress"),0),totalScore:R(v("complete_limit_total_score"),0)},p=String(v("pass_yn")||"")==="Y",G={progressRate:R(v("limit_progress"),0),totalScore:R(v("limit_total_score"),0)},H={progress:R(v("assign_progress"),0),exam:R(v("assign_exam"),0),homework:R(v("assign_homework"),0),forum:R(v("assign_forum"),0),etc:R(v("assign_etc"),0)},T=H.progress+H.exam+H.homework+H.forum+H.etc,$=()=>{(async()=>{if(confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uC2DC\uD5D8/\uACFC\uC81C \uC810\uC218, \uC9C4\uB3C4\uC728 \uB4F1\uC744 \uAE30\uC900\uC73C\uB85C \uCD1D\uC810\uC774 \uB2E4\uC2DC \uACC4\uC0B0\uB429\uB2C8\uB2E4.)`)){N(!0);try{const x=await ue.recalcGrades({courseId:r});if(x.rst_code!=="0000")throw new Error(x.rst_message);await I(),alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(x){alert(x instanceof Error?x.message:"\uC7AC\uACC4\uC0B0 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}}})()},O=()=>{const B=new Date().toISOString().slice(0,10).replace(/-/g,""),x=`course_${r}_grades_${B}.csv`,_=["No","course_user_id","\uD559\uBC88","\uC774\uB984","\uC9C4\uB3C4\uC728(%)","\uC2DC\uD5D8","\uACFC\uC81C","\uAE30\uD0C0","\uCD1D\uC810","\uC0C1\uD0DC"],k=u.map((j,J)=>[J+1,j.courseUserId??"",j.studentId??"",j.name??"",Math.round(R(j.progressRatio,0)),R(j.examScore,0),R(j.homeworkScore,0),R(j.etcScore,0),R(j.totalScore,0),j.statusLabel??""]);Pu(x,_,k)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"\uC131\uC801 \uC870\uD68C \uBC0F \uAD00\uB9AC"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:$,disabled:P,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",children:[e.jsx(Rl,{className:"w-4 h-4"}),e.jsx("span",{children:P?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"})]}),e.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC131\uC801\uD45C \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4 ",H.progress," / \uC2DC\uD5D8 ",H.exam," / \uACFC\uC81C ",H.homework,H.forum>0?` / \uD1A0\uB860 ${H.forum}`:""," / \uAE30\uD0C0 ",H.etc,T>0?` (\uD569\uACC4 ${T})`:""]})]}),e.jsxs("div",{className:`grid gap-4 text-sm ${p?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",q.progressRate,"% \uC774\uC0C1",q.totalScore>0?`, \uCD1D\uC810 ${q.totalScore}\uC810 \uC774\uC0C1`:""]})]}),p&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",G.progressRate,"% \uC774\uC0C1",G.totalScore>0?`, \uCD1D\uC810 ${G.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})]}),U&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:U}),m&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!m&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC2DC\uD5D8"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACFC\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAE30\uD0C0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACB0\uACFC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[u.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:B.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:B.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(B.progressRatio*10)/10,"%"]}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:B.examScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:B.homeworkScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:B.etcScore}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:Math.round(B.totalScore*100)/100})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full ${W(B.statusLabel)}`,children:B.statusLabel||"\uBBF8\uB2EC"})})]},B.courseUserId)),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC131\uC801 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function ex({courseId:r,course:u}){const c=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(r)||r<=0),[d,h]=o.useState([]),[m,b]=o.useState([]),[P,N]=o.useState(null),[U,E]=o.useState(!1),[R,v]=o.useState(!1),[I,W]=o.useState(null),q=(f,w=0)=>{const F=Number(f);return Number.isFinite(F)?F:w},p=f=>{if(!P)return;const w=Array.isArray(P)?P[0]:P;if(!(!w||typeof w!="object"))return w[f]??w[f.toUpperCase()]},G=async()=>{if(r){E(!0),W(null);try{const f=await ue.getCompletions({courseId:r});if(f.rst_code!=="0000")throw new Error(f.rst_message);const F=(f.rst_data??[]).map(Y=>({courseUserId:Number(Y.course_user_id),studentId:Y.login_id,name:Y.user_nm,progressRatio:q(Y.progress_ratio,0),totalScore:q(Y.total_score,0),completeStatus:String(Y.complete_status||""),completeYn:String(Y.complete_yn||""),completeDate:Y.complete_date_conv||"-",closeYn:String(Y.close_yn||""),closeDate:Y.close_date_conv||"-",statusLabel:Y.status_label||""}));b(F),N(f.rst_course??null),h(Y=>Y.filter(L=>F.some(S=>S.courseUserId===L)))}catch(f){W(f instanceof Error?f.message:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{E(!1)}}};o.useEffect(()=>{G()},[r]);const H={progressRate:q(p("complete_limit_progress"),0),totalScore:q(p("complete_limit_total_score"),0)},T=String(p("pass_yn")||"")==="Y",$={progressRate:q(p("limit_progress"),0),totalScore:q(p("limit_total_score"),0)},O=f=>f.completeStatus==="C"||f.completeStatus==="P",B=f=>f.completeStatus==="P",x=f=>f==="\uD569\uACA9"?"bg-green-100 text-green-700":f==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":f==="\uC885\uB8CC"?"bg-gray-100 text-gray-700":f==="\uBBF8\uC218\uB8CC"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-800",_=f=>{f.target.checked?h(m.map(w=>w.courseUserId)):h([])},k=f=>{h(w=>w.includes(f)?w.filter(F=>F!==f):[...w,f])},j=(f,w)=>{if(d.length===0){alert("\uCC98\uB9AC\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}(async()=>{if(confirm(`${w}\uC744(\uB97C) \uC2E4\uD589\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC120\uD0DD \uC778\uC6D0: ${d.length}\uBA85`)){v(!0);try{const Y=await ue.updateCompletion({courseId:r,action:f,courseUserIds:d});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);await G(),alert("\uCC98\uB9AC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Y){alert(Y instanceof Error?Y.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}}})()},J=(f,w)=>{const F=window.open("","_blank");if(!F){alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const Y=await ue.issueCertificate({courseUserId:f,type:w});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);const L=Y.rst_data;if(!L)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");F.location.href=L}catch(Y){try{F.close()}catch{}alert(Y instanceof Error?Y.message:"\uC99D\uBA85\uC11C \uCD9C\uB825 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},A=f=>{if(d.length===0){alert("\uCD9C\uB825\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}const F=m.filter(L=>d.includes(L.courseUserId)).filter(L=>f==="P"?B(L):O(L));if(F.length===0){alert(f==="P"?"\uD569\uACA9\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uC218\uB8CC\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(F.length>20){alert("\uD55C \uBC88\uC5D0 \uB108\uBB34 \uB9CE\uC774 \uCD9C\uB825\uD558\uBA74 \uD31D\uC5C5 \uCC28\uB2E8\uC774 \uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. 20\uBA85 \uC774\uD558\uB85C \uB098\uB220\uC11C \uCD9C\uB825\uD574 \uC8FC\uC138\uC694.");return}const Y=F.map(L=>({row:L,win:window.open("","_blank")}));if(Y.some(L=>!L.win)){Y.forEach(L=>{var S;try{(S=L.win)==null||S.close()}catch{}}),alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{var S;const L=[];for(const D of Y)try{const y=await ue.issueCertificate({courseUserId:D.row.courseUserId,type:f});if(y.rst_code!=="0000")throw new Error(y.rst_message);const K=y.rst_data;if(!K)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");D.win.location.href=K}catch(y){try{(S=D.win)==null||S.close()}catch{}L.push(`${D.row.name}: ${y instanceof Error?y.message:"\uC624\uB958"}`)}L.length>0&&alert(`\uC77C\uBD80 \uCD9C\uB825\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.

${L.join(`
`)}`)})()},C=m.filter(f=>d.includes(f.courseUserId)&&B(f)).length;return c?e.jsx(od,{course:u}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:`grid gap-4 text-sm ${T?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",H.progressRate,"% \uC774\uC0C1",H.totalScore>0?`, \uCD1D\uC810 ${H.totalScore}\uC810 \uC774\uC0C1`:""]})]}),T&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",$.progressRate,"% \uC774\uC0C1",$.totalScore>0?`, \uCD1D\uC810 ${$.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 justify-end",children:[e.jsx("button",{onClick:()=>void G(),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:U||R,children:"\uC0C8\uB85C\uACE0\uCE68"}),e.jsx("button",{onClick:()=>j("complete_y",T?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:R,children:T?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"}),e.jsx("button",{onClick:()=>j("complete_n","\uD310\uC815 \uCD08\uAE30\uD654"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:bg-gray-200",disabled:R,children:"\uD310\uC815 \uCD08\uAE30\uD654"}),e.jsx("button",{onClick:()=>j("close_y","\uC885\uB8CC(\uB9C8\uAC10) \uCC98\uB9AC"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",disabled:R,children:"\uC885\uB8CC(\uB9C8\uAC10)"}),e.jsx("button",{onClick:()=>j("close_n","\uC885\uB8CC \uD574\uC81C"),className:"px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:bg-gray-200",disabled:R,children:"\uC885\uB8CC \uD574\uC81C"})]}),e.jsxs("div",{className:"mb-4 flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>A("C"),disabled:d.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC218\uB8CC\uC99D \uC77C\uAD04\uCD9C\uB825 (",d.length,")"]})]}),T&&e.jsxs("button",{onClick:()=>A("P"),disabled:d.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Tr,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uD569\uACA9\uC99D \uC77C\uAD04\uCD9C\uB825 (",C,")"]})]})]}),I&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:I}),U&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),!U&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"checkbox",onChange:_,checked:m.length>0&&d.length===m.length,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD310\uC815/\uC885\uB8CC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC99D\uBA85\uC11C \uCD9C\uB825"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[m.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:d.includes(f.courseUserId),onChange:()=>k(f.courseUserId),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:f.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:f.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.progressRatio*10)/10,"%"]}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.totalScore*100)/100,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${x(f.statusLabel)}`,children:f.statusLabel||"\uBBF8\uD310\uC815"})}),e.jsxs("td",{className:"px-4 py-4 text-center text-xs text-gray-600",children:[e.jsxs("div",{children:["\uD310\uC815: ",f.completeStatus||"-"]}),e.jsxs("div",{children:["\uC885\uB8CC: ",f.closeYn||"-"]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>J(f.courseUserId,"C"),disabled:!O(f),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uC218\uB8CC\uC99D"}),T&&e.jsx("button",{onClick:()=>J(f.courseUserId,"P"),disabled:!B(f),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uD569\uACA9\uC99D"})]})})]},f.courseUserId)),m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC218\uB8CC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function tx({haksaKey:r,haksaExams:u,setHaksaExams:c,weekCount:d}){const[h,m]=o.useState(!1),[b,P]=o.useState(null),[N,U]=o.useState([]),[E,R]=o.useState(""),[v,I]=o.useState(null),[W,q]=o.useState(1),[p,G]=o.useState(1),H=new Date().toISOString().split("T")[0],T=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[$,O]=o.useState({startDate:H,startTime:"09:00",endDate:T,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!h)return;let C=!1;return(async()=>{I(null);try{const w=await ue.getExamTemplates({limit:200});if(w.rst_code!=="0000")throw new Error(w.rst_message);const Y=(w.rst_data??[]).map(L=>({id:String(L.id),title:L.exam_nm||"\uC2DC\uD5D8",description:L.content||"",questionCount:Number(L.question_cnt??0),totalPoints:Number(L.total_points??0)}));C||U(Y)}catch(w){C||(U([]),I(w instanceof Error?w.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{C=!0}},[h]);const B=N.find(C=>C.id===E);o.useEffect(()=>{B&&O(C=>({...C,points:B.totalPoints||0}))},[B]);const x=()=>{R(""),q(1),G(1),O({startDate:H,startTime:"09:00",endDate:T,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0})},_=async C=>{if(c(C),!!r)try{const f=await ue.updateHaksaExams({...r,examsJson:JSON.stringify(C)});if(f.rst_code!=="0000")throw new Error(f.rst_message)}catch(f){I(f instanceof Error?f.message:"\uC2DC\uD5D8 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},k=()=>{if(!E||!B)return;const C={id:`exam_${Date.now()}`,examId:E,title:B.title,description:B.description,questionCount:B.questionCount||0,totalPoints:B.totalPoints,type:"exam",weekNumber:W,sessionNumber:p,sessionName:`${p}\uCC28\uC2DC`,createdAt:new Date().toISOString(),settings:{...$}},f=[...u,C];_(f),m(!1),x()},j=C=>{var f,w,F,Y,L,S,D,y,K;P(C),R(C.examId),q(C.weekNumber||1),G(C.sessionNumber||1),O({startDate:((f=C.settings)==null?void 0:f.startDate)||H,startTime:((w=C.settings)==null?void 0:w.startTime)||"09:00",endDate:((F=C.settings)==null?void 0:F.endDate)||T,endTime:((Y=C.settings)==null?void 0:Y.endTime)||"18:00",points:((L=C.settings)==null?void 0:L.points)||C.totalPoints||0,allowRetake:((S=C.settings)==null?void 0:S.allowRetake)||!1,retakeScore:((D=C.settings)==null?void 0:D.retakeScore)||0,retakeCount:((y=C.settings)==null?void 0:y.retakeCount)||0,showResults:((K=C.settings)==null?void 0:K.showResults)!==!1})},J=()=>{if(!b)return;const C=u.map(f=>f.id===b.id?{...f,weekNumber:W,sessionNumber:p,sessionName:`${p}\uCC28\uC2DC`,settings:{...$}}:f);_(C),P(null),x()},A=C=>{if(!confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))return;const f=u.filter(w=>w.id!==C);_(f)};return e.jsxs("div",{className:"space-y-4",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),u.length>0?e.jsx("div",{className:"space-y-3",children:u.map(C=>{var f,w,F,Y,L,S,D;return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(os,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:C.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[C.questionCount||0,"\uBB38\uC81C"]}),e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[C.weekNumber||1,"\uC8FC\uCC28"]}),e.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-xs rounded",children:C.sessionName||`${C.sessionNumber||1}\uCC28\uC2DC`})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[((f=C.settings)==null?void 0:f.startDate)||"-"," ",((w=C.settings)==null?void 0:w.startTime)||""," ~ ",((F=C.settings)==null?void 0:F.endDate)||"-"," ",((Y=C.settings)==null?void 0:Y.endTime)||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[((L=C.settings)==null?void 0:L.points)||C.totalPoints||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:(S=C.settings)!=null&&S.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",C.settings.retakeScore,"\uC810 \uBBF8\uB9CC, ",C.settings.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:(D=C.settings)!=null&&D.showResults?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:()=>j(C),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(C.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(pt,{className:"w-4 h-4"})})]})]})},C.id)})}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(os,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:W,onChange:C=>q(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:d},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:p,onChange:C=>G(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),N.length>0?e.jsxs("select",{value:E,onChange:C=>R(C.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),N.map(C=>e.jsxs("option",{value:C.id,children:[C.title," (",C.questionCount||0,"\uBB38\uC81C, ",C.totalPoints,"\uC810)"]},C.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),E&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:$.startDate,onChange:C=>O(f=>({...f,startDate:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:$.startTime,onChange:C=>O(f=>({...f,startTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:$.endDate,onChange:C=>O(f=>({...f,endDate:C.target.value})),min:$.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:$.endTime,onChange:C=>O(f=>({...f,endTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:$.points,onChange:C=>O(f=>({...f,points:parseInt(C.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.allowRetake,onChange:C=>O(f=>({...f,allowRetake:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),$.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:$.retakeScore,onChange:C=>O(f=>({...f,retakeScore:parseInt(C.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:$.retakeCount,onChange:C=>O(f=>({...f,retakeCount:parseInt(C.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.showResults,onChange:C=>O(f=>({...f,showResults:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:k,disabled:!E,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"\uC2DC\uD5D8\uCD94\uAC00"})]})]})]}),b&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>P(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>P(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:W,onChange:C=>q(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:d},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:p,onChange:C=>G(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:b.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:$.startDate,onChange:C=>O(f=>({...f,startDate:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:$.startTime,onChange:C=>O(f=>({...f,startTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:$.endDate,onChange:C=>O(f=>({...f,endDate:C.target.value})),min:$.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:$.endTime,onChange:C=>O(f=>({...f,endTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:$.points,onChange:C=>O(f=>({...f,points:parseInt(C.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.allowRetake,onChange:C=>O(f=>({...f,allowRetake:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),$.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:$.retakeScore,onChange:C=>O(f=>({...f,retakeScore:parseInt(C.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:$.retakeCount,onChange:C=>O(f=>({...f,retakeCount:parseInt(C.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$.showResults,onChange:C=>O(f=>({...f,showResults:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>P(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:J,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function sx({isOpen:r,onClose:u,onSave:c,showWeekSession:d=!1,weekCount:h=15}){const[m,b]=o.useState([]),[P,N]=o.useState(""),[U,E]=o.useState(!1),[R,v]=o.useState(null),[I,W]=o.useState(1),[q,p]=o.useState(1),G=new Date().toISOString().split("T")[0],H=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[T,$]=o.useState({startDate:G,endDate:H,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!r)return;let x=!1;return(async()=>{v(null);try{const k=await ue.getExamTemplates({limit:200});if(k.rst_code!=="0000")throw new Error(k.rst_message);const J=(k.rst_data??[]).map(A=>({id:String(A.id),title:A.exam_nm||"\uC2DC\uD5D8",description:A.content||"",duration:Number(A.exam_time??60),questionCount:Number(A.question_cnt??0),totalPoints:Number(A.total_points??0)}));x||b(J)}catch(k){x||(b([]),v(k instanceof Error?k.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{x=!0}},[r]);const O=m.find(x=>x.id===P);o.useEffect(()=>{O&&$(x=>({...x,points:O.totalPoints||0}))},[O]);const B=()=>{!P||!O||(c({examId:parseInt(P,10),title:O.title,description:O.description,duration:O.duration||60,questionCount:O.questionCount||0,points:T.points,allowRetake:T.allowRetake,retakeScore:T.retakeScore,retakeCount:T.retakeCount,showResults:T.showResults,startDate:T.startDate,endDate:T.endDate,weekNumber:I,sessionNumber:q}),N(""),$({startDate:G,endDate:H,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}),u())};return r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[d&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:I,onChange:x=>W(parseInt(x.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:h},(x,_)=>_+1).map(x=>e.jsxs("option",{value:x,children:[x,"\uC8FC\uCC28"]},x))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:q,onChange:x=>p(parseInt(x.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(x,_)=>_+1).map(x=>e.jsxs("option",{value:x,children:[x,"\uCC28\uC2DC"]},x))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),m.length>0?e.jsxs("select",{value:P,onChange:x=>N(x.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),m.map(x=>e.jsxs("option",{value:x.id,children:[x.title," (",x.questionCount||0,"\uBB38\uC81C, ",x.totalPoints,"\uC810)"]},x.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),P&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:T.startDate,onChange:x=>$(_=>({..._,startDate:x.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:T.endDate,onChange:x=>$(_=>({..._,endDate:x.target.value})),min:T.startDate,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:T.points,onChange:x=>$(_=>({..._,points:parseInt(x.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T.allowRetake,onChange:x=>$(_=>({..._,allowRetake:x.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),T.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:T.retakeScore,onChange:x=>$(_=>({..._,retakeScore:parseInt(x.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:T.retakeCount,onChange:x=>$(_=>({..._,retakeCount:parseInt(x.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T.showResults,onChange:x=>$(_=>({..._,showResults:x.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),R&&e.jsx("div",{className:"px-6 pb-2 text-sm text-red-600",children:R}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:B,disabled:!P,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"})]})]})]}):null}function od({course:r}){const u=o.useMemo(()=>Hs({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),c=r==null?void 0:r.id,[d,h]=o.useState([]),[m,b]=o.useState([]),[P,N]=o.useState(""),[U,E]=o.useState(!1),[R,v]=o.useState(!1),[I,W]=o.useState(null),q=[{value:"A+",label:"A+ (95-100)",min:95,color:"bg-blue-200 text-blue-800"},{value:"A",label:"A (90-94)",min:90,color:"bg-blue-100 text-blue-700"},{value:"B+",label:"B+ (85-89)",min:85,color:"bg-green-200 text-green-800"},{value:"B",label:"B (80-84)",min:80,color:"bg-green-100 text-green-700"},{value:"C+",label:"C+ (75-79)",min:75,color:"bg-yellow-200 text-yellow-800"},{value:"C",label:"C (70-74)",min:70,color:"bg-yellow-100 text-yellow-700"},{value:"D+",label:"D+ (65-69)",min:65,color:"bg-orange-200 text-orange-800"},{value:"D",label:"D (60-64)",min:60,color:"bg-orange-100 text-orange-700"},{value:"F",label:"F (0-59)",min:0,color:"bg-red-100 text-red-700"}],p=k=>k>=95?"A+":k>=90?"A":k>=85?"B+":k>=80?"B":k>=75?"C+":k>=70?"C":k>=65?"D+":k>=60?"D":"F";o.useEffect(()=>{if(!u)return;let k=!1;(async()=>{E(!0),W(null);try{const[J,A]=await Promise.all([ue.getHaksaCourseStudents({courseCode:u.courseCode,openYear:u.openYear,openTerm:u.openTerm,bunbanCode:u.bunbanCode,groupCode:u.groupCode}),ue.getHaksaGrades(u)]);if(J.rst_code!=="0000")throw new Error(J.rst_message);if(A.rst_code!=="0000")throw new Error(A.rst_message);const C=new Map;(A.rst_data??[]).forEach(w=>{w.student_id&&C.set(String(w.student_id),{grade:w.grade||"",score:Number(w.score??0)})});const f=(J.rst_data??[]).map(w=>{const F=String(w.student_id||""),Y=C.get(F);return{id:F,name:w.name||"-",studentId:F||"-",score:(Y==null?void 0:Y.score)??0,grade:(Y==null?void 0:Y.grade)??""}});if(c&&f.length>0&&C.size===0)try{const w=localStorage.getItem(`haksa_grades_${c}`);if(w){const F=JSON.parse(w),Y=f.map(L=>{const S=F.find(D=>String(D.id)===L.id);return{...L,grade:(S==null?void 0:S.grade)||L.grade,score:Number((S==null?void 0:S.score)??L.score??0)}});await ue.updateHaksaGrades({...u,gradesJson:JSON.stringify(Y.map(L=>({student_id:L.id,grade:L.grade,score:L.score??0})))}),k||h(Y);return}}catch{}k||h(f)}catch(J){h([]),W(J instanceof Error?J.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{E(!1)}})()},[u,c]);const G=async k=>{if(!u)return!1;try{const j=k.map(A=>({student_id:A.id,grade:A.grade,score:Number(A.score??0)})),J=await ue.updateHaksaGrades({...u,gradesJson:JSON.stringify(j)});if(J.rst_code!=="0000")throw new Error(J.rst_message);return!0}catch(j){return W(j instanceof Error?j.message:"\uC131\uC801 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),!1}},H=k=>{h(k),G(k)},T=(k,j)=>{const J=d.map(A=>A.id===k?{...A,grade:j}:A);H(J)},$=()=>{(async()=>{if(!confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uD604\uC7AC \uC810\uC218\uB97C \uAE30\uC900\uC73C\uB85C A/B/C/D/F\uAC00 \uB2E4\uC2DC \uD310\uC815\uB429\uB2C8\uB2E4.)`))return;v(!0);const j=d.map(A=>({...A,grade:p(A.score)}));h(j),await G(j)&&alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),v(!1)})()},O=()=>{if(!P||m.length===0)return;const k=d.map(j=>m.includes(j.id)?{...j,grade:P}:j);H(k),b([]),N("")},B=k=>{b(k?d.map(j=>j.id):[])},x=k=>{b(j=>j.includes(k)?j.filter(J=>J!==k):[...j,k])},_=k=>{const j=q.find(J=>J.value===k);return(j==null?void 0:j.color)||"bg-gray-100 text-gray-700"};return e.jsxs("div",{className:"space-y-6",children:[I&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:I}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD559\uC0AC \uACFC\uBAA9 \uC131\uC801 \uAE30\uC900"}),e.jsx("div",{className:"flex flex-wrap gap-3 text-sm",children:q.map(k=>e.jsx("span",{className:`px-3 py-1 rounded-full ${k.color}`,children:k.label},k.value))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:$,disabled:R,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:R?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"}),m.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:P,onChange:k=>N(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC131\uC801 \uC120\uD0DD"}),q.map(k=>e.jsx("option",{value:k.value,children:k.value},k.value))]}),e.jsxs("button",{onClick:O,disabled:!P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:["\uC120\uD0DD \uD559\uC0DD \uC77C\uAD04 \uC801\uC6A9 (",m.length,"\uBA85)"]})]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:m.length===d.length&&d.length>0,onChange:k=>B(k.target.checked),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801 \uBCC0\uACBD"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[U&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!U&&d.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:m.includes(k.id),onChange:()=>x(k.id),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:k.name}),e.jsx("td",{className:"px-4 py-4 text-center text-gray-600",children:k.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-gray-900 font-medium",children:[k.score,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:k.grade?e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${_(k.grade)}`,children:k.grade}):e.jsx("span",{className:"text-gray-400",children:"\uBBF8\uD310\uC815"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("select",{value:k.grade||"",onChange:j=>T(k.id,j.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD"}),q.map(j=>e.jsx("option",{value:j.value,children:j.value},j.value))]})})]},k.id)),!U&&d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uB4F1\uB85D\uB41C \uD559\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),d.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"\uC131\uC801 \uBD84\uD3EC"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[q.map(k=>{const j=d.filter(J=>J.grade===k.value).length;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${k.color}`,children:k.value}),e.jsxs("span",{className:"text-gray-600",children:[j,"\uBA85"]})]},k.value)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:"\uBBF8\uD310\uC815"}),e.jsxs("span",{className:"text-gray-600",children:[d.filter(k=>!k.grade).length,"\uBA85"]})]})]})]})]})}const Uc=[{value:"regular",label:"\uC815\uADDC\uACFC\uC815"},{value:"non-regular",label:"\uBE44\uC815\uADDC\uACFC\uC815"}],Hc=[{value:"degree",label:"\uD559\uC704"},{value:"professional",label:"\uC804\uBB38\uAE30\uC220"},{value:"master",label:"\uAE30\uB2A5\uC7A5"},{value:"senior",label:"\uC2E0\uC911\uB144"},{value:"hightech",label:"\uD558\uC774\uD14C\uD06C"}];function Tl(r){if(!r)return null;try{const u=JSON.parse(r);return!u||typeof u!="object"?null:u}catch{return null}}function rx(r,u){return{id:String(r.id),sourceType:"prism",courseId:r.course_id_conv||r.course_cd||String(r.id),courseType:[r.course_type_conv,r.onoff_type_conv].filter(Boolean).join(" / ")||"\uBBF8\uC9C0\uC815",subjectName:r.course_nm_conv||r.course_nm||"-",programId:r.program_id||0,programName:u,period:r.period_conv||"-",students:r.student_cnt||0,status:r.status_label||"\uB300\uAE30"}}function cd({course:r,onBack:u}){var oe,be,ve,ne,ge,fe,$e;const[c,d]=o.useState(!1),[h,m]=o.useState(null),[b,P]=o.useState(null),[N,U]=o.useState([]),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState(!1),[p,G]=o.useState([]),[H,T]=o.useState(""),[$,O]=o.useState(!1),[B,x]=o.useState(null),[_,k]=o.useState(null),[j,J]=o.useState(!1),[A,C]=o.useState(!1),[f,w]=o.useState(!1),[F,Y]=o.useState({courseName:"",courseCategory:"",classification:"",departmentName:"",major:"",courseDescription:""}),L=async()=>{if(!(!b||!window.confirm(`\uC815\uB9D0\uB85C \uC774 \uACFC\uC815\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
\uC0AD\uC81C\uB41C \uACFC\uC815\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`))){w(!0);try{const Te=await ue.deleteProgram({id:Number(r.id)});if(Te.rst_code!=="0000")throw new Error(Te.rst_message);alert("\uACFC\uC815\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),u()}catch(Te){alert(Te instanceof Error?Te.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{w(!1)}}},S=async()=>{d(!0),m(null);try{const re=Number(r.id);if(!Number.isFinite(re)||re<=0)throw new Error("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const[Te,z]=await Promise.all([ue.getProgram(re),ue.getProgramCourses({programId:re})]);if(Te.rst_code!=="0000")throw new Error(Te.rst_message);const de=Te.rst_data,he=Array.isArray(de)?de[0]:de;P(he??null),z.rst_code==="0000"&&U(z.rst_data??[])}catch(re){m(re instanceof Error?re.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{d(!1),R(!1)}};o.useEffect(()=>{S()},[r.id]);const D=o.useMemo(()=>Tl(b==null?void 0:b.plan_json),[b==null?void 0:b.plan_json]),y=(b==null?void 0:b.course_nm)??r.name,K=()=>{var Te,z,de,he,Fe,ye,je;const re=Tl(b==null?void 0:b.plan_json);Y({courseName:(b==null?void 0:b.course_nm)??r.name??"",courseCategory:((z=(Te=re==null?void 0:re.basic)==null?void 0:Te.courseCategory)==null?void 0:z.value)??"",classification:((he=(de=re==null?void 0:re.basic)==null?void 0:de.classification)==null?void 0:he.value)??"",departmentName:((Fe=re==null?void 0:re.basic)==null?void 0:Fe.departmentName)??"",major:((ye=re==null?void 0:re.basic)==null?void 0:ye.major)??"",courseDescription:((je=re==null?void 0:re.basic)==null?void 0:je.courseDescription)??""}),J(!0)},ae=()=>{J(!1)},le=async()=>{var re,Te;if(b){C(!0);try{const z=Tl(b==null?void 0:b.plan_json),de={...z,version:1,basic:{...z==null?void 0:z.basic,courseCategory:{value:F.courseCategory,label:((re=Uc.find(Fe=>Fe.value===F.courseCategory))==null?void 0:re.label)??F.courseCategory},classification:{value:F.classification,label:((Te=Hc.find(Fe=>Fe.value===F.classification))==null?void 0:Te.label)??F.classification},departmentName:F.departmentName,major:F.major,courseDescription:F.courseDescription}},he=await ue.modifyProgram({id:Number(r.id),courseName:F.courseName.trim(),planJson:JSON.stringify(de)});if(he.rst_code!=="0000")throw new Error(he.rst_message);await S(),J(!1)}catch(z){alert(z instanceof Error?z.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C(!1)}}},Be=async()=>{q(!0),T(""),O(!0);try{const re=await ue.getMyCourses({});if(re.rst_code==="0000"){const Te=new Set(N.map(de=>de.id)),z=(re.rst_data??[]).filter(de=>!Te.has(de.id));G(z)}}catch(re){console.error("\uACFC\uBAA9 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",re)}finally{O(!1)}},we=async re=>{x(re);try{const Te=Number(r.id),z=await ue.setCourseProgram({courseId:re,programId:Te});if(z.rst_code!=="0000")throw new Error(z.rst_message);await S(),G(de=>de.filter(he=>he.id!==re))}catch(Te){alert(Te instanceof Error?Te.message:"\uACFC\uBAA9 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{x(null)}},ee=async re=>{if(window.confirm("\uC774 \uACFC\uBAA9\uC744 \uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){k(re);try{const z=await ue.setCourseProgram({courseId:re,programId:0});if(z.rst_code!=="0000")throw new Error(z.rst_message);await S()}catch(z){alert(z instanceof Error?z.message:"\uACFC\uBAA9 \uBD84\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{k(null)}}},te=o.useMemo(()=>{if(!H.trim())return p;const re=H.toLowerCase();return p.filter(Te=>{var z,de,he;return((z=Te.course_nm)==null?void 0:z.toLowerCase().includes(re))||((de=Te.course_id_conv)==null?void 0:de.toLowerCase().includes(re))||((he=Te.course_cd)==null?void 0:he.toLowerCase().includes(re))})},[p,H]);return v?e.jsx(ad,{course:v,onBack:()=>I(null)}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Mu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-gray-900",children:"\uACFC\uC815 \uC0C1\uC138"}),j?e.jsx("input",{type:"text",value:F.courseName,onChange:re=>Y({...F,courseName:re.target.value}),className:"mt-1 px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"\uACFC\uC815\uBA85 \uC785\uB825"}):e.jsx("p",{className:"text-sm text-gray-600",children:y})]})]}),!c&&!h&&b&&!j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:L,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:f?"\uC0AD\uC81C \uC911...":"\uC0AD\uC81C"})]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx(Qt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ae,disabled:A,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCDE8\uC18C"})]}),e.jsxs("button",{onClick:le,disabled:A,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:A?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),c&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!c&&h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:h}),!c&&!h&&!b&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uACFC\uC815 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."}),!c&&!h&&b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ht,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4"})]})}),e.jsx("div",{className:"p-6",children:j?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC720\uD615"}),e.jsxs("select",{value:F.courseCategory,onChange:re=>Y({...F,courseCategory:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),Uc.map(re=>e.jsx("option",{value:re.value,children:re.label},re.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsxs("select",{value:F.classification,onChange:re=>Y({...F,classification:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),Hc.map(re=>e.jsx("option",{value:re.value,children:re.label},re.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:F.departmentName,onChange:re=>Y({...F,departmentName:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85 \uC785\uB825"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:F.major,onChange:re=>Y({...F,major:re.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885 \uC785\uB825"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((be=(oe=D==null?void 0:D.basic)==null?void 0:oe.courseCategory)==null?void 0:be.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((ne=(ve=D==null?void 0:D.basic)==null?void 0:ve.classification)==null?void 0:ne.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uD559\uACFC\uBA85"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((ge=D==null?void 0:D.basic)==null?void 0:ge.departmentName)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((fe=D==null?void 0:D.basic)==null?void 0:fe.major)??"-"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uACFC\uC815\uC124\uBA85"})]})}),e.jsx("div",{className:"p-6",children:j?e.jsx("textarea",{value:F.courseDescription,onChange:re=>Y({...F,courseDescription:re.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}):($e=D==null?void 0:D.basic)!=null&&$e.courseDescription?e.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:D.basic.courseDescription}):e.jsx("p",{className:"text-gray-400 italic",children:"\uACFC\uC815\uC124\uBA85\uC774 \uB4F1\uB85D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sm,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[N.length,"\uAC1C \uACFC\uBAA9"]}),e.jsxs("button",{onClick:Be,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00"})]})]})]})}),e.jsx("div",{className:"p-6",children:E?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):N.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 italic mb-4",children:"\uC18C\uC18D\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("button",{onClick:Be,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00\uD558\uAE30"})]})]}):e.jsx("div",{className:"space-y-3",children:N.map(re=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:re.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[re.course_id_conv??re.course_cd??`ID: ${re.id}`,re.year&&` \xB7 ${re.year}\uB144`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${re.status_label==="\uC9C4\uD589\uC911"?"bg-green-100 text-green-700":re.status_label==="\uC885\uB8CC"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-700"}`,children:re.status_label??"\uB300\uAE30"}),e.jsxs("button",{onClick:()=>I(rx(re,y)),className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors",title:"\uACFC\uBAA9 \uAD00\uB9AC",children:[e.jsx(td,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>ee(re.id),disabled:_===re.id,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-red-700 bg-red-50 rounded hover:bg-red-100 transition-colors disabled:opacity-50",title:"\uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC",children:[e.jsx(pt,{className:"w-4 h-4"}),e.jsx("span",{children:_===re.id?"\uBD84\uB9AC \uC911...":"\uBD84\uB9AC"})]})]})]},re.id))})})]})]}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"\uACFC\uBAA9\uBA85 \uB610\uB294 \uACFC\uBAA9\uCF54\uB4DC\uB85C \uAC80\uC0C9...",value:H,onChange:re=>T(re.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:$?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"\uACFC\uBAA9 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}):te.length===0?e.jsx("p",{className:"text-center text-gray-400 py-8",children:H?"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uCD94\uAC00\uD560 \uC218 \uC788\uB294 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"space-y-2",children:te.map(re=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:re.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[re.course_id_conv??re.course_cd??`ID: ${re.id}`,re.year&&` \xB7 ${re.year}\uB144`]})]}),e.jsxs("button",{onClick:()=>we(re.id),disabled:B===re.id,className:"flex items-center gap-1 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:B===re.id?"\uCD94\uAC00 \uC911...":"\uCD94\uAC00"})]})]},re.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:()=>q(!1),className:"w-full px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"\uB2EB\uAE30"})})]})})]})}function Tu(r){const u=Number.parseInt(String(r||"").trim(),10),c=Number.isFinite(u)&&u>0?u:15;return Math.min(c,200)}function nx(r,u){const c=new Map;u.forEach(h=>c.set(String(h.id),h));const d=[];for(let h=1;h<=r;h+=1){const m=String(h),b=c.get(m)??u[h-1];b?d.push({...b,id:m}):d.push({id:m,title:"",description:"",videos:[]})}return d}function dd({initialStep:r,onStepChange:u}={}){const[c,d]=o.useState(r??"basic"),[h,m]=o.useState(!0);o.useEffect(()=>{const k=r??"basic";d(j=>j===k?j:k)},[r]),o.useEffect(()=>{u==null||u(c)},[c,u]);const[b,P]=o.useState(!1),[N,U]=o.useState(null),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState([]),[p,G]=o.useState({subjectName:"",selectedCourse:null,categoryId:0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]});o.useEffect(()=>{if(!h)return;const k=Tu(p.hours);p.sessions.length!==k&&G(j=>{const J=Tu(j.hours);return j.sessions.length===J?j:{...j,sessions:nx(J,j.sessions)}})},[h,p.hours,p.sessions.length]),o.useEffect(()=>{let k=!0;return R(!0),I(null),ue.getCourseCategories().then(j=>{if(!k)return;if(j.rst_code!=="0000")throw new Error(j.rst_message);const J=j.rst_data??[];q(J);const A=J.find(C=>C.category_nm==="\uC790\uC728\uAC15\uC88C")??J.find(C=>(C.category_nm??"").includes("\uC790\uC728"));A&&G(C=>C.categoryId>0?C:{...C,categoryId:Number(A.id)})}).catch(j=>{k&&I(j instanceof Error?j.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}).finally(()=>{k&&R(!1)}),()=>{k=!1}},[]);const H=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Ir},{id:"learners",label:"\uD559\uC2B5\uC790 \uC120\uD0DD",icon:vn},{id:"curriculum",label:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131",icon:ed},{id:"confirm",label:"\uCD5C\uC885 \uD655\uC778",icon:is}],T=H.findIndex(k=>k.id===c),$=()=>{const k=T+1;k<H.length&&d(H[k].id)},O=()=>{const k=T-1;k>=0&&d(H[k].id)},B=k=>{G(j=>({...j,...k}))},x=()=>{const k=W.find(j=>j.category_nm==="\uC790\uC728\uAC15\uC88C")??W.find(j=>(j.category_nm??"").includes("\uC790\uC728"));d("basic"),m(!0),G({subjectName:"",selectedCourse:null,categoryId:k?Number(k.id):0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]})},_=async()=>{U(null);const k=p.subjectName.trim();if(!k){U("\uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!p.year.trim()){U("\uB144\uB3C4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!p.startDate||!p.endDate){U("\uC218\uC5C5\uC2DC\uC791\uC77C\uACFC \uC218\uC5C5 \uC885\uB8CC\uC77C\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}P(!0);try{const j=p.selectedCourse?Number(p.selectedCourse.id):0,J=String(Tu(p.hours)),A=await ue.createCourse({courseName:k,year:p.year.trim(),studyStartDate:p.startDate,studyEndDate:p.endDate,programId:j>0?j:void 0,categoryId:p.categoryId>0?p.categoryId:void 0,semester:p.semester,credit:p.credits,lessonTime:J,content1:p.description,content2:p.objectives,courseFile:p.courseFileName||void 0});if(A.rst_code!=="0000")throw new Error(A.rst_message);const C=Number(A.rst_data);if(!C)throw new Error("\uACFC\uBAA9 \uC0DD\uC131 \uACB0\uACFC(course_id)\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");if(p.selectedLearners.length>0){const f=p.selectedLearners.map(w=>Number(w.id)).filter(w=>Number.isFinite(w)&&w>0);if(f.length>0){const w=await ue.addCourseStudents({courseId:C,userIds:f});if(w.rst_code!=="0000")throw new Error(w.rst_message)}}for(let f=0;f<p.sessions.length;f+=1){const w=p.sessions[f],F=w.title.trim()||`${f+1}\uCC28\uC2DC`,Y=await ue.insertCurriculumSection({courseId:C,sectionName:F});if(Y.rst_code!=="0000")throw new Error(Y.rst_message);const L=Number(Y.rst_data);if(L)for(const S of w.videos){const D=S.lessonId?Number(S.lessonId):0,y=S.url.trim();if(!D&&!y)continue;const K=await ue.addCurriculumLesson({courseId:C,sectionId:L,lessonId:D>0?D:void 0,url:D>0?void 0:y,title:S.title.trim()||void 0});if(K.rst_code!=="0000")throw new Error(K.rst_message)}}alert("\uACFC\uBAA9\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uB2F4\uB2F9\uACFC\uBAA9 \uBA54\uB274\uC5D0\uC11C \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4)"),x()}catch(j){U(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uC0C8 \uACFC\uBAA9 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uB2E8\uACC4\uBCC4\uB85C \uAD50\uC721\uACFC\uBAA9\uC744 \uAC1C\uC124\uD558\uACE0 \uC124\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:N}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:H.map((k,j)=>{const J=k.icon,A=k.id===c,C=j<T;return e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${A||C?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(J,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${A||C?"text-blue-600":"text-gray-500"}`,children:k.label})]}),j<H.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${C?"bg-blue-600":"bg-gray-200"}`})]},k.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[c==="basic"&&e.jsx(ux,{formData:p,updateFormData:B,courseCategories:W,categoryLoading:E,categoryError:v}),c==="learners"&&e.jsx(ax,{formData:p,updateFormData:B}),c==="curriculum"&&e.jsx(lx,{formData:p,updateFormData:B,onTouched:()=>m(!1)}),c==="confirm"&&e.jsx(ix,{formData:p,courseCategories:W}),e.jsxs("div",{className:"flex items-center justify-between pt-8 mt-8 border-t border-gray-200",children:[e.jsx("button",{onClick:O,disabled:T===0,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),T<H.length-1?e.jsx("button",{onClick:$,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uB2E4\uC74C"}):e.jsx("button",{onClick:_,disabled:b,className:`px-6 py-2 bg-green-600 text-white rounded-lg transition-colors ${b?"opacity-60 cursor-not-allowed":"hover:bg-green-700"}`,children:b?"\uC800\uC7A5 \uC911...":"\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function ux({formData:r,updateFormData:u,courseCategories:c,categoryLoading:d,categoryError:h}){const[m,b]=o.useState(!1),[P,N]=o.useState(!1),[U,E]=o.useState(null),R=Me.useRef(null),v=p=>{u({selectedCourse:p}),b(!1)},I=()=>{var p;(p=R.current)==null||p.click()},W=()=>{u({courseFileName:"",courseFileUrl:""})},q=async p=>{var H,T;const G=(H=p.target.files)==null?void 0:H[0];if(p.target.value="",!!G){if(G.size>10*1024*1024){E("\uC774\uBBF8\uC9C0\uB294 10MB \uC774\uD558\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}N(!0),E(null);try{const $=await ue.uploadCourseImage({file:G});if($.rst_code!=="0000")throw new Error($.rst_message);const O=Array.isArray($.rst_data)?(T=$.rst_data)==null?void 0:T[0]:$.rst_data;if(!(O!=null&&O.file_name))throw new Error("\uC5C5\uB85C\uB4DC \uACB0\uACFC\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");u({courseFileName:String(O.file_name),courseFileUrl:String(O.file_url||"")})}catch($){E($ instanceof Error?$.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4 \uC785\uB825"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815"}),e.jsxs("button",{onClick:()=>b(!0),className:"w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 hover:bg-gray-200 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:r.selectedCourse?r.selectedCourse.name:"\uACFC\uC815 \uC120\uD0DD"}),e.jsx(Ll,{className:"w-4 h-4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:String(r.categoryId),disabled:d,onChange:p=>u({categoryId:Number(p.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"0",children:d?"\uCE74\uD14C\uACE0\uB9AC \uBD88\uB7EC\uC624\uB294 \uC911...":"[\uBBF8\uC9C0\uC815]"}),c.map(p=>e.jsx("option",{value:String(p.id),children:p.label||p.name_conv||p.category_nm},p.id))]}),h&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:h})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uBAA9\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.subjectName,onChange:p=>u({subjectName:p.target.value}),placeholder:"\uC608: AI \uAE30\uCD08 \uD504\uB85C\uADF8\uB798\uBC0D",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uBA54\uC778 \uC774\uBBF8\uC9C0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:I,disabled:P,className:`flex-1 px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 transition-colors flex items-center justify-between ${P?"opacity-60 cursor-not-allowed":"hover:bg-gray-200"}`,children:[e.jsx("span",{children:P?"\uC5C5\uB85C\uB4DC \uC911...":r.courseFileName?"\uC774\uBBF8\uC9C0 \uBCC0\uACBD":"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx(Ll,{className:"w-4 h-4"})]}),r.courseFileName&&e.jsx("button",{type:"button",onClick:W,className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uC0AD\uC81C"})]}),e.jsx("input",{ref:R,type:"file",accept:"image/*",className:"hidden",onChange:q}),U&&e.jsx("div",{className:"text-sm text-red-600",children:U}),r.courseFileUrl&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:r.courseFileUrl,alt:"\uBA54\uC778 \uC774\uBBF8\uC9C0",className:"w-full h-32 object-cover"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4/\uD559\uAE30"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.year,onChange:p=>u({year:p.target.value}),placeholder:"2024",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:r.semester,onChange:p=>u({semester:p.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"1\uD559\uAE30"}),e.jsx("option",{children:"2\uD559\uAE30"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uC218"}),e.jsx("input",{type:"number",value:r.hours,onChange:p=>u({hours:p.target.value}),onBlur:()=>{const p=String(Tu(r.hours));String(r.hours||"").trim()!==p&&u({hours:p})},placeholder:"48",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uC5C5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",value:r.startDate,onChange:p=>u({startDate:p.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:r.endDate,onChange:p=>u({endDate:p.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:r.description,onChange:p=>u({description:p.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC138\uBD80\uB0B4\uC6A9"}),e.jsx("textarea",{value:r.objectives,onChange:p=>u({objectives:p.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C \uB0B4\uC6A9",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx(sd,{isOpen:m,onClose:()=>b(!1),onSelect:v,selectedCourse:r.selectedCourse})]})}function ax({formData:r,updateFormData:u}){const[c,d]=o.useState(""),[h,m]=o.useState(""),[b,P]=o.useState("\uC804\uCCB4"),[N,U]=o.useState("\uC804\uCCB4"),[E,R]=o.useState([]),[v,I]=o.useState(1),[W,q]=o.useState(0),p=30,[G,H]=o.useState(!1),[T,$]=o.useState(null);Me.useEffect(()=>{const C=setTimeout(()=>m(c),250);return()=>clearTimeout(C)},[c]),Me.useEffect(()=>{let C=!1;return(async()=>{H(!0),$(null);try{const w=N!=="\uC804\uCCB4"?N:b!=="\uC804\uCCB4"?b:void 0,F=await ue.getLearners({keyword:h,deptKeyword:w,page:v,limit:p});if(F.rst_code!=="0000")throw new Error(F.rst_message);const Y=F.rst_data??[],L=Y.map(S=>{const D=String(S.dept_path||""),y=D.split(" > ").map(le=>le.trim()).filter(Boolean),K=y[0]||String(S.dept_nm||"-")||"-",ae=(y.length>0?y[y.length-1]:String(S.dept_nm||"-"))||"-";return{id:String(S.id),name:String(S.name||S.user_nm||"-"),campus:K,major:ae,studentId:String(S.student_id||""),email:String(S.email||""),deptPath:D}});C||(R(L),q(Number(F.rst_total??F.rst_count??Y.length??0)))}catch(w){C||$(w instanceof Error?w.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C||H(!1)}})(),()=>{C=!0}},[h,b,N,v]);const O=["\uC804\uCCB4",...Array.from(new Set(E.map(C=>C.campus).filter(Boolean)))],B=["\uC804\uCCB4",...Array.from(new Set(E.filter(C=>b==="\uC804\uCCB4"||C.campus===b).map(C=>C.major).filter(Boolean)))],x=C=>{const f=r.selectedLearners.some(w=>w.id===C.id);u(f?{selectedLearners:r.selectedLearners.filter(w=>w.id!==C.id)}:{selectedLearners:[...r.selectedLearners,C]})},_=()=>{u({selectedLearners:[...E]})},k=()=>{u({selectedLearners:[]})},j=Math.max(1,Math.ceil((W||0)/p)),J=v>1,A=v<j;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uD559\uC2B5\uC790 \uC120\uD0DD"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC774\uB984 \uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:C=>{d(C.target.value),I(1)},placeholder:"\uD559\uC2B5\uC790 \uC774\uB984 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCEA0\uD37C\uC2A4"}),e.jsx("select",{value:b,onChange:C=>{P(C.target.value),U("\uC804\uCCB4"),I(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:O.map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5"}),e.jsx("select",{value:N,onChange:C=>{U(C.target.value),I(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:B.map(C=>e.jsx("option",{value:C,children:C},C))})]})]}),T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:T}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:_,disabled:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC804\uCCB4 \uC120\uD0DD"}),e.jsx("button",{onClick:k,disabled:G,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD604\uC7AC \uBAA9\uB85D \uC804\uCCB4 \uD574\uC81C"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:G?"\uBD88\uB7EC\uC624\uB294 \uC911...":`\uAC80\uC0C9 \uACB0\uACFC: ${W}\uBA85 / \uC120\uD0DD\uB41C: ${r.selectedLearners.length}\uBA85`})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:E.map(C=>{const f=r.selectedLearners.some(w=>w.id===C.id);return e.jsxs("div",{onClick:()=>x(C),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${f?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-900",children:C.name}),f&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(is,{className:"w-3 h-3 text-white"})})]}),e.jsx("div",{className:"text-sm text-gray-600",children:C.campus}),e.jsx("div",{className:"text-sm text-gray-600",children:C.major})]},C.id)})}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{type:"button",disabled:G||!J,onClick:()=>I(C=>Math.max(1,C-1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uC774\uC804"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[v," / ",j]}),e.jsx("button",{type:"button",disabled:G||!A,onClick:()=>I(C=>Math.min(j,C+1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uB2E4\uC74C"})]})]})}function lx({formData:r,updateFormData:u,onTouched:c}){const[d,h]=o.useState(!1),[m,b]=o.useState(null),P=m?r.sessions.find(p=>p.id===m)??null:null,N=()=>{c==null||c();const p={id:String(r.sessions.length+1),title:"",description:"",videos:[]};u({sessions:[...r.sessions,p]})},U=(p,G)=>{c==null||c();const H=r.sessions.map(T=>T.id===p?{...T,...G}:T);u({sessions:H})},E=p=>{c==null||c(),r.sessions.length>1&&u({sessions:r.sessions.filter(G=>G.id!==p)})},R=p=>{c==null||c();const G=r.sessions.find(H=>H.id===p);if(G){const H={id:`${p}-video-${Date.now()}-${Math.random()}`,title:"",url:""};U(p,{videos:[...G.videos,H]})}},v=(p,G,H)=>{c==null||c();const T=r.sessions.find($=>$.id===p);if(T){const $=T.videos.map(O=>O.id===G?{...O,...H}:O);U(p,{videos:$})}},I=(p,G)=>{c==null||c();const H=r.sessions.find(T=>T.id===p);H&&U(p,{videos:H.videos.filter(T=>T.id!==G)})},W=p=>{if(c==null||c(),m){const G=r.sessions.find(H=>H.id===m);if(G){const H={id:`${m}-video-${Date.now()}-${Math.random()}`,title:p.title,url:"",lessonId:String(p.lessonId??p.id)};U(m,{videos:[...G.videos,H]})}}h(!1)},q=p=>{b(p),h(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131"}),e.jsx("div",{className:"space-y-6",children:r.sessions.map((p,G)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 relative",children:[r.sessions.length>1&&e.jsx("button",{onClick:()=>E(p.id),className:"absolute top-4 right-4 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsxs("h4",{className:"text-gray-900 mb-4",children:[G+1,"\uCC28\uC2DC"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:p.title,onChange:H=>U(p.id,{title:H.target.value}),placeholder:"\uC608: Python \uAE30\uCD08 \uBB38\uBC95",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC124\uBA85"}),e.jsx("textarea",{value:p.description,onChange:H=>U(p.id,{description:H.target.value}),placeholder:"\uC774 \uCC28\uC2DC\uC5D0\uC11C \uD559\uC2B5\uD560 \uB0B4\uC6A9\uC744 \uC124\uBA85\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"block text-sm text-gray-700",children:["\uAC15\uC758 \uC601\uC0C1 (",p.videos.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>q(p.id),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uCF58\uD150\uCE20 \uAC80\uC0C9"}),e.jsxs("button",{type:"button",onClick:()=>R(p.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),"\uC601\uC0C1 \uCD94\uAC00"]})]})]}),p.videos.length>0?e.jsx("div",{className:"space-y-3",children:p.videos.map((H,T)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-lg text-sm shrink-0",children:T+1}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uC601\uC0C1 \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:H.title,onChange:$=>v(p.id,H.id,{title:$.target.value}),placeholder:"\uC601\uC0C1 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uB808\uC2A8 ID \uB610\uB294 URL"}),e.jsx("input",{type:"text",value:H.lessonId?`\uB808\uC2A8 ID: ${H.lessonId}`:H.url,onChange:$=>{H.lessonId||v(p.id,H.id,{url:$.target.value})},disabled:!!H.lessonId,placeholder:H.lessonId?"":"\uC678\uBD80 URL\uC744 \uC785\uB825\uD558\uC138\uC694",className:`w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${H.lessonId?"bg-gray-100 text-gray-500":""}`})]})]}),e.jsx("button",{type:"button",onClick:()=>I(p.id,H.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors shrink-0",children:e.jsx(ot,{className:"w-4 h-4"})})]})},H.id))}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"\uC601\uC0C1\uC744 \uCD94\uAC00\uD574\uC8FC\uC138\uC694"})})]})]})]},p.id))}),e.jsxs("button",{onClick:N,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"\uCC28\uC2DC \uCD94\uAC00"]}),e.jsx(Ou,{isOpen:d,onClose:()=>h(!1),onSelect:W,recommendContext:{courseName:r.subjectName,courseIntro:r.description,courseDetail:r.objectives,lessonTitle:(P==null?void 0:P.title)??"",lessonDescription:(P==null?void 0:P.description)??""},excludeLessonIds:r.sessions.flatMap(p=>p.videos).map(p=>p.lessonId?Number(String(p.lessonId).replace(/[^0-9]/g,"")):0).filter(p=>Number.isFinite(p)&&p>0)})]})}function ix({formData:r,courseCategories:u}){const c=u.find(h=>Number(h.id)===Number(r.categoryId)),d=(c==null?void 0:c.label)||(c==null?void 0:c.name_conv)||(c==null?void 0:c.category_nm)||"-";return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uC885 \uD655\uC778"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uACFC\uBAA9\uBA85:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.subjectName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC18C\uC18D \uACFC\uC815:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.selectedCourse?r.selectedCourse.name:"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:d})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uB144\uB3C4/\uD559\uAE30:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.year," ",r.semester]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC2DC\uC218:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.hours||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uD559\uC810:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.credits||"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uD559\uC2B5\uC790"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uC120\uD0DD\uB41C \uD559\uC2B5\uC790:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.selectedLearners.length,"\uBA85"]})]}),r.selectedLearners.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.selectedLearners.map(h=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:h.name},h.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uCC28\uC2DC \uAD6C\uC131"}),e.jsxs("div",{className:"text-sm mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"\uCD1D \uCC28\uC2DC:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.sessions.length,"\uCC28\uC2DC"]})]}),e.jsx("div",{className:"space-y-3",children:r.sessions.map((h,m)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-gray-900 mb-1",children:[m+1,"\uCC28\uC2DC: ",h.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]}),h.description&&e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:h.description}),h.videos.length>0&&e.jsxs("div",{className:"mt-3 pl-4 border-l-2 border-blue-300",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["\uAC15\uC758 \uC601\uC0C1 ",h.videos.length,"\uAC1C"]}),e.jsx("div",{className:"space-y-1",children:h.videos.map((b,P)=>e.jsxs("div",{className:"text-sm text-gray-600",children:[P+1,". ",b.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]},b.id))})]})]},h.id))})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-900",children:'\uC704 \uB0B4\uC6A9\uC744 \uD655\uC778\uD558\uACE0 "\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC" \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uACFC\uBAA9 \uAC1C\uC124\uC744 \uC644\uB8CC\uD558\uC138\uC694.'})})]})}const ox={"degree-major":"\uD559\uC704\uC804\uACF5","degree-major-advanced":"\uD559\uC704\uC804\uACF5\uC2EC\uD654","professional-tech":"\uC804\uBB38\uAE30\uC220","high-tech":"\uD558\uC774\uD14C\uD06C","master-craftsman":"\uAE30\uB2A5\uC7A5","high-school-consignment":"\uACE0\uAD50\uC704\uD0C1","new-seniors":"\uC2E0\uC911\uB144"},cx={beginner:"\uCD08\uAE09",intermediate:"\uC911\uAE09",advanced:"\uACE0\uAE09"};function dx(r){return{version:1,basic:{courseCategory:{value:r.courseCategory,label:r.courseCategory==="regular"?"\uC815\uADDC\uACFC\uC815":r.courseCategory==="non-regular"?"\uBE44\uC815\uADDC\uACFC\uC815":r.courseCategory},classification:{value:r.classification,label:ox[r.classification]??r.classification},courseName:r.courseName,department:r.department,major:r.major,departmentName:r.departmentName,courseDescription:r.courseDescription},training:{trainingPeriodText:r.trainingPeriodText,startDateYmd:r.startDateYmd,endDateYmd:r.endDateYmd,trainingLevel:{value:r.trainingLevel,label:cx[r.trainingLevel]??r.trainingLevel},trainingTarget:r.trainingTarget,trainingGoal:r.trainingGoal},curriculum:r.curriculumItems,teachingPlans:r.teachingPlans,evaluations:r.evaluations}}function Yc(r){const u=r.replace(/[^0-9]/g,"");return u.length===8?u:""}function Cx(r){const u=r.trim();if(!u)return null;const c=u.match(/(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})\s*(?:-|~||)\s*(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})/);if(!c)return null;const d=Yc(c[1]),h=Yc(c[2]);return!d||!h?null:{start:d,end:h}}function mx({onCreated:r,initialStep:u,onStepChange:c}={}){const[d,h]=o.useState(u??"basic");o.useEffect(()=>{const de=u??"basic";h(he=>he===de?he:de)},[u]),o.useEffect(()=>{c==null||c(d)},[d,c]);const[m,b]=o.useState(""),[P,N]=o.useState(""),[U,E]=o.useState(""),[R,v]=o.useState(""),[I,W]=o.useState(""),[q,p]=o.useState(""),[G,H]=o.useState(""),[T,$]=o.useState(""),[O,B]=o.useState(""),[x,_]=o.useState(""),[k,j]=o.useState(""),[J,A]=o.useState(!1),[C,f]=o.useState(null),[w,F]=o.useState([]),[Y,L]=o.useState([]),[S,D]=o.useState([]),[y,K]=o.useState([]),[ae,le]=o.useState([]),[Be,we]=o.useState(""),[ee,te]=o.useState(!1),oe=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Ir},{id:"subjects",label:"\uC18C\uC18D \uACFC\uBAA9",icon:ht}],be=oe.findIndex(de=>de.id===d);o.useEffect(()=>{d==="subjects"&&ve()},[d]);const ve=async()=>{te(!0);try{const de=await ue.getPrograms();if(de.rst_code==="0000"&&de.rst_data){const he=de.rst_data.map(Fe=>{var Se,Ke,ze,st,At,Ve,Xe,ts,Lr,jn,nr,ur,ar,lr,ir,cs,ds;let ye=null;try{Fe.plan_json&&(ye=JSON.parse(Fe.plan_json))}catch{}let je="-";const ie=((Se=ye==null?void 0:ye.training)==null?void 0:Se.startDateYmd)||Fe.start_date||"";ie&&ie.length>=4&&(je=ie.substring(0,4));const Ne=((Ke=ye==null?void 0:ye.training)==null?void 0:Ke.trainingPeriodText)||Fe.training_period||"-";return{id:String(Fe.id),name:Fe.course_nm||((ze=ye==null?void 0:ye.basic)==null?void 0:ze.courseName)||`\uACFC\uC815 ${Fe.id}`,year:je,semester:"",credits:"",classification:((At=(st=ye==null?void 0:ye.basic)==null?void 0:st.classification)==null?void 0:At.label)||((Xe=(Ve=ye==null?void 0:ye.basic)==null?void 0:Ve.classification)==null?void 0:Xe.value)||"\uBBF8\uBD84\uB958",department:((ts=ye==null?void 0:ye.basic)==null?void 0:ts.department)||"",major:((Lr=ye==null?void 0:ye.basic)==null?void 0:Lr.major)||"",departmentName:((jn=ye==null?void 0:ye.basic)==null?void 0:jn.departmentName)||"",trainingPeriod:Ne,trainingLevel:((ur=(nr=ye==null?void 0:ye.training)==null?void 0:nr.trainingLevel)==null?void 0:ur.label)||((lr=(ar=ye==null?void 0:ye.training)==null?void 0:ar.trainingLevel)==null?void 0:lr.value)||"-",trainingTarget:((ir=ye==null?void 0:ye.training)==null?void 0:ir.trainingTarget)||"",trainingGoal:((cs=ye==null?void 0:ye.training)==null?void 0:cs.trainingGoal)||"",instructor:((ds=ye==null?void 0:ye.basic)==null?void 0:ds.instructor)||"",students:0,subjects:Number(Fe.course_cnt??0)}});le(he)}}catch(de){console.error("\uACFC\uBAA9 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",de)}finally{te(!1)}},ne=()=>(f(null),m?P?U.trim()?!0:(f("\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uBD84\uB958\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1)),ge=()=>{if(d==="basic"){if(!ne())return;h("subjects")}},fe=()=>{d==="subjects"&&h("basic")},$e=de=>{y.find(he=>he.id===de.id)||K([...y,de])},re=de=>{K(y.filter(he=>he.id!==de))},Te=ae.filter(de=>de.name.toLowerCase().includes(Be.toLowerCase())&&!y.find(he=>he.id===de.id)),z=async()=>{f(null);const de=Cx(G);A(!0);try{const he=JSON.stringify(dx({courseCategory:m,classification:P,courseName:U.trim(),department:R.trim(),major:I.trim(),departmentName:q.trim(),courseDescription:k.trim(),trainingPeriodText:G.trim(),startDateYmd:(de==null?void 0:de.start)||"",endDateYmd:(de==null?void 0:de.end)||"",trainingLevel:T,trainingTarget:O.trim(),trainingGoal:x.trim(),curriculumItems:w,teachingPlans:Y,evaluations:S})),Fe=await ue.createProgram({courseName:U.trim(),startDate:(de==null?void 0:de.start)||"",endDate:(de==null?void 0:de.end)||"",planJson:he});if(Fe.rst_code!=="0000")throw new Error(Fe.rst_message);const ye=Number(Fe.rst_data??0);if(ye>0&&y.length>0)for(const je of y){const ie=Number(je.id);if(!ie)continue;const Ne=await ue.setCourseProgram({courseId:ie,programId:ye});if(Ne.rst_code!=="0000")throw new Error(Ne.rst_message)}alert("\uACFC\uC815\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),r==null||r()}catch(he){f(he instanceof Error?he.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{A(!1)}};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uC0C8\uB85C\uC6B4 \uAD50\uC721 \uACFC\uC815\uC744 \uAC1C\uC124\uD569\uB2C8\uB2E4."})]}),C&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:C}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:oe.map((de,he)=>{const Fe=de.icon,ye=de.id===d,je=he<be;return e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${ye||je?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${ye?"text-blue-600 font-medium":je?"text-blue-600":"text-gray-500"}`,children:de.label})]}),he<oe.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${je?"bg-blue-600":"bg-gray-200"}`})]},de.id)})})}),d==="basic"&&e.jsx(xx,{courseCategory:m,setCourseCategory:b,classification:P,setClassification:N,courseName:U,setCourseName:E,departmentName:q,setDepartmentName:p,major:I,setMajor:W,courseDescription:k,setCourseDescription:j}),d==="subjects"&&e.jsx(gx,{selectedSubjects:y,availableSubjects:Te,searchTerm:Be,setSearchTerm:we,addSubject:$e,removeSubject:re,loading:ee,courseName:U}),e.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6",children:[e.jsx("button",{onClick:fe,disabled:be===0,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),d==="basic"?e.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"\uB2E4\uC74C"}),e.jsx(Yt,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:z,disabled:J,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(es,{className:"w-5 h-5"}),e.jsx("span",{children:J?"\uC800\uC7A5 \uC911...":"\uACFC\uC815 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function xx({courseCategory:r,setCourseCategory:u,classification:c,setClassification:d,courseName:h,setCourseName:m,departmentName:b,setDepartmentName:P,major:N,setMajor:U,courseDescription:E,setCourseDescription:R}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uC720\uD615 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r,onChange:v=>{const I=v.target.value;u(I),I==="non-regular"&&c&&!["professional-tech","master-craftsman","new-seniors","high-tech"].includes(c)&&d("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),e.jsx("option",{value:"regular",disabled:!0,className:"text-gray-400",children:"\uC815\uADDC\uACFC\uC815"}),e.jsx("option",{value:"non-regular",children:"\uBE44\uC815\uADDC\uACFC\uC815"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uBD84\uB958 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),r==="regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"degree-major",children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{value:"degree-major-advanced",children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"high-school-consignment",children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"})]}),r==="non-regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:b,onChange:v=>P(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:N,onChange:v=>U(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uBA85"}),e.jsx("input",{type:"text",value:h,onChange:v=>m(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uACFC\uC815\uC124\uBA85"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC18C\uAC1C"}),e.jsx("textarea",{value:E,onChange:v=>R(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uACFC\uC815\uC758 \uBAA9\uC801, \uB300\uC0C1, \uD2B9\uC9D5 \uB4F1\uC744 \uC790\uC720\uB86D\uAC8C \uC791\uC131\uD574 \uC8FC\uC138\uC694."})]})]})]})}function gx({selectedSubjects:r,availableSubjects:u,searchTerm:c,setSearchTerm:d,addSubject:h,removeSubject:m,loading:b,courseName:P}){const[N,U]=Me.useState("plism"),[E,R]=Me.useState(null),[v,I]=Me.useState(!1),[W,q]=Me.useState([]),[p,G]=Me.useState(!1),[H,T]=Me.useState(null),[$,O]=Me.useState(""),[B,x]=Me.useState(!1),[_,k]=Me.useState(null),[j,J]=Me.useState(""),[A,C]=Me.useState(""),[f,w]=Me.useState(!1),[F,Y]=Me.useState([]),[L,S]=Me.useState(!1),[D,y]=Me.useState(null),[K,ae]=Me.useState(null),[le,Be]=Me.useState([]),[we,ee]=Me.useState([]),[te,oe]=Me.useState(!1),[be,ve]=Me.useState(!1),[ne,ge]=Me.useState(null),[fe,$e]=Me.useState(!1),[re,Te]=Me.useState(null),z=async je=>{k(je),J(`${je.name} (\uBCF5\uC0AC\uBCF8)`),C(""),y(null),x(!0)},de=()=>{ae(null),Be([]),ee([]),ge(null)},he=()=>{x(!1),k(null),J(""),C(""),y(null)};Me.useEffect(()=>{if(!B)return;let je=!1;return(async()=>{S(!0),y(null);try{const Ne=await ue.getTutors();if(Ne.rst_code!=="0000")throw new Error(Ne.rst_message);const Ke=(Ne.rst_data??[]).map(ze=>({id:Number(ze.user_id),name:String(ze.tutor_nm||"")}));je||Y(Ke)}catch(Ne){je||y(Ne instanceof Error?Ne.message:"\uAD50\uC218/\uAC15\uC0AC \uBAA9\uB85D \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{je||S(!1)}})(),()=>{je=!0}},[B]);const Fe=async()=>{var je;if(_){if(!j.trim()){alert("\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!A){alert("\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}w(!0);try{const ie=await ue.copyCourse({sourceCourseId:Number(_.id),courseName:j.trim(),tutorId:Number(A)});if(ie.rst_code!=="0000")throw new Error(ie.rst_message);const Ne={..._,id:String(ie.rst_data),name:j.trim(),instructor:((je=F.find(Se=>Se.id===Number(A)))==null?void 0:je.name)??""};he(),ae(Ne)}catch(ie){const Ne=ie instanceof Error?ie.message:"\uACFC\uBAA9 \uBCF5\uC0AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";y(Ne),alert(Ne)}finally{w(!1)}}};Me.useEffect(()=>{if(N!=="plism")return;let je=!1;const Ne=setTimeout(async()=>{G(!0),T(null);try{const Se=await ue.getMyCoursesCombined({tab:"prism",keyword:$||void 0});if(Se.rst_code!=="0000")throw new Error(Se.rst_message);const ze=(Se.rst_data??[]).map(st=>({id:String(st.courseId||st.id),name:String(st.subjectName||st.course_nm||""),year:String(st.period||st.year||"-").split("-")[0],semester:"",credits:"",classification:String(st.courseType||st.category_nm||"\uBBF8\uBD84\uB958"),department:String(st.programName||st.dept_nm||""),major:"",departmentName:String(st.programName||""),trainingPeriod:String(st.period||"-"),trainingLevel:"-",trainingTarget:"",trainingGoal:"",instructor:"",students:Number(st.student_cnt||0),subjects:0}));je||q(ze)}catch(Se){je||T(Se instanceof Error?Se.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{je||G(!1)}},300);return()=>{je=!0,clearTimeout(Ne)}},[N,$]);const ye=W.filter(je=>!r.find(ie=>ie.id===je.id));return e.jsxs(e.Fragment,{children:[B&&_&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uACFC\uBAA9 \uBCF5\uC0AC"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC6D0\uBCF8: ",_.name]})]}),e.jsx("button",{onClick:he,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C8 \uACFC\uBAA9\uBA85"}),e.jsx("input",{type:"text",value:j,onChange:je=>J(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC"}),e.jsxs("select",{value:A,onChange:je=>C(je.target.value?Number(je.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:L,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD574 \uC8FC\uC138\uC694"}),F.map(je=>e.jsx("option",{value:je.id,children:je.name},je.id))]}),L&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"\uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),D&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:D})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:he,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:f,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:f,children:"\uBCF5\uC0AC \uD6C4 \uCC28\uC2DC \uD3B8\uC9D1"})]})]})}),K&&e.jsx(nd,{courseId:Number(K.id),courseName:K.name,onClose:de,onSaveComplete:()=>{h(K),de()}}),v&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>I(!1),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(ot,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uC2E0\uADDC \uAC1C\uC124"})]})}),e.jsx("div",{className:"p-6",children:e.jsx(dd,{})})]}),E&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:[e.jsxs("button",{onClick:()=>R(null),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(ot,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsxs("button",{onClick:()=>{h(E),R(null)},className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC774 \uACFC\uC815 \uCD94\uAC00"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(cd,{course:{id:E.id,name:E.name,classification:E.classification,department:E.department,major:E.major,departmentName:E.departmentName,trainingPeriod:E.trainingPeriod,trainingLevel:E.trainingLevel,trainingTarget:E.trainingTarget,trainingGoal:E.trainingGoal,instructor:E.instructor,year:E.year,students:E.students,subjects:E.subjects},onBack:()=>R(null)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800",children:[e.jsxs("strong",{children:['"',P,'"']})," \uACFC\uC815\uC5D0 \uD3EC\uD568\uB420 \uACFC\uBAA9\uC744 \uC120\uD0DD\uD558\uC138\uC694."]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["\uC120\uD0DD\uB41C \uC18C\uC18D \uACFC\uBAA9 (",r.length,"\uAC1C)"]}),r.length>0?e.jsx("div",{className:"space-y-2",children:r.map(je=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:je.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[je.year," ",je.semester," ",je.credits&&`\u2022 ${je.credits}\uD559\uC810`]})]}),e.jsx("button",{onClick:()=>m(je.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(pt,{className:"w-5 h-5"})})]},je.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ht,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uC120\uD0DD\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm",children:"\uC544\uB798\uC5D0\uC11C \uACFC\uBAA9\uC744 \uAC80\uC0C9\uD558\uC5EC \uCD94\uAC00\uD558\uC138\uC694."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAC80\uC0C9"})}),e.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:e.jsx("button",{type:"button",onClick:()=>U("plism"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${N==="plism"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"PLISM"})}),N==="plism"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:$,onChange:je=>O(je.target.value),placeholder:"\uACFC\uBAA9\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H?e.jsx("div",{className:"text-center py-8 text-red-500",children:e.jsx("p",{children:H})}):p?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):ye.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ht,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:'\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB97C \uC2DC\uB3C4\uD558\uAC70\uB098 "\uC2E0\uADDC \uAC1C\uC124"\uC744 \uD074\uB9AD\uD558\uC138\uC694.'})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:ye.map(je=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:je.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:je.year})]}),e.jsx("p",{className:"font-medium text-gray-900",children:je.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[je.departmentName||je.department||"-",je.students>0&&` \u2022 \uC218\uAC15\uC0DD ${je.students}\uBA85`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>h(je),className:"flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"\uACFC\uBAA9 \uBC14\uB85C \uCD94\uAC00",children:[e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{type:"button",onClick:()=>z(je),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"\uCC28\uC2DC \uD3B8\uC9D1 \uD6C4 \uCD94\uAC00",children:e.jsx("span",{children:"\uCC28\uC2DC \uD3B8\uC9D1"})})]})]},je.id))})]})]})]})]})}const hx=String(new Date().getFullYear()),Mt={tab:"haksa",year:hx,keyword:"",page:1,pageSize:20,courseType:"\uC804\uCCB4",status:"\uC804\uCCB4",haksaCategory:"\uC804\uCCB4",haksaGrad:"\uC804\uCCB4",haksaCurriculum:"\uC804\uCCB4",sortOrder:"desc"};function Qc(r){const u={},c=r.source||r.listTab||r.tab;(c==="haksa"||c==="prism")&&(u.tab=c),r.year&&(u.year=r.year),r.keyword!==void 0&&(u.keyword=r.keyword);const d=Number(r.page);!Number.isNaN(d)&&d>0&&(u.page=Math.floor(d));const h=Number(r.pageSize);return!Number.isNaN(h)&&h>0&&(u.pageSize=Math.floor(h)),r.courseType&&(u.courseType=r.courseType),r.status&&(u.status=r.status),r.haksaCategory&&(u.haksaCategory=r.haksaCategory),r.haksaGrad&&(u.haksaGrad=r.haksaGrad),r.haksaCurriculum&&(u.haksaCurriculum=r.haksaCurriculum),(r.sortOrder==="asc"||r.sortOrder==="desc")&&(u.sortOrder=r.sortOrder),u}function Kc(r){const u={};return r.tab!=="haksa"&&(u.source=r.tab),r.year&&(u.year=r.year),r.keyword&&(u.keyword=r.keyword),r.page>1&&(u.page=String(r.page)),r.pageSize!==20&&(u.pageSize=String(r.pageSize)),r.tab==="prism"&&(r.courseType!=="\uC804\uCCB4"&&(u.courseType=r.courseType),r.status!=="\uC804\uCCB4"&&(u.status=r.status)),r.tab==="haksa"&&(r.haksaCategory!=="\uC804\uCCB4"&&(u.haksaCategory=r.haksaCategory),r.haksaGrad!=="\uC804\uCCB4"&&(u.haksaGrad=r.haksaGrad),r.haksaCurriculum!=="\uC804\uCCB4"&&(u.haksaCurriculum=r.haksaCurriculum),r.sortOrder!=="desc"&&(u.sortOrder=r.sortOrder)),u}function px(r,u){switch(u.type){case"SET_TAB":return{...r,tab:u.payload,page:1};case"SET_YEAR":return{...r,year:u.payload,page:1};case"SET_KEYWORD":return{...r,keyword:u.payload,page:1};case"SET_PAGE":return{...r,page:u.payload};case"SET_PAGE_SIZE":return{...r,pageSize:u.payload,page:1};case"SET_COURSE_TYPE":return{...r,courseType:u.payload,page:1};case"SET_STATUS":return{...r,status:u.payload,page:1};case"SET_HAKSA_CATEGORY":return{...r,haksaCategory:u.payload,page:1};case"SET_HAKSA_GRAD":return{...r,haksaGrad:u.payload,page:1};case"SET_HAKSA_CURRICULUM":return{...r,haksaCurriculum:u.payload,page:1};case"SET_SORT_ORDER":return{...r,sortOrder:u.payload,page:1};case"SYNC_FROM_URL":return{...r,...u.payload};case"RESET_FILTERS":return{...Mt,year:r.year};default:return r}}const Cd=o.createContext(null);function fx({children:r,initialParams:u={},onParamsChange:c}){const d=o.useMemo(()=>{const x=Qc(u);return{...Mt,...x}},[]),[h,m]=o.useReducer(px,d),b=o.useRef(c);b.current=c;const P=o.useCallback(()=>{var _;const x=Kc(h);(_=b.current)==null||_.call(b,x)},[h]),N=o.useCallback(()=>Kc(h),[h]),U=o.useCallback(x=>m({type:"SET_TAB",payload:x}),[]),E=o.useCallback(x=>m({type:"SET_YEAR",payload:x}),[]),R=o.useCallback(x=>m({type:"SET_KEYWORD",payload:x}),[]),v=o.useCallback(x=>m({type:"SET_PAGE",payload:x}),[]),I=o.useCallback(x=>m({type:"SET_PAGE_SIZE",payload:x}),[]),W=o.useCallback(x=>m({type:"SET_COURSE_TYPE",payload:x}),[]),q=o.useCallback(x=>m({type:"SET_STATUS",payload:x}),[]),p=o.useCallback(x=>m({type:"SET_HAKSA_CATEGORY",payload:x}),[]),G=o.useCallback(x=>m({type:"SET_HAKSA_GRAD",payload:x}),[]),H=o.useCallback(x=>m({type:"SET_HAKSA_CURRICULUM",payload:x}),[]),T=o.useCallback(x=>m({type:"SET_SORT_ORDER",payload:x}),[]),$=o.useCallback(()=>m({type:"RESET_FILTERS"}),[]),O=o.useCallback(x=>{const _=Qc(x),k={tab:_.tab??Mt.tab,year:_.year??Mt.year,keyword:_.keyword??Mt.keyword,page:_.page??Mt.page,pageSize:_.pageSize??Mt.pageSize,courseType:_.courseType??Mt.courseType,status:_.status??Mt.status,haksaCategory:_.haksaCategory??Mt.haksaCategory,haksaGrad:_.haksaGrad??Mt.haksaGrad,haksaCurriculum:_.haksaCurriculum??Mt.haksaCurriculum,sortOrder:_.sortOrder??Mt.sortOrder};m({type:"SYNC_FROM_URL",payload:k})},[]),B=o.useMemo(()=>({filters:h,setTab:U,setYear:E,setKeyword:R,setPage:v,setPageSize:I,setCourseType:W,setStatus:q,setHaksaCategory:p,setHaksaGrad:G,setHaksaCurriculum:H,setSortOrder:T,resetFilters:$,syncToUrl:P,syncFromUrl:O,getUrlParams:N}),[h,U,E,R,v,I,W,q,p,G,H,T,$,P,O,N]);return e.jsx(Cd.Provider,{value:B,children:r})}function yx(){const r=o.useContext(Cd);if(!r)throw new Error("useCourseFilters\uB294 CourseFilterProvider \uC548\uC5D0\uC11C \uC0AC\uC6A9\uD574\uC57C \uD569\uB2C8\uB2E4.");return r}const bx=["info","info-basic","info-evaluation","info-completion","curriculum","students","attendance","exam","assignment","assignment-management","assignment-feedback","materials","qna","grades","completion"],vx=new Set(bx),jx=["\uC804\uCCB4","\uC11C\uC6B8\uC815\uC218","\uC11C\uC6B8\uAC15\uC11C","\uC131\uB0A8","\uBD84\uB2F9\uC735\uD569","\uC81C\uC8FC","\uC778\uCC9C","\uB0A8\uC778\uCC9C","\uD654\uC131","\uAD11\uBA85\uC735\uD569","\uCD98\uCC9C","\uC6D0\uC8FC","\uAC15\uB989","\uB300\uC804","\uCCAD\uC8FC","\uC544\uC0B0","\uCDA9\uB0A8","\uCDA9\uC8FC","\uAD11\uC8FC","\uC804\uBD81","\uC804\uB0A8","\uC775\uC0B0","\uC21C\uCC9C","\uB300\uAD6C","\uAD6C\uBBF8","\uB0A8\uB300\uAD6C","\uD3EC\uD56D","\uC601\uC8FC","\uC601\uB0A8\uC735\uD569\uAE30\uC220","\uCC3D\uC6D0","\uBD80\uC0B0","\uC6B8\uC0B0","\uB3D9\uBD80\uC0B0","\uC9C4\uC8FC","\uC11D\uC720\uD654\uD559\uACF5\uC815","\uBC18\uB3C4\uCCB4\uC735\uD569","\uBC14\uC774\uC624","\uB85C\uBD07","\uD56D\uACF5","\uC2E0\uAE30\uC220\uAD50\uC721\uC6D0"],Bx=["\uC804\uCCB4","\uC804\uACF5\uD544\uC218","\uC804\uACF5\uAD50\uACFC","\uC804\uACF5\uC120\uD0DD","\uAD50\uC591\uC120\uD0DD","\uAD50\uC591\uAD50\uACFC","\uAD50\uC591\uD544\uC218"],Nx=["\uC804\uCCB4","off","elearning"],Vc=(r={},u={})=>{const c=Object.keys(r),d=Object.keys(u);if(c.length!==d.length)return!1;for(const h of c)if(r[h]!==u[h])return!1;return!0},Dx=r=>{const u=String((r==null?void 0:r.haksa_course_code)??"").trim(),c=String((r==null?void 0:r.haksa_open_year)??"").trim(),d=String((r==null?void 0:r.haksa_open_term)??"").trim(),h=String((r==null?void 0:r.haksa_bunban_code)??"").trim(),m=String((r==null?void 0:r.haksa_group_code)??"").trim(),b=[u,c,d,h,m].filter(Boolean);if(b.length===5)return`H_${b.join("_")}`;const P=String((r==null?void 0:r.course_id_conv)??(r==null?void 0:r.course_cd)??(r==null?void 0:r.id)??"").trim();return`H_${u||"UNKNOWN"}_${h||"0"}_${P||"0"}`},Ax=r=>{switch(r){case"\uB300\uAE30":return"bg-gray-100 text-gray-700";case"\uC2E0\uCCAD\uAE30\uAC04":return"bg-blue-100 text-blue-700";case"\uD559\uC2B5\uAE30\uAC04":return"bg-green-100 text-green-700";case"\uC885\uB8CC":return"bg-gray-200 text-gray-600";default:return"bg-gray-100 text-gray-700"}};function wx({routeSubPath:r,routeParams:u,onRouteChange:c}){const{filters:d,setTab:h,setYear:m,setKeyword:b,setPage:P,setPageSize:N,setCourseType:U,setStatus:E,setHaksaCategory:R,setHaksaGrad:v,setHaksaCurriculum:I,setSortOrder:W,syncFromUrl:q,getUrlParams:p}=yx(),[G,H]=o.useState(["\uC804\uCCB4",String(new Date().getFullYear())]),[T,$]=o.useState(d.keyword),[O,B]=o.useState([]),[x,_]=o.useState(!1),[k,j]=o.useState(null),[J,A]=o.useState(0),[C,f]=o.useState(null),[w,F]=o.useState(null),[Y,L]=o.useState(null),S=o.useRef({subPath:r,params:u??{}}),D=o.useRef(u);o.useEffect(()=>{if(r==="manage"){D.current=u;return}const z=D.current,de=u??{};if(D.current=de,z!==void 0&&!Vc(z,de)){q(de);const he=de.keyword??"";he!==T&&$(he)}},[u,r,q,T]),S.current={subPath:r,params:u??{}};const y=o.useCallback(z=>{if(!c)return;const de=S.current;de.subPath===z.subPath&&Vc(de.params,z.params)||c(z)},[c]),K=o.useCallback((z,de)=>{const he=(z==null?void 0:z.source_type)==="haksa"||(z==null?void 0:z.source_type)==="prism"?z.source_type:de,Fe=z.status_label??"\uB300\uAE30",ye=[(z.course_type_conv||"").trim(),(z.onoff_type_conv||"").trim()].filter(Boolean),ie=he==="haksa"?z.id?String(z.id):Dx(z):String(z.id),Ne=z.mapped_course_id?Number(z.mapped_course_id):void 0;return{id:ie,mappedCourseId:Ne&&Number.isFinite(Ne)?Ne:void 0,sourceType:he,courseId:z.course_id_conv||z.course_cd||String(z.id),courseType:ye.length>0?ye.join(" / "):"\uBBF8\uC9C0\uC815",subjectName:z.course_nm_conv||z.subject_nm_conv||z.course_nm||"-",programId:Number(z.program_id??0),programName:z.program_nm_conv||"-",period:z.period_conv||"-",students:Number(z.student_cnt??0),status:Fe,haksaCategory:z.haksa_category||"",haksaDeptName:z.haksa_dept_name||"",haksaWeek:z.haksa_week||"",haksaOpenTerm:z.haksa_open_term||"",haksaCourseCode:z.haksa_course_code||"",haksaVisible:z.haksa_visible||"",haksaStartdate:z.haksa_startdate||"",haksaBunbanCode:z.haksa_bunban_code||"",haksaGrade:z.haksa_grade||"",haksaGradName:z.haksa_grad_name||"",haksaDayCd:z.haksa_day_cd||"",haksaClassroom:z.haksa_classroom||"",haksaCurriculumCode:z.haksa_curriculum_code||"",haksaCourseEname:z.haksa_course_ename||"",haksaTypeSyllabus:z.haksa_type_syllabus||"",haksaOpenYear:z.haksa_open_year||"",haksaDeptCode:z.haksa_dept_code||"",haksaCourseName:z.haksa_course_name||"",haksaGroupCode:z.haksa_group_code||"",haksaEnddate:z.haksa_enddate||"",haksaEnglish:z.haksa_english||"",haksaHour1:z.haksa_hour1||"",haksaCurriculumName:z.haksa_curriculum_name||"",haksaGradCode:z.haksa_grad_code||"",haksaIsSyllabus:z.haksa_is_syllabus||""}},[]);o.useEffect(()=>{let z=!1;const de=String(new Date().getFullYear());return(async()=>{try{const Fe=await ue.getCourseYears();if(Fe.rst_code!=="0000")throw new Error(Fe.rst_message);const ye=(Fe.rst_data??[]).map(Ne=>String(Ne.year||"").trim()).filter(Boolean),ie=["\uC804\uCCB4",...Array.from(new Set(ye)).sort((Ne,Se)=>Se.localeCompare(Ne))];if(z)return;H(ie.length>1?ie:["\uC804\uCCB4",de])}catch{z||H(["\uC804\uCCB4",de])}})(),()=>{z=!0}},[]),o.useEffect(()=>{let z=!1;return(async()=>{_(!0),j(null);try{const he=await ue.getMyCoursesCombined({tab:d.tab,year:d.year==="\uC804\uCCB4"?void 0:d.year,keyword:d.keyword||void 0,page:d.page,pageSize:d.pageSize,haksaCategory:d.tab==="haksa"&&d.haksaCategory!=="\uC804\uCCB4"?d.haksaCategory:void 0,haksaGrad:d.tab==="haksa"&&d.haksaGrad!=="\uC804\uCCB4"?d.haksaGrad:void 0,haksaCurriculum:d.tab==="haksa"&&d.haksaCurriculum!=="\uC804\uCCB4"?d.haksaCurriculum:void 0,sortOrder:d.tab==="haksa"?d.sortOrder:void 0});if(he.rst_code!=="0000")throw new Error(he.rst_message);const Fe=he.rst_data??[],ye=Number(he.rst_total_count??Fe.length),je=Fe.map(ie=>K(ie,d.tab));z||(B(je),A(Number.isNaN(ye)?Fe.length:ye))}catch(he){z||j(he instanceof Error?he.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{z||_(!1)}})(),()=>{z=!0}},[d.tab,d.year,d.keyword,d.page,d.pageSize,d.haksaCategory,d.haksaGrad,d.haksaCurriculum,d.sortOrder,K]),o.useEffect(()=>{const z=setTimeout(()=>{T.trim()!==d.keyword&&b(T.trim())},300);return()=>clearTimeout(z)},[T,d.keyword,b]),o.useEffect(()=>{c&&r!=="manage"&&(C||y({subPath:void 0,params:p()}))},[p,c,y,r,C]),o.useEffect(()=>{r!=="manage"&&C&&(f(null),F(null))},[r,C]);const ae=o.useCallback(z=>{for(const de of z){const he=u==null?void 0:u[de];if(he)return he}return""},[u]),le=ae(["courseId","course_id","id"]),Be=ae(["direct","directOpen","direct_open"]),we=r==="manage"&&Be==="1",ee=ae(["cmTab","cm_tab","tab","targetTab","tab_id"]),te=vx.has(ee)?ee:void 0,oe=ae(["source","source_type","sourceType","listTab"]),be=oe==="haksa"||oe==="prism"?oe:void 0,ve=ae(["qnaPostId","qna_post_id","postId","post_id"]),ne=(()=>{const z=Number(ve);return Number.isFinite(z)&&z>0?z:void 0})();o.useEffect(()=>{if(!we||!le)return;let z=!1;return(async()=>{try{const he=Number(le);if(!Number.isFinite(he)||he<=0)throw new Error("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const Fe=await ue.getCourseResolve({courseId:he,sourceType:be});if(Fe.rst_code!=="0000")throw new Error(Fe.rst_message);const ye=Array.isArray(Fe.rst_data)?Fe.rst_data[0]:Fe.rst_data;if(!ye)throw new Error("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");const je=K(ye,be??"prism");z||(F(te??null),f(je))}catch(he){z||j(he instanceof Error?he.message:"\uACFC\uBAA9 \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})(),()=>{z=!0}},[we,le,be,te,K]);const ge=o.useCallback(async(z,de)=>{if(F(de??null),z.sourceType!=="haksa"){f(z);return}if(z.mappedCourseId&&z.mappedCourseId>0){f(z);return}if(!z.haksaCourseCode||!z.haksaOpenYear||!z.haksaOpenTerm||!z.haksaBunbanCode||!z.haksaGroupCode){alert("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}L(z.id);try{const he=await ue.resolveHaksaCourse({courseCode:z.haksaCourseCode,openYear:z.haksaOpenYear,openTerm:z.haksaOpenTerm,bunbanCode:z.haksaBunbanCode,groupCode:z.haksaGroupCode});if(he.rst_code!=="0000")throw new Error(he.rst_message);const Fe=Array.isArray(he.rst_data)?he.rst_data[0]:he.rst_data,ye=Number((Fe==null?void 0:Fe.mapped_course_id)??0);if(!ye||Number.isNaN(ye))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");f({...z,mappedCourseId:ye})}catch(he){alert(he instanceof Error?he.message:"\uD559\uC0AC \uACFC\uBAA9 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{L(null)}},[]);o.useEffect(()=>{if(!c||!C)return;const z=w??te??"info-basic",de=C.subjectName||C.courseId;y({subPath:"manage",params:{courseId:C.id,source:C.sourceType,cmTab:z,courseName:de}})},[c,y,te,C,w]);const fe=o.useMemo(()=>d.tab==="haksa"?O.filter(z=>{const de=d.haksaCategory==="\uC804\uCCB4"||(z.haksaCategory||"").toLowerCase()===d.haksaCategory.toLowerCase(),he=d.haksaGrad==="\uC804\uCCB4"||(z.haksaGradName||"").includes(d.haksaGrad),Fe=d.haksaCurriculum==="\uC804\uCCB4"||(z.haksaCurriculumName||"")===d.haksaCurriculum;return de&&he&&Fe}):O.filter(z=>{const de=d.courseType==="\uC804\uCCB4"||z.courseType===d.courseType,he=d.status==="\uC804\uCCB4"||z.status===d.status;return de&&he}),[d,O]),$e=o.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(O.map(de=>de.courseType).filter(de=>de&&de!=="\uBBF8\uC9C0\uC815"))).sort((de,he)=>de.localeCompare(he))],[O]),re=Math.max(1,Math.ceil(J/d.pageSize)),Te=o.useMemo(()=>{const z=Math.max(1,d.page-2),de=Math.min(re,d.page+2);return Array.from({length:de-z+1},(he,Fe)=>z+Fe)},[d.page,re]);return o.useEffect(()=>{d.page>re&&re>0&&P(re)},[re,d.page,P]),C?e.jsx(ad,{course:C,initialTab:w??te??void 0,initialQnaPostId:r==="manage"?ne:void 0,onTabChange:z=>F(z),onBack:()=>{f(null),F(null),y({subPath:void 0,params:p()})}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uB2F4\uB2F9 \uACFC\uBAA9"}),e.jsx("p",{className:"text-gray-600",children:"\uB2F4\uB2F9\uD558\uACE0 \uC788\uB294 \uACFC\uBAA9 \uBAA9\uB85D\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>h("haksa"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${d.tab==="haksa"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uC815\uADDC"}),e.jsx("button",{onClick:()=>h("prism"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${d.tab==="prism"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uBE44\uC815\uADDC"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.tab==="haksa"?e.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:d.year,onChange:z=>m(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:G.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:d.haksaCategory,onChange:z=>R(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Nx.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2E8\uACFC\uB300\uD559"}),e.jsx("select",{value:d.haksaGrad,onChange:z=>v(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:jx.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uAD6C\uBD84"}),e.jsx("select",{value:d.haksaCurriculum,onChange:z=>I(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Bx.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C"}),e.jsxs("select",{value:d.sortOrder,onChange:z=>W(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"desc",children:"\uAC15\uC88C\uCF54\uB4DC \uB0B4\uB9BC\uCC28\uC21C"}),e.jsx("option",{value:"asc",children:"\uAC15\uC88C\uCF54\uB4DC \uC624\uB984\uCC28\uC21C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:T,onChange:z=>$(z.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:d.year,onChange:z=>m(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:G.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:d.courseType,onChange:z=>U(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:$e.map(z=>e.jsx("option",{value:z,children:z},z))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:d.status,onChange:z=>E(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"\uC804\uCCB4",children:"\uC804\uCCB4"}),e.jsx("option",{value:"\uB300\uAE30",children:"\uB300\uAE30"}),e.jsx("option",{value:"\uC2E0\uCCAD\uAE30\uAC04",children:"\uC2E0\uCCAD\uAE30\uAC04"}),e.jsx("option",{value:"\uD559\uC2B5\uAE30\uAC04",children:"\uD559\uC2B5\uAE30\uAC04"}),e.jsx("option",{value:"\uC885\uB8CC",children:"\uC885\uB8CC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:T,onChange:z=>$(z.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC694\uCCAD"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uBAA9\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:d.tab==="haksa"?"\uD559\uACFC/\uC804\uACF5":"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uAE30\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC218\uAC15\uC0DD"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:k?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:k})})}):x?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})})}):fe.length>0?fe.map((z,de)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:(d.page-1)*d.pageSize+de+1}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${z.sourceType==="prism"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:z.sourceType==="prism"?"LMS":"\uD559\uC0AC"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:z.courseId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:z.sourceType==="haksa"&&z.haksaCategory?z.haksaCategory:z.courseType}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:z.subjectName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:z.sourceType==="haksa"&&z.haksaDeptName?z.haksaDeptName:z.programName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:z.period}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-900",children:[e.jsx(vn,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:z.students})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs rounded-full ${Ax(z.status)}`,children:z.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{className:"flex items-center gap-1 px-4 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors disabled:opacity-60",title:"\uACFC\uBAA9 \uAD00\uB9AC",onClick:()=>void ge(z),disabled:Y===z.id,children:[e.jsx(td,{className:"w-4 h-4"}),e.jsx("span",{children:Y===z.id?"\uC5F0\uB3D9 \uC911...":"\uAD00\uB9AC"})]})})})]},z.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})})})]})})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"\uCD1D"}),e.jsx("span",{className:"text-blue-600",children:J}),e.jsx("span",{children:"\uAC1C\uC758 \uACFC\uBAA9"}),e.jsxs("span",{className:"text-gray-400",children:["/ \uD604\uC7AC ",fe.length,"\uAC1C \uD45C\uC2DC"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"page-size",className:"text-gray-600",children:"\uD398\uC774\uC9C0\uB2F9"}),e.jsx("select",{id:"page-size",value:d.pageSize,onChange:z=>N(Number(z.target.value)),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[20,50,100].map(z=>e.jsx("option",{value:z,children:z},z))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>P(1),disabled:d.page===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uCC98\uC74C"}),e.jsx("button",{type:"button",onClick:()=>P(Math.max(1,d.page-1)),disabled:d.page===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uC774\uC804"}),Te.map(z=>e.jsx("button",{type:"button",onClick:()=>P(z),className:`px-3 py-1.5 text-sm border rounded-md ${z===d.page?"bg-blue-600 text-white border-blue-600":"border-gray-300"}`,children:z},z)),e.jsx("button",{type:"button",onClick:()=>P(Math.min(re,d.page+1)),disabled:d.page===re,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB2E4\uC74C"}),e.jsx("button",{type:"button",onClick:()=>P(re),disabled:d.page===re,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB05D"})]})]})}function kx({routeSubPath:r,routeParams:u,onRouteChange:c}){const d=o.useMemo(()=>u??{},[]),h=o.useCallback(m=>{c&&r!=="manage"&&c({subPath:void 0,params:m})},[c,r]);return e.jsx(fx,{initialParams:d,onParamsChange:h,children:e.jsx(wx,{routeSubPath:r,routeParams:u,onRouteChange:c})})}function _x(r){if(!r)return null;try{const u=JSON.parse(r);return!u||typeof u!="object"?null:u}catch{return null}}function Sx(r){const u=[r.startDateYmd,r.startDate].filter(Boolean);for(const h of u){const m=String(h);if(m.length>=4&&/^\d{4}/.test(m))return m.substring(0,4)}const d=(r.trainingPeriod||"").match(/(\\d{4})/);return d?d[1]:"-"}function Ex(){const[r,u]=o.useState(""),[c,d]=o.useState("\uC804\uCCB4"),[h,m]=o.useState("\uC804\uCCB4"),[b,P]=o.useState("list"),[N,U]=o.useState(null),[E,R]=o.useState([]),[v,I]=o.useState(!1),[W,q]=o.useState(null),p=async()=>{I(!0),q(null);try{const T=await ue.getPrograms();if(T.rst_code!=="0000")throw new Error(T.rst_message);const O=(T.rst_data??[]).map(B=>{var j,J,A,C,f,w,F,Y,L,S,D,y,K,ae,le,Be,we,ee,te,oe,be;const x=_x(B.plan_json),_=((j=x==null?void 0:x.training)==null?void 0:j.trainingPeriodText)||B.training_period||"-",k=Sx({startDateYmd:(J=x==null?void 0:x.training)==null?void 0:J.startDateYmd,startDate:B.start_date,trainingPeriod:_});return{id:String(B.id),courseCategory:((C=(A=x==null?void 0:x.basic)==null?void 0:A.courseCategory)==null?void 0:C.label)||((w=(f=x==null?void 0:x.basic)==null?void 0:f.courseCategory)==null?void 0:w.value)||"-",classification:((Y=(F=x==null?void 0:x.basic)==null?void 0:F.classification)==null?void 0:Y.label)||((S=(L=x==null?void 0:x.basic)==null?void 0:L.classification)==null?void 0:S.value)||"\uBBF8\uBD84\uB958",name:B.course_nm||((D=x==null?void 0:x.basic)==null?void 0:D.courseName)||`\uACFC\uC815 ${B.id}`,department:((y=x==null?void 0:x.basic)==null?void 0:y.department)||"",major:((K=x==null?void 0:x.basic)==null?void 0:K.major)||"",departmentName:((ae=x==null?void 0:x.basic)==null?void 0:ae.departmentName)||"",trainingPeriod:_,trainingLevel:((Be=(le=x==null?void 0:x.training)==null?void 0:le.trainingLevel)==null?void 0:Be.label)||((ee=(we=x==null?void 0:x.training)==null?void 0:we.trainingLevel)==null?void 0:ee.value)||"-",trainingTarget:((te=x==null?void 0:x.training)==null?void 0:te.trainingTarget)||"",trainingGoal:((oe=x==null?void 0:x.training)==null?void 0:oe.trainingGoal)||"",instructor:((be=x==null?void 0:x.basic)==null?void 0:be.instructor)||"",year:k,students:0,subjects:Number(B.course_cnt??0)}});R(O)}catch(T){q(T instanceof Error?T.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}};o.useEffect(()=>{p()},[]);const G=o.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(E.map($=>$.year).filter($=>$&&$!=="-"))).sort(($,O)=>O.localeCompare($))],[E]),H=o.useMemo(()=>{const T=r.trim().toLowerCase();return E.filter($=>{const O=[$.name,$.department,$.major,$.departmentName,$.instructor,$.trainingLevel,$.trainingTarget,$.trainingGoal].map(k=>String(k||"").toLowerCase()).filter(Boolean),B=T===""||O.some(k=>k.includes(T)),x=h==="\uC804\uCCB4"||$.year===h,_=c==="\uC804\uCCB4"||$.classification===c;return B&&x&&_})},[E,r,h,c]);return N?e.jsx(cd,{course:N,onBack:()=>{U(null),p()}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uD0D0\uC0C9"}),e.jsx("p",{className:"text-gray-600",children:"\uAC1C\uC124\uB41C \uBAA8\uB4E0 \uAD50\uC721 \uACFC\uC815\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:T=>u(T.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85, \uAD50\uC218\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:c,onChange:T=>d(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]}),e.jsx("select",{value:h,onChange:T=>m(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:G.map(T=>e.jsx("option",{value:T,children:T},T))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P("grid"),className:`p-2 rounded-lg transition-colors ${b==="grid"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(qC,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>P("list"),className:`p-2 rounded-lg transition-colors ${b==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(ht,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:H.length}),"\uAC1C\uC758 \uACFC\uC815"]})}),W?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:W})}):v?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):e.jsxs(e.Fragment,{children:[b==="grid"?e.jsx("div",{className:"grid grid-cols-3 gap-6",children:H.map(T=>e.jsxs("div",{onClick:()=>U(T),className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[T.thumbnail?e.jsx("img",{src:T.thumbnail,alt:T.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ht,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-3 py-1 bg-white bg-opacity-90 rounded-full text-xs text-gray-900",children:T.classification})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:T.name}),e.jsx("p",{className:"text-sm text-gray-600",children:[T.department,T.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.departmentName||"-"})]})})]},T.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-20",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-28",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-24",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap w-24",children:"\uC18C\uC18D \uACFC\uBAA9"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(T=>e.jsxs("tr",{onClick:()=>U(T),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 whitespace-nowrap",children:T.id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:T.courseCategory||"-"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:T.classification})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 break-words",children:T.name})}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-600 whitespace-nowrap",children:[T.subjects,"\uAC1C"]})]},T.id))})]})}),H.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})})]})]})}function Fx({onNavigate:r,onOpenCourse:u}={}){const[c,d]=o.useState(!1),[h,m]=o.useState(null),[b,P]=o.useState(null),[N,U]=o.useState([]),[E,R]=o.useState([]),[v,I]=o.useState([]);o.useEffect(()=>{let B=!1;return(async()=>{d(!0),m(null);try{const _=await ue.getDashboard();if(_.rst_code!=="0000")throw new Error(_.rst_message);if(B)return;P(_.rst_data??null),U(_.rst_courses??[]),R(_.rst_submissions??[]),I(_.rst_qna??[])}catch(_){B||m(_ instanceof Error?_.message:"\uB300\uC2DC\uBCF4\uB4DC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B||d(!1)}})(),()=>{B=!0}},[]);const W=o.useMemo(()=>[{title:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9",value:(b==null?void 0:b.active_course_cnt)??0,icon:ht,color:"bg-blue-100 text-blue-600",bgColor:"bg-blue-50"},{title:"\uBBF8\uD655\uC778 \uACFC\uC81C",value:(b==null?void 0:b.pending_homework_cnt)??0,icon:os,color:"bg-orange-100 text-orange-600",bgColor:"bg-orange-50"},{title:"\uBBF8\uB2F5\uBCC0 Q&A",value:(b==null?void 0:b.unanswered_qna_cnt)??0,icon:Us,color:"bg-purple-100 text-purple-600",bgColor:"bg-purple-50"}],[b==null?void 0:b.active_course_cnt,b==null?void 0:b.pending_homework_cnt,b==null?void 0:b.unanswered_qna_cnt]),q=o.useMemo(()=>N.slice(0,3),[N]),p=o.useMemo(()=>E.slice(0,3),[E]),G=o.useMemo(()=>v.slice(0,3),[v]),H=()=>{r==null||r("courses")},T=()=>{r==null||r("assignment-manage")},$=()=>{r==null||r("qna-manage")},O=B=>{if(u){u(B);return}r==null||r("courses")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"\uB300\uC2DC\uBCF4\uB4DC"}),e.jsx("p",{className:"text-gray-600",children:"\uAD50\uC218\uC790 \uD65C\uB3D9 \uD604\uD669\uC744 \uD55C\uB208\uC5D0 \uD655\uC778\uD558\uC138\uC694"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:W.map((B,x)=>e.jsxs("div",{className:`${B.bgColor} border border-gray-200 rounded-lg p-6 transition-all hover:shadow-md`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`${B.color} p-3 rounded-lg`,children:e.jsx(B.icon,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:B.value}),e.jsx("div",{className:"text-sm text-gray-600",children:B.title})]})]},x))}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uD589 \uC911\uC778 \uAC15\uC88C"})]}),e.jsx("button",{onClick:H,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):N.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:q.map(B=>{const x=Math.round(Number(B.avg_progress_ratio??0)),_=Number(B.student_cnt??0),k=Number(B.pending_homework_cnt??0),j=Number(B.unanswered_qna_cnt??0);return e.jsxs("button",{type:"button",onClick:()=>O({courseId:B.id,courseName:B.course_nm,targetTab:"attendance"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:B.course_nm}),e.jsx("p",{className:"text-sm text-gray-600",children:B.period_conv||"-"})]}),(k>0||j>0)&&e.jsxs("div",{className:"flex items-center gap-2",children:[k>0&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:["\uBBF8\uD655\uC778 \uACFC\uC81C ",k,"\uAC74"]}),j>0&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:["\uBBF8\uB2F5\uBCC0 Q&A ",j,"\uAC74"]})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vn,{className:"w-4 h-4"}),_,"\uBA85"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uD3C9\uADE0 \uC9C4\uB3C4\uC728"}),e.jsxs("span",{className:"text-gray-900",children:[x,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,x))}%`}})})]})]},B.id)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uC81C \uBAA9\uB85D"})]}),e.jsx("button",{onClick:T,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):E.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC \uC81C\uCD9C\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:p.map(B=>{const x=!!B.confirmed,_=`${B.user_nm||"-"} \xB7 ${B.course_nm}`,k=B.submitted_at||"-";return e.jsxs("button",{type:"button",onClick:()=>O({courseId:B.course_id,courseName:B.course_nm,targetTab:"assignment-feedback"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:B.homework_nm}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:_})]}),x?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"\uD655\uC778\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uD655\uC778"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:k})]})]},`${B.homework_id}-${B.course_user_id}`)})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uADFC Q&A"})]}),e.jsx("button",{onClick:$,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):v.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC Q&A\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:G.map(B=>e.jsxs("button",{type:"button",onClick:()=>O({courseId:B.course_id,courseName:B.course_nm,targetTab:"qna",qnaPostId:B.post_id,sourceType:B.source_type==="haksa"?"haksa":"prism"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:B.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[B.user_nm||"-"," \xB7 ",B.course_nm]})]}),B.answered?e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:"\uB2F5\uBCC0\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uB2F5\uBCC0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:B.reg_date_conv||"-"})]})]},B.post_id))})]})]})}function Wc({activeTab:r}){const[u,c]=o.useState(""),[d,h]=o.useState(""),[m,b]=o.useState([]),[P,N]=o.useState([]),[U,E]=o.useState(0),[R,v]=o.useState(1),[I,W]=o.useState(!1),[q,p]=o.useState(!1),[G,H]=o.useState(null),T=30;Me.useEffect(()=>{v(1),b([]),E(0)},[u,d,r]),Me.useEffect(()=>{let x=!1;const _=setTimeout(()=>{(async()=>{const j=R===1;p(j),W(!j),H(null);try{const J=r==="favorites"?await ue.getKollusWishlistList({keyword:u,page:R,limit:T}):await ue.getKollusList({keyword:u,categoryKey:d||void 0,page:R,limit:T});if(J.rst_code!=="0000")throw new Error(J.rst_message);const C=(J.rst_data??[]).map(w=>({id:String(w.id||w.media_content_key),mediaKey:w.media_content_key,title:w.title,description:w.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${w.original_file_name}`:"",category:w.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",categoryKey:w.category_key,snapshotUrl:w.snapshot_url,originalFileName:w.original_file_name||"",thumbnail:w.thumbnail||w.snapshot_url||"",duration:w.duration||"-",totalTime:Number(w.total_time??0),contentWidth:Number(w.content_width??0),contentHeight:Number(w.content_height??0),isFavorite:!!w.is_favorite})),f=Array.isArray(J.rst_categories)?J.rst_categories:[];x||(b(w=>j?C:[...w,...C]),E(Number(J.rst_total??C.length)),r!=="favorites"&&f.length>0&&N(f))}catch(J){x||H(J instanceof Error?J.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{x||(p(!1),W(!1))}})()},250);return()=>{x=!0,clearTimeout(_)}},[r,u,d,R]);const $=P,O=async(x,_)=>{x.preventDefault(),x.stopPropagation();try{const k=await ue.toggleKollusWishlist({mediaContentKey:_.mediaKey,title:_.title,snapshotUrl:_.snapshotUrl||_.thumbnail,categoryKey:_.categoryKey,categoryName:_.category,originalFileName:_.originalFileName,totalTime:_.totalTime,contentWidth:_.contentWidth,contentHeight:_.contentHeight});if(k.rst_code!=="0000")throw new Error(k.rst_message);const j=Number(k.rst_data??0)===1;b(J=>r==="favorites"&&!j?J.filter(A=>A.mediaKey!==_.mediaKey):J.map(A=>A.mediaKey===_.mediaKey?{...A,isFavorite:j}:A))}catch(k){H(k instanceof Error?k.message:"\uCC1C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},B=x=>{if(!x.mediaKey)return;const _=`/kollus/preview.jsp?key=${encodeURIComponent(x.mediaKey)}`,k=Math.max(Number(x.contentWidth??0),900),j=Math.max(Number(x.contentHeight??0),506);window.open(_,"_blank",`width=${k},height=${j},resizable=yes,scrollbars=yes`)||H("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:r==="all"?"\uC804\uCCB4 \uCF58\uD150\uCE20":"\uCC1C\uD55C \uCF58\uD150\uCE20"}),e.jsx("p",{className:"text-gray-600",children:r==="all"?"\uBAA8\uB4E0 \uAD50\uC721 \uCF58\uD150\uCE20\uB97C \uAC80\uC0C9\uD558\uACE0 \uACFC\uC815\uC5D0 \uD65C\uC6A9\uD558\uC138\uC694.":"\uC990\uACA8\uCC3E\uAE30\uD55C \uCF58\uD150\uCE20\uB9CC \uBAA8\uC544\uC11C \uD655\uC778\uD558\uC138\uC694."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:u,onChange:x=>c(x.target.value),placeholder:"\uCF58\uD150\uCE20 \uC81C\uBAA9\uC774\uB098 \uD0DC\uADF8\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r!=="favorites"&&e.jsxs("select",{value:d,onChange:x=>h(x.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),$.map(x=>e.jsx("option",{value:x.key,children:x.name},x.key))]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:U}),"\uAC1C\uC758 \uCF58\uD150\uCE20"]})]})}),G&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:G}),q&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!q&&e.jsx("div",{className:"grid grid-cols-3 gap-6",children:m.map(x=>e.jsxs("div",{className:"group bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",role:"button",tabIndex:0,onClick:()=>B(x),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&B(x)},children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[x.thumbnail?e.jsx("img",{src:x.thumbnail,alt:x.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ht,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-black bg-opacity-60 flex items-center justify-center",children:e.jsx(Rl,{className:"w-6 h-6 text-white ml-0.5"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white px-2 py-1 rounded text-xs",children:x.category}),e.jsx("button",{type:"button",onClick:_=>O(_,x),className:"absolute top-2 right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors",title:x.isFavorite?"\uCC1C \uD574\uC81C":"\uCC1C\uD558\uAE30",children:e.jsx(ZC,{className:`w-4 h-4 ${x.isFavorite?"fill-red-500 text-red-500":"text-gray-400"}`})}),x.duration&&x.duration!=="-"&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:x.duration})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2 line-clamp-1",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:x.description})]})]},x.id))}),!q&&!G&&m.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})}),!q&&m.length<U&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"button",onClick:()=>v(x=>x+1),disabled:I,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:I?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})})]})}const Tx=r=>({id:String(r.id),name:r.category_nm,parentId:r.parent_id>0?String(r.parent_id):null,createdAt:new Date().toISOString()}),Ix=r=>{const u=new Map,c=[];return r.forEach(d=>{u.set(d.id,{...d,children:[]})}),r.forEach(d=>{const h=u.get(d.id);d.parentId&&u.has(d.parentId)?u.get(d.parentId).children.push(h):c.push(h)}),c};function Px(){const[r,u]=o.useState([]),[c,d]=o.useState(new Set),[h,m]=o.useState(!0),[b,P]=o.useState(!1),[N,U]=o.useState(null),[E,R]=o.useState(!1),[v,I]=o.useState(null),[W,q]=o.useState(""),[p,G]=o.useState(null),H=async()=>{try{m(!0),U(null);const j=await ue.getQuestionCategories();if(j.rst_code!=="0000")throw new Error(j.rst_message);const J=(j.rst_data??[]).map(Tx);u(J)}catch(j){U(j instanceof Error?j.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{m(!1)}};o.useEffect(()=>{H()},[]);const T=Ix(r),$=j=>{d(J=>{const A=new Set(J);return A.has(j)?A.delete(j):A.add(j),A})},O=(j=null)=>{I(null),q(""),G(j),R(!0)},B=j=>{I(j),q(j.name),G(j.parentId),R(!0)},x=async()=>{if(W.trim())try{if(P(!0),U(null),v){const j=await ue.updateQuestionCategory({id:Number(v.id),categoryName:W.trim(),parentId:p?Number(p):0});if(j.rst_code!=="0000")throw new Error(j.rst_message)}else{const j=await ue.createQuestionCategory({categoryName:W.trim(),parentId:p?Number(p):0});if(j.rst_code!=="0000")throw new Error(j.rst_message)}await H(),R(!1),I(null),q("")}catch(j){U(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}},_=async j=>{if(r.some(A=>A.parentId===j)){alert("\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC788\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(confirm("\uC774 \uCE74\uD14C\uACE0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{P(!0);const A=await ue.deleteQuestionCategory({id:Number(j)});if(A.rst_code!=="0000")throw new Error(A.rst_message);await H()}catch(A){U(A instanceof Error?A.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}},k=(j,J=0)=>{const A=c.has(j.id),C=j.children&&j.children.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 hover:bg-gray-50 border-b border-gray-100 ${J>0?"bg-gray-50/50":""}`,style:{paddingLeft:`${16+J*24}px`},children:[C?e.jsx("button",{onClick:()=>$(j.id),className:"p-1 hover:bg-gray-200 rounded",children:A?e.jsx(rr,{className:"w-4 h-4 text-gray-500"}):e.jsx(Yt,{className:"w-4 h-4 text-gray-500"})}):e.jsx("span",{className:"w-6"}),e.jsx(Pc,{className:"w-4 h-4 text-indigo-500"}),e.jsx("span",{className:"flex-1 text-gray-800",children:j.name}),e.jsx("button",{onClick:()=>O(j.id),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00",disabled:b,children:e.jsx(mt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B(j),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:b,children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(j.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:b,children:e.jsx(pt,{className:"w-4 h-4"})})]}),A&&C&&e.jsx("div",{children:j.children.map(f=>k(f,J+1))})]},j.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C \uCE74\uD14C\uACE0\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uBB38\uC81C\uB97C \uBD84\uB958\uD560 \uCE74\uD14C\uACE0\uB9AC\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:()=>O(null),disabled:b,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"})]})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:N}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:h?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Zt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):T.length>0?e.jsx("div",{children:T.map(j=>k(j))}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Pc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>O(null),className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00\uD558\uAE30"})]})}),E&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>R(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v?"\uCE74\uD14C\uACE0\uB9AC \uC218\uC815":"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"}),e.jsx("button",{onClick:()=>R(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCE74\uD14C\uACE0\uB9AC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:W,onChange:j=>q(j.target.value),placeholder:"\uCE74\uD14C\uACE0\uB9AC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC0C1\uC704 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:p||"",onChange:j=>G(j.target.value||null),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC5C6\uC74C (\uCD5C\uC0C1\uC704)"}),r.filter(j=>j.id!==(v==null?void 0:v.id)).map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>R(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:x,disabled:!W.trim()||b,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[b?e.jsx(Zt,{className:"w-4 h-4 animate-spin"}):e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const Lx=r=>r===1||r===2?"multiple_choice":r===3||r===4?"short_answer":"multiple_choice",Gc=r=>r==="multiple_choice"?1:r==="short_answer"?3:1,Mx=r=>{const u=Lx(r.question_type),c=[];if(r.question_type===1||r.question_type===2)for(let d=1;d<=(r.item_cnt||4);d++){const h=`item${d}`,m=r[h];if(m){const b=(r.answer||"").split("||");c.push({id:String(d),text:m,isCorrect:b.includes(String(d))})}}return{id:String(r.id),categoryId:r.category_id?String(r.category_id):null,type:u,title:r.question,content:r.question_text||"",choices:u==="multiple_choice"?c:void 0,correctAnswer:u!=="multiple_choice"?r.answer:void 0,points:r.score||5,createdAt:r.reg_date||new Date().toISOString()}},qc={multiple_choice:"\uAC1D\uAD00\uC2DD",short_answer:"\uC8FC\uAD00\uC2DD",ox:"OX\uD615"},Rx={multiple_choice:"bg-blue-100 text-blue-700",short_answer:"bg-green-100 text-green-700",ox:"bg-purple-100 text-purple-700"};function Ox(){const[r,u]=o.useState([]),[c,d]=o.useState([]),[h,m]=o.useState(!0),[b,P]=o.useState(!1),[N,U]=o.useState(null),[E,R]=o.useState(""),[v,I]=o.useState(""),[W,q]=o.useState(""),[p,G]=o.useState(!1),[H,T]=o.useState(null),[$,O]=o.useState({categoryId:"",type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),B=async()=>{try{m(!0),U(null);const C=await ue.getQuestionCategories();C.rst_code==="0000"&&d(C.rst_data??[]);const f=W==="multiple_choice"?1:W==="short_answer"?3:void 0,w=await ue.getQuestionBankList({categoryId:v?Number(v):void 0,questionType:f,keyword:E||void 0,limit:100});if(w.rst_code!=="0000")throw new Error(w.rst_message);const F=(w.rst_data??[]).map(Mx);u(F)}catch(C){U(C instanceof Error?C.message:"\uBB38\uC81C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{m(!1)}};o.useEffect(()=>{B()},[E,v,W]);const x=()=>{T(null),O({categoryId:null,type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),G(!0)},_=C=>{T(C),O({categoryId:C.categoryId,type:C.type,title:C.title,content:C.content,points:C.points,choices:C.choices||[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:C.correctAnswer||""}),G(!0)},k=async()=>{if($.title.trim())try{P(!0),U(null);let C="";if($.type==="multiple_choice"){const w=$.choices.findIndex(F=>F.isCorrect);C=w>=0?String(w+1):"1"}else $.type,C=$.correctAnswer;const f=$.type==="multiple_choice"?$.choices.map(w=>w.text).filter(w=>w.trim()):void 0;if(H){const w=await ue.updateQuestion({id:Number(H.id),categoryId:$.categoryId?Number($.categoryId):void 0,questionType:Gc($.type),question:$.title.trim(),questionText:$.content.trim(),answer:C,points:$.points,items:f});if(w.rst_code!=="0000")throw new Error(w.rst_message)}else{const w=await ue.createQuestion({categoryId:$.categoryId?Number($.categoryId):void 0,questionType:Gc($.type),question:$.title.trim(),questionText:$.content.trim(),answer:C,points:$.points,items:f});if(w.rst_code!=="0000")throw new Error(w.rst_message)}await B(),G(!1)}catch(C){U(C instanceof Error?C.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}},j=async C=>{if(confirm("\uC774 \uBB38\uC81C\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{P(!0);const f=await ue.deleteQuestion({id:Number(C)});if(f.rst_code!=="0000")throw new Error(f.rst_message);await B()}catch(f){U(f instanceof Error?f.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P(!1)}},J=C=>{if(!C)return"-";const f=c.find(w=>String(w.id)===C);return(f==null?void 0:f.category_nm)||"-"},A=(C,f,w)=>{O(F=>({...F,choices:F.choices.map((Y,L)=>L===C?{...Y,[f]:w}:f==="isCorrect"&&w===!0?{...Y,isCorrect:!1}:Y)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C\uC740\uD589"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC5D0 \uC0AC\uC6A9\uD560 \uBB38\uC81C\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:x,disabled:b,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(mt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBB38\uC81C \uCD94\uAC00"})]})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:N}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:E,onChange:C=>R(C.target.value),placeholder:"\uBB38\uC81C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),e.jsxs("select",{value:v,onChange:C=>I(C.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),c.map(C=>e.jsx("option",{value:C.id,children:C.category_nm},C.id))]}),e.jsxs("select",{value:W,onChange:C=>q(C.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uC720\uD615"}),e.jsx("option",{value:"multiple_choice",children:"\uAC1D\uAD00\uC2DD"}),e.jsx("option",{value:"short_answer",children:"\uC8FC\uAD00\uC2DD"}),e.jsx("option",{value:"ox",children:"OX\uD615"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:h?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Zt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):r.length>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uBB38\uC81C"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC720\uD615"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uBC30\uC810"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:C.title}),C.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:C.content})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Rx[C.type]}`,children:qc[C.type]})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:J(C.categoryId)}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-900",children:[C.points,"\uC810"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>_(C),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:b,children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(C.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:b,children:e.jsx(pt,{className:"w-4 h-4"})})]})})]},C.id))})]}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Fu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:x,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uBB38\uC81C \uCD94\uAC00\uD558\uAE30"})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",r.length,"\uAC1C \uBB38\uC81C"]}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>G(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H?"\uBB38\uC81C \uC218\uC815":"\uBB38\uC81C \uCD94\uAC00"}),e.jsx("button",{onClick:()=>G(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uC720\uD615"}),e.jsx("div",{className:"flex gap-3",children:["multiple_choice","short_answer","ox"].map(C=>e.jsx("button",{type:"button",onClick:()=>O(f=>({...f,type:C})),className:`flex-1 py-3 px-4 rounded-lg border-2 transition-colors ${$.type===C?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300"}`,children:qc[C]},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:$.categoryId||"",onChange:C=>O(f=>({...f,categoryId:C.target.value||null})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C"}),c.map(C=>e.jsx("option",{value:C.id,children:C.category_nm},C.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uBB38\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:$.title,onChange:C=>O(f=>({...f,title:C.target.value})),placeholder:"\uBB38\uC81C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uB0B4\uC6A9"}),e.jsx("textarea",{value:$.content,onChange:C=>O(f=>({...f,content:C.target.value})),placeholder:"\uBB38\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694",rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),$.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC120\uD0DD\uC9C0"}),e.jsx("div",{className:"space-y-3",children:$.choices.map((C,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>A(f,"isCorrect",!0),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${C.isCorrect?"border-green-500 bg-green-500 text-white":"border-gray-300 hover:border-green-400"}`,children:C.isCorrect&&e.jsx("span",{className:"text-xs",children:"\u2713"})}),e.jsxs("span",{className:"text-sm text-gray-500 w-6",children:[f+1,"."]}),e.jsx("input",{type:"text",value:C.text,onChange:w=>A(f,"text",w.target.value),placeholder:`\uC120\uD0DD\uC9C0 ${f+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},C.id))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"\uC6D0\uD615 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC815\uB2F5\uC744 \uC120\uD0DD\uD558\uC138\uC694."})]}),$.type==="short_answer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsx("input",{type:"text",value:$.correctAnswer,onChange:C=>O(f=>({...f,correctAnswer:C.target.value})),placeholder:"\uC815\uB2F5\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),$.type==="ox"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>O(C=>({...C,correctAnswer:"O"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${$.correctAnswer==="O"?"border-green-500 bg-green-50 text-green-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"O"}),e.jsx("button",{type:"button",onClick:()=>O(C=>({...C,correctAnswer:"X"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${$.correctAnswer==="X"?"border-red-500 bg-red-50 text-red-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"X"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:$.points,onChange:C=>O(f=>({...f,points:parseInt(C.target.value)||0})),min:1,className:"w-32 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"\uC810"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:k,disabled:!$.title.trim()||b,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[b?e.jsx(Zt,{className:"w-4 h-4 animate-spin"}):e.jsx(es,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const $x="/tutor_lms/api/statistics_proxy.jsp/statistics/dashboard.html";function zx(){return e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",style:{height:"calc(100vh - 140px)"},children:e.jsx("iframe",{src:$x,title:"\uD1B5\uACC4 \uB300\uC2DC\uBCF4\uB4DC",className:"w-full h-full border-0"})})}function Ux({onOpenCourse:r}){const[u,c]=o.useState(""),[d,h]=o.useState(""),[m,b]=o.useState([]),[P,N]=o.useState(!1),[U,E]=o.useState(null),[R,v]=o.useState(1),[I,W]=o.useState(20),[q,p]=o.useState(0),[G,H]=o.useState("all"),[T,$]=o.useState(""),[O,B]=o.useState(""),x=Math.max(1,Math.ceil(q/I)),_=o.useMemo(()=>{const A=Math.max(1,R-2),C=Math.min(x,R+2);return Array.from({length:C-A+1},(f,w)=>A+w)},[R,x]);o.useEffect(()=>{let A=!1;return(async()=>{N(!0),E(null);try{const f=await ue.getHomeworkSubmissions({keyword:d||void 0,page:R,pageSize:I,startDate:T||void 0,endDate:O||void 0,status:G==="all"?void 0:G});if(f.rst_code!=="0000")throw new Error(f.rst_message);if(A)return;b(f.rst_data??[]),p(Number(f.rst_total??f.rst_count??(f.rst_data??[]).length))}catch(f){A||E(f instanceof Error?f.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{A||N(!1)}})(),()=>{A=!0}},[R,I,d,T,O,G]);const k=()=>{v(1),h(u.trim())},j=()=>{v(1)},J=A=>{r==null||r({courseId:A.course_id,courseName:A.course_nm,targetTab:"assignment-feedback",sourceType:A.source_type==="haksa"?"haksa":"prism"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"\uACFC\uC81C \uD1B5\uD569\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-600",children:"\uBAA8\uB4E0 \uACFC\uBAA9\uC758 \uACFC\uC81C \uC81C\uCD9C\uC744 \uD55C \uACF3\uC5D0\uC11C \uD655\uC778\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsx("input",{type:"text",value:u,onChange:A=>c(A.target.value),placeholder:"\uACFC\uC81C\uBA85/\uACFC\uBAA9\uBA85/\uD559\uC0DD\uBA85 \uAC80\uC0C9",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:A=>{A.key==="Enter"&&k()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:I,onChange:A=>{W(Number(A.target.value)),v(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:20,children:"20\uAC1C"}),e.jsx("option",{value:50,children:"50\uAC1C"}),e.jsx("option",{value:100,children:"100\uAC1C"})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uAE30\uAC04"}),e.jsx("input",{type:"date",value:T,onChange:A=>{$(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"~"}),e.jsx("input",{type:"date",value:O,onChange:A=>{B(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:G,onChange:A=>{H(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"\uC804\uCCB4"}),e.jsx("option",{value:"unconfirmed",children:"\uBBF8\uD655\uC778"}),e.jsx("option",{value:"confirmed",children:"\uD655\uC778\uC644\uB8CC"})]})]})]})]}),U&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:U}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uC81C \uC81C\uCD9C \uBAA9\uB85D"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",q,"\uAC74"]})]}),P?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):m.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(A=>{const C=!!A.confirmed,f=`${A.user_nm||"-"} \xB7 ${A.course_nm}`,w=A.submitted_at||"-";return e.jsxs("button",{type:"button",onClick:()=>J(A),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:A.homework_nm}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:f})]}),C?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"\uD655\uC778\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uD655\uC778"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:w})]})]},`${A.homework_id}-${A.course_user_id}`)})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>v(A=>Math.max(1,A-1)),disabled:R<=1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uC774\uC804"}),_.map(A=>e.jsx("button",{onClick:()=>v(A),className:`px-3 py-2 border rounded-lg text-sm ${A===R?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:A},A)),e.jsx("button",{onClick:()=>v(A=>Math.min(x,A+1)),disabled:R>=x,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uB2E4\uC74C"})]})]})}function Hx({onOpenCourse:r}){const[u,c]=o.useState(""),[d,h]=o.useState(""),[m,b]=o.useState([]),[P,N]=o.useState(!1),[U,E]=o.useState(null),[R,v]=o.useState(1),[I,W]=o.useState(20),[q,p]=o.useState(0),[G,H]=o.useState("all"),[T,$]=o.useState(""),[O,B]=o.useState(""),x=Math.max(1,Math.ceil(q/I)),_=o.useMemo(()=>{const A=Math.max(1,R-2),C=Math.min(x,R+2);return Array.from({length:C-A+1},(f,w)=>A+w)},[R,x]);o.useEffect(()=>{let A=!1;return(async()=>{N(!0),E(null);try{const f=await ue.getQnaManageList({keyword:d||void 0,page:R,pageSize:I,startDate:T||void 0,endDate:O||void 0,status:G==="all"?void 0:G});if(f.rst_code!=="0000")throw new Error(f.rst_message);if(A)return;b(f.rst_data??[]),p(Number(f.rst_total??f.rst_count??(f.rst_data??[]).length))}catch(f){A||E(f instanceof Error?f.message:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{A||N(!1)}})(),()=>{A=!0}},[R,I,d,T,O,G]);const k=()=>{v(1),h(u.trim())},j=()=>{v(1)},J=A=>{r==null||r({courseId:A.course_id,courseName:A.course_nm,targetTab:"qna",qnaPostId:A.post_id,sourceType:A.source_type==="haksa"?"haksa":"prism"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"Q&A \uD1B5\uD569\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-600",children:"\uBAA8\uB4E0 \uACFC\uBAA9\uC758 Q&A\uB97C \uD55C \uD654\uBA74\uC5D0\uC11C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsx("input",{type:"text",value:u,onChange:A=>c(A.target.value),placeholder:"\uC81C\uBAA9/\uACFC\uBAA9\uBA85/\uC791\uC131\uC790 \uAC80\uC0C9",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:A=>{A.key==="Enter"&&k()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:I,onChange:A=>{W(Number(A.target.value)),v(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:20,children:"20\uAC1C"}),e.jsx("option",{value:50,children:"50\uAC1C"}),e.jsx("option",{value:100,children:"100\uAC1C"})]}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uAE30\uAC04"}),e.jsx("input",{type:"date",value:T,onChange:A=>{$(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"~"}),e.jsx("input",{type:"date",value:O,onChange:A=>{B(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:G,onChange:A=>{H(A.target.value),j()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"\uC804\uCCB4"}),e.jsx("option",{value:"unanswered",children:"\uBBF8\uB2F5\uBCC0"}),e.jsx("option",{value:"answered",children:"\uB2F5\uBCC0\uC644\uB8CC"})]})]})]})]}),U&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:U}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"Q&A \uBAA9\uB85D"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",q,"\uAC74"]})]}),P?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):m.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(A=>e.jsxs("button",{type:"button",onClick:()=>J(A),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:A.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[A.user_nm||"-"," \xB7 ",A.course_nm]})]}),A.answered?e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:"\uB2F5\uBCC0\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uB2F5\uBCC0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:A.reg_date_conv||"-"})]})]},A.post_id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>v(A=>Math.max(1,A-1)),disabled:R<=1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uC774\uC804"}),_.map(A=>e.jsx("button",{onClick:()=>v(A),className:`px-3 py-2 border rounded-lg text-sm ${A===R?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:A},A)),e.jsx("button",{onClick:()=>v(A=>Math.min(x,A+1)),disabled:R>=x,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uB2E4\uC74C"})]})]})}const Yx=["dashboard","explore","courses","assignment-manage","qna-manage","create-course","content-all","content-favorites","exam-categories","exam-questions","exam-management","subject-create","statistics"],Qx=new Set(Yx),Kx=["basic","subjects"],Vx=new Set(Kx),Wx=["basic","learners","curriculum","confirm"],Gx=new Set(Wx),qx=(r,u)=>{const c=Object.keys(r),d=Object.keys(u);if(c.length!==d.length)return!1;for(const h of c)if(r[h]!==u[h])return!1;return!0},Jx=(r,u)=>r.menu===u.menu&&r.subPath===u.subPath&&qx(r.params,u.params),Jc=r=>{const u=r.replace(/^#\/?/,"").trim();if(!u)return{menu:"dashboard",params:{},isFallback:!1};const[c,d]=u.split("?"),h=c.split("/").filter(Boolean),m=h[0]??"",b=Qx.has(m),P={};return d&&new URLSearchParams(d).forEach((U,E)=>{U&&(P[E]=U)}),{menu:b?m:"dashboard",subPath:h.length>1?h.slice(1).join("/"):void 0,params:P,isFallback:!b}},Xx=r=>{const u=[r.menu,r.subPath].filter(Boolean).join("/"),c=new URLSearchParams;Object.entries(r.params).forEach(([h,m])=>{m&&c.set(h,m)});const d=c.toString();return`#/${u}${d?`?${d}`:""}`};function Zx(){const[r,u]=o.useState(()=>{const x=Jc(window.location.hash);return{menu:x.menu,subPath:x.subPath,params:x.params}}),[c,d]=o.useState(!1),[h,m]=o.useState(!1),[b,P]=o.useState(0),N=r.menu,U=N==="content-all"||N==="content-favorites",E=N==="exam-categories"||N==="exam-questions"||N==="exam-management",R=o.useCallback((x,_=!1)=>{const k=Xx(x);if(window.location.hash===k)return;const j=`${window.location.pathname}${window.location.search}${k}`;_?window.history.replaceState(null,"",j):window.location.hash=k},[]),v=o.useCallback((x,_)=>{u(k=>Jx(k,x)?k:x),(x.menu==="content-all"||x.menu==="content-favorites")&&d(!0),(x.menu==="exam-categories"||x.menu==="exam-questions"||x.menu==="exam-management")&&m(!0),(_==null?void 0:_.syncHash)!==!1&&R(x,_==null?void 0:_.replaceHash)},[R]),I=o.useCallback(x=>{v({menu:x,params:{}})},[v]),W=o.useCallback(x=>{const _={courseId:String(x.courseId),cmTab:x.targetTab??"attendance",source:x.sourceType??"prism",direct:"1"};x.courseName&&(_.courseName=x.courseName),x.qnaPostId&&(_.qnaPostId=String(x.qnaPostId)),v({menu:"courses",subPath:"manage",params:_})},[v]),q=o.useCallback(x=>{v({menu:"courses",subPath:x.subPath,params:x.params})},[v]);o.useEffect(()=>{const x=()=>{const _=Jc(window.location.hash);if(_.isFallback){v({menu:"dashboard",params:{}},{syncHash:!0,replaceHash:!0});return}v({menu:_.menu,subPath:_.subPath,params:_.params},{syncHash:!1})};return x(),window.addEventListener("hashchange",x),()=>window.removeEventListener("hashchange",x)},[v]);const p=()=>{c?d(!c):I("content-all")},G=()=>{h?m(!h):I("exam-categories")},H=()=>{P(x=>x+1)},T=r.menu==="create-course"&&Vx.has(r.params.step??"")?r.params.step:void 0,$=r.menu==="subject-create"&&Gx.has(r.params.step??"")?r.params.step:void 0,O=o.useCallback(x=>{v({menu:"create-course",params:x==="basic"?{}:{step:x}})},[v]),B=o.useCallback(x=>{v({menu:"subject-create",params:x==="basic"?{}:{step:x}})},[v]);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:e.jsx(kl,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",children:"\uAD50\uC218\uC790 LMS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learning Management System"})]})]}),e.jsx("button",{onClick:H,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uD604\uC7AC \uD654\uBA74 \uC0C8\uB85C\uACE0\uCE68",children:e.jsx(Cm,{className:"w-5 h-5"})})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 fixed top-[73px] left-0 h-[calc(100vh-73px)] overflow-y-auto z-40",children:e.jsxs("nav",{className:"p-4 flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>I("dashboard"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="dashboard"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(kl,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB300\uC2DC\uBCF4\uB4DC"})]}),e.jsxs("button",{onClick:()=>I("explore"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="explore"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(zC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uD0D0\uC0C9"})]}),e.jsxs("button",{onClick:()=>I("courses"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="courses"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2F4\uB2F9\uACFC\uBAA9"})]}),e.jsxs("button",{onClick:()=>I("assignment-manage"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="assignment-manage"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(os,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC81C \uD1B5\uD569\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>I("qna-manage"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="qna-manage"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Us,{className:"w-5 h-5"}),e.jsx("span",{children:"Q&A \uD1B5\uD569\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>I("create-course"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="create-course"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(VC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uAC1C\uC124"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:p,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${U?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nm,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"})]}),c?e.jsx(rr,{className:"w-4 h-4"}):e.jsx(Yt,{className:"w-4 h-4"})]}),c&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>I("content-all"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${N==="content-all"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC804\uCCB4 \uCF58\uD150\uCE20"})]}),e.jsxs("button",{onClick:()=>I("content-favorites"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${N==="content-favorites"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uCC1C\uD55C \uCF58\uD150\uCE20"})]})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:G,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${E?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Er,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]}),h?e.jsx(rr,{className:"w-4 h-4"}):e.jsx(Yt,{className:"w-4 h-4"})]}),h&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>I("exam-categories"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${N==="exam-categories"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uCE74\uD14C\uACE0\uB9AC"})]}),e.jsxs("button",{onClick:()=>I("exam-questions"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${N==="exam-questions"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uC740\uD589"})]}),e.jsxs("button",{onClick:()=>I("exam-management"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${N==="exam-management"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]})]})]}),e.jsxs("button",{onClick:()=>I("subject-create"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="subject-create"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(DC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uBAA9\uAC1C\uC124"})]}),e.jsxs("button",{onClick:()=>I("statistics"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${N==="statistics"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(SC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uD1B5\uACC4"})]})]})}),e.jsx("div",{className:"w-64 flex-shrink-0"}),e.jsx("main",{className:"flex-1 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:N==="dashboard"?e.jsx(Fx,{onNavigate:x=>I(x),onOpenCourse:W},b):N==="explore"?e.jsx(Ex,{},b):N==="courses"?e.jsx(kx,{routeSubPath:r.subPath,routeParams:r.params,onRouteChange:q},b):N==="assignment-manage"?e.jsx(Ux,{onOpenCourse:W},b):N==="qna-manage"?e.jsx(Hx,{onOpenCourse:W},b):N==="create-course"?e.jsx(mx,{initialStep:T,onStepChange:O,onCreated:()=>I("explore")},b):N==="content-all"?e.jsx(Wc,{activeTab:"all"},b):N==="content-favorites"?e.jsx(Wc,{activeTab:"favorites"},`${b}-fav`):N==="exam-categories"?e.jsx(Px,{},b):N==="exam-questions"?e.jsx(Ox,{},b):N==="exam-management"?e.jsx(Pm,{},b):N==="subject-create"?e.jsx(dd,{initialStep:$,onStepChange:B},b):N==="statistics"?e.jsx(zx,{},b):e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(kl,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uCEE8\uD150\uCE20 \uC601\uC5ED"}),e.jsx("p",{className:"text-sm mt-2",children:"\uBA54\uB274\uB97C \uC120\uD0DD\uD558\uBA74 \uAD00\uB828 \uB0B4\uC6A9\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4"})]})})})})]})]})}hC.createRoot(document.getElementById("root")).render(e.jsx(Me.StrictMode,{children:e.jsx(Zx,{})}));
