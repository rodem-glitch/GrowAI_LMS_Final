(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const v of m.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function c(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(p){if(p.ep)return;p.ep=!0;const m=c(p);fetch(p.href,m)}})();function rd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jl={exports:{}},Bu={},Dl={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ac;function m0(){if(Ac)return qe;Ac=1;var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),L=Symbol.iterator;function j(y){return y===null||typeof y!="object"?null:(y=L&&y[L]||y["@@iterator"],typeof y=="function"?y:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,G={};function B(y,Q,Z){this.props=y,this.context=Q,this.refs=G,this.updater=Z||T}B.prototype.isReactComponent={},B.prototype.setState=function(y,Q){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,Q,"setState")},B.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function q(){}q.prototype=B.prototype;function H(y,Q,Z){this.props=y,this.context=Q,this.refs=G,this.updater=Z||T}var P=H.prototype=new q;P.constructor=H,W(P,B.prototype),P.isPureReactComponent=!0;var z=Array.isArray,Y=Object.prototype.hasOwnProperty,h={current:null},g={key:!0,ref:!0,__self:!0,__source:!0};function F(y,Q,Z){var ue,ye={},ke=null,se=null;if(Q!=null)for(ue in Q.ref!==void 0&&(se=Q.ref),Q.key!==void 0&&(ke=""+Q.key),Q)Y.call(Q,ue)&&!g.hasOwnProperty(ue)&&(ye[ue]=Q[ue]);var be=arguments.length-2;if(be===1)ye.children=Z;else if(1<be){for(var Ne=Array(be),ce=0;ce<be;ce++)Ne[ce]=arguments[ce+2];ye.children=Ne}if(y&&y.defaultProps)for(ue in be=y.defaultProps,be)ye[ue]===void 0&&(ye[ue]=be[ue]);return{$$typeof:r,type:y,key:ke,ref:se,props:ye,_owner:h.current}}function N(y,Q){return{$$typeof:r,type:y.type,key:Q,ref:y.ref,props:y.props,_owner:y._owner}}function b(y){return typeof y=="object"&&y!==null&&y.$$typeof===r}function K(y){var Q={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(Z){return Q[Z]})}var w=/\/+/g;function C(y,Q){return typeof y=="object"&&y!==null&&y.key!=null?K(""+y.key):Q.toString(36)}function f(y,Q,Z,ue,ye){var ke=typeof y;(ke==="undefined"||ke==="boolean")&&(y=null);var se=!1;if(y===null)se=!0;else switch(ke){case"string":case"number":se=!0;break;case"object":switch(y.$$typeof){case r:case n:se=!0}}if(se)return se=y,ye=ye(se),y=ue===""?"."+C(se,0):ue,z(ye)?(Z="",y!=null&&(Z=y.replace(w,"$&/")+"/"),f(ye,Q,Z,"",function(ce){return ce})):ye!=null&&(b(ye)&&(ye=N(ye,Z+(!ye.key||se&&se.key===ye.key?"":(""+ye.key).replace(w,"$&/")+"/")+y)),Q.push(ye)),1;if(se=0,ue=ue===""?".":ue+":",z(y))for(var be=0;be<y.length;be++){ke=y[be];var Ne=ue+C(ke,be);se+=f(ke,Q,Z,Ne,ye)}else if(Ne=j(y),typeof Ne=="function")for(y=Ne.call(y),be=0;!(ke=y.next()).done;)ke=ke.value,Ne=ue+C(ke,be++),se+=f(ke,Q,Z,Ne,ye);else if(ke==="object")throw Q=String(y),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return se}function k(y,Q,Z){if(y==null)return y;var ue=[],ye=0;return f(y,ue,"","",function(ke){return Q.call(Z,ke,ye++)}),ue}function E(y){if(y._status===-1){var Q=y._result;Q=Q(),Q.then(function(Z){(y._status===0||y._status===-1)&&(y._status=1,y._result=Z)},function(Z){(y._status===0||y._status===-1)&&(y._status=2,y._result=Z)}),y._status===-1&&(y._status=0,y._result=Q)}if(y._status===1)return y._result.default;throw y._result}var $={current:null},M={transition:null},S={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:M,ReactCurrentOwner:h};function A(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:k,forEach:function(y,Q,Z){k(y,function(){Q.apply(this,arguments)},Z)},count:function(y){var Q=0;return k(y,function(){Q++}),Q},toArray:function(y){return k(y,function(Q){return Q})||[]},only:function(y){if(!b(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},qe.Component=B,qe.Fragment=c,qe.Profiler=p,qe.PureComponent=H,qe.StrictMode=d,qe.Suspense=D,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S,qe.act=A,qe.cloneElement=function(y,Q,Z){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var ue=W({},y.props),ye=y.key,ke=y.ref,se=y._owner;if(Q!=null){if(Q.ref!==void 0&&(ke=Q.ref,se=h.current),Q.key!==void 0&&(ye=""+Q.key),y.type&&y.type.defaultProps)var be=y.type.defaultProps;for(Ne in Q)Y.call(Q,Ne)&&!g.hasOwnProperty(Ne)&&(ue[Ne]=Q[Ne]===void 0&&be!==void 0?be[Ne]:Q[Ne])}var Ne=arguments.length-2;if(Ne===1)ue.children=Z;else if(1<Ne){be=Array(Ne);for(var ce=0;ce<Ne;ce++)be[ce]=arguments[ce+2];ue.children=be}return{$$typeof:r,type:y.type,key:ye,ref:ke,props:ue,_owner:se}},qe.createContext=function(y){return y={$$typeof:v,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:m,_context:y},y.Consumer=y},qe.createElement=F,qe.createFactory=function(y){var Q=F.bind(null,y);return Q.type=y,Q},qe.createRef=function(){return{current:null}},qe.forwardRef=function(y){return{$$typeof:I,render:y}},qe.isValidElement=b,qe.lazy=function(y){return{$$typeof:_,_payload:{_status:-1,_result:y},_init:E}},qe.memo=function(y,Q){return{$$typeof:R,type:y,compare:Q===void 0?null:Q}},qe.startTransition=function(y){var Q=M.transition;M.transition={};try{y()}finally{M.transition=Q}},qe.unstable_act=A,qe.useCallback=function(y,Q){return $.current.useCallback(y,Q)},qe.useContext=function(y){return $.current.useContext(y)},qe.useDebugValue=function(){},qe.useDeferredValue=function(y){return $.current.useDeferredValue(y)},qe.useEffect=function(y,Q){return $.current.useEffect(y,Q)},qe.useId=function(){return $.current.useId()},qe.useImperativeHandle=function(y,Q,Z){return $.current.useImperativeHandle(y,Q,Z)},qe.useInsertionEffect=function(y,Q){return $.current.useInsertionEffect(y,Q)},qe.useLayoutEffect=function(y,Q){return $.current.useLayoutEffect(y,Q)},qe.useMemo=function(y,Q){return $.current.useMemo(y,Q)},qe.useReducer=function(y,Q,Z){return $.current.useReducer(y,Q,Z)},qe.useRef=function(y){return $.current.useRef(y)},qe.useState=function(y){return $.current.useState(y)},qe.useSyncExternalStore=function(y,Q,Z){return $.current.useSyncExternalStore(y,Q,Z)},qe.useTransition=function(){return $.current.useTransition()},qe.version="18.3.1",qe}var wc;function Rl(){return wc||(wc=1,Dl.exports=m0()),Dl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kc;function x0(){if(kc)return Bu;kc=1;var r=Rl(),n=Symbol.for("react.element"),c=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,p=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function v(I,D,R){var _,L={},j=null,T=null;R!==void 0&&(j=""+R),D.key!==void 0&&(j=""+D.key),D.ref!==void 0&&(T=D.ref);for(_ in D)d.call(D,_)&&!m.hasOwnProperty(_)&&(L[_]=D[_]);if(I&&I.defaultProps)for(_ in D=I.defaultProps,D)L[_]===void 0&&(L[_]=D[_]);return{$$typeof:n,type:I,key:j,ref:T,props:L,_owner:p.current}}return Bu.Fragment=c,Bu.jsx=v,Bu.jsxs=v,Bu}var _c;function g0(){return _c||(_c=1,jl.exports=x0()),jl.exports}var e=g0(),o=Rl();const Ue=rd(o);var Sn={},Nl={exports:{}},Mt={},Al={exports:{}},wl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec;function p0(){return Ec||(Ec=1,(function(r){function n(M,S){var A=M.length;M.push(S);e:for(;0<A;){var y=A-1>>>1,Q=M[y];if(0<p(Q,S))M[y]=S,M[A]=Q,A=y;else break e}}function c(M){return M.length===0?null:M[0]}function d(M){if(M.length===0)return null;var S=M[0],A=M.pop();if(A!==S){M[0]=A;e:for(var y=0,Q=M.length,Z=Q>>>1;y<Z;){var ue=2*(y+1)-1,ye=M[ue],ke=ue+1,se=M[ke];if(0>p(ye,A))ke<Q&&0>p(se,ye)?(M[y]=se,M[ke]=A,y=ke):(M[y]=ye,M[ue]=A,y=ue);else if(ke<Q&&0>p(se,A))M[y]=se,M[ke]=A,y=ke;else break e}}return S}function p(M,S){var A=M.sortIndex-S.sortIndex;return A!==0?A:M.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var v=Date,I=v.now();r.unstable_now=function(){return v.now()-I}}var D=[],R=[],_=1,L=null,j=3,T=!1,W=!1,G=!1,B=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(M){for(var S=c(R);S!==null;){if(S.callback===null)d(R);else if(S.startTime<=M)d(R),S.sortIndex=S.expirationTime,n(D,S);else break;S=c(R)}}function z(M){if(G=!1,P(M),!W)if(c(D)!==null)W=!0,E(Y);else{var S=c(R);S!==null&&$(z,S.startTime-M)}}function Y(M,S){W=!1,G&&(G=!1,q(F),F=-1),T=!0;var A=j;try{for(P(S),L=c(D);L!==null&&(!(L.expirationTime>S)||M&&!K());){var y=L.callback;if(typeof y=="function"){L.callback=null,j=L.priorityLevel;var Q=y(L.expirationTime<=S);S=r.unstable_now(),typeof Q=="function"?L.callback=Q:L===c(D)&&d(D),P(S)}else d(D);L=c(D)}if(L!==null)var Z=!0;else{var ue=c(R);ue!==null&&$(z,ue.startTime-S),Z=!1}return Z}finally{L=null,j=A,T=!1}}var h=!1,g=null,F=-1,N=5,b=-1;function K(){return!(r.unstable_now()-b<N)}function w(){if(g!==null){var M=r.unstable_now();b=M;var S=!0;try{S=g(!0,M)}finally{S?C():(h=!1,g=null)}}else h=!1}var C;if(typeof H=="function")C=function(){H(w)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,k=f.port2;f.port1.onmessage=w,C=function(){k.postMessage(null)}}else C=function(){B(w,0)};function E(M){g=M,h||(h=!0,C())}function $(M,S){F=B(function(){M(r.unstable_now())},S)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_continueExecution=function(){W||T||(W=!0,E(Y))},r.unstable_forceFrameRate=function(M){0>M||125<M||(N=0<M?Math.floor(1e3/M):5)},r.unstable_getCurrentPriorityLevel=function(){return j},r.unstable_getFirstCallbackNode=function(){return c(D)},r.unstable_next=function(M){switch(j){case 1:case 2:case 3:var S=3;break;default:S=j}var A=j;j=S;try{return M()}finally{j=A}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(M,S){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var A=j;j=M;try{return S()}finally{j=A}},r.unstable_scheduleCallback=function(M,S,A){var y=r.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?y+A:y):A=y,M){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=A+Q,M={id:_++,callback:S,priorityLevel:M,startTime:A,expirationTime:Q,sortIndex:-1},A>y?(M.sortIndex=A,n(R,M),c(D)===null&&M===c(R)&&(G?(q(F),F=-1):G=!0,$(z,A-y))):(M.sortIndex=Q,n(D,M),W||T||(W=!0,E(Y))),M},r.unstable_shouldYield=K,r.unstable_wrapCallback=function(M){var S=j;return function(){var A=j;j=S;try{return M.apply(this,arguments)}finally{j=A}}}})(wl)),wl}var Sc;function h0(){return Sc||(Sc=1,Al.exports=p0()),Al.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc;function f0(){if(Fc)return Mt;Fc=1;var r=Rl(),n=h0();function c(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,p={};function m(t,s){v(t,s),v(t+"Capture",s)}function v(t,s){for(p[t]=s,t=0;t<s.length;t++)d.add(s[t])}var I=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D=Object.prototype.hasOwnProperty,R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},L={};function j(t){return D.call(L,t)?!0:D.call(_,t)?!1:R.test(t)?L[t]=!0:(_[t]=!0,!1)}function T(t,s,u,a){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:u!==null?!u.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W(t,s,u,a){if(s===null||typeof s>"u"||T(t,s,u,a))return!0;if(a)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function G(t,s,u,a,l,i,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=u,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=x}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new G(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];B[s]=new G(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new G(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new G(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new G(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new G(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new G(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new G(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new G(t,5,!1,t.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function H(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(q,H);B[s]=new G(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(q,H);B[s]=new G(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(q,H);B[s]=new G(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new G(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new G(t,1,!1,t.toLowerCase(),null,!0,!0)});function P(t,s,u,a){var l=B.hasOwnProperty(s)?B[s]:null;(l!==null?l.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,u,l,a)&&(u=null),a||l===null?j(s)&&(u===null?t.removeAttribute(s):t.setAttribute(s,""+u)):l.mustUseProperty?t[l.propertyName]=u===null?l.type===3?!1:"":u:(s=l.attributeName,a=l.attributeNamespace,u===null?t.removeAttribute(s):(l=l.type,u=l===3||l===4&&u===!0?"":""+u,a?t.setAttributeNS(a,s,u):t.setAttribute(s,u))))}var z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),K=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),M=Symbol.iterator;function S(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var A=Object.assign,y;function Q(t){if(y===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);y=s&&s[1]||""}return`
`+y+t}var Z=!1;function ue(t,s){if(!t||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(re){var a=re}Reflect.construct(t,[],s)}else{try{s.call()}catch(re){a=re}t.call(s.prototype)}else{try{throw Error()}catch(re){a=re}t()}}catch(re){if(re&&a&&typeof re.stack=="string"){for(var l=re.stack.split(`
`),i=a.stack.split(`
`),x=l.length-1,O=i.length-1;1<=x&&0<=O&&l[x]!==i[O];)O--;for(;1<=x&&0<=O;x--,O--)if(l[x]!==i[O]){if(x!==1||O!==1)do if(x--,O--,0>O||l[x]!==i[O]){var V=`
`+l[x].replace(" at new "," at ");return t.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",t.displayName)),V}while(1<=x&&0<=O);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(t=t?t.displayName||t.name:"")?Q(t):""}function ye(t){switch(t.tag){case 5:return Q(t.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return t=ue(t.type,!1),t;case 11:return t=ue(t.type.render,!1),t;case 1:return t=ue(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case g:return"Fragment";case h:return"Portal";case N:return"Profiler";case F:return"StrictMode";case C:return"Suspense";case f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K:return(t.displayName||"Context")+".Consumer";case b:return(t._context.displayName||"Context")+".Provider";case w:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return s=t.displayName||null,s!==null?s:ke(t.type)||"Memo";case E:s=t._payload,t=t._init;try{return ke(t(s))}catch{}}return null}function se(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function be(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ne(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ce(t){var s=Ne(t)?"checked":"value",u=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var l=u.get,i=u.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(x){a=""+x,i.call(this,x)}}),Object.defineProperty(t,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function pe(t){t._valueTracker||(t._valueTracker=ce(t))}function Ee(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var u=s.getValue(),a="";return t&&(a=Ne(t)?t.checked?"true":"false":t.value),t=a,t!==u?(s.setValue(t),!0):!1}function fe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function De(t,s){var u=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??t._wrapperState.initialChecked})}function He(t,s){var u=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;u=be(s.value!=null?s.value:u),t._wrapperState={initialChecked:a,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ie(t,s){s=s.checked,s!=null&&P(t,"checked",s,!1)}function Me(t,s){ie(t,s);var u=be(s.value),a=s.type;if(u!=null)a==="number"?(u===0&&t.value===""||t.value!=u)&&(t.value=""+u):t.value!==""+u&&(t.value=""+u);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Ce(t,s.type,u):s.hasOwnProperty("defaultValue")&&Ce(t,s.type,be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function U(t,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,u||s===t.value||(t.value=s),t.defaultValue=s}u=t.name,u!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,u!==""&&(t.name=u)}function Ce(t,s,u){(s!=="number"||fe(t.ownerDocument)!==t)&&(u==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+u&&(t.defaultValue=""+u))}var J=Array.isArray;function oe(t,s,u,a){if(t=t.options,s){s={};for(var l=0;l<u.length;l++)s["$"+u[l]]=!0;for(u=0;u<t.length;u++)l=s.hasOwnProperty("$"+t[u].value),t[u].selected!==l&&(t[u].selected=l),l&&a&&(t[u].defaultSelected=!0)}else{for(u=""+be(u),s=null,l=0;l<t.length;l++){if(t[l].value===u){t[l].selected=!0,a&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function ae(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(c(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function de(t,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(c(92));if(J(u)){if(1<u.length)throw Error(c(93));u=u[0]}s=u}s==null&&(s=""),u=s}t._wrapperState={initialValue:be(u)}}function ne(t,s){var u=be(s.value),a=be(s.defaultValue);u!=null&&(u=""+u,u!==t.value&&(t.value=u),s.defaultValue==null&&t.defaultValue!==u&&(t.defaultValue=u)),a!=null&&(t.defaultValue=""+a)}function je(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function _e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?_e(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Re,et=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,a,l){MSApp.execUnsafeLocalFunction(function(){return t(s,u,a,l)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Re.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ae(t,s){if(s){var u=t.firstChild;if(u&&u===t.lastChild&&u.nodeType===3){u.nodeValue=s;return}}t.textContent=s}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Te=["Webkit","ms","Moz","O"];Object.keys(ve).forEach(function(t){Te.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),ve[s]=ve[t]})});function Ke(t,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||ve.hasOwnProperty(t)&&ve[t]?(""+s).trim():s+"px"}function Ve(t,s){t=t.style;for(var u in s)if(s.hasOwnProperty(u)){var a=u.indexOf("--")===0,l=Ke(u,s[u],a);u==="float"&&(u="cssFloat"),a?t.setProperty(u,l):t[u]=l}}var Pe=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ut(t,s){if(s){if(Pe[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(c(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(c(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(c(61))}if(s.style!=null&&typeof s.style!="object")throw Error(c(62))}}function Rt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function os(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,Zt=null,fs=null;function Ul(t){if(t=au(t)){if(typeof _s!="function")throw Error(c(280));var s=t.stateNode;s&&(s=Qu(s),_s(t.stateNode,t.type,s))}}function Hl(t){Zt?fs?fs.push(t):fs=[t]:Zt=t}function Yl(){if(Zt){var t=Zt,s=fs;if(fs=Zt=null,Ul(t),s)for(t=0;t<s.length;t++)Ul(s[t])}}function Ql(t,s){return t(s)}function Kl(){}var zn=!1;function Vl(t,s,u){if(zn)return t(s,u);zn=!0;try{return Ql(t,s,u)}finally{zn=!1,(Zt!==null||fs!==null)&&(Kl(),Yl())}}function $r(t,s){var u=t.stateNode;if(u===null)return null;var a=Qu(u);if(a===null)return null;u=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(u&&typeof u!="function")throw Error(c(231,s,typeof u));return u}var Un=!1;if(I)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Un=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Un=!1}function yd(t,s,u,a,l,i,x,O,V){var re=Array.prototype.slice.call(arguments,3);try{s.apply(u,re)}catch(xe){this.onError(xe)}}var zr=!1,ju=null,Du=!1,Hn=null,bd={onError:function(t){zr=!0,ju=t}};function Bd(t,s,u,a,l,i,x,O,V){zr=!1,ju=null,yd.apply(bd,arguments)}function vd(t,s,u,a,l,i,x,O,V){if(Bd.apply(this,arguments),zr){if(zr){var re=ju;zr=!1,ju=null}else throw Error(c(198));Du||(Du=!0,Hn=re)}}function Xs(t){var s=t,u=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(u=s.return),t=s.return;while(t)}return s.tag===3?u:null}function Wl(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ql(t){if(Xs(t)!==t)throw Error(c(188))}function jd(t){var s=t.alternate;if(!s){if(s=Xs(t),s===null)throw Error(c(188));return s!==t?null:t}for(var u=t,a=s;;){var l=u.return;if(l===null)break;var i=l.alternate;if(i===null){if(a=l.return,a!==null){u=a;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===u)return ql(l),t;if(i===a)return ql(l),s;i=i.sibling}throw Error(c(188))}if(u.return!==a.return)u=l,a=i;else{for(var x=!1,O=l.child;O;){if(O===u){x=!0,u=l,a=i;break}if(O===a){x=!0,a=l,u=i;break}O=O.sibling}if(!x){for(O=i.child;O;){if(O===u){x=!0,u=i,a=l;break}if(O===a){x=!0,a=i,u=l;break}O=O.sibling}if(!x)throw Error(c(189))}}if(u.alternate!==a)throw Error(c(190))}if(u.tag!==3)throw Error(c(188));return u.stateNode.current===u?t:s}function Gl(t){return t=jd(t),t!==null?Jl(t):null}function Jl(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Jl(t);if(s!==null)return s;t=t.sibling}return null}var Xl=n.unstable_scheduleCallback,Zl=n.unstable_cancelCallback,Dd=n.unstable_shouldYield,Nd=n.unstable_requestPaint,ot=n.unstable_now,Ad=n.unstable_getCurrentPriorityLevel,Yn=n.unstable_ImmediatePriority,ei=n.unstable_UserBlockingPriority,Nu=n.unstable_NormalPriority,wd=n.unstable_LowPriority,ti=n.unstable_IdlePriority,Au=null,cs=null;function kd(t){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Au,t,void 0,(t.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:Sd,_d=Math.log,Ed=Math.LN2;function Sd(t){return t>>>=0,t===0?32:31-(_d(t)/Ed|0)|0}var wu=64,ku=4194304;function Ur(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _u(t,s){var u=t.pendingLanes;if(u===0)return 0;var a=0,l=t.suspendedLanes,i=t.pingedLanes,x=u&268435455;if(x!==0){var O=x&~l;O!==0?a=Ur(O):(i&=x,i!==0&&(a=Ur(i)))}else x=u&~l,x!==0?a=Ur(x):i!==0&&(a=Ur(i));if(a===0)return 0;if(s!==0&&s!==a&&(s&l)===0&&(l=a&-a,i=s&-s,l>=i||l===16&&(i&4194240)!==0))return s;if((a&4)!==0&&(a|=u&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)u=31-es(s),l=1<<u,a|=t[u],s&=~l;return a}function Fd(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Td(t,s){for(var u=t.suspendedLanes,a=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes;0<i;){var x=31-es(i),O=1<<x,V=l[x];V===-1?((O&u)===0||(O&a)!==0)&&(l[x]=Fd(O,s)):V<=s&&(t.expiredLanes|=O),i&=~O}}function Qn(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function si(){var t=wu;return wu<<=1,(wu&4194240)===0&&(wu=64),t}function Kn(t){for(var s=[],u=0;31>u;u++)s.push(t);return s}function Hr(t,s,u){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-es(s),t[s]=u}function Id(t,s){var u=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<u;){var l=31-es(u),i=1<<l;s[l]=0,a[l]=-1,t[l]=-1,u&=~i}}function Vn(t,s){var u=t.entangledLanes|=s;for(t=t.entanglements;u;){var a=31-es(u),l=1<<a;l&s|t[a]&s&&(t[a]|=s),u&=~l}}var Ze=0;function ri(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ui,Wn,ni,ai,li,qn=!1,Eu=[],Es=null,Ss=null,Fs=null,Yr=new Map,Qr=new Map,Ts=[],Ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(t,s){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Yr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(s.pointerId)}}function Kr(t,s,u,a,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:u,eventSystemFlags:a,nativeEvent:i,targetContainers:[l]},s!==null&&(s=au(s),s!==null&&Wn(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function Pd(t,s,u,a,l){switch(s){case"focusin":return Es=Kr(Es,t,s,u,a,l),!0;case"dragenter":return Ss=Kr(Ss,t,s,u,a,l),!0;case"mouseover":return Fs=Kr(Fs,t,s,u,a,l),!0;case"pointerover":var i=l.pointerId;return Yr.set(i,Kr(Yr.get(i)||null,t,s,u,a,l)),!0;case"gotpointercapture":return i=l.pointerId,Qr.set(i,Kr(Qr.get(i)||null,t,s,u,a,l)),!0}return!1}function oi(t){var s=Zs(t.target);if(s!==null){var u=Xs(s);if(u!==null){if(s=u.tag,s===13){if(s=Wl(u),s!==null){t.blockedOn=s,li(t.priority,function(){ni(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){t.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var u=Jn(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(u===null){u=t.nativeEvent;var a=new u.constructor(u.type,u);mt=a,u.target.dispatchEvent(a),mt=null}else return s=au(u),s!==null&&Wn(s),t.blockedOn=u,!1;s.shift()}return!0}function ci(t,s,u){Su(t)&&u.delete(s)}function Md(){qn=!1,Es!==null&&Su(Es)&&(Es=null),Ss!==null&&Su(Ss)&&(Ss=null),Fs!==null&&Su(Fs)&&(Fs=null),Yr.forEach(ci),Qr.forEach(ci)}function Vr(t,s){t.blockedOn===s&&(t.blockedOn=null,qn||(qn=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Md)))}function Wr(t){function s(l){return Vr(l,t)}if(0<Eu.length){Vr(Eu[0],t);for(var u=1;u<Eu.length;u++){var a=Eu[u];a.blockedOn===t&&(a.blockedOn=null)}}for(Es!==null&&Vr(Es,t),Ss!==null&&Vr(Ss,t),Fs!==null&&Vr(Fs,t),Yr.forEach(s),Qr.forEach(s),u=0;u<Ts.length;u++)a=Ts[u],a.blockedOn===t&&(a.blockedOn=null);for(;0<Ts.length&&(u=Ts[0],u.blockedOn===null);)oi(u),u.blockedOn===null&&Ts.shift()}var Cr=z.ReactCurrentBatchConfig,Fu=!0;function Rd(t,s,u,a){var l=Ze,i=Cr.transition;Cr.transition=null;try{Ze=1,Gn(t,s,u,a)}finally{Ze=l,Cr.transition=i}}function $d(t,s,u,a){var l=Ze,i=Cr.transition;Cr.transition=null;try{Ze=4,Gn(t,s,u,a)}finally{Ze=l,Cr.transition=i}}function Gn(t,s,u,a){if(Fu){var l=Jn(t,s,u,a);if(l===null)xa(t,s,a,Tu,u),ii(t,a);else if(Pd(l,t,s,u,a))a.stopPropagation();else if(ii(t,a),s&4&&-1<Ld.indexOf(t)){for(;l!==null;){var i=au(l);if(i!==null&&ui(i),i=Jn(t,s,u,a),i===null&&xa(t,s,a,Tu,u),i===l)break;l=i}l!==null&&a.stopPropagation()}else xa(t,s,a,null,u)}}var Tu=null;function Jn(t,s,u,a){if(Tu=null,t=os(a),t=Zs(t),t!==null)if(s=Xs(t),s===null)t=null;else if(u=s.tag,u===13){if(t=Wl(s),t!==null)return t;t=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Tu=t,null}function di(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ad()){case Yn:return 1;case ei:return 4;case Nu:case wd:return 16;case ti:return 536870912;default:return 16}default:return 16}}var Is=null,Xn=null,Iu=null;function Ci(){if(Iu)return Iu;var t,s=Xn,u=s.length,a,l="value"in Is?Is.value:Is.textContent,i=l.length;for(t=0;t<u&&s[t]===l[t];t++);var x=u-t;for(a=1;a<=x&&s[u-a]===l[i-a];a++);return Iu=l.slice(t,1<a?1-a:void 0)}function Lu(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Pu(){return!0}function mi(){return!1}function $t(t){function s(u,a,l,i,x){this._reactName=u,this._targetInst=l,this.type=a,this.nativeEvent=i,this.target=x,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(u=t[O],this[O]=u?u(i):i[O]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pu:mi,this.isPropagationStopped=mi,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),s}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zn=$t(mr),qr=A({},mr,{view:0,detail:0}),Od=$t(qr),ea,ta,Gr,Mu=A({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gr&&(Gr&&t.type==="mousemove"?(ea=t.screenX-Gr.screenX,ta=t.screenY-Gr.screenY):ta=ea=0,Gr=t),ea)},movementY:function(t){return"movementY"in t?t.movementY:ta}}),xi=$t(Mu),zd=A({},Mu,{dataTransfer:0}),Ud=$t(zd),Hd=A({},qr,{relatedTarget:0}),sa=$t(Hd),Yd=A({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qd=$t(Yd),Kd=A({},mr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vd=$t(Kd),Wd=A({},mr,{data:0}),gi=$t(Wd),qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xd(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Jd[t])?!!s[t]:!1}function ra(){return Xd}var Zd=A({},qr,{key:function(t){if(t.key){var s=qd[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eC=$t(Zd),tC=A({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pi=$t(tC),sC=A({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),rC=$t(sC),uC=A({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nC=$t(uC),aC=A({},Mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lC=$t(aC),iC=[9,13,27,32],ua=I&&"CompositionEvent"in window,Jr=null;I&&"documentMode"in document&&(Jr=document.documentMode);var oC=I&&"TextEvent"in window&&!Jr,hi=I&&(!ua||Jr&&8<Jr&&11>=Jr),fi=" ",yi=!1;function bi(t,s){switch(t){case"keyup":return iC.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bi(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xr=!1;function cC(t,s){switch(t){case"compositionend":return Bi(s);case"keypress":return s.which!==32?null:(yi=!0,fi);case"textInput":return t=s.data,t===fi&&yi?null:t;default:return null}}function dC(t,s){if(xr)return t==="compositionend"||!ua&&bi(t,s)?(t=Ci(),Iu=Xn=Is=null,xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hi&&s.locale!=="ko"?null:s.data;default:return null}}var CC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!CC[t.type]:s==="textarea"}function ji(t,s,u,a){Hl(a),s=Uu(s,"onChange"),0<s.length&&(u=new Zn("onChange","change",null,u,a),t.push({event:u,listeners:s}))}var Xr=null,Zr=null;function mC(t){zi(t,0)}function Ru(t){var s=yr(t);if(Ee(s))return t}function xC(t,s){if(t==="change")return s}var Di=!1;if(I){var na;if(I){var aa="oninput"in document;if(!aa){var Ni=document.createElement("div");Ni.setAttribute("oninput","return;"),aa=typeof Ni.oninput=="function"}na=aa}else na=!1;Di=na&&(!document.documentMode||9<document.documentMode)}function Ai(){Xr&&(Xr.detachEvent("onpropertychange",wi),Zr=Xr=null)}function wi(t){if(t.propertyName==="value"&&Ru(Zr)){var s=[];ji(s,Zr,t,os(t)),Vl(mC,s)}}function gC(t,s,u){t==="focusin"?(Ai(),Xr=s,Zr=u,Xr.attachEvent("onpropertychange",wi)):t==="focusout"&&Ai()}function pC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ru(Zr)}function hC(t,s){if(t==="click")return Ru(s)}function fC(t,s){if(t==="input"||t==="change")return Ru(s)}function yC(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ts=typeof Object.is=="function"?Object.is:yC;function eu(t,s){if(ts(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var u=Object.keys(t),a=Object.keys(s);if(u.length!==a.length)return!1;for(a=0;a<u.length;a++){var l=u[a];if(!D.call(s,l)||!ts(t[l],s[l]))return!1}return!0}function ki(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _i(t,s){var u=ki(t);t=0;for(var a;u;){if(u.nodeType===3){if(a=t+u.textContent.length,t<=s&&a>=s)return{node:u,offset:s-t};t=a}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ki(u)}}function Ei(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ei(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Si(){for(var t=window,s=fe();s instanceof t.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)t=s.contentWindow;else break;s=fe(t.document)}return s}function la(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function bC(t){var s=Si(),u=t.focusedElem,a=t.selectionRange;if(s!==u&&u&&u.ownerDocument&&Ei(u.ownerDocument.documentElement,u)){if(a!==null&&la(u)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(t,u.value.length);else if(t=(s=u.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=u.textContent.length,i=Math.min(a.start,l);a=a.end===void 0?i:Math.min(a.end,l),!t.extend&&i>a&&(l=a,a=i,i=l),l=_i(u,i);var x=_i(u,a);l&&x&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==x.node||t.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),t.addRange(s)))}}for(s=[],t=u;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)t=s[u],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BC=I&&"documentMode"in document&&11>=document.documentMode,gr=null,ia=null,tu=null,oa=!1;function Fi(t,s,u){var a=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;oa||gr==null||gr!==fe(a)||(a=gr,"selectionStart"in a&&la(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),tu&&eu(tu,a)||(tu=a,a=Uu(ia,"onSelect"),0<a.length&&(s=new Zn("onSelect","select",null,s,u),t.push({event:s,listeners:a}),s.target=gr)))}function $u(t,s){var u={};return u[t.toLowerCase()]=s.toLowerCase(),u["Webkit"+t]="webkit"+s,u["Moz"+t]="moz"+s,u}var pr={animationend:$u("Animation","AnimationEnd"),animationiteration:$u("Animation","AnimationIteration"),animationstart:$u("Animation","AnimationStart"),transitionend:$u("Transition","TransitionEnd")},ca={},Ti={};I&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Ou(t){if(ca[t])return ca[t];if(!pr[t])return t;var s=pr[t],u;for(u in s)if(s.hasOwnProperty(u)&&u in Ti)return ca[t]=s[u];return t}var Ii=Ou("animationend"),Li=Ou("animationiteration"),Pi=Ou("animationstart"),Mi=Ou("transitionend"),Ri=new Map,$i="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(t,s){Ri.set(t,s),m(s,[t])}for(var da=0;da<$i.length;da++){var Ca=$i[da],vC=Ca.toLowerCase(),jC=Ca[0].toUpperCase()+Ca.slice(1);Ls(vC,"on"+jC)}Ls(Ii,"onAnimationEnd"),Ls(Li,"onAnimationIteration"),Ls(Pi,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(Mi,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DC=new Set("cancel close invalid load scroll toggle".split(" ").concat(su));function Oi(t,s,u){var a=t.type||"unknown-event";t.currentTarget=u,vd(a,s,void 0,t),t.currentTarget=null}function zi(t,s){s=(s&4)!==0;for(var u=0;u<t.length;u++){var a=t[u],l=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var x=a.length-1;0<=x;x--){var O=a[x],V=O.instance,re=O.currentTarget;if(O=O.listener,V!==i&&l.isPropagationStopped())break e;Oi(l,O,re),i=V}else for(x=0;x<a.length;x++){if(O=a[x],V=O.instance,re=O.currentTarget,O=O.listener,V!==i&&l.isPropagationStopped())break e;Oi(l,O,re),i=V}}}if(Du)throw t=Hn,Du=!1,Hn=null,t}function st(t,s){var u=s[ba];u===void 0&&(u=s[ba]=new Set);var a=t+"__bubble";u.has(a)||(Ui(s,t,2,!1),u.add(a))}function ma(t,s,u){var a=0;s&&(a|=4),Ui(u,t,a,s)}var zu="_reactListening"+Math.random().toString(36).slice(2);function ru(t){if(!t[zu]){t[zu]=!0,d.forEach(function(u){u!=="selectionchange"&&(DC.has(u)||ma(u,!1,t),ma(u,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[zu]||(s[zu]=!0,ma("selectionchange",!1,s))}}function Ui(t,s,u,a){switch(di(s)){case 1:var l=Rd;break;case 4:l=$d;break;default:l=Gn}u=l.bind(null,s,u,t),l=void 0,!Un||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),a?l!==void 0?t.addEventListener(s,u,{capture:!0,passive:l}):t.addEventListener(s,u,!0):l!==void 0?t.addEventListener(s,u,{passive:l}):t.addEventListener(s,u,!1)}function xa(t,s,u,a,l){var i=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var x=a.tag;if(x===3||x===4){var O=a.stateNode.containerInfo;if(O===l||O.nodeType===8&&O.parentNode===l)break;if(x===4)for(x=a.return;x!==null;){var V=x.tag;if((V===3||V===4)&&(V=x.stateNode.containerInfo,V===l||V.nodeType===8&&V.parentNode===l))return;x=x.return}for(;O!==null;){if(x=Zs(O),x===null)return;if(V=x.tag,V===5||V===6){a=i=x;continue e}O=O.parentNode}}a=a.return}Vl(function(){var re=i,xe=os(u),he=[];e:{var me=Ri.get(t);if(me!==void 0){var we=Zn,Fe=t;switch(t){case"keypress":if(Lu(u)===0)break e;case"keydown":case"keyup":we=eC;break;case"focusin":Fe="focus",we=sa;break;case"focusout":Fe="blur",we=sa;break;case"beforeblur":case"afterblur":we=sa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=rC;break;case Ii:case Li:case Pi:we=Qd;break;case Mi:we=nC;break;case"scroll":we=Od;break;case"wheel":we=lC;break;case"copy":case"cut":case"paste":we=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=pi}var Ie=(s&4)!==0,ct=!Ie&&t==="scroll",ee=Ie?me!==null?me+"Capture":null:me;Ie=[];for(var X=re,te;X!==null;){te=X;var Be=te.stateNode;if(te.tag===5&&Be!==null&&(te=Be,ee!==null&&(Be=$r(X,ee),Be!=null&&Ie.push(uu(X,Be,te)))),ct)break;X=X.return}0<Ie.length&&(me=new we(me,Fe,null,u,xe),he.push({event:me,listeners:Ie}))}}if((s&7)===0){e:{if(me=t==="mouseover"||t==="pointerover",we=t==="mouseout"||t==="pointerout",me&&u!==mt&&(Fe=u.relatedTarget||u.fromElement)&&(Zs(Fe)||Fe[ys]))break e;if((we||me)&&(me=xe.window===xe?xe:(me=xe.ownerDocument)?me.defaultView||me.parentWindow:window,we?(Fe=u.relatedTarget||u.toElement,we=re,Fe=Fe?Zs(Fe):null,Fe!==null&&(ct=Xs(Fe),Fe!==ct||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(we=null,Fe=re),we!==Fe)){if(Ie=xi,Be="onMouseLeave",ee="onMouseEnter",X="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=pi,Be="onPointerLeave",ee="onPointerEnter",X="pointer"),ct=we==null?me:yr(we),te=Fe==null?me:yr(Fe),me=new Ie(Be,X+"leave",we,u,xe),me.target=ct,me.relatedTarget=te,Be=null,Zs(xe)===re&&(Ie=new Ie(ee,X+"enter",Fe,u,xe),Ie.target=te,Ie.relatedTarget=ct,Be=Ie),ct=Be,we&&Fe)t:{for(Ie=we,ee=Fe,X=0,te=Ie;te;te=hr(te))X++;for(te=0,Be=ee;Be;Be=hr(Be))te++;for(;0<X-te;)Ie=hr(Ie),X--;for(;0<te-X;)ee=hr(ee),te--;for(;X--;){if(Ie===ee||ee!==null&&Ie===ee.alternate)break t;Ie=hr(Ie),ee=hr(ee)}Ie=null}else Ie=null;we!==null&&Hi(he,me,we,Ie,!1),Fe!==null&&ct!==null&&Hi(he,ct,Fe,Ie,!0)}}e:{if(me=re?yr(re):window,we=me.nodeName&&me.nodeName.toLowerCase(),we==="select"||we==="input"&&me.type==="file")var Le=xC;else if(vi(me))if(Di)Le=fC;else{Le=pC;var $e=gC}else(we=me.nodeName)&&we.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Le=hC);if(Le&&(Le=Le(t,re))){ji(he,Le,u,xe);break e}$e&&$e(t,me,re),t==="focusout"&&($e=me._wrapperState)&&$e.controlled&&me.type==="number"&&Ce(me,"number",me.value)}switch($e=re?yr(re):window,t){case"focusin":(vi($e)||$e.contentEditable==="true")&&(gr=$e,ia=re,tu=null);break;case"focusout":tu=ia=gr=null;break;case"mousedown":oa=!0;break;case"contextmenu":case"mouseup":case"dragend":oa=!1,Fi(he,u,xe);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":Fi(he,u,xe)}var Oe;if(ua)e:{switch(t){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else xr?bi(t,u)&&(Qe="onCompositionEnd"):t==="keydown"&&u.keyCode===229&&(Qe="onCompositionStart");Qe&&(hi&&u.locale!=="ko"&&(xr||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&xr&&(Oe=Ci()):(Is=xe,Xn="value"in Is?Is.value:Is.textContent,xr=!0)),$e=Uu(re,Qe),0<$e.length&&(Qe=new gi(Qe,t,null,u,xe),he.push({event:Qe,listeners:$e}),Oe?Qe.data=Oe:(Oe=Bi(u),Oe!==null&&(Qe.data=Oe)))),(Oe=oC?cC(t,u):dC(t,u))&&(re=Uu(re,"onBeforeInput"),0<re.length&&(xe=new gi("onBeforeInput","beforeinput",null,u,xe),he.push({event:xe,listeners:re}),xe.data=Oe))}zi(he,s)})}function uu(t,s,u){return{instance:t,listener:s,currentTarget:u}}function Uu(t,s){for(var u=s+"Capture",a=[];t!==null;){var l=t,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=$r(t,u),i!=null&&a.unshift(uu(t,i,l)),i=$r(t,s),i!=null&&a.push(uu(t,i,l))),t=t.return}return a}function hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hi(t,s,u,a,l){for(var i=s._reactName,x=[];u!==null&&u!==a;){var O=u,V=O.alternate,re=O.stateNode;if(V!==null&&V===a)break;O.tag===5&&re!==null&&(O=re,l?(V=$r(u,i),V!=null&&x.unshift(uu(u,V,O))):l||(V=$r(u,i),V!=null&&x.push(uu(u,V,O)))),u=u.return}x.length!==0&&t.push({event:s,listeners:x})}var NC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function Yi(t){return(typeof t=="string"?t:""+t).replace(NC,`
`).replace(AC,"")}function Hu(t,s,u){if(s=Yi(s),Yi(t)!==s&&u)throw Error(c(425))}function Yu(){}var ga=null,pa=null;function ha(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var fa=typeof setTimeout=="function"?setTimeout:void 0,wC=typeof clearTimeout=="function"?clearTimeout:void 0,Qi=typeof Promise=="function"?Promise:void 0,kC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qi<"u"?function(t){return Qi.resolve(null).then(t).catch(_C)}:fa;function _C(t){setTimeout(function(){throw t})}function ya(t,s){var u=s,a=0;do{var l=u.nextSibling;if(t.removeChild(u),l&&l.nodeType===8)if(u=l.data,u==="/$"){if(a===0){t.removeChild(l),Wr(s);return}a--}else u!=="$"&&u!=="$?"&&u!=="$!"||a++;u=l}while(u);Wr(s)}function Ps(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Ki(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var u=t.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return t;s--}else u==="/$"&&s++}t=t.previousSibling}return null}var fr=Math.random().toString(36).slice(2),ds="__reactFiber$"+fr,nu="__reactProps$"+fr,ys="__reactContainer$"+fr,ba="__reactEvents$"+fr,EC="__reactListeners$"+fr,SC="__reactHandles$"+fr;function Zs(t){var s=t[ds];if(s)return s;for(var u=t.parentNode;u;){if(s=u[ys]||u[ds]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(t=Ki(t);t!==null;){if(u=t[ds])return u;t=Ki(t)}return s}t=u,u=t.parentNode}return null}function au(t){return t=t[ds]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(c(33))}function Qu(t){return t[nu]||null}var Ba=[],br=-1;function Ms(t){return{current:t}}function rt(t){0>br||(t.current=Ba[br],Ba[br]=null,br--)}function tt(t,s){br++,Ba[br]=t.current,t.current=s}var Rs={},Dt=Ms(Rs),Ft=Ms(!1),er=Rs;function Br(t,s){var u=t.type.contextTypes;if(!u)return Rs;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in u)l[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function Tt(t){return t=t.childContextTypes,t!=null}function Ku(){rt(Ft),rt(Dt)}function Vi(t,s,u){if(Dt.current!==Rs)throw Error(c(168));tt(Dt,s),tt(Ft,u)}function Wi(t,s,u){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return u;a=a.getChildContext();for(var l in a)if(!(l in s))throw Error(c(108,se(t)||"Unknown",l));return A({},u,a)}function Vu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,er=Dt.current,tt(Dt,t),tt(Ft,Ft.current),!0}function qi(t,s,u){var a=t.stateNode;if(!a)throw Error(c(169));u?(t=Wi(t,s,er),a.__reactInternalMemoizedMergedChildContext=t,rt(Ft),rt(Dt),tt(Dt,t)):rt(Ft),tt(Ft,u)}var bs=null,Wu=!1,va=!1;function Gi(t){bs===null?bs=[t]:bs.push(t)}function FC(t){Wu=!0,Gi(t)}function $s(){if(!va&&bs!==null){va=!0;var t=0,s=Ze;try{var u=bs;for(Ze=1;t<u.length;t++){var a=u[t];do a=a(!0);while(a!==null)}bs=null,Wu=!1}catch(l){throw bs!==null&&(bs=bs.slice(t+1)),Xl(Yn,$s),l}finally{Ze=s,va=!1}}return null}var vr=[],jr=0,qu=null,Gu=0,Qt=[],Kt=0,tr=null,Bs=1,vs="";function sr(t,s){vr[jr++]=Gu,vr[jr++]=qu,qu=t,Gu=s}function Ji(t,s,u){Qt[Kt++]=Bs,Qt[Kt++]=vs,Qt[Kt++]=tr,tr=t;var a=Bs;t=vs;var l=32-es(a)-1;a&=~(1<<l),u+=1;var i=32-es(s)+l;if(30<i){var x=l-l%5;i=(a&(1<<x)-1).toString(32),a>>=x,l-=x,Bs=1<<32-es(s)+l|u<<l|a,vs=i+t}else Bs=1<<i|u<<l|a,vs=t}function ja(t){t.return!==null&&(sr(t,1),Ji(t,1,0))}function Da(t){for(;t===qu;)qu=vr[--jr],vr[jr]=null,Gu=vr[--jr],vr[jr]=null;for(;t===tr;)tr=Qt[--Kt],Qt[Kt]=null,vs=Qt[--Kt],Qt[Kt]=null,Bs=Qt[--Kt],Qt[Kt]=null}var Ot=null,zt=null,nt=!1,ss=null;function Xi(t,s){var u=Gt(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=t,s=t.deletions,s===null?(t.deletions=[u],t.flags|=16):s.push(u)}function Zi(t,s){switch(t.tag){case 5:var u=t.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ot=t,zt=Ps(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ot=t,zt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=tr!==null?{id:Bs,overflow:vs}:null,t.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Gt(18,null,null,0),u.stateNode=s,u.return=t,t.child=u,Ot=t,zt=null,!0):!1;default:return!1}}function Na(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Aa(t){if(nt){var s=zt;if(s){var u=s;if(!Zi(t,s)){if(Na(t))throw Error(c(418));s=Ps(u.nextSibling);var a=Ot;s&&Zi(t,s)?Xi(a,u):(t.flags=t.flags&-4097|2,nt=!1,Ot=t)}}else{if(Na(t))throw Error(c(418));t.flags=t.flags&-4097|2,nt=!1,Ot=t}}}function eo(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Ju(t){if(t!==Ot)return!1;if(!nt)return eo(t),nt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ha(t.type,t.memoizedProps)),s&&(s=zt)){if(Na(t))throw to(),Error(c(418));for(;s;)Xi(t,s),s=Ps(s.nextSibling)}if(eo(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var u=t.data;if(u==="/$"){if(s===0){zt=Ps(t.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}t=t.nextSibling}zt=null}}else zt=Ot?Ps(t.stateNode.nextSibling):null;return!0}function to(){for(var t=zt;t;)t=Ps(t.nextSibling)}function Dr(){zt=Ot=null,nt=!1}function wa(t){ss===null?ss=[t]:ss.push(t)}var TC=z.ReactCurrentBatchConfig;function lu(t,s,u){if(t=u.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(c(309));var a=u.stateNode}if(!a)throw Error(c(147,t));var l=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(x){var O=l.refs;x===null?delete O[i]:O[i]=x},s._stringRef=i,s)}if(typeof t!="string")throw Error(c(284));if(!u._owner)throw Error(c(290,t))}return t}function Xu(t,s){throw t=Object.prototype.toString.call(s),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function so(t){var s=t._init;return s(t._payload)}function ro(t){function s(ee,X){if(t){var te=ee.deletions;te===null?(ee.deletions=[X],ee.flags|=16):te.push(X)}}function u(ee,X){if(!t)return null;for(;X!==null;)s(ee,X),X=X.sibling;return null}function a(ee,X){for(ee=new Map;X!==null;)X.key!==null?ee.set(X.key,X):ee.set(X.index,X),X=X.sibling;return ee}function l(ee,X){return ee=Vs(ee,X),ee.index=0,ee.sibling=null,ee}function i(ee,X,te){return ee.index=te,t?(te=ee.alternate,te!==null?(te=te.index,te<X?(ee.flags|=2,X):te):(ee.flags|=2,X)):(ee.flags|=1048576,X)}function x(ee){return t&&ee.alternate===null&&(ee.flags|=2),ee}function O(ee,X,te,Be){return X===null||X.tag!==6?(X=hl(te,ee.mode,Be),X.return=ee,X):(X=l(X,te),X.return=ee,X)}function V(ee,X,te,Be){var Le=te.type;return Le===g?xe(ee,X,te.props.children,Be,te.key):X!==null&&(X.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===E&&so(Le)===X.type)?(Be=l(X,te.props),Be.ref=lu(ee,X,te),Be.return=ee,Be):(Be=jn(te.type,te.key,te.props,null,ee.mode,Be),Be.ref=lu(ee,X,te),Be.return=ee,Be)}function re(ee,X,te,Be){return X===null||X.tag!==4||X.stateNode.containerInfo!==te.containerInfo||X.stateNode.implementation!==te.implementation?(X=fl(te,ee.mode,Be),X.return=ee,X):(X=l(X,te.children||[]),X.return=ee,X)}function xe(ee,X,te,Be,Le){return X===null||X.tag!==7?(X=cr(te,ee.mode,Be,Le),X.return=ee,X):(X=l(X,te),X.return=ee,X)}function he(ee,X,te){if(typeof X=="string"&&X!==""||typeof X=="number")return X=hl(""+X,ee.mode,te),X.return=ee,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Y:return te=jn(X.type,X.key,X.props,null,ee.mode,te),te.ref=lu(ee,null,X),te.return=ee,te;case h:return X=fl(X,ee.mode,te),X.return=ee,X;case E:var Be=X._init;return he(ee,Be(X._payload),te)}if(J(X)||S(X))return X=cr(X,ee.mode,te,null),X.return=ee,X;Xu(ee,X)}return null}function me(ee,X,te,Be){var Le=X!==null?X.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Le!==null?null:O(ee,X,""+te,Be);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Y:return te.key===Le?V(ee,X,te,Be):null;case h:return te.key===Le?re(ee,X,te,Be):null;case E:return Le=te._init,me(ee,X,Le(te._payload),Be)}if(J(te)||S(te))return Le!==null?null:xe(ee,X,te,Be,null);Xu(ee,te)}return null}function we(ee,X,te,Be,Le){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return ee=ee.get(te)||null,O(X,ee,""+Be,Le);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case Y:return ee=ee.get(Be.key===null?te:Be.key)||null,V(X,ee,Be,Le);case h:return ee=ee.get(Be.key===null?te:Be.key)||null,re(X,ee,Be,Le);case E:var $e=Be._init;return we(ee,X,te,$e(Be._payload),Le)}if(J(Be)||S(Be))return ee=ee.get(te)||null,xe(X,ee,Be,Le,null);Xu(X,Be)}return null}function Fe(ee,X,te,Be){for(var Le=null,$e=null,Oe=X,Qe=X=0,ft=null;Oe!==null&&Qe<te.length;Qe++){Oe.index>Qe?(ft=Oe,Oe=null):ft=Oe.sibling;var Xe=me(ee,Oe,te[Qe],Be);if(Xe===null){Oe===null&&(Oe=ft);break}t&&Oe&&Xe.alternate===null&&s(ee,Oe),X=i(Xe,X,Qe),$e===null?Le=Xe:$e.sibling=Xe,$e=Xe,Oe=ft}if(Qe===te.length)return u(ee,Oe),nt&&sr(ee,Qe),Le;if(Oe===null){for(;Qe<te.length;Qe++)Oe=he(ee,te[Qe],Be),Oe!==null&&(X=i(Oe,X,Qe),$e===null?Le=Oe:$e.sibling=Oe,$e=Oe);return nt&&sr(ee,Qe),Le}for(Oe=a(ee,Oe);Qe<te.length;Qe++)ft=we(Oe,ee,Qe,te[Qe],Be),ft!==null&&(t&&ft.alternate!==null&&Oe.delete(ft.key===null?Qe:ft.key),X=i(ft,X,Qe),$e===null?Le=ft:$e.sibling=ft,$e=ft);return t&&Oe.forEach(function(Ws){return s(ee,Ws)}),nt&&sr(ee,Qe),Le}function Ie(ee,X,te,Be){var Le=S(te);if(typeof Le!="function")throw Error(c(150));if(te=Le.call(te),te==null)throw Error(c(151));for(var $e=Le=null,Oe=X,Qe=X=0,ft=null,Xe=te.next();Oe!==null&&!Xe.done;Qe++,Xe=te.next()){Oe.index>Qe?(ft=Oe,Oe=null):ft=Oe.sibling;var Ws=me(ee,Oe,Xe.value,Be);if(Ws===null){Oe===null&&(Oe=ft);break}t&&Oe&&Ws.alternate===null&&s(ee,Oe),X=i(Ws,X,Qe),$e===null?Le=Ws:$e.sibling=Ws,$e=Ws,Oe=ft}if(Xe.done)return u(ee,Oe),nt&&sr(ee,Qe),Le;if(Oe===null){for(;!Xe.done;Qe++,Xe=te.next())Xe=he(ee,Xe.value,Be),Xe!==null&&(X=i(Xe,X,Qe),$e===null?Le=Xe:$e.sibling=Xe,$e=Xe);return nt&&sr(ee,Qe),Le}for(Oe=a(ee,Oe);!Xe.done;Qe++,Xe=te.next())Xe=we(Oe,ee,Qe,Xe.value,Be),Xe!==null&&(t&&Xe.alternate!==null&&Oe.delete(Xe.key===null?Qe:Xe.key),X=i(Xe,X,Qe),$e===null?Le=Xe:$e.sibling=Xe,$e=Xe);return t&&Oe.forEach(function(C0){return s(ee,C0)}),nt&&sr(ee,Qe),Le}function ct(ee,X,te,Be){if(typeof te=="object"&&te!==null&&te.type===g&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Y:e:{for(var Le=te.key,$e=X;$e!==null;){if($e.key===Le){if(Le=te.type,Le===g){if($e.tag===7){u(ee,$e.sibling),X=l($e,te.props.children),X.return=ee,ee=X;break e}}else if($e.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===E&&so(Le)===$e.type){u(ee,$e.sibling),X=l($e,te.props),X.ref=lu(ee,$e,te),X.return=ee,ee=X;break e}u(ee,$e);break}else s(ee,$e);$e=$e.sibling}te.type===g?(X=cr(te.props.children,ee.mode,Be,te.key),X.return=ee,ee=X):(Be=jn(te.type,te.key,te.props,null,ee.mode,Be),Be.ref=lu(ee,X,te),Be.return=ee,ee=Be)}return x(ee);case h:e:{for($e=te.key;X!==null;){if(X.key===$e)if(X.tag===4&&X.stateNode.containerInfo===te.containerInfo&&X.stateNode.implementation===te.implementation){u(ee,X.sibling),X=l(X,te.children||[]),X.return=ee,ee=X;break e}else{u(ee,X);break}else s(ee,X);X=X.sibling}X=fl(te,ee.mode,Be),X.return=ee,ee=X}return x(ee);case E:return $e=te._init,ct(ee,X,$e(te._payload),Be)}if(J(te))return Fe(ee,X,te,Be);if(S(te))return Ie(ee,X,te,Be);Xu(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,X!==null&&X.tag===6?(u(ee,X.sibling),X=l(X,te),X.return=ee,ee=X):(u(ee,X),X=hl(te,ee.mode,Be),X.return=ee,ee=X),x(ee)):u(ee,X)}return ct}var Nr=ro(!0),uo=ro(!1),Zu=Ms(null),en=null,Ar=null,ka=null;function _a(){ka=Ar=en=null}function Ea(t){var s=Zu.current;rt(Zu),t._currentValue=s}function Sa(t,s,u){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===u)break;t=t.return}}function wr(t,s){en=t,ka=Ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(It=!0),t.firstContext=null)}function Vt(t){var s=t._currentValue;if(ka!==t)if(t={context:t,memoizedValue:s,next:null},Ar===null){if(en===null)throw Error(c(308));Ar=t,en.dependencies={lanes:0,firstContext:t}}else Ar=Ar.next=t;return s}var rr=null;function Fa(t){rr===null?rr=[t]:rr.push(t)}function no(t,s,u,a){var l=s.interleaved;return l===null?(u.next=u,Fa(s)):(u.next=l.next,l.next=u),s.interleaved=u,js(t,a)}function js(t,s){t.lanes|=s;var u=t.alternate;for(u!==null&&(u.lanes|=s),u=t,t=t.return;t!==null;)t.childLanes|=s,u=t.alternate,u!==null&&(u.childLanes|=s),u=t,t=t.return;return u.tag===3?u.stateNode:null}var Os=!1;function Ta(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ao(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ds(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function zs(t,s,u){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Je&2)!==0){var l=a.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s,js(t,u)}return l=a.interleaved,l===null?(s.next=s,Fa(a)):(s.next=l.next,l.next=s),a.interleaved=s,js(t,u)}function tn(t,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,u|=a,s.lanes=u,Vn(t,u)}}function lo(t,s){var u=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,u===a)){var l=null,i=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};i===null?l=i=x:i=i.next=x,u=u.next}while(u!==null);i===null?l=i=s:i=i.next=s}else l=i=s;u={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=u;return}t=u.lastBaseUpdate,t===null?u.firstBaseUpdate=s:t.next=s,u.lastBaseUpdate=s}function sn(t,s,u,a){var l=t.updateQueue;Os=!1;var i=l.firstBaseUpdate,x=l.lastBaseUpdate,O=l.shared.pending;if(O!==null){l.shared.pending=null;var V=O,re=V.next;V.next=null,x===null?i=re:x.next=re,x=V;var xe=t.alternate;xe!==null&&(xe=xe.updateQueue,O=xe.lastBaseUpdate,O!==x&&(O===null?xe.firstBaseUpdate=re:O.next=re,xe.lastBaseUpdate=V))}if(i!==null){var he=l.baseState;x=0,xe=re=V=null,O=i;do{var me=O.lane,we=O.eventTime;if((a&me)===me){xe!==null&&(xe=xe.next={eventTime:we,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Fe=t,Ie=O;switch(me=s,we=u,Ie.tag){case 1:if(Fe=Ie.payload,typeof Fe=="function"){he=Fe.call(we,he,me);break e}he=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ie.payload,me=typeof Fe=="function"?Fe.call(we,he,me):Fe,me==null)break e;he=A({},he,me);break e;case 2:Os=!0}}O.callback!==null&&O.lane!==0&&(t.flags|=64,me=l.effects,me===null?l.effects=[O]:me.push(O))}else we={eventTime:we,lane:me,tag:O.tag,payload:O.payload,callback:O.callback,next:null},xe===null?(re=xe=we,V=he):xe=xe.next=we,x|=me;if(O=O.next,O===null){if(O=l.shared.pending,O===null)break;me=O,O=me.next,me.next=null,l.lastBaseUpdate=me,l.shared.pending=null}}while(!0);if(xe===null&&(V=he),l.baseState=V,l.firstBaseUpdate=re,l.lastBaseUpdate=xe,s=l.shared.interleaved,s!==null){l=s;do x|=l.lane,l=l.next;while(l!==s)}else i===null&&(l.shared.lanes=0);ar|=x,t.lanes=x,t.memoizedState=he}}function io(t,s,u){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],l=a.callback;if(l!==null){if(a.callback=null,a=u,typeof l!="function")throw Error(c(191,l));l.call(a)}}}var iu={},Cs=Ms(iu),ou=Ms(iu),cu=Ms(iu);function ur(t){if(t===iu)throw Error(c(174));return t}function Ia(t,s){switch(tt(cu,s),tt(ou,t),tt(Cs,iu),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ge(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Ge(s,t)}rt(Cs),tt(Cs,s)}function kr(){rt(Cs),rt(ou),rt(cu)}function oo(t){ur(cu.current);var s=ur(Cs.current),u=Ge(s,t.type);s!==u&&(tt(ou,t),tt(Cs,u))}function La(t){ou.current===t&&(rt(Cs),rt(ou))}var at=Ms(0);function rn(t){for(var s=t;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pa=[];function Ma(){for(var t=0;t<Pa.length;t++)Pa[t]._workInProgressVersionPrimary=null;Pa.length=0}var un=z.ReactCurrentDispatcher,Ra=z.ReactCurrentBatchConfig,nr=0,lt=null,xt=null,pt=null,nn=!1,du=!1,Cu=0,IC=0;function Nt(){throw Error(c(321))}function $a(t,s){if(s===null)return!1;for(var u=0;u<s.length&&u<t.length;u++)if(!ts(t[u],s[u]))return!1;return!0}function Oa(t,s,u,a,l,i){if(nr=i,lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,un.current=t===null||t.memoizedState===null?RC:$C,t=u(a,l),du){i=0;do{if(du=!1,Cu=0,25<=i)throw Error(c(301));i+=1,pt=xt=null,s.updateQueue=null,un.current=OC,t=u(a,l)}while(du)}if(un.current=on,s=xt!==null&&xt.next!==null,nr=0,pt=xt=lt=null,nn=!1,s)throw Error(c(300));return t}function za(){var t=Cu!==0;return Cu=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?lt.memoizedState=pt=t:pt=pt.next=t,pt}function Wt(){if(xt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var s=pt===null?lt.memoizedState:pt.next;if(s!==null)pt=s,xt=t;else{if(t===null)throw Error(c(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},pt===null?lt.memoizedState=pt=t:pt=pt.next=t}return pt}function mu(t,s){return typeof s=="function"?s(t):s}function Ua(t){var s=Wt(),u=s.queue;if(u===null)throw Error(c(311));u.lastRenderedReducer=t;var a=xt,l=a.baseQueue,i=u.pending;if(i!==null){if(l!==null){var x=l.next;l.next=i.next,i.next=x}a.baseQueue=l=i,u.pending=null}if(l!==null){i=l.next,a=a.baseState;var O=x=null,V=null,re=i;do{var xe=re.lane;if((nr&xe)===xe)V!==null&&(V=V.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),a=re.hasEagerState?re.eagerState:t(a,re.action);else{var he={lane:xe,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};V===null?(O=V=he,x=a):V=V.next=he,lt.lanes|=xe,ar|=xe}re=re.next}while(re!==null&&re!==i);V===null?x=a:V.next=O,ts(a,s.memoizedState)||(It=!0),s.memoizedState=a,s.baseState=x,s.baseQueue=V,u.lastRenderedState=a}if(t=u.interleaved,t!==null){l=t;do i=l.lane,lt.lanes|=i,ar|=i,l=l.next;while(l!==t)}else l===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Ha(t){var s=Wt(),u=s.queue;if(u===null)throw Error(c(311));u.lastRenderedReducer=t;var a=u.dispatch,l=u.pending,i=s.memoizedState;if(l!==null){u.pending=null;var x=l=l.next;do i=t(i,x.action),x=x.next;while(x!==l);ts(i,s.memoizedState)||(It=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),u.lastRenderedState=i}return[i,a]}function co(){}function Co(t,s){var u=lt,a=Wt(),l=s(),i=!ts(a.memoizedState,l);if(i&&(a.memoizedState=l,It=!0),a=a.queue,Ya(go.bind(null,u,a,t),[t]),a.getSnapshot!==s||i||pt!==null&&pt.memoizedState.tag&1){if(u.flags|=2048,xu(9,xo.bind(null,u,a,l,s),void 0,null),ht===null)throw Error(c(349));(nr&30)!==0||mo(u,s,l)}return l}function mo(t,s,u){t.flags|=16384,t={getSnapshot:s,value:u},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.stores=[t]):(u=s.stores,u===null?s.stores=[t]:u.push(t))}function xo(t,s,u,a){s.value=u,s.getSnapshot=a,po(s)&&ho(t)}function go(t,s,u){return u(function(){po(s)&&ho(t)})}function po(t){var s=t.getSnapshot;t=t.value;try{var u=s();return!ts(t,u)}catch{return!0}}function ho(t){var s=js(t,1);s!==null&&as(s,t,1,-1)}function fo(t){var s=ms();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:t},s.queue=t,t=t.dispatch=MC.bind(null,lt,t),[s.memoizedState,t]}function xu(t,s,u,a){return t={tag:t,create:s,destroy:u,deps:a,next:null},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.lastEffect=t.next=t):(u=s.lastEffect,u===null?s.lastEffect=t.next=t:(a=u.next,u.next=t,t.next=a,s.lastEffect=t)),t}function yo(){return Wt().memoizedState}function an(t,s,u,a){var l=ms();lt.flags|=t,l.memoizedState=xu(1|s,u,void 0,a===void 0?null:a)}function ln(t,s,u,a){var l=Wt();a=a===void 0?null:a;var i=void 0;if(xt!==null){var x=xt.memoizedState;if(i=x.destroy,a!==null&&$a(a,x.deps)){l.memoizedState=xu(s,u,i,a);return}}lt.flags|=t,l.memoizedState=xu(1|s,u,i,a)}function bo(t,s){return an(8390656,8,t,s)}function Ya(t,s){return ln(2048,8,t,s)}function Bo(t,s){return ln(4,2,t,s)}function vo(t,s){return ln(4,4,t,s)}function jo(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Do(t,s,u){return u=u!=null?u.concat([t]):null,ln(4,4,jo.bind(null,s,t),u)}function Qa(){}function No(t,s){var u=Wt();s=s===void 0?null:s;var a=u.memoizedState;return a!==null&&s!==null&&$a(s,a[1])?a[0]:(u.memoizedState=[t,s],t)}function Ao(t,s){var u=Wt();s=s===void 0?null:s;var a=u.memoizedState;return a!==null&&s!==null&&$a(s,a[1])?a[0]:(t=t(),u.memoizedState=[t,s],t)}function wo(t,s,u){return(nr&21)===0?(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=u):(ts(u,s)||(u=si(),lt.lanes|=u,ar|=u,t.baseState=!0),s)}function LC(t,s){var u=Ze;Ze=u!==0&&4>u?u:4,t(!0);var a=Ra.transition;Ra.transition={};try{t(!1),s()}finally{Ze=u,Ra.transition=a}}function ko(){return Wt().memoizedState}function PC(t,s,u){var a=Qs(t);if(u={lane:a,action:u,hasEagerState:!1,eagerState:null,next:null},_o(t))Eo(s,u);else if(u=no(t,s,u,a),u!==null){var l=Et();as(u,t,a,l),So(u,s,a)}}function MC(t,s,u){var a=Qs(t),l={lane:a,action:u,hasEagerState:!1,eagerState:null,next:null};if(_o(t))Eo(s,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var x=s.lastRenderedState,O=i(x,u);if(l.hasEagerState=!0,l.eagerState=O,ts(O,x)){var V=s.interleaved;V===null?(l.next=l,Fa(s)):(l.next=V.next,V.next=l),s.interleaved=l;return}}catch{}finally{}u=no(t,s,l,a),u!==null&&(l=Et(),as(u,t,a,l),So(u,s,a))}}function _o(t){var s=t.alternate;return t===lt||s!==null&&s===lt}function Eo(t,s){du=nn=!0;var u=t.pending;u===null?s.next=s:(s.next=u.next,u.next=s),t.pending=s}function So(t,s,u){if((u&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,u|=a,s.lanes=u,Vn(t,u)}}var on={readContext:Vt,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},RC={readContext:Vt,useCallback:function(t,s){return ms().memoizedState=[t,s===void 0?null:s],t},useContext:Vt,useEffect:bo,useImperativeHandle:function(t,s,u){return u=u!=null?u.concat([t]):null,an(4194308,4,jo.bind(null,s,t),u)},useLayoutEffect:function(t,s){return an(4194308,4,t,s)},useInsertionEffect:function(t,s){return an(4,2,t,s)},useMemo:function(t,s){var u=ms();return s=s===void 0?null:s,t=t(),u.memoizedState=[t,s],t},useReducer:function(t,s,u){var a=ms();return s=u!==void 0?u(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=PC.bind(null,lt,t),[a.memoizedState,t]},useRef:function(t){var s=ms();return t={current:t},s.memoizedState=t},useState:fo,useDebugValue:Qa,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=fo(!1),s=t[0];return t=LC.bind(null,t[1]),ms().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,u){var a=lt,l=ms();if(nt){if(u===void 0)throw Error(c(407));u=u()}else{if(u=s(),ht===null)throw Error(c(349));(nr&30)!==0||mo(a,s,u)}l.memoizedState=u;var i={value:u,getSnapshot:s};return l.queue=i,bo(go.bind(null,a,i,t),[t]),a.flags|=2048,xu(9,xo.bind(null,a,i,u,s),void 0,null),u},useId:function(){var t=ms(),s=ht.identifierPrefix;if(nt){var u=vs,a=Bs;u=(a&~(1<<32-es(a)-1)).toString(32)+u,s=":"+s+"R"+u,u=Cu++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=IC++,s=":"+s+"r"+u.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},$C={readContext:Vt,useCallback:No,useContext:Vt,useEffect:Ya,useImperativeHandle:Do,useInsertionEffect:Bo,useLayoutEffect:vo,useMemo:Ao,useReducer:Ua,useRef:yo,useState:function(){return Ua(mu)},useDebugValue:Qa,useDeferredValue:function(t){var s=Wt();return wo(s,xt.memoizedState,t)},useTransition:function(){var t=Ua(mu)[0],s=Wt().memoizedState;return[t,s]},useMutableSource:co,useSyncExternalStore:Co,useId:ko,unstable_isNewReconciler:!1},OC={readContext:Vt,useCallback:No,useContext:Vt,useEffect:Ya,useImperativeHandle:Do,useInsertionEffect:Bo,useLayoutEffect:vo,useMemo:Ao,useReducer:Ha,useRef:yo,useState:function(){return Ha(mu)},useDebugValue:Qa,useDeferredValue:function(t){var s=Wt();return xt===null?s.memoizedState=t:wo(s,xt.memoizedState,t)},useTransition:function(){var t=Ha(mu)[0],s=Wt().memoizedState;return[t,s]},useMutableSource:co,useSyncExternalStore:Co,useId:ko,unstable_isNewReconciler:!1};function rs(t,s){if(t&&t.defaultProps){s=A({},s),t=t.defaultProps;for(var u in t)s[u]===void 0&&(s[u]=t[u]);return s}return s}function Ka(t,s,u,a){s=t.memoizedState,u=u(a,s),u=u==null?s:A({},s,u),t.memoizedState=u,t.lanes===0&&(t.updateQueue.baseState=u)}var cn={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,s,u){t=t._reactInternals;var a=Et(),l=Qs(t),i=Ds(a,l);i.payload=s,u!=null&&(i.callback=u),s=zs(t,i,l),s!==null&&(as(s,t,l,a),tn(s,t,l))},enqueueReplaceState:function(t,s,u){t=t._reactInternals;var a=Et(),l=Qs(t),i=Ds(a,l);i.tag=1,i.payload=s,u!=null&&(i.callback=u),s=zs(t,i,l),s!==null&&(as(s,t,l,a),tn(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var u=Et(),a=Qs(t),l=Ds(u,a);l.tag=2,s!=null&&(l.callback=s),s=zs(t,l,a),s!==null&&(as(s,t,a,u),tn(s,t,a))}};function Fo(t,s,u,a,l,i,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,x):s.prototype&&s.prototype.isPureReactComponent?!eu(u,a)||!eu(l,i):!0}function To(t,s,u){var a=!1,l=Rs,i=s.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(l=Tt(s)?er:Dt.current,a=s.contextTypes,i=(a=a!=null)?Br(t,l):Rs),s=new s(u,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=cn,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=i),s}function Io(t,s,u,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,a),s.state!==t&&cn.enqueueReplaceState(s,s.state,null)}function Va(t,s,u,a){var l=t.stateNode;l.props=u,l.state=t.memoizedState,l.refs={},Ta(t);var i=s.contextType;typeof i=="object"&&i!==null?l.context=Vt(i):(i=Tt(s)?er:Dt.current,l.context=Br(t,i)),l.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Ka(t,s,i,u),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&cn.enqueueReplaceState(l,l.state,null),sn(t,u,l,a),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function _r(t,s){try{var u="",a=s;do u+=ye(a),a=a.return;while(a);var l=u}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:l,digest:null}}function Wa(t,s,u){return{value:t,source:null,stack:u??null,digest:s??null}}function hg(t,s){}var zC=typeof WeakMap=="function"?WeakMap:Map;function Lo(t,s,u){u=Ds(-1,u),u.tag=3,u.payload={element:null};var a=s.value;return u.callback=function(){hn||(hn=!0,ol=a)},u}function Po(t,s,u){u=Ds(-1,u),u.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var l=s.value;u.payload=function(){return a(l)},u.callback=function(){}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(u.callback=function(){typeof a!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),u}function Mo(t,s,u){var a=t.pingCache;if(a===null){a=t.pingCache=new zC;var l=new Set;a.set(s,l)}else l=a.get(s),l===void 0&&(l=new Set,a.set(s,l));l.has(u)||(l.add(u),t=t0.bind(null,t,s,u),s.then(t,t))}function Ro(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function $o(t,s,u,a,l){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Ds(-1,1),s.tag=2,zs(u,s,1))),u.lanes|=1),t):(t.flags|=65536,t.lanes=l,t)}var UC=z.ReactCurrentOwner,It=!1;function _t(t,s,u,a){s.child=t===null?uo(s,null,u,a):Nr(s,t.child,u,a)}function Oo(t,s,u,a,l){u=u.render;var i=s.ref;return wr(s,l),a=Oa(t,s,u,a,i,l),u=za(),t!==null&&!It?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,Ns(t,s,l)):(nt&&u&&ja(s),s.flags|=1,_t(t,s,a,l),s.child)}function zo(t,s,u,a,l){if(t===null){var i=u.type;return typeof i=="function"&&!pl(i)&&i.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=i,Uo(t,s,i,a,l)):(t=jn(u.type,null,a,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,(t.lanes&l)===0){var x=i.memoizedProps;if(u=u.compare,u=u!==null?u:eu,u(x,a)&&t.ref===s.ref)return Ns(t,s,l)}return s.flags|=1,t=Vs(i,a),t.ref=s.ref,t.return=s,s.child=t}function Uo(t,s,u,a,l){if(t!==null){var i=t.memoizedProps;if(eu(i,a)&&t.ref===s.ref)if(It=!1,s.pendingProps=a=i,(t.lanes&l)!==0)(t.flags&131072)!==0&&(It=!0);else return s.lanes=t.lanes,Ns(t,s,l)}return qa(t,s,u,a,l)}function Ho(t,s,u){var a=s.pendingProps,l=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Sr,Ut),Ut|=u;else{if((u&1073741824)===0)return t=i!==null?i.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,tt(Sr,Ut),Ut|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:u,tt(Sr,Ut),Ut|=a}else i!==null?(a=i.baseLanes|u,s.memoizedState=null):a=u,tt(Sr,Ut),Ut|=a;return _t(t,s,l,u),s.child}function Yo(t,s){var u=s.ref;(t===null&&u!==null||t!==null&&t.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function qa(t,s,u,a,l){var i=Tt(u)?er:Dt.current;return i=Br(s,i),wr(s,l),u=Oa(t,s,u,a,i,l),a=za(),t!==null&&!It?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,Ns(t,s,l)):(nt&&a&&ja(s),s.flags|=1,_t(t,s,u,l),s.child)}function Qo(t,s,u,a,l){if(Tt(u)){var i=!0;Vu(s)}else i=!1;if(wr(s,l),s.stateNode===null)Cn(t,s),To(s,u,a),Va(s,u,a,l),a=!0;else if(t===null){var x=s.stateNode,O=s.memoizedProps;x.props=O;var V=x.context,re=u.contextType;typeof re=="object"&&re!==null?re=Vt(re):(re=Tt(u)?er:Dt.current,re=Br(s,re));var xe=u.getDerivedStateFromProps,he=typeof xe=="function"||typeof x.getSnapshotBeforeUpdate=="function";he||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==a||V!==re)&&Io(s,x,a,re),Os=!1;var me=s.memoizedState;x.state=me,sn(s,a,x,l),V=s.memoizedState,O!==a||me!==V||Ft.current||Os?(typeof xe=="function"&&(Ka(s,u,xe,a),V=s.memoizedState),(O=Os||Fo(s,u,O,a,me,V,re))?(he||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=V),x.props=a,x.state=V,x.context=re,a=O):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{x=s.stateNode,ao(t,s),O=s.memoizedProps,re=s.type===s.elementType?O:rs(s.type,O),x.props=re,he=s.pendingProps,me=x.context,V=u.contextType,typeof V=="object"&&V!==null?V=Vt(V):(V=Tt(u)?er:Dt.current,V=Br(s,V));var we=u.getDerivedStateFromProps;(xe=typeof we=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==he||me!==V)&&Io(s,x,a,V),Os=!1,me=s.memoizedState,x.state=me,sn(s,a,x,l);var Fe=s.memoizedState;O!==he||me!==Fe||Ft.current||Os?(typeof we=="function"&&(Ka(s,u,we,a),Fe=s.memoizedState),(re=Os||Fo(s,u,re,a,me,Fe,V)||!1)?(xe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(a,Fe,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(a,Fe,V)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||O===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=Fe),x.props=a,x.state=Fe,x.context=V,a=re):(typeof x.componentDidUpdate!="function"||O===t.memoizedProps&&me===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&me===t.memoizedState||(s.flags|=1024),a=!1)}return Ga(t,s,u,a,i,l)}function Ga(t,s,u,a,l,i){Yo(t,s);var x=(s.flags&128)!==0;if(!a&&!x)return l&&qi(s,u,!1),Ns(t,s,i);a=s.stateNode,UC.current=s;var O=x&&typeof u.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&x?(s.child=Nr(s,t.child,null,i),s.child=Nr(s,null,O,i)):_t(t,s,O,i),s.memoizedState=a.state,l&&qi(s,u,!0),s.child}function Ko(t){var s=t.stateNode;s.pendingContext?Vi(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Vi(t,s.context,!1),Ia(t,s.containerInfo)}function Vo(t,s,u,a,l){return Dr(),wa(l),s.flags|=256,_t(t,s,u,a),s.child}var Ja={dehydrated:null,treeContext:null,retryLane:0};function Xa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wo(t,s,u){var a=s.pendingProps,l=at.current,i=!1,x=(s.flags&128)!==0,O;if((O=x)||(O=t!==null&&t.memoizedState===null?!1:(l&2)!==0),O?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),tt(at,l&1),t===null)return Aa(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=a.children,t=a.fallback,i?(a=s.mode,i=s.child,x={mode:"hidden",children:x},(a&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=x):i=Dn(x,a,0,null),t=cr(t,a,u,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=Xa(u),s.memoizedState=Ja,t):Za(s,x));if(l=t.memoizedState,l!==null&&(O=l.dehydrated,O!==null))return HC(t,s,x,a,O,l,u);if(i){i=a.fallback,x=s.mode,l=t.child,O=l.sibling;var V={mode:"hidden",children:a.children};return(x&1)===0&&s.child!==l?(a=s.child,a.childLanes=0,a.pendingProps=V,s.deletions=null):(a=Vs(l,V),a.subtreeFlags=l.subtreeFlags&14680064),O!==null?i=Vs(O,i):(i=cr(i,x,u,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,x=t.child.memoizedState,x=x===null?Xa(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},i.memoizedState=x,i.childLanes=t.childLanes&~u,s.memoizedState=Ja,a}return i=t.child,t=i.sibling,a=Vs(i,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=u),a.return=s,a.sibling=null,t!==null&&(u=s.deletions,u===null?(s.deletions=[t],s.flags|=16):u.push(t)),s.child=a,s.memoizedState=null,a}function Za(t,s){return s=Dn({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function dn(t,s,u,a){return a!==null&&wa(a),Nr(s,t.child,null,u),t=Za(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function HC(t,s,u,a,l,i,x){if(u)return s.flags&256?(s.flags&=-257,a=Wa(Error(c(422))),dn(t,s,x,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,l=s.mode,a=Dn({mode:"visible",children:a.children},l,0,null),i=cr(i,l,x,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,(s.mode&1)!==0&&Nr(s,t.child,null,x),s.child.memoizedState=Xa(x),s.memoizedState=Ja,i);if((s.mode&1)===0)return dn(t,s,x,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var O=a.dgst;return a=O,i=Error(c(419)),a=Wa(i,a,void 0),dn(t,s,x,a)}if(O=(x&t.childLanes)!==0,It||O){if(a=ht,a!==null){switch(x&-x){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(a.suspendedLanes|x))!==0?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,js(t,l),as(a,t,l,-1))}return gl(),a=Wa(Error(c(421))),dn(t,s,x,a)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=s0.bind(null,t),l._reactRetry=s,null):(t=i.treeContext,zt=Ps(l.nextSibling),Ot=s,nt=!0,ss=null,t!==null&&(Qt[Kt++]=Bs,Qt[Kt++]=vs,Qt[Kt++]=tr,Bs=t.id,vs=t.overflow,tr=s),s=Za(s,a.children),s.flags|=4096,s)}function qo(t,s,u){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),Sa(t.return,s,u)}function el(t,s,u,a,l){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:u,tailMode:l}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=u,i.tailMode=l)}function Go(t,s,u){var a=s.pendingProps,l=a.revealOrder,i=a.tail;if(_t(t,s,a.children,u),a=at.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qo(t,u,s);else if(t.tag===19)qo(t,u,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(tt(at,a),(s.mode&1)===0)s.memoizedState=null;else switch(l){case"forwards":for(u=s.child,l=null;u!==null;)t=u.alternate,t!==null&&rn(t)===null&&(l=u),u=u.sibling;u=l,u===null?(l=s.child,s.child=null):(l=u.sibling,u.sibling=null),el(s,!1,l,u,i);break;case"backwards":for(u=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&rn(t)===null){s.child=l;break}t=l.sibling,l.sibling=u,u=l,l=t}el(s,!0,u,null,i);break;case"together":el(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cn(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ns(t,s,u){if(t!==null&&(s.dependencies=t.dependencies),ar|=s.lanes,(u&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(c(153));if(s.child!==null){for(t=s.child,u=Vs(t,t.pendingProps),s.child=u,u.return=s;t.sibling!==null;)t=t.sibling,u=u.sibling=Vs(t,t.pendingProps),u.return=s;u.sibling=null}return s.child}function YC(t,s,u){switch(s.tag){case 3:Ko(s),Dr();break;case 5:oo(s);break;case 1:Tt(s.type)&&Vu(s);break;case 4:Ia(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,l=s.memoizedProps.value;tt(Zu,a._currentValue),a._currentValue=l;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(tt(at,at.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?Wo(t,s,u):(tt(at,at.current&1),t=Ns(t,s,u),t!==null?t.sibling:null);tt(at,at.current&1);break;case 19:if(a=(u&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Go(t,s,u);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),tt(at,at.current),a)break;return null;case 22:case 23:return s.lanes=0,Ho(t,s,u)}return Ns(t,s,u)}var Jo,tl,Xo,Zo;Jo=function(t,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},tl=function(){},Xo=function(t,s,u,a){var l=t.memoizedProps;if(l!==a){t=s.stateNode,ur(Cs.current);var i=null;switch(u){case"input":l=De(t,l),a=De(t,a),i=[];break;case"select":l=A({},l,{value:void 0}),a=A({},a,{value:void 0}),i=[];break;case"textarea":l=ae(t,l),a=ae(t,a),i=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Yu)}ut(u,a);var x;u=null;for(re in l)if(!a.hasOwnProperty(re)&&l.hasOwnProperty(re)&&l[re]!=null)if(re==="style"){var O=l[re];for(x in O)O.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(p.hasOwnProperty(re)?i||(i=[]):(i=i||[]).push(re,null));for(re in a){var V=a[re];if(O=l!=null?l[re]:void 0,a.hasOwnProperty(re)&&V!==O&&(V!=null||O!=null))if(re==="style")if(O){for(x in O)!O.hasOwnProperty(x)||V&&V.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in V)V.hasOwnProperty(x)&&O[x]!==V[x]&&(u||(u={}),u[x]=V[x])}else u||(i||(i=[]),i.push(re,u)),u=V;else re==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,O=O?O.__html:void 0,V!=null&&O!==V&&(i=i||[]).push(re,V)):re==="children"?typeof V!="string"&&typeof V!="number"||(i=i||[]).push(re,""+V):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(p.hasOwnProperty(re)?(V!=null&&re==="onScroll"&&st("scroll",t),i||O===V||(i=[])):(i=i||[]).push(re,V))}u&&(i=i||[]).push("style",u);var re=i;(s.updateQueue=re)&&(s.flags|=4)}},Zo=function(t,s,u,a){u!==a&&(s.flags|=4)};function gu(t,s){if(!nt)switch(t.tailMode){case"hidden":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?t.tail=null:u.sibling=null;break;case"collapsed":u=t.tail;for(var a=null;u!==null;)u.alternate!==null&&(a=u),u=u.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function At(t){var s=t.alternate!==null&&t.alternate.child===t.child,u=0,a=0;if(s)for(var l=t.child;l!==null;)u|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)u|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=a,t.childLanes=u,s}function QC(t,s,u){var a=s.pendingProps;switch(Da(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(s),null;case 1:return Tt(s.type)&&Ku(),At(s),null;case 3:return a=s.stateNode,kr(),rt(Ft),rt(Dt),Ma(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ju(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ss!==null&&(Cl(ss),ss=null))),tl(t,s),At(s),null;case 5:La(s);var l=ur(cu.current);if(u=s.type,t!==null&&s.stateNode!=null)Xo(t,s,u,a,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(c(166));return At(s),null}if(t=ur(Cs.current),Ju(s)){a=s.stateNode,u=s.type;var i=s.memoizedProps;switch(a[ds]=s,a[nu]=i,t=(s.mode&1)!==0,u){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(l=0;l<su.length;l++)st(su[l],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":He(a,i),st("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},st("invalid",a);break;case"textarea":de(a,i),st("invalid",a)}ut(u,i),l=null;for(var x in i)if(i.hasOwnProperty(x)){var O=i[x];x==="children"?typeof O=="string"?a.textContent!==O&&(i.suppressHydrationWarning!==!0&&Hu(a.textContent,O,t),l=["children",O]):typeof O=="number"&&a.textContent!==""+O&&(i.suppressHydrationWarning!==!0&&Hu(a.textContent,O,t),l=["children",""+O]):p.hasOwnProperty(x)&&O!=null&&x==="onScroll"&&st("scroll",a)}switch(u){case"input":pe(a),U(a,i,!0);break;case"textarea":pe(a),je(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Yu)}a=l,s.updateQueue=a,a!==null&&(s.flags|=4)}else{x=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_e(u)),t==="http://www.w3.org/1999/xhtml"?u==="script"?(t=x.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=x.createElement(u,{is:a.is}):(t=x.createElement(u),u==="select"&&(x=t,a.multiple?x.multiple=!0:a.size&&(x.size=a.size))):t=x.createElementNS(t,u),t[ds]=s,t[nu]=a,Jo(t,s,!1,!1),s.stateNode=t;e:{switch(x=Rt(u,a),u){case"dialog":st("cancel",t),st("close",t),l=a;break;case"iframe":case"object":case"embed":st("load",t),l=a;break;case"video":case"audio":for(l=0;l<su.length;l++)st(su[l],t);l=a;break;case"source":st("error",t),l=a;break;case"img":case"image":case"link":st("error",t),st("load",t),l=a;break;case"details":st("toggle",t),l=a;break;case"input":He(t,a),l=De(t,a),st("invalid",t);break;case"option":l=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},l=A({},a,{value:void 0}),st("invalid",t);break;case"textarea":de(t,a),l=ae(t,a),st("invalid",t);break;default:l=a}ut(u,l),O=l;for(i in O)if(O.hasOwnProperty(i)){var V=O[i];i==="style"?Ve(t,V):i==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&et(t,V)):i==="children"?typeof V=="string"?(u!=="textarea"||V!=="")&&Ae(t,V):typeof V=="number"&&Ae(t,""+V):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(p.hasOwnProperty(i)?V!=null&&i==="onScroll"&&st("scroll",t):V!=null&&P(t,i,V,x))}switch(u){case"input":pe(t),U(t,a,!1);break;case"textarea":pe(t),je(t);break;case"option":a.value!=null&&t.setAttribute("value",""+be(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?oe(t,!!a.multiple,i,!1):a.defaultValue!=null&&oe(t,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Yu)}switch(u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return At(s),null;case 6:if(t&&s.stateNode!=null)Zo(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(c(166));if(u=ur(cu.current),ur(Cs.current),Ju(s)){if(a=s.stateNode,u=s.memoizedProps,a[ds]=s,(i=a.nodeValue!==u)&&(t=Ot,t!==null))switch(t.tag){case 3:Hu(a.nodeValue,u,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hu(a.nodeValue,u,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(u.nodeType===9?u:u.ownerDocument).createTextNode(a),a[ds]=s,s.stateNode=a}return At(s),null;case 13:if(rt(at),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&zt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)to(),Dr(),s.flags|=98560,i=!1;else if(i=Ju(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(c(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));i[ds]=s}else Dr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;At(s),i=!1}else ss!==null&&(Cl(ss),ss=null),i=!0;if(!i)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(at.current&1)!==0?gt===0&&(gt=3):gl())),s.updateQueue!==null&&(s.flags|=4),At(s),null);case 4:return kr(),tl(t,s),t===null&&ru(s.stateNode.containerInfo),At(s),null;case 10:return Ea(s.type._context),At(s),null;case 17:return Tt(s.type)&&Ku(),At(s),null;case 19:if(rt(at),i=s.memoizedState,i===null)return At(s),null;if(a=(s.flags&128)!==0,x=i.rendering,x===null)if(a)gu(i,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(x=rn(t),x!==null){for(s.flags|=128,gu(i,!1),a=x.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=u,u=s.child;u!==null;)i=u,t=a,i.flags&=14680066,x=i.alternate,x===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=x.childLanes,i.lanes=x.lanes,i.child=x.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=x.memoizedProps,i.memoizedState=x.memoizedState,i.updateQueue=x.updateQueue,i.type=x.type,t=x.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),u=u.sibling;return tt(at,at.current&1|2),s.child}t=t.sibling}i.tail!==null&&ot()>Fr&&(s.flags|=128,a=!0,gu(i,!1),s.lanes=4194304)}else{if(!a)if(t=rn(x),t!==null){if(s.flags|=128,a=!0,u=t.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),gu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!x.alternate&&!nt)return At(s),null}else 2*ot()-i.renderingStartTime>Fr&&u!==1073741824&&(s.flags|=128,a=!0,gu(i,!1),s.lanes=4194304);i.isBackwards?(x.sibling=s.child,s.child=x):(u=i.last,u!==null?u.sibling=x:s.child=x,i.last=x)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=ot(),s.sibling=null,u=at.current,tt(at,a?u&1|2:u&1),s):(At(s),null);case 22:case 23:return xl(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(Ut&1073741824)!==0&&(At(s),s.subtreeFlags&6&&(s.flags|=8192)):At(s),null;case 24:return null;case 25:return null}throw Error(c(156,s.tag))}function KC(t,s){switch(Da(s),s.tag){case 1:return Tt(s.type)&&Ku(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return kr(),rt(Ft),rt(Dt),Ma(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return La(s),null;case 13:if(rt(at),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(c(340));Dr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return rt(at),null;case 4:return kr(),null;case 10:return Ea(s.type._context),null;case 22:case 23:return xl(),null;case 24:return null;default:return null}}var mn=!1,wt=!1,VC=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Er(t,s){var u=t.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(a){it(t,s,a)}else u.current=null}function sl(t,s,u){try{u()}catch(a){it(t,s,a)}}var ec=!1;function WC(t,s){if(ga=Fu,t=Si(),la(t)){if("selectionStart"in t)var u={start:t.selectionStart,end:t.selectionEnd};else e:{u=(u=t.ownerDocument)&&u.defaultView||window;var a=u.getSelection&&u.getSelection();if(a&&a.rangeCount!==0){u=a.anchorNode;var l=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{u.nodeType,i.nodeType}catch{u=null;break e}var x=0,O=-1,V=-1,re=0,xe=0,he=t,me=null;t:for(;;){for(var we;he!==u||l!==0&&he.nodeType!==3||(O=x+l),he!==i||a!==0&&he.nodeType!==3||(V=x+a),he.nodeType===3&&(x+=he.nodeValue.length),(we=he.firstChild)!==null;)me=he,he=we;for(;;){if(he===t)break t;if(me===u&&++re===l&&(O=x),me===i&&++xe===a&&(V=x),(we=he.nextSibling)!==null)break;he=me,me=he.parentNode}he=we}u=O===-1||V===-1?null:{start:O,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(pa={focusedElem:t,selectionRange:u},Fu=!1,Se=s;Se!==null;)if(s=Se,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Se=t;else for(;Se!==null;){s=Se;try{var Fe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var Ie=Fe.memoizedProps,ct=Fe.memoizedState,ee=s.stateNode,X=ee.getSnapshotBeforeUpdate(s.elementType===s.type?Ie:rs(s.type,Ie),ct);ee.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var te=s.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(Be){it(s,s.return,Be)}if(t=s.sibling,t!==null){t.return=s.return,Se=t;break}Se=s.return}return Fe=ec,ec=!1,Fe}function pu(t,s,u){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&t)===t){var i=l.destroy;l.destroy=void 0,i!==void 0&&sl(s,u,i)}l=l.next}while(l!==a)}}function xn(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&t)===t){var a=u.create;u.destroy=a()}u=u.next}while(u!==s)}}function rl(t){var s=t.ref;if(s!==null){var u=t.stateNode;switch(t.tag){case 5:t=u;break;default:t=u}typeof s=="function"?s(t):s.current=t}}function tc(t){var s=t.alternate;s!==null&&(t.alternate=null,tc(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[ds],delete s[nu],delete s[ba],delete s[EC],delete s[SC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sc(t){return t.tag===5||t.tag===3||t.tag===4}function rc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ul(t,s,u){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(t,s):u.insertBefore(t,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(t,u)):(s=u,s.appendChild(t)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Yu));else if(a!==4&&(t=t.child,t!==null))for(ul(t,s,u),t=t.sibling;t!==null;)ul(t,s,u),t=t.sibling}function nl(t,s,u){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?u.insertBefore(t,s):u.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(nl(t,s,u),t=t.sibling;t!==null;)nl(t,s,u),t=t.sibling}var bt=null,us=!1;function Us(t,s,u){for(u=u.child;u!==null;)uc(t,s,u),u=u.sibling}function uc(t,s,u){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Au,u)}catch{}switch(u.tag){case 5:wt||Er(u,s);case 6:var a=bt,l=us;bt=null,Us(t,s,u),bt=a,us=l,bt!==null&&(us?(t=bt,u=u.stateNode,t.nodeType===8?t.parentNode.removeChild(u):t.removeChild(u)):bt.removeChild(u.stateNode));break;case 18:bt!==null&&(us?(t=bt,u=u.stateNode,t.nodeType===8?ya(t.parentNode,u):t.nodeType===1&&ya(t,u),Wr(t)):ya(bt,u.stateNode));break;case 4:a=bt,l=us,bt=u.stateNode.containerInfo,us=!0,Us(t,s,u),bt=a,us=l;break;case 0:case 11:case 14:case 15:if(!wt&&(a=u.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var i=l,x=i.destroy;i=i.tag,x!==void 0&&((i&2)!==0||(i&4)!==0)&&sl(u,s,x),l=l.next}while(l!==a)}Us(t,s,u);break;case 1:if(!wt&&(Er(u,s),a=u.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=u.memoizedProps,a.state=u.memoizedState,a.componentWillUnmount()}catch(O){it(u,s,O)}Us(t,s,u);break;case 21:Us(t,s,u);break;case 22:u.mode&1?(wt=(a=wt)||u.memoizedState!==null,Us(t,s,u),wt=a):Us(t,s,u);break;default:Us(t,s,u)}}function nc(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var u=t.stateNode;u===null&&(u=t.stateNode=new VC),s.forEach(function(a){var l=r0.bind(null,t,a);u.has(a)||(u.add(a),a.then(l,l))})}}function ns(t,s){var u=s.deletions;if(u!==null)for(var a=0;a<u.length;a++){var l=u[a];try{var i=t,x=s,O=x;e:for(;O!==null;){switch(O.tag){case 5:bt=O.stateNode,us=!1;break e;case 3:bt=O.stateNode.containerInfo,us=!0;break e;case 4:bt=O.stateNode.containerInfo,us=!0;break e}O=O.return}if(bt===null)throw Error(c(160));uc(i,x,l),bt=null,us=!1;var V=l.alternate;V!==null&&(V.return=null),l.return=null}catch(re){it(l,s,re)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ac(s,t),s=s.sibling}function ac(t,s){var u=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ns(s,t),xs(t),a&4){try{pu(3,t,t.return),xn(3,t)}catch(Ie){it(t,t.return,Ie)}try{pu(5,t,t.return)}catch(Ie){it(t,t.return,Ie)}}break;case 1:ns(s,t),xs(t),a&512&&u!==null&&Er(u,u.return);break;case 5:if(ns(s,t),xs(t),a&512&&u!==null&&Er(u,u.return),t.flags&32){var l=t.stateNode;try{Ae(l,"")}catch(Ie){it(t,t.return,Ie)}}if(a&4&&(l=t.stateNode,l!=null)){var i=t.memoizedProps,x=u!==null?u.memoizedProps:i,O=t.type,V=t.updateQueue;if(t.updateQueue=null,V!==null)try{O==="input"&&i.type==="radio"&&i.name!=null&&ie(l,i),Rt(O,x);var re=Rt(O,i);for(x=0;x<V.length;x+=2){var xe=V[x],he=V[x+1];xe==="style"?Ve(l,he):xe==="dangerouslySetInnerHTML"?et(l,he):xe==="children"?Ae(l,he):P(l,xe,he,re)}switch(O){case"input":Me(l,i);break;case"textarea":ne(l,i);break;case"select":var me=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var we=i.value;we!=null?oe(l,!!i.multiple,we,!1):me!==!!i.multiple&&(i.defaultValue!=null?oe(l,!!i.multiple,i.defaultValue,!0):oe(l,!!i.multiple,i.multiple?[]:"",!1))}l[nu]=i}catch(Ie){it(t,t.return,Ie)}}break;case 6:if(ns(s,t),xs(t),a&4){if(t.stateNode===null)throw Error(c(162));l=t.stateNode,i=t.memoizedProps;try{l.nodeValue=i}catch(Ie){it(t,t.return,Ie)}}break;case 3:if(ns(s,t),xs(t),a&4&&u!==null&&u.memoizedState.isDehydrated)try{Wr(s.containerInfo)}catch(Ie){it(t,t.return,Ie)}break;case 4:ns(s,t),xs(t);break;case 13:ns(s,t),xs(t),l=t.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(il=ot())),a&4&&nc(t);break;case 22:if(xe=u!==null&&u.memoizedState!==null,t.mode&1?(wt=(re=wt)||xe,ns(s,t),wt=re):ns(s,t),xs(t),a&8192){if(re=t.memoizedState!==null,(t.stateNode.isHidden=re)&&!xe&&(t.mode&1)!==0)for(Se=t,xe=t.child;xe!==null;){for(he=Se=xe;Se!==null;){switch(me=Se,we=me.child,me.tag){case 0:case 11:case 14:case 15:pu(4,me,me.return);break;case 1:Er(me,me.return);var Fe=me.stateNode;if(typeof Fe.componentWillUnmount=="function"){a=me,u=me.return;try{s=a,Fe.props=s.memoizedProps,Fe.state=s.memoizedState,Fe.componentWillUnmount()}catch(Ie){it(a,u,Ie)}}break;case 5:Er(me,me.return);break;case 22:if(me.memoizedState!==null){oc(he);continue}}we!==null?(we.return=me,Se=we):oc(he)}xe=xe.sibling}e:for(xe=null,he=t;;){if(he.tag===5){if(xe===null){xe=he;try{l=he.stateNode,re?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(O=he.stateNode,V=he.memoizedProps.style,x=V!=null&&V.hasOwnProperty("display")?V.display:null,O.style.display=Ke("display",x))}catch(Ie){it(t,t.return,Ie)}}}else if(he.tag===6){if(xe===null)try{he.stateNode.nodeValue=re?"":he.memoizedProps}catch(Ie){it(t,t.return,Ie)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===t)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===t)break e;for(;he.sibling===null;){if(he.return===null||he.return===t)break e;xe===he&&(xe=null),he=he.return}xe===he&&(xe=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ns(s,t),xs(t),a&4&&nc(t);break;case 21:break;default:ns(s,t),xs(t)}}function xs(t){var s=t.flags;if(s&2){try{e:{for(var u=t.return;u!==null;){if(sc(u)){var a=u;break e}u=u.return}throw Error(c(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(Ae(l,""),a.flags&=-33);var i=rc(t);nl(t,i,l);break;case 3:case 4:var x=a.stateNode.containerInfo,O=rc(t);ul(t,O,x);break;default:throw Error(c(161))}}catch(V){it(t,t.return,V)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function qC(t,s,u){Se=t,lc(t)}function lc(t,s,u){for(var a=(t.mode&1)!==0;Se!==null;){var l=Se,i=l.child;if(l.tag===22&&a){var x=l.memoizedState!==null||mn;if(!x){var O=l.alternate,V=O!==null&&O.memoizedState!==null||wt;O=mn;var re=wt;if(mn=x,(wt=V)&&!re)for(Se=l;Se!==null;)x=Se,V=x.child,x.tag===22&&x.memoizedState!==null?cc(l):V!==null?(V.return=x,Se=V):cc(l);for(;i!==null;)Se=i,lc(i),i=i.sibling;Se=l,mn=O,wt=re}ic(t)}else(l.subtreeFlags&8772)!==0&&i!==null?(i.return=l,Se=i):ic(t)}}function ic(t){for(;Se!==null;){var s=Se;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:wt||xn(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!wt)if(u===null)a.componentDidMount();else{var l=s.elementType===s.type?u.memoizedProps:rs(s.type,u.memoizedProps);a.componentDidUpdate(l,u.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&io(s,i,a);break;case 3:var x=s.updateQueue;if(x!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}io(s,x,u)}break;case 5:var O=s.stateNode;if(u===null&&s.flags&4){u=O;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&u.focus();break;case"img":V.src&&(u.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var re=s.alternate;if(re!==null){var xe=re.memoizedState;if(xe!==null){var he=xe.dehydrated;he!==null&&Wr(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}wt||s.flags&512&&rl(s)}catch(me){it(s,s.return,me)}}if(s===t){Se=null;break}if(u=s.sibling,u!==null){u.return=s.return,Se=u;break}Se=s.return}}function oc(t){for(;Se!==null;){var s=Se;if(s===t){Se=null;break}var u=s.sibling;if(u!==null){u.return=s.return,Se=u;break}Se=s.return}}function cc(t){for(;Se!==null;){var s=Se;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{xn(4,s)}catch(V){it(s,u,V)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var l=s.return;try{a.componentDidMount()}catch(V){it(s,l,V)}}var i=s.return;try{rl(s)}catch(V){it(s,i,V)}break;case 5:var x=s.return;try{rl(s)}catch(V){it(s,x,V)}}}catch(V){it(s,s.return,V)}if(s===t){Se=null;break}var O=s.sibling;if(O!==null){O.return=s.return,Se=O;break}Se=s.return}}var GC=Math.ceil,gn=z.ReactCurrentDispatcher,al=z.ReactCurrentOwner,qt=z.ReactCurrentBatchConfig,Je=0,ht=null,Ct=null,Bt=0,Ut=0,Sr=Ms(0),gt=0,hu=null,ar=0,pn=0,ll=0,fu=null,Lt=null,il=0,Fr=1/0,As=null,hn=!1,ol=null,Hs=null,fn=!1,Ys=null,yn=0,yu=0,cl=null,bn=-1,Bn=0;function Et(){return(Je&6)!==0?ot():bn!==-1?bn:bn=ot()}function Qs(t){return(t.mode&1)===0?1:(Je&2)!==0&&Bt!==0?Bt&-Bt:TC.transition!==null?(Bn===0&&(Bn=si()),Bn):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:di(t.type)),t)}function as(t,s,u,a){if(50<yu)throw yu=0,cl=null,Error(c(185));Hr(t,u,a),((Je&2)===0||t!==ht)&&(t===ht&&((Je&2)===0&&(pn|=u),gt===4&&Ks(t,Bt)),Pt(t,a),u===1&&Je===0&&(s.mode&1)===0&&(Fr=ot()+500,Wu&&$s()))}function Pt(t,s){var u=t.callbackNode;Td(t,s);var a=_u(t,t===ht?Bt:0);if(a===0)u!==null&&Zl(u),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(u!=null&&Zl(u),s===1)t.tag===0?FC(Cc.bind(null,t)):Gi(Cc.bind(null,t)),kC(function(){(Je&6)===0&&$s()}),u=null;else{switch(ri(a)){case 1:u=Yn;break;case 4:u=ei;break;case 16:u=Nu;break;case 536870912:u=ti;break;default:u=Nu}u=bc(u,dc.bind(null,t))}t.callbackPriority=s,t.callbackNode=u}}function dc(t,s){if(bn=-1,Bn=0,(Je&6)!==0)throw Error(c(327));var u=t.callbackNode;if(Tr()&&t.callbackNode!==u)return null;var a=_u(t,t===ht?Bt:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=vn(t,a);else{s=a;var l=Je;Je|=2;var i=xc();(ht!==t||Bt!==s)&&(As=null,Fr=ot()+500,ir(t,s));do try{ZC();break}catch(O){mc(t,O)}while(!0);_a(),gn.current=i,Je=l,Ct!==null?s=0:(ht=null,Bt=0,s=gt)}if(s!==0){if(s===2&&(l=Qn(t),l!==0&&(a=l,s=dl(t,l))),s===1)throw u=hu,ir(t,0),Ks(t,a),Pt(t,ot()),u;if(s===6)Ks(t,a);else{if(l=t.current.alternate,(a&30)===0&&!JC(l)&&(s=vn(t,a),s===2&&(i=Qn(t),i!==0&&(a=i,s=dl(t,i))),s===1))throw u=hu,ir(t,0),Ks(t,a),Pt(t,ot()),u;switch(t.finishedWork=l,t.finishedLanes=a,s){case 0:case 1:throw Error(c(345));case 2:or(t,Lt,As);break;case 3:if(Ks(t,a),(a&130023424)===a&&(s=il+500-ot(),10<s)){if(_u(t,0)!==0)break;if(l=t.suspendedLanes,(l&a)!==a){Et(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=fa(or.bind(null,t,Lt,As),s);break}or(t,Lt,As);break;case 4:if(Ks(t,a),(a&4194240)===a)break;for(s=t.eventTimes,l=-1;0<a;){var x=31-es(a);i=1<<x,x=s[x],x>l&&(l=x),a&=~i}if(a=l,a=ot()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*GC(a/1960))-a,10<a){t.timeoutHandle=fa(or.bind(null,t,Lt,As),a);break}or(t,Lt,As);break;case 5:or(t,Lt,As);break;default:throw Error(c(329))}}}return Pt(t,ot()),t.callbackNode===u?dc.bind(null,t):null}function dl(t,s){var u=fu;return t.current.memoizedState.isDehydrated&&(ir(t,s).flags|=256),t=vn(t,s),t!==2&&(s=Lt,Lt=u,s!==null&&Cl(s)),t}function Cl(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function JC(t){for(var s=t;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var a=0;a<u.length;a++){var l=u[a],i=l.getSnapshot;l=l.value;try{if(!ts(i(),l))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(t,s){for(s&=~ll,s&=~pn,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var u=31-es(s),a=1<<u;t[u]=-1,s&=~a}}function Cc(t){if((Je&6)!==0)throw Error(c(327));Tr();var s=_u(t,0);if((s&1)===0)return Pt(t,ot()),null;var u=vn(t,s);if(t.tag!==0&&u===2){var a=Qn(t);a!==0&&(s=a,u=dl(t,a))}if(u===1)throw u=hu,ir(t,0),Ks(t,s),Pt(t,ot()),u;if(u===6)throw Error(c(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,or(t,Lt,As),Pt(t,ot()),null}function ml(t,s){var u=Je;Je|=1;try{return t(s)}finally{Je=u,Je===0&&(Fr=ot()+500,Wu&&$s())}}function lr(t){Ys!==null&&Ys.tag===0&&(Je&6)===0&&Tr();var s=Je;Je|=1;var u=qt.transition,a=Ze;try{if(qt.transition=null,Ze=1,t)return t()}finally{Ze=a,qt.transition=u,Je=s,(Je&6)===0&&$s()}}function xl(){Ut=Sr.current,rt(Sr)}function ir(t,s){t.finishedWork=null,t.finishedLanes=0;var u=t.timeoutHandle;if(u!==-1&&(t.timeoutHandle=-1,wC(u)),Ct!==null)for(u=Ct.return;u!==null;){var a=u;switch(Da(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ku();break;case 3:kr(),rt(Ft),rt(Dt),Ma();break;case 5:La(a);break;case 4:kr();break;case 13:rt(at);break;case 19:rt(at);break;case 10:Ea(a.type._context);break;case 22:case 23:xl()}u=u.return}if(ht=t,Ct=t=Vs(t.current,null),Bt=Ut=s,gt=0,hu=null,ll=pn=ar=0,Lt=fu=null,rr!==null){for(s=0;s<rr.length;s++)if(u=rr[s],a=u.interleaved,a!==null){u.interleaved=null;var l=a.next,i=u.pending;if(i!==null){var x=i.next;i.next=l,a.next=x}u.pending=a}rr=null}return t}function mc(t,s){do{var u=Ct;try{if(_a(),un.current=on,nn){for(var a=lt.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}nn=!1}if(nr=0,pt=xt=lt=null,du=!1,Cu=0,al.current=null,u===null||u.return===null){gt=1,hu=s,Ct=null;break}e:{var i=t,x=u.return,O=u,V=s;if(s=Bt,O.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var re=V,xe=O,he=xe.tag;if((xe.mode&1)===0&&(he===0||he===11||he===15)){var me=xe.alternate;me?(xe.updateQueue=me.updateQueue,xe.memoizedState=me.memoizedState,xe.lanes=me.lanes):(xe.updateQueue=null,xe.memoizedState=null)}var we=Ro(x);if(we!==null){we.flags&=-257,$o(we,x,O,i,s),we.mode&1&&Mo(i,re,s),s=we,V=re;var Fe=s.updateQueue;if(Fe===null){var Ie=new Set;Ie.add(V),s.updateQueue=Ie}else Fe.add(V);break e}else{if((s&1)===0){Mo(i,re,s),gl();break e}V=Error(c(426))}}else if(nt&&O.mode&1){var ct=Ro(x);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),$o(ct,x,O,i,s),wa(_r(V,O));break e}}i=V=_r(V,O),gt!==4&&(gt=2),fu===null?fu=[i]:fu.push(i),i=x;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var ee=Lo(i,V,s);lo(i,ee);break e;case 1:O=V;var X=i.type,te=i.stateNode;if((i.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Hs===null||!Hs.has(te)))){i.flags|=65536,s&=-s,i.lanes|=s;var Be=Po(i,O,s);lo(i,Be);break e}}i=i.return}while(i!==null)}pc(u)}catch(Le){s=Le,Ct===u&&u!==null&&(Ct=u=u.return);continue}break}while(!0)}function xc(){var t=gn.current;return gn.current=on,t===null?on:t}function gl(){(gt===0||gt===3||gt===2)&&(gt=4),ht===null||(ar&268435455)===0&&(pn&268435455)===0||Ks(ht,Bt)}function vn(t,s){var u=Je;Je|=2;var a=xc();(ht!==t||Bt!==s)&&(As=null,ir(t,s));do try{XC();break}catch(l){mc(t,l)}while(!0);if(_a(),Je=u,gn.current=a,Ct!==null)throw Error(c(261));return ht=null,Bt=0,gt}function XC(){for(;Ct!==null;)gc(Ct)}function ZC(){for(;Ct!==null&&!Dd();)gc(Ct)}function gc(t){var s=yc(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,s===null?pc(t):Ct=s,al.current=null}function pc(t){var s=t;do{var u=s.alternate;if(t=s.return,(s.flags&32768)===0){if(u=QC(u,s,Ut),u!==null){Ct=u;return}}else{if(u=KC(u,s),u!==null){u.flags&=32767,Ct=u;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,Ct=null;return}}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=t}while(s!==null);gt===0&&(gt=5)}function or(t,s,u){var a=Ze,l=qt.transition;try{qt.transition=null,Ze=1,e0(t,s,u,a)}finally{qt.transition=l,Ze=a}return null}function e0(t,s,u,a){do Tr();while(Ys!==null);if((Je&6)!==0)throw Error(c(327));u=t.finishedWork;var l=t.finishedLanes;if(u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(c(177));t.callbackNode=null,t.callbackPriority=0;var i=u.lanes|u.childLanes;if(Id(t,i),t===ht&&(Ct=ht=null,Bt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||fn||(fn=!0,bc(Nu,function(){return Tr(),null})),i=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||i){i=qt.transition,qt.transition=null;var x=Ze;Ze=1;var O=Je;Je|=4,al.current=null,WC(t,u),ac(u,t),bC(pa),Fu=!!ga,pa=ga=null,t.current=u,qC(u),Nd(),Je=O,Ze=x,qt.transition=i}else t.current=u;if(fn&&(fn=!1,Ys=t,yn=l),i=t.pendingLanes,i===0&&(Hs=null),kd(u.stateNode),Pt(t,ot()),s!==null)for(a=t.onRecoverableError,u=0;u<s.length;u++)l=s[u],a(l.value,{componentStack:l.stack,digest:l.digest});if(hn)throw hn=!1,t=ol,ol=null,t;return(yn&1)!==0&&t.tag!==0&&Tr(),i=t.pendingLanes,(i&1)!==0?t===cl?yu++:(yu=0,cl=t):yu=0,$s(),null}function Tr(){if(Ys!==null){var t=ri(yn),s=qt.transition,u=Ze;try{if(qt.transition=null,Ze=16>t?16:t,Ys===null)var a=!1;else{if(t=Ys,Ys=null,yn=0,(Je&6)!==0)throw Error(c(331));var l=Je;for(Je|=4,Se=t.current;Se!==null;){var i=Se,x=i.child;if((Se.flags&16)!==0){var O=i.deletions;if(O!==null){for(var V=0;V<O.length;V++){var re=O[V];for(Se=re;Se!==null;){var xe=Se;switch(xe.tag){case 0:case 11:case 15:pu(8,xe,i)}var he=xe.child;if(he!==null)he.return=xe,Se=he;else for(;Se!==null;){xe=Se;var me=xe.sibling,we=xe.return;if(tc(xe),xe===re){Se=null;break}if(me!==null){me.return=we,Se=me;break}Se=we}}}var Fe=i.alternate;if(Fe!==null){var Ie=Fe.child;if(Ie!==null){Fe.child=null;do{var ct=Ie.sibling;Ie.sibling=null,Ie=ct}while(Ie!==null)}}Se=i}}if((i.subtreeFlags&2064)!==0&&x!==null)x.return=i,Se=x;else e:for(;Se!==null;){if(i=Se,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:pu(9,i,i.return)}var ee=i.sibling;if(ee!==null){ee.return=i.return,Se=ee;break e}Se=i.return}}var X=t.current;for(Se=X;Se!==null;){x=Se;var te=x.child;if((x.subtreeFlags&2064)!==0&&te!==null)te.return=x,Se=te;else e:for(x=X;Se!==null;){if(O=Se,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:xn(9,O)}}catch(Le){it(O,O.return,Le)}if(O===x){Se=null;break e}var Be=O.sibling;if(Be!==null){Be.return=O.return,Se=Be;break e}Se=O.return}}if(Je=l,$s(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Au,t)}catch{}a=!0}return a}finally{Ze=u,qt.transition=s}}return!1}function hc(t,s,u){s=_r(u,s),s=Lo(t,s,1),t=zs(t,s,1),s=Et(),t!==null&&(Hr(t,1,s),Pt(t,s))}function it(t,s,u){if(t.tag===3)hc(t,t,u);else for(;s!==null;){if(s.tag===3){hc(s,t,u);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Hs===null||!Hs.has(a))){t=_r(u,t),t=Po(s,t,1),s=zs(s,t,1),t=Et(),s!==null&&(Hr(s,1,t),Pt(s,t));break}}s=s.return}}function t0(t,s,u){var a=t.pingCache;a!==null&&a.delete(s),s=Et(),t.pingedLanes|=t.suspendedLanes&u,ht===t&&(Bt&u)===u&&(gt===4||gt===3&&(Bt&130023424)===Bt&&500>ot()-il?ir(t,0):ll|=u),Pt(t,s)}function fc(t,s){s===0&&((t.mode&1)===0?s=1:(s=ku,ku<<=1,(ku&130023424)===0&&(ku=4194304)));var u=Et();t=js(t,s),t!==null&&(Hr(t,s,u),Pt(t,u))}function s0(t){var s=t.memoizedState,u=0;s!==null&&(u=s.retryLane),fc(t,u)}function r0(t,s){var u=0;switch(t.tag){case 13:var a=t.stateNode,l=t.memoizedState;l!==null&&(u=l.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(c(314))}a!==null&&a.delete(s),fc(t,u)}var yc;yc=function(t,s,u){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ft.current)It=!0;else{if((t.lanes&u)===0&&(s.flags&128)===0)return It=!1,YC(t,s,u);It=(t.flags&131072)!==0}else It=!1,nt&&(s.flags&1048576)!==0&&Ji(s,Gu,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Cn(t,s),t=s.pendingProps;var l=Br(s,Dt.current);wr(s,u),l=Oa(null,s,a,t,l,u);var i=za();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Tt(a)?(i=!0,Vu(s)):i=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ta(s),l.updater=cn,s.stateNode=l,l._reactInternals=s,Va(s,a,t,u),s=Ga(null,s,a,!0,i,u)):(s.tag=0,nt&&i&&ja(s),_t(null,s,l,u),s=s.child),s;case 16:a=s.elementType;e:{switch(Cn(t,s),t=s.pendingProps,l=a._init,a=l(a._payload),s.type=a,l=s.tag=n0(a),t=rs(a,t),l){case 0:s=qa(null,s,a,t,u);break e;case 1:s=Qo(null,s,a,t,u);break e;case 11:s=Oo(null,s,a,t,u);break e;case 14:s=zo(null,s,a,rs(a.type,t),u);break e}throw Error(c(306,a,""))}return s;case 0:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:rs(a,l),qa(t,s,a,l,u);case 1:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:rs(a,l),Qo(t,s,a,l,u);case 3:e:{if(Ko(s),t===null)throw Error(c(387));a=s.pendingProps,i=s.memoizedState,l=i.element,ao(t,s),sn(s,a,null,u);var x=s.memoizedState;if(a=x.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){l=_r(Error(c(423)),s),s=Vo(t,s,a,u,l);break e}else if(a!==l){l=_r(Error(c(424)),s),s=Vo(t,s,a,u,l);break e}else for(zt=Ps(s.stateNode.containerInfo.firstChild),Ot=s,nt=!0,ss=null,u=uo(s,null,a,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Dr(),a===l){s=Ns(t,s,u);break e}_t(t,s,a,u)}s=s.child}return s;case 5:return oo(s),t===null&&Aa(s),a=s.type,l=s.pendingProps,i=t!==null?t.memoizedProps:null,x=l.children,ha(a,l)?x=null:i!==null&&ha(a,i)&&(s.flags|=32),Yo(t,s),_t(t,s,x,u),s.child;case 6:return t===null&&Aa(s),null;case 13:return Wo(t,s,u);case 4:return Ia(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Nr(s,null,a,u):_t(t,s,a,u),s.child;case 11:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:rs(a,l),Oo(t,s,a,l,u);case 7:return _t(t,s,s.pendingProps,u),s.child;case 8:return _t(t,s,s.pendingProps.children,u),s.child;case 12:return _t(t,s,s.pendingProps.children,u),s.child;case 10:e:{if(a=s.type._context,l=s.pendingProps,i=s.memoizedProps,x=l.value,tt(Zu,a._currentValue),a._currentValue=x,i!==null)if(ts(i.value,x)){if(i.children===l.children&&!Ft.current){s=Ns(t,s,u);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var O=i.dependencies;if(O!==null){x=i.child;for(var V=O.firstContext;V!==null;){if(V.context===a){if(i.tag===1){V=Ds(-1,u&-u),V.tag=2;var re=i.updateQueue;if(re!==null){re=re.shared;var xe=re.pending;xe===null?V.next=V:(V.next=xe.next,xe.next=V),re.pending=V}}i.lanes|=u,V=i.alternate,V!==null&&(V.lanes|=u),Sa(i.return,u,s),O.lanes|=u;break}V=V.next}}else if(i.tag===10)x=i.type===s.type?null:i.child;else if(i.tag===18){if(x=i.return,x===null)throw Error(c(341));x.lanes|=u,O=x.alternate,O!==null&&(O.lanes|=u),Sa(x,u,s),x=i.sibling}else x=i.child;if(x!==null)x.return=i;else for(x=i;x!==null;){if(x===s){x=null;break}if(i=x.sibling,i!==null){i.return=x.return,x=i;break}x=x.return}i=x}_t(t,s,l.children,u),s=s.child}return s;case 9:return l=s.type,a=s.pendingProps.children,wr(s,u),l=Vt(l),a=a(l),s.flags|=1,_t(t,s,a,u),s.child;case 14:return a=s.type,l=rs(a,s.pendingProps),l=rs(a.type,l),zo(t,s,a,l,u);case 15:return Uo(t,s,s.type,s.pendingProps,u);case 17:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:rs(a,l),Cn(t,s),s.tag=1,Tt(a)?(t=!0,Vu(s)):t=!1,wr(s,u),To(s,a,l),Va(s,a,l,u),Ga(null,s,a,!0,t,u);case 19:return Go(t,s,u);case 22:return Ho(t,s,u)}throw Error(c(156,s.tag))};function bc(t,s){return Xl(t,s)}function u0(t,s,u,a){this.tag=t,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,s,u,a){return new u0(t,s,u,a)}function pl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function n0(t){if(typeof t=="function")return pl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===w)return 11;if(t===k)return 14}return 2}function Vs(t,s){var u=t.alternate;return u===null?(u=Gt(t.tag,s,t.key,t.mode),u.elementType=t.elementType,u.type=t.type,u.stateNode=t.stateNode,u.alternate=t,t.alternate=u):(u.pendingProps=s,u.type=t.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=t.flags&14680064,u.childLanes=t.childLanes,u.lanes=t.lanes,u.child=t.child,u.memoizedProps=t.memoizedProps,u.memoizedState=t.memoizedState,u.updateQueue=t.updateQueue,s=t.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=t.sibling,u.index=t.index,u.ref=t.ref,u}function jn(t,s,u,a,l,i){var x=2;if(a=t,typeof t=="function")pl(t)&&(x=1);else if(typeof t=="string")x=5;else e:switch(t){case g:return cr(u.children,l,i,s);case F:x=8,l|=8;break;case N:return t=Gt(12,u,s,l|2),t.elementType=N,t.lanes=i,t;case C:return t=Gt(13,u,s,l),t.elementType=C,t.lanes=i,t;case f:return t=Gt(19,u,s,l),t.elementType=f,t.lanes=i,t;case $:return Dn(u,l,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b:x=10;break e;case K:x=9;break e;case w:x=11;break e;case k:x=14;break e;case E:x=16,a=null;break e}throw Error(c(130,t==null?t:typeof t,""))}return s=Gt(x,u,s,l),s.elementType=t,s.type=a,s.lanes=i,s}function cr(t,s,u,a){return t=Gt(7,t,a,s),t.lanes=u,t}function Dn(t,s,u,a){return t=Gt(22,t,a,s),t.elementType=$,t.lanes=u,t.stateNode={isHidden:!1},t}function hl(t,s,u){return t=Gt(6,t,null,s),t.lanes=u,t}function fl(t,s,u){return s=Gt(4,t.children!==null?t.children:[],t.key,s),s.lanes=u,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function a0(t,s,u,a,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kn(0),this.expirationTimes=Kn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function yl(t,s,u,a,l,i,x,O,V){return t=new a0(t,s,u,O,V),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Gt(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(i),t}function l0(t,s,u){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:a==null?null:""+a,children:t,containerInfo:s,implementation:u}}function Bc(t){if(!t)return Rs;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(c(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Tt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(c(171))}if(t.tag===1){var u=t.type;if(Tt(u))return Wi(t,u,s)}return s}function vc(t,s,u,a,l,i,x,O,V){return t=yl(u,a,!0,t,l,i,x,O,V),t.context=Bc(null),u=t.current,a=Et(),l=Qs(u),i=Ds(a,l),i.callback=s??null,zs(u,i,l),t.current.lanes=l,Hr(t,l,a),Pt(t,a),t}function Nn(t,s,u,a){var l=s.current,i=Et(),x=Qs(l);return u=Bc(u),s.context===null?s.context=u:s.pendingContext=u,s=Ds(i,x),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=zs(l,s,x),t!==null&&(as(t,l,x,i),tn(t,l,x)),x}function An(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jc(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var u=t.retryLane;t.retryLane=u!==0&&u<s?u:s}}function bl(t,s){jc(t,s),(t=t.alternate)&&jc(t,s)}function i0(){return null}var Dc=typeof reportError=="function"?reportError:function(t){};function Bl(t){this._internalRoot=t}wn.prototype.render=Bl.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(c(409));Nn(t,s,null,null)},wn.prototype.unmount=Bl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;lr(function(){Nn(null,t,null,null)}),s[ys]=null}};function wn(t){this._internalRoot=t}wn.prototype.unstable_scheduleHydration=function(t){if(t){var s=ai();t={blockedOn:null,target:t,priority:s};for(var u=0;u<Ts.length&&s!==0&&s<Ts[u].priority;u++);Ts.splice(u,0,t),u===0&&oi(t)}};function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kn(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nc(){}function o0(t,s,u,a,l){if(l){if(typeof a=="function"){var i=a;a=function(){var re=An(x);i.call(re)}}var x=vc(s,a,t,0,null,!1,!1,"",Nc);return t._reactRootContainer=x,t[ys]=x.current,ru(t.nodeType===8?t.parentNode:t),lr(),x}for(;l=t.lastChild;)t.removeChild(l);if(typeof a=="function"){var O=a;a=function(){var re=An(V);O.call(re)}}var V=yl(t,0,!1,null,null,!1,!1,"",Nc);return t._reactRootContainer=V,t[ys]=V.current,ru(t.nodeType===8?t.parentNode:t),lr(function(){Nn(s,V,u,a)}),V}function _n(t,s,u,a,l){var i=u._reactRootContainer;if(i){var x=i;if(typeof l=="function"){var O=l;l=function(){var V=An(x);O.call(V)}}Nn(s,x,t,l)}else x=o0(u,s,t,l,a);return An(x)}ui=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var u=Ur(s.pendingLanes);u!==0&&(Vn(s,u|1),Pt(s,ot()),(Je&6)===0&&(Fr=ot()+500,$s()))}break;case 13:lr(function(){var a=js(t,1);if(a!==null){var l=Et();as(a,t,1,l)}}),bl(t,1)}},Wn=function(t){if(t.tag===13){var s=js(t,134217728);if(s!==null){var u=Et();as(s,t,134217728,u)}bl(t,134217728)}},ni=function(t){if(t.tag===13){var s=Qs(t),u=js(t,s);if(u!==null){var a=Et();as(u,t,s,a)}bl(t,s)}},ai=function(){return Ze},li=function(t,s){var u=Ze;try{return Ze=t,s()}finally{Ze=u}},_s=function(t,s,u){switch(s){case"input":if(Me(t,u),s=u.name,u.type==="radio"&&s!=null){for(u=t;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var a=u[s];if(a!==t&&a.form===t.form){var l=Qu(a);if(!l)throw Error(c(90));Ee(a),Me(a,l)}}}break;case"textarea":ne(t,u);break;case"select":s=u.value,s!=null&&oe(t,!!u.multiple,s,!1)}},Ql=ml,Kl=lr;var c0={usingClientEntryPoint:!1,Events:[au,yr,Qu,Hl,Yl,ml]},bu={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d0={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gl(t),t===null?null:t.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||i0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var En=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!En.isDisabled&&En.supportsFiber)try{Au=En.inject(d0),cs=En}catch{}}return Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c0,Mt.createPortal=function(t,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vl(s))throw Error(c(200));return l0(t,s,null,u)},Mt.createRoot=function(t,s){if(!vl(t))throw Error(c(299));var u=!1,a="",l=Dc;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=yl(t,1,!1,null,null,u,!1,a,l),t[ys]=s.current,ru(t.nodeType===8?t.parentNode:t),new Bl(s)},Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=Gl(s),t=t===null?null:t.stateNode,t},Mt.flushSync=function(t){return lr(t)},Mt.hydrate=function(t,s,u){if(!kn(s))throw Error(c(200));return _n(null,t,s,!0,u)},Mt.hydrateRoot=function(t,s,u){if(!vl(t))throw Error(c(405));var a=u!=null&&u.hydratedSources||null,l=!1,i="",x=Dc;if(u!=null&&(u.unstable_strictMode===!0&&(l=!0),u.identifierPrefix!==void 0&&(i=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),s=vc(s,null,t,1,u??null,l,!1,i,x),t[ys]=s.current,ru(t),a)for(t=0;t<a.length;t++)u=a[t],l=u._getVersion,l=l(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,l]:s.mutableSourceEagerHydrationData.push(u,l);return new wn(s)},Mt.render=function(t,s,u){if(!kn(s))throw Error(c(200));return _n(null,t,s,!1,u)},Mt.unmountComponentAtNode=function(t){if(!kn(t))throw Error(c(40));return t._reactRootContainer?(lr(function(){_n(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1},Mt.unstable_batchedUpdates=ml,Mt.unstable_renderSubtreeIntoContainer=function(t,s,u,a){if(!kn(u))throw Error(c(200));if(t==null||t._reactInternals===void 0)throw Error(c(38));return _n(t,s,u,!1,a)},Mt.version="18.3.1-next-f1338f8080-20240426",Mt}var Tc;function y0(){if(Tc)return Nl.exports;Tc=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch{}}return r(),Nl.exports=f0(),Nl.exports}var Ic;function b0(){if(Ic)return Sn;Ic=1;var r=y0();return Sn.createRoot=r.createRoot,Sn.hydrateRoot=r.hydrateRoot,Sn}var B0=b0();const v0=rd(B0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D0=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,c,d)=>d?d.toUpperCase():c.toLowerCase()),Lc=r=>{const n=D0(r);return n.charAt(0).toUpperCase()+n.slice(1)},ud=(...r)=>r.filter((n,c,d)=>!!n&&n.trim()!==""&&d.indexOf(n)===c).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=o.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:p="",children:m,iconNode:v,...I},D)=>o.createElement("svg",{ref:D,...N0,width:n,height:n,stroke:r,strokeWidth:d?Number(c)*24/Number(n):c,className:ud("lucide",p),...I},[...v.map(([R,_])=>o.createElement(R,_)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(r,n)=>{const c=o.forwardRef(({className:d,...p},m)=>o.createElement(A0,{ref:m,iconNode:n,className:ud(`lucide-${j0(Lc(r))}`,`lucide-${r}`,d),...p}));return c.displayName=Lc(r),c};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rn=Ye("arrow-left",w0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Il=Ye("award",k0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],vt=Ye("book-open",_0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],S0=Ye("book-plus",E0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ln=Ye("briefcase",F0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],I0=Ye("calendar",T0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P0=Ye("chart-column",L0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ll=Ye("check",M0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dr=Ye("chevron-down",R0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Jt=Ye("chevron-right",$0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],z0=Ye("chevron-up",O0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],H0=Ye("circle-alert",U0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ls=Ye("circle-check-big",Y0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],ps=Ye("clipboard-check",Q0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ir=Ye("clipboard-list",K0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lr=Ye("clock",V0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],q0=Ye("compass",W0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Pr=Ye("download",G0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Tn=Ye("file-question",J0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hs=Ye("file-text",X0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Pc=Ye("film",Z0);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$n=Ye("folder-open",em);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sm=Ye("folder-plus",tm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Mc=Ye("folder-tree",rm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nm=Ye("funnel",um);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],kl=Ye("graduation-cap",am);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],im=Ye("heart",lm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qs=Ye("info",om);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dm=Ye("layers",cm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],mm=Ye("library",Cm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Rc=Ye("link",xm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],nd=Ye("list",gm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yt=Ye("loader-circle",pm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ks=Ye("message-square",hm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],$l=Ye("play",fm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yt=Ye("plus",ym);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ad=Ye("printer",bm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vm=Ye("refresh-cw",Bm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],is=Ye("save",jm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],kt=Ye("search",Dm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ld=Ye("settings",Nm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xt=Ye("square-pen",Am);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],jt=Ye("trash-2",wm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Mr=Ye("upload",km);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Em=Ye("user",_m);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],vu=Ye("users",Sm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Rr=Ye("video",Fm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dt=Ye("x",Tm);function We(r){const n=new URLSearchParams;Object.entries(r).forEach(([d,p])=>{p==null||p===""||n.set(d,String(p))});const c=n.toString();return c?`?${c}`:""}async function ge(r,n){const c=await fetch(r,n),d=c.headers.get("content-type")||"",p=await c.text();let m=null;const v=p.trim();if(d.includes("application/json")||v.startsWith("{")||v.startsWith("["))try{m=JSON.parse(p)}catch{m=null}if(!m||typeof m.rst_code!="string"){const D=c.ok?"\uC11C\uBC84 \uC751\uB2F5\uC774 JSON\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.":`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958(${c.status}). \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.`;throw new Error(D)}return m}const le={async getDashboard(){return ge("/tutor_lms/api/dashboard.jsp")},async getCourseResolve(r){const n=`/tutor_lms/api/course_resolve.jsp${We({course_id:r.courseId,source_type:r.sourceType})}`;return ge(n)},async getPrograms(r={}){const n=`/tutor_lms/api/program_list.jsp${We({s_keyword:r.keyword})}`;return ge(n)},async getHomeworkSubmissions(r={}){const n=`/tutor_lms/api/homework_submissions.jsp${We({s_keyword:r.keyword,page:r.page,page_size:r.pageSize,start_date:r.startDate,end_date:r.endDate,status:r.status})}`;return ge(n)},async getQnaManageList(r={}){const n=`/tutor_lms/api/qna_manage_list.jsp${We({s_keyword:r.keyword,page:r.page,page_size:r.pageSize,start_date:r.startDate,end_date:r.endDate,status:r.status})}`;return ge(n)},async getCourseFeedbackReport(r){const n=`/tutor_lms/api/course_feedback_report.jsp${We({course_id:r.courseId,start_date:r.startDate,end_date:r.endDate})}`;return ge(n)},async getProgram(r){const n=`/tutor_lms/api/program_view.jsp${We({id:r})}`;return ge(n)},async createProgram(r){const n=new URLSearchParams;return n.set("course_nm",r.courseName),n.set("start_date",r.startDate),n.set("end_date",r.endDate),n.set("plan_json",r.planJson),ge("/tutor_lms/api/program_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getProgramCourses(r){const n=`/tutor_lms/api/program_course_list.jsp${We({program_id:r.programId})}`;return ge(n)},async modifyProgram(r){const n=new URLSearchParams;return n.set("id",String(r.id)),n.set("course_nm",r.courseName),r.startDate!==void 0&&n.set("start_date",r.startDate),r.endDate!==void 0&&n.set("end_date",r.endDate),r.planJson!==void 0&&n.set("plan_json",r.planJson),ge("/tutor_lms/api/program_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteProgram(r){const n=new URLSearchParams;return n.set("id",String(r.id)),ge("/tutor_lms/api/program_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCourseYears(r={}){const n=`/tutor_lms/api/course_years.jsp${We({tutor_id:r.tutorId})}`;return ge(n)},async getMyCourses(r={}){const n=`/tutor_lms/api/course_list.jsp${We({year:r.year,s_keyword:r.keyword})}`;return ge(n)},async getPolyCourses(r={}){const n=`/tutor_lms/api/course_list_poly.jsp${We({year:r.year})}`;return ge(n)},async getMyCoursesCombined(r={tab:"prism"}){const n=`/tutor_lms/api/course_list_combined.jsp${We({tab:r.tab,year:r.year,s_keyword:r.keyword,page:r.page,page_size:r.pageSize,haksa_category:r.haksaCategory,haksa_grad:r.haksaGrad,haksa_curriculum:r.haksaCurriculum,sort_order:r.sortOrder})}`;return ge(n)},async getTutors(){return ge("/tutor_lms/api/tutor_list.jsp")},async copyCourse(r){const n=new URLSearchParams;return n.set("source_course_id",String(r.sourceCourseId)),n.set("course_nm",r.courseName),n.set("tutor_id",String(r.tutorId)),ge("/tutor_lms/api/course_copy.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async setCourseProgram(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("program_id",String(r.programId)),ge("/tutor_lms/api/course_set_program.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCourseInfo(r){const n=`/tutor_lms/api/course_info_get.jsp${We({course_id:r.courseId,_t:Date.now()})}`;return ge(n)},async updateCourseInfo(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("content1",r.content1),n.set("content2",r.content2),ge("/tutor_lms/api/course_info_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateCourseEvaluation(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("assign_progress",String(r.assignProgress)),n.set("assign_exam",String(r.assignExam)),n.set("assign_homework",String(r.assignHomework)),n.set("assign_forum",String(r.assignForum)),n.set("assign_etc",String(r.assignEtc)),n.set("assign_survey_yn",r.assignSurveyYn),n.set("push_survey_yn",r.pushSurveyYn),n.set("pass_yn",r.passYn),n.set("limit_total_score",String(r.limitTotalScore)),n.set("limit_progress",String(r.limitProgress)),n.set("complete_limit_progress",String(r.completeLimitProgress)),n.set("complete_limit_total_score",String(r.completeLimitTotalScore)),ge("/tutor_lms/api/course_evaluation_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateCourseCertificateSettings(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("cert_complete_yn",r.certCompleteYn),n.set("cert_template_id",String(r.certTemplateId)),n.set("pass_cert_template_id",String(r.passCertTemplateId)),n.set("complete_no_yn",r.completeNoYn),n.set("complete_prefix",r.completePrefix),n.set("postfix_cnt",String(r.postfixCnt)),n.set("postfix_type",r.postfixType),n.set("postfix_ord",r.postfixOrd),ge("/tutor_lms/api/course_certificate_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async createCourse(r){const n=new URLSearchParams;return n.set("course_nm",r.courseName),n.set("year",r.year),n.set("study_sdate",r.studyStartDate),n.set("study_edate",r.studyEndDate),r.programId&&n.set("program_id",String(r.programId)),r.categoryId&&n.set("category_id",String(r.categoryId)),r.semester&&n.set("semester",r.semester),r.credit!==void 0&&r.credit!==null&&String(r.credit)!==""&&n.set("credit",String(r.credit)),r.lessonTime!==void 0&&r.lessonTime!==null&&String(r.lessonTime)!==""&&n.set("lesson_time",String(r.lessonTime)),r.content1&&n.set("content1",r.content1),r.content2&&n.set("content2",r.content2),r.courseFile&&n.set("course_file",r.courseFile),ge("/tutor_lms/api/course_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCourseCategories(){return ge("/tutor_lms/api/course_categories.jsp")},async getLearners(r={}){const n=`/tutor_lms/api/learner_list.jsp${We({s_keyword:r.keyword,dept_id:r.deptId,s_dept:r.deptKeyword,page:r.page,limit:r.limit})}`;return ge(n)},async uploadCourseImage(r){const n=new FormData;return n.set("course_file",r.file),r.courseId&&n.set("course_id",String(r.courseId)),ge("/tutor_lms/api/course_image_upload.jsp",{method:"POST",body:n})},async getKollusList(r={}){const n=`/tutor_lms/api/kollus_list.jsp${We({s_keyword:r.keyword,s_channel:r.channelKey,s_category:r.categoryKey,page:r.page,limit:r.limit,version:r.version})}`;return ge(n)},async getContentRecommendations(r){const n=new URLSearchParams;return r.courseName&&n.set("course_name",r.courseName),r.courseIntro&&n.set("course_intro",r.courseIntro),r.courseDetail&&n.set("course_detail",r.courseDetail),r.lessonTitle&&n.set("lesson_title",r.lessonTitle),r.lessonDescription&&n.set("lesson_description",r.lessonDescription),r.keywords&&n.set("keywords",r.keywords),r.topK!==void 0&&n.set("top_k",String(r.topK)),r.similarityThreshold!==void 0&&n.set("similarity_threshold",String(r.similarityThreshold)),ge("/tutor_lms/api/content_recommend.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getKollusWishlistList(r={}){const n=`/tutor_lms/api/kollus_wishlist_list.jsp${We({s_keyword:r.keyword,page:r.page,limit:r.limit})}`;return ge(n)},async toggleKollusWishlist(r){const n=new URLSearchParams;return n.set("media_content_key",r.mediaContentKey),r.title&&n.set("title",r.title),r.snapshotUrl&&n.set("snapshot_url",r.snapshotUrl),r.categoryKey&&n.set("category_key",r.categoryKey),r.categoryName&&n.set("category_nm",r.categoryName),r.originalFileName&&n.set("original_file_name",r.originalFileName),r.totalTime!==void 0&&n.set("total_time",String(r.totalTime)),r.contentWidth!==void 0&&n.set("content_width",String(r.contentWidth)),r.contentHeight!==void 0&&n.set("content_height",String(r.contentHeight)),ge("/tutor_lms/api/kollus_wishlist_toggle.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async upsertKollusLesson(r){const n=new URLSearchParams;return n.set("media_content_key",r.mediaContentKey),r.title&&n.set("title",r.title),r.totalTime!==void 0&&n.set("total_time",String(r.totalTime)),r.contentWidth!==void 0&&n.set("content_width",String(r.contentWidth)),r.contentHeight!==void 0&&n.set("content_height",String(r.contentHeight)),ge("/tutor_lms/api/kollus_lesson_upsert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async upsertExternalLinkLesson(r){const n=new URLSearchParams;return n.set("url",r.url),n.set("title",r.title),r.totalTime!==void 0&&n.set("total_time",String(r.totalTime)),ge("/tutor_lms/api/external_link_lesson_upsert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCurriculum(r){const n=`/tutor_lms/api/curriculum_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async insertCurriculumSection(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("section_nm",r.sectionName),ge("/tutor_lms/api/curriculum_section_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async modifyCurriculumSection(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("section_id",String(r.sectionId)),n.set("section_nm",r.sectionName),ge("/tutor_lms/api/curriculum_section_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteCurriculumSection(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("section_id",String(r.sectionId)),ge("/tutor_lms/api/curriculum_section_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async addCurriculumLesson(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("section_id",String(r.sectionId)),r.lessonId&&n.set("lesson_id",String(r.lessonId)),r.url&&n.set("url",r.url),r.title&&n.set("title",r.title),ge("/tutor_lms/api/curriculum_lesson_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteCurriculumLesson(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("lesson_id",String(r.lessonId)),ge("/tutor_lms/api/curriculum_lesson_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateCurriculumLesson(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("lesson_id",String(r.lessonId)),r.chapter!==void 0&&n.set("chapter",String(r.chapter)),r.sectionId!==void 0&&n.set("section_id",String(r.sectionId)),r.completeTime!==void 0&&n.set("complete_time",String(r.completeTime)),r.tutorId!==void 0&&n.set("tutor_id",String(r.tutorId)),r.startDate!==void 0&&n.set("start_date",r.startDate),r.endDate!==void 0&&n.set("end_date",r.endDate),ge("/tutor_lms/api/curriculum_lesson_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCourseStudents(r){const n=`/tutor_lms/api/course_students_list.jsp${We({course_id:r.courseId,s_keyword:r.keyword})}`;return ge(n)},async getHaksaCourseStudents(r){const n=`/tutor_lms/api/haksa_students_list.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode,s_keyword:r.keyword})}`;return ge(n)},async logPrivacyAccess(r){const n=new URLSearchParams;return n.set("log_type",r.logType),n.set("purpose",r.purpose),r.pageName&&n.set("page_nm",r.pageName),r.courseId!==void 0&&n.set("course_id",String(r.courseId)),r.userIds&&r.userIds.length>0&&n.set("user_ids",r.userIds.join(",")),r.userCnt!==void 0&&n.set("user_cnt",String(r.userCnt)),ge("/tutor_lms/api/privacy_log.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHaksaCourseEval(r){const n=`/tutor_lms/api/haksa_course_eval_get.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return ge(n)},async updateHaksaCourseEval(r){const n=new URLSearchParams;return n.set("course_code",r.courseCode),n.set("open_year",r.openYear),n.set("open_term",r.openTerm),n.set("bunban_code",r.bunbanCode),n.set("group_code",r.groupCode),n.set("eval_json",r.evalJson),ge("/tutor_lms/api/haksa_course_eval_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHaksaCurriculum(r){const n=`/tutor_lms/api/haksa_curriculum_get.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return ge(n)},async updateHaksaCurriculum(r){const n=new URLSearchParams;return n.set("course_code",r.courseCode),n.set("open_year",r.openYear),n.set("open_term",r.openTerm),n.set("bunban_code",r.bunbanCode),n.set("group_code",r.groupCode),n.set("curriculum_json",r.curriculumJson),ge("/tutor_lms/api/haksa_curriculum_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHaksaAttendance(r){const n=`/tutor_lms/api/haksa_attendance.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode,course_id:r.courseId,session_id:r.sessionId})}`;return ge(n)},async getHaksaExams(r){const n=`/tutor_lms/api/haksa_exam_get.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return ge(n)},async updateHaksaExams(r){const n=new URLSearchParams;return n.set("course_code",r.courseCode),n.set("open_year",r.openYear),n.set("open_term",r.openTerm),n.set("bunban_code",r.bunbanCode),n.set("group_code",r.groupCode),n.set("exams_json",r.examsJson),ge("/tutor_lms/api/haksa_exam_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHaksaGrades(r){const n=`/tutor_lms/api/haksa_grade_list.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return ge(n)},async resolveHaksaCourse(r){const n=`/tutor_lms/api/haksa_resolve.jsp${We({course_code:r.courseCode,open_year:r.openYear,open_term:r.openTerm,bunban_code:r.bunbanCode,group_code:r.groupCode})}`;return ge(n)},async updateHaksaGrades(r){const n=new URLSearchParams;return n.set("course_code",r.courseCode),n.set("open_year",r.openYear),n.set("open_term",r.openTerm),n.set("bunban_code",r.bunbanCode),n.set("group_code",r.groupCode),n.set("grades_json",r.gradesJson),ge("/tutor_lms/api/haksa_grade_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async addCourseStudents(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("user_ids",r.userIds.join(",")),ge("/tutor_lms/api/course_students_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async removeCourseStudent(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("user_id",String(r.userId)),ge("/tutor_lms/api/course_students_remove.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getProgressSummary(r){const n=`/tutor_lms/api/progress_summary.jsp${We({course_id:r.courseId})}`;return ge(n)},async getProgressStudents(r){const n=`/tutor_lms/api/progress_students.jsp${We({course_id:r.courseId,lesson_id:r.lessonId})}`;return ge(n)},async getProgressDetail(r){const n=`/tutor_lms/api/progress_detail.jsp${We({course_id:r.courseId,course_user_id:r.courseUserId,lesson_id:r.lessonId})}`;return ge(n)},async getExams(r){const n=`/tutor_lms/api/exam_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async createExam(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("title",r.title),n.set("description",r.description??""),n.set("examDate",r.examDate),n.set("examTime",r.examTime),r.examEndDate&&n.set("examEndDate",r.examEndDate),r.examEndTime&&n.set("examEndTime",r.examEndTime),n.set("duration",String(r.duration)),n.set("questionCount",String(r.questionCount??0)),n.set("totalScore",String(r.totalScore??100)),n.set("allowRetake",String(!!r.allowRetake)),n.set("showResults",String(r.showResults??!0)),n.set("onoff_type",r.onoffType??"F"),ge("/tutor_lms/api/exam_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateExam(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("exam_id",String(r.examId)),n.set("title",r.title),n.set("description",r.description??""),n.set("examDate",r.examDate),n.set("examTime",r.examTime),r.examEndDate&&n.set("examEndDate",r.examEndDate),r.examEndTime&&n.set("examEndTime",r.examEndTime),n.set("duration",String(r.duration)),n.set("questionCount",String(r.questionCount??0)),n.set("totalScore",String(r.totalScore??100)),n.set("allowRetake",String(!!r.allowRetake)),n.set("showResults",String(r.showResults??!0)),n.set("onoff_type",r.onoffType??"F"),ge("/tutor_lms/api/exam_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async linkExam(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("exam_id",String(r.examId)),r.startDate&&n.set("start_date",r.startDate),r.endDate&&n.set("end_date",r.endDate),r.assignScore!==void 0&&n.set("assign_score",String(r.assignScore)),r.allowRetake!==void 0&&n.set("retry_yn",r.allowRetake?"Y":"N"),r.showResults!==void 0&&n.set("result_yn",r.showResults?"Y":"N"),ge("/tutor_lms/api/exam_link.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteExam(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("exam_id",String(r.examId)),ge("/tutor_lms/api/exam_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getExamUsers(r){const n=`/tutor_lms/api/exam_users.jsp${We({course_id:r.courseId,exam_id:r.examId})}`;return ge(n)},async updateExamScore(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("exam_id",String(r.examId)),n.set("course_user_id",String(r.courseUserId)),n.set("marking_score",String(r.markingScore)),ge("/tutor_lms/api/exam_score_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async cancelExamSubmit(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("exam_id",String(r.examId)),n.set("course_user_id",String(r.courseUserId)),ge("/tutor_lms/api/exam_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHomeworks(r){const n=`/tutor_lms/api/homework_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async createHomework(r){const n=new FormData;return n.set("course_id",String(r.courseId)),n.set("title",r.title),n.set("description",r.description),n.set("dueDate",r.dueDate),n.set("dueTime",r.dueTime),n.set("totalScore",String(r.totalScore)),n.set("onoff_type",r.onoffType??"N"),r.file&&n.set("homework_file",r.file),ge("/tutor_lms/api/homework_insert.jsp",{method:"POST",body:n})},async updateHomework(r){const n=new FormData;return n.set("course_id",String(r.courseId)),n.set("homework_id",String(r.homeworkId)),n.set("title",r.title),n.set("description",r.description),n.set("dueDate",r.dueDate),n.set("dueTime",r.dueTime),n.set("totalScore",String(r.totalScore)),n.set("onoff_type",r.onoffType??"N"),r.file&&n.set("homework_file",r.file),ge("/tutor_lms/api/homework_modify.jsp",{method:"POST",body:n})},async deleteHomework(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("homework_id",String(r.homeworkId)),ge("/tutor_lms/api/homework_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHomeworkUsers(r){const n=`/tutor_lms/api/homework_users.jsp${We({course_id:r.courseId,homework_id:r.homeworkId})}`;return ge(n)},async updateHomeworkFeedback(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("homework_id",String(r.homeworkId)),n.set("course_user_id",String(r.courseUserId)),n.set("marking_score",String(r.markingScore)),n.set("feedback",r.feedback),ge("/tutor_lms/api/homework_feedback_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async cancelHomeworkSubmit(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("homework_id",String(r.homeworkId)),n.set("course_user_id",String(r.courseUserId)),ge("/tutor_lms/api/homework_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async appendHomeworkTask(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("homework_id",String(r.homeworkId)),n.set("course_user_id",String(r.courseUserId)),n.set("task",r.task),ge("/tutor_lms/api/homework_task_append.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async confirmHomeworkTask(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("task_id",String(r.taskId)),n.set("feedback",r.feedback),ge("/tutor_lms/api/homework_task_confirm.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getHomeworkTasks(r){const n=`/tutor_lms/api/homework_task_list.jsp${We({course_id:r.courseId,homework_id:r.homeworkId,course_user_id:r.courseUserId})}`;return ge(n)},async getMaterials(r){const n=`/tutor_lms/api/materials_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async uploadMaterial(r){const n=new FormData;n.set("course_id",String(r.courseId)),n.set("title",r.title),n.set("content",r.content??""),n.set("library_link",r.link??""),r.file&&n.set("library_file",r.file);const c=`/tutor_lms/api/materials_upload.jsp${We({course_id:r.courseId})}`;return ge(c,{method:"POST",body:n})},async deleteMaterial(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("library_id",String(r.libraryId)),ge("/tutor_lms/api/materials_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getQnas(r){const n=`/tutor_lms/api/qna_list.jsp${We({course_id:r.courseId,s_keyword:r.keyword})}`;return ge(n)},async getQnaDetail(r){const n=`/tutor_lms/api/qna_view.jsp${We({course_id:r.courseId,post_id:r.postId})}`;return ge(n)},async answerQna(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("post_id",String(r.postId)),n.set("content",r.content),ge("/tutor_lms/api/qna_answer.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getGrades(r){const n=`/tutor_lms/api/grades_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async recalcGrades(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),r.courseUserId&&n.set("course_user_id",String(r.courseUserId)),ge("/tutor_lms/api/grades_recalc.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCompletions(r){const n=`/tutor_lms/api/completion_list.jsp${We({course_id:r.courseId})}`;return ge(n)},async updateCompletion(r){const n=new URLSearchParams;return n.set("course_id",String(r.courseId)),n.set("action",r.action),n.set("course_user_ids",r.courseUserIds.join(",")),ge("/tutor_lms/api/completion_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getCertificateTemplates(r={}){const n=`/tutor_lms/api/certificate_templates.jsp${We({template_type:r.templateType})}`;return ge(n)},async issueCertificate(r){const n=`/tutor_lms/api/certificate_issue.jsp${We({course_user_id:r.courseUserId,type:r.type})}`;return ge(n)},async getQuestionCategories(){return ge("/tutor_lms/api/question_category_list.jsp")},async createQuestionCategory(r){const n=new URLSearchParams;return n.set("category_nm",r.categoryName),r.parentId!==void 0&&n.set("parent_id",String(r.parentId)),ge("/tutor_lms/api/question_category_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateQuestionCategory(r){const n=new URLSearchParams;return n.set("id",String(r.id)),n.set("category_nm",r.categoryName),r.parentId!==void 0&&n.set("parent_id",String(r.parentId)),ge("/tutor_lms/api/question_category_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteQuestionCategory(r){const n=new URLSearchParams;return n.set("id",String(r.id)),ge("/tutor_lms/api/question_category_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getQuestionBankList(r={}){const n=`/tutor_lms/api/question_bank_list.jsp${We({category_id:r.categoryId,question_type:r.questionType,s_keyword:r.keyword,page:r.page,limit:r.limit})}`;return ge(n)},async createQuestion(r){const n=new URLSearchParams;return r.categoryId&&n.set("category_id",String(r.categoryId)),n.set("question_type",String(r.questionType)),n.set("question",r.question),r.questionText&&n.set("question_text",r.questionText),r.grade&&n.set("grade",String(r.grade)),n.set("answer",r.answer),r.description&&n.set("description",r.description),r.points&&n.set("points",String(r.points)),r.items&&r.items.forEach((c,d)=>{n.set(`item${d+1}`,c)}),ge("/tutor_lms/api/question_bank_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateQuestion(r){const n=new URLSearchParams;return n.set("id",String(r.id)),r.categoryId!==void 0&&n.set("category_id",String(r.categoryId)),r.questionType!==void 0&&n.set("question_type",String(r.questionType)),r.question!==void 0&&n.set("question",r.question),r.questionText!==void 0&&n.set("question_text",r.questionText),r.grade!==void 0&&n.set("grade",String(r.grade)),r.answer!==void 0&&n.set("answer",r.answer),r.description!==void 0&&n.set("description",r.description),r.points!==void 0&&n.set("points",String(r.points)),r.items&&r.items.forEach((c,d)=>{n.set(`item${d+1}`,c)}),ge("/tutor_lms/api/question_bank_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteQuestion(r){const n=new URLSearchParams;return n.set("id",String(r.id)),ge("/tutor_lms/api/question_bank_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getExamTemplates(r={}){const n=`/tutor_lms/api/exam_template_list.jsp${We({page:r.page,limit:r.limit})}`;return ge(n)},async createExamTemplate(r){const n=new URLSearchParams;return n.set("exam_nm",r.examName),r.examTime&&n.set("exam_time",String(r.examTime)),r.questionCnt!==void 0&&n.set("question_cnt",String(r.questionCnt)),r.shuffleYn!==void 0&&n.set("shuffle_yn",r.shuffleYn?"Y":"N"),r.showResultYn!==void 0&&n.set("show_result_yn",r.showResultYn?"Y":"N"),r.passingScore!==void 0&&n.set("passing_score",String(r.passingScore)),r.questionIds&&n.set("question_ids",r.questionIds.join(",")),r.content&&n.set("content",r.content),ge("/tutor_lms/api/exam_template_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async updateExamTemplate(r){const n=new URLSearchParams;return n.set("id",String(r.id)),r.examName&&n.set("exam_nm",r.examName),r.examTime&&n.set("exam_time",String(r.examTime)),r.questionCnt!==void 0&&n.set("question_cnt",String(r.questionCnt)),r.shuffleYn!==void 0&&n.set("shuffle_yn",r.shuffleYn?"Y":"N"),r.showResultYn!==void 0&&n.set("show_result_yn",r.showResultYn?"Y":"N"),r.passingScore!==void 0&&n.set("passing_score",String(r.passingScore)),r.questionIds&&n.set("question_ids",r.questionIds.join(",")),r.content!==void 0&&n.set("content",r.content),ge("/tutor_lms/api/exam_template_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async deleteExamTemplate(r){const n=new URLSearchParams;return n.set("id",String(r.id)),ge("/tutor_lms/api/exam_template_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async getKollusUploadUrl(r){const n=new URLSearchParams;return r.title&&n.set("title",r.title),r.categoryKey&&n.set("category_key",r.categoryKey),r.expireTime&&n.set("expire_time",String(r.expireTime)),ge("/tutor_lms/api/kollus_upload_url.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})},async attachKollusToChannel(r){const n=new URLSearchParams;return n.set("upload_key",r.uploadKey),ge("/tutor_lms/api/kollus_attach_channel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n})}};function Im(r){if(!r)return null;try{const n=JSON.parse(r);return!n||typeof n!="object"?null:n}catch{return null}}function id({isOpen:r,onClose:n,onSelect:c,selectedCourse:d}){const[p,m]=o.useState(""),[v,I]=o.useState("\uC804\uCCB4"),[D,R]=o.useState(d),[_,L]=o.useState([]),[j,T]=o.useState(!1),[W,G]=o.useState(null);o.useEffect(()=>{if(!r)return;let P=!1;return R(d),m(""),I("\uC804\uCCB4"),(async()=>{T(!0),G(null);try{const Y=await le.getPrograms();if(Y.rst_code!=="0000")throw new Error(Y.rst_message);const g=(Y.rst_data??[]).map(F=>{var b,K,w,C,f,k,E,$;const N=Im(F.plan_json);return{id:String(F.id),classification:((K=(b=N==null?void 0:N.basic)==null?void 0:b.classification)==null?void 0:K.label)||((C=(w=N==null?void 0:N.basic)==null?void 0:w.classification)==null?void 0:C.value)||"\uBBF8\uBD84\uB958",name:F.course_nm||((f=N==null?void 0:N.basic)==null?void 0:f.courseName)||`\uACFC\uC815 ${F.id}`,department:((k=N==null?void 0:N.basic)==null?void 0:k.department)||"",major:((E=N==null?void 0:N.basic)==null?void 0:E.major)||"",departmentName:(($=N==null?void 0:N.basic)==null?void 0:$.departmentName)||""}});P||L(g)}catch(Y){P||G(Y instanceof Error?Y.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{P||T(!1)}})(),()=>{P=!0}},[r,d]);const B=o.useMemo(()=>{const P=p.trim().toLowerCase();return _.filter(z=>{const Y=[z.name,z.department,z.major,z.departmentName].map(F=>String(F||"").toLowerCase()).filter(Boolean),h=P===""||Y.some(F=>F.includes(P)),g=v==="\uC804\uCCB4"||z.classification===v;return h&&g})},[_,p,v]),q=()=>{c(D),n()},H=()=>{R(d),n()};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"\uC18C\uC18D \uACFC\uC815 \uC120\uD0DD"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"\uAC1C\uC124\uB41C \uACFC\uC815 \uC911 \uD558\uB098\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uBBF8\uC120\uD0DD\uC73C\uB85C \uB458 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:p,onChange:P=>m(P.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:v,onChange:P=>I(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{onClick:()=>R(null),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${D===null?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:"\uBBF8\uC120\uD0DD"}),e.jsx("p",{className:"text-gray-700",children:"\uC18C\uC18D \uACFC\uC815 \uC5C6\uC74C"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD2B9\uC815 \uACFC\uC815\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC740 \uB3C5\uB9BD \uACFC\uBAA9\uC73C\uB85C \uAC1C\uC124\uB429\uB2C8\uB2E4."})]}),D===null&&e.jsx(ls,{className:"w-6 h-6 text-blue-600"})]})}),W?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:W})}):j?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):B.length===0?e.jsxs("div",{className:"py-16 text-center text-gray-500",children:[e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]}):B.map(P=>e.jsx("div",{onClick:()=>R(P),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${(D==null?void 0:D.id)===P.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:P.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:P.id})]}),e.jsx("h4",{className:"text-gray-900 mb-1",children:P.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:[P.department,P.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:P.departmentName||"-"})]})]}),(D==null?void 0:D.id)===P.id&&e.jsx(ls,{className:"w-6 h-6 text-blue-600 ml-4"})]})},P.id))]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:D===null?e.jsx("span",{children:"\uBBF8\uC120\uD0DD \uC0C1\uD0DC\uC785\uB2C8\uB2E4"}):e.jsxs("span",{children:["\uC120\uD0DD\uB41C \uACFC\uC815: ",e.jsx("span",{className:"text-blue-600",children:D.name})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})}):null}function Js(r){if(!r)return null;const n=(r.haksaCourseCode||"").trim(),c=(r.haksaOpenYear||"").trim(),d=(r.haksaOpenTerm||"").trim(),p=(r.haksaBunbanCode||"").trim(),m=(r.haksaGroupCode||"").trim();return!n||!c||!d||!p||!m?null:{courseCode:n,openYear:c,openTerm:d,bunbanCode:p,groupCode:m}}function ze(r,n=0){const c=Number(r);return Number.isFinite(c)?Math.trunc(c):n}function Lm(r,n="N"){return r==="Y"?"Y":r==="N"?"N":n}function ws(r){return Number.isFinite(r)?Math.min(100,Math.max(0,r)):0}function Ol(r,n){const c=Array.isArray(r)?r[0]:r;if(!c||typeof c!="object")return;const d=c;return d[n]??d[n.toUpperCase()]}function gs(r,n,c=""){const d=Ol(r,n);return d==null?c:String(d)}function St(r,n,c=0){return ze(Ol(r,n),c)}function Gs(r,n,c="N"){return Lm(Ol(r,n),c)}function Fn({course:r,onCourseUpdated:n,initialSubTab:c="basic"}){const d=(r==null?void 0:r.sourceType)==="haksa"||!!(r!=null&&r.haksaCourseCode||r!=null&&r.haksaOpenYear||r!=null&&r.haksaOpenTerm||r!=null&&r.haksaBunbanCode||r!=null&&r.haksaGroupCode)||String((r==null?void 0:r.courseType)||"").includes("\uD559\uC0AC"),p=ze((r==null?void 0:r.mappedCourseId)??(r==null?void 0:r.id),0),[m,v]=o.useState(c),[I,D]=o.useState(null),[R,_]=o.useState(!1),[L,j]=o.useState(null),T=Gs(I,"pass_yn","N")==="Y",W=async()=>{if(d){D(null),_(!1);return}if(p<=0){D(null),j("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}_(!0),j(null);try{const G=await le.getCourseInfo({courseId:p});if(G.rst_code!=="0000")throw new Error(G.rst_message);D(G.rst_data??null)}catch(G){D(null),j(G instanceof Error?G.message:"\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(!1)}};return o.useEffect(()=>{W()},[p,m]),o.useEffect(()=>{m==="certificate"&&!T&&v("evaluation")},[T,m]),o.useEffect(()=>{v(c)},[c]),e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!R&&L&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:L}),!R&&!L&&m==="basic"&&e.jsx(Pm,{course:r,courseId:p,detail:I,onReload:W,onCourseUpdated:n,isHaksa:d}),!R&&!L&&m==="evaluation"&&(d?e.jsx(Om,{course:r}):e.jsx(Mm,{courseId:p,detail:I,onReload:W})),!R&&!L&&!d&&m==="completion"&&e.jsx(Rm,{courseId:p,detail:I,onReload:W}),!R&&!L&&!d&&m==="certificate"&&T&&e.jsx($m,{courseId:p,detail:I,onReload:W})]})}function Pm({course:r,courseId:n,detail:c,onReload:d,onCourseUpdated:p,isHaksa:m=!1}){const[v,I]=o.useState(!1),[D,R]=o.useState(!1),[_,L]=o.useState(null),[j,T]=o.useState(""),[W,G]=o.useState(""),[B,q]=o.useState(!1),[H,P]=o.useState({courseName:"",courseType:"",programId:0,programName:""});o.useEffect(()=>{T(gs(c,"content1","")),G(gs(c,"content2",""))},[c]);const z=()=>{P({courseName:(r==null?void 0:r.subjectName)??gs(c,"course_nm",""),courseType:(r==null?void 0:r.courseType)??"",programId:ze((r==null?void 0:r.programId)??0,0),programName:(r==null?void 0:r.programName)??gs(c,"program_nm","-")}),q(!0)},Y=()=>{q(!1),L(null)},h=B&&H.programId>0?{id:String(H.programId),classification:"\uACFC\uC815",name:H.programName,department:"-",major:"-",departmentName:"-"}:r&&0<ze(r.programId,0)?{id:String(r.programId),classification:"\uACFC\uC815",name:r.programName,department:"-",major:"-",departmentName:"-"}:null,g=async k=>{if(B){P($=>({...$,programId:k?ze(k.id,0):0,programName:k?k.name:"-"})),I(!1);return}if(!n){L("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}const E=k?ze(k.id,0):0;if(k&&!E){L("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}R(!0),L(null);try{const $=await le.setCourseProgram({courseId:n,programId:E});if($.rst_code!=="0000")throw new Error($.rst_message);p==null||p({...r,programId:E,programName:k?k.name:"-"}),await d()}catch($){L($ instanceof Error?$.message:"\uC18C\uC18D \uACFC\uC815 \uBCC0\uACBD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1),I(!1)}},F=async()=>{if(!n){L("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}R(!0),L(null);try{const k=ze((r==null?void 0:r.programId)??0,0);if(H.programId!==k){const E=await le.setCourseProgram({courseId:n,programId:H.programId});if(E.rst_code!=="0000")throw new Error(E.rst_message)}p==null||p({...r,programId:H.programId,programName:H.programName}),await d(),q(!1)}catch(k){L(k instanceof Error?k.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}},N=async()=>{if(!n){L("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}R(!0),L(null);try{const k=await le.updateCourseInfo({courseId:n,content1:j,content2:W});if(k.rst_code!=="0000")throw new Error(k.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await d()}catch(k){L(k instanceof Error?k.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}},b=(r==null?void 0:r.subjectName)??(c==null?void 0:c.course_nm)??"-",K=(r==null?void 0:r.courseId)??(c==null?void 0:c.course_id_conv)??(c==null?void 0:c.course_cd)??(c!=null&&c.id?String(c.id):n?String(n):"-"),w=(r==null?void 0:r.programName)??(c==null?void 0:c.program_nm)??"-",C=(r==null?void 0:r.period)??(c==null?void 0:c.period_conv)??"-",f=ze((r==null?void 0:r.students)??(c==null?void 0:c.student_cnt),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAE30\uBCF8 \uC815\uBCF4"}),!m&&!B&&e.jsxs("button",{onClick:z,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]}),!m&&B&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Y,disabled:D,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-60",children:e.jsx("span",{children:"\uCDE8\uC18C"})}),e.jsxs("button",{onClick:()=>void F(),disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:D?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),m&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB41C \uB370\uC774\uD130\uC785\uB2C8\uB2E4. \uAE30\uBCF8 \uC815\uBCF4\uB294 \uC77D\uAE30 \uC804\uC6A9\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),_&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:_}),m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4DA} \uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uD55C\uAE00)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCourseName)||b||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uC601\uBB38)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCourseEname)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaCourseCode)||K||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uBD84\uBC18\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaBunbanCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uD615\uD0DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCategory)||(r==null?void 0:r.courseType)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD3D0\uAC15\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaVisible)==="Y"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(r==null?void 0:r.haksaVisible)==="Y"?"\uC815\uC0C1":(r==null?void 0:r.haksaVisible)==="N"?"\uD3D0\uAC15":(r==null?void 0:r.haksaVisible)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4C5} \uAC1C\uC124 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uC5F0\uB3C4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaOpenYear)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uD559\uAE30"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaOpenTerm)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC8FC\uCC28"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaWeek)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC2DC\uC791\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaStartdate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC885\uB8CC\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaEnddate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB300\uC0C1\uD559\uB144"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:r!=null&&r.haksaGrade?`${r.haksaGrade}\uD559\uB144`:"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F3EB} \uD559\uACFC/\uACFC\uC815 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaDeptName)||w||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaDeptCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaGradName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaGradCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaCurriculumName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaCurriculumCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uBD80/\uB300\uD559\uC6D0 \uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(r==null?void 0:r.haksaGroupCode)||"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F393} \uAC15\uC758 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC694\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaDayCd)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2DC\uAC04"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaHour1)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2E4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaClassroom)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC601\uBB38\uAC15\uC88C\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaEnglish)==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:(r==null?void 0:r.haksaEnglish)==="Y"?"\uC601\uBB38\uAC15\uC88C":(r==null?void 0:r.haksaEnglish)==="N"?"\uAD6D\uBB38\uAC15\uC88C":(r==null?void 0:r.haksaEnglish)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4CB} \uAE30\uD0C0 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(r==null?void 0:r.haksaTypeSyllabus)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uC874\uC7AC\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(r==null?void 0:r.haksaIsSyllabus)==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(r==null?void 0:r.haksaIsSyllabus)==="Y"?"\uC788\uC74C":(r==null?void 0:r.haksaIsSyllabus)==="N"?"\uC5C6\uC74C":(r==null?void 0:r.haksaIsSyllabus)||"-"})})]})]})]})]}):B?e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:b}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uACFC\uBAA9\uBA85\uC740 \uC218\uC815\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:K})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:(r==null?void 0:r.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsxs("button",{type:"button",onClick:()=>I(!0),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 text-left hover:border-blue-500 hover:ring-1 hover:ring-blue-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:H.programName}),e.jsx(Xt,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"\uD074\uB9AD\uD558\uC5EC \uC18C\uC18D \uACFC\uC815\uC744 \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:[f,"\uBA85"]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:K})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:(r==null?void 0:r.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:w})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:[f,"\uBA85"]})]})]}),e.jsx(id,{isOpen:v,onClose:()=>I(!1),onSelect:k=>{g(k)},selectedCourse:h}),!m&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:j,onChange:k=>T(k.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uBAA9 \uC18C\uAC1C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uC2B5 \uBAA9\uD45C"}),e.jsx("textarea",{value:W,onChange:k=>G(k.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uC2B5 \uBAA9\uD45C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void N(),disabled:D,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:D?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})]})}function Mm({courseId:r,detail:n,onReload:c}){const[d,p]=o.useState(!1),[m,v]=o.useState(null),[I,D]=o.useState({assignProgress:100,assignExam:0,assignHomework:0,assignForum:0,assignEtc:0,limitTotalScore:60,limitProgress:60,completeLimitProgress:60,completeLimitTotalScore:60,assignSurveyYn:"N",pushSurveyYn:"N",passYn:"N"});o.useEffect(()=>{n&&D({assignProgress:St(n,"assign_progress",100),assignExam:St(n,"assign_exam",0),assignHomework:St(n,"assign_homework",0),assignForum:St(n,"assign_forum",0),assignEtc:St(n,"assign_etc",0),limitTotalScore:St(n,"limit_total_score",60),limitProgress:St(n,"limit_progress",60),completeLimitProgress:St(n,"complete_limit_progress",60),completeLimitTotalScore:St(n,"complete_limit_total_score",60),assignSurveyYn:Gs(n,"assign_survey_yn","N"),pushSurveyYn:Gs(n,"push_survey_yn","N"),passYn:Gs(n,"pass_yn","N")})},[n]);const R=o.useMemo(()=>I.assignProgress+I.assignExam+I.assignHomework+I.assignForum+I.assignEtc,[I.assignEtc,I.assignExam,I.assignForum,I.assignHomework,I.assignProgress]),_=I.passYn==="Y",L=async()=>{if(!r){v("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}p(!0),v(null);try{const T=await le.updateCourseEvaluation({courseId:r,assignProgress:ws(I.assignProgress),assignExam:ws(I.assignExam),assignHomework:ws(I.assignHomework),assignForum:ws(I.assignForum),assignEtc:ws(I.assignEtc),assignSurveyYn:I.assignSurveyYn,pushSurveyYn:I.pushSurveyYn,passYn:I.passYn,limitTotalScore:ws(I.limitTotalScore),limitProgress:ws(I.limitProgress),completeLimitProgress:ws(I.completeLimitProgress),completeLimitTotalScore:ws(I.completeLimitTotalScore)});if(T.rst_code!=="0000")throw new Error(T.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(T){v(T instanceof Error?T.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{p(!1)}},j="w-full px-3 py-2 border border-gray-300 rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uAD8C\uC7A5: \uD569\uACC4 100)"})]}),e.jsxs("div",{className:`text-sm ${R===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",R]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D(\uC9C4\uB3C4)"}),e.jsx("input",{type:"number",value:I.assignProgress,onChange:T=>D(W=>({...W,assignProgress:ze(T.target.value,0)})),className:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:I.assignExam,onChange:T=>D(W=>({...W,assignExam:ze(T.target.value,0)})),className:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:I.assignHomework,onChange:T=>D(W=>({...W,assignHomework:ze(T.target.value,0)})),className:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD1A0\uB860"}),e.jsx("input",{type:"number",value:I.assignForum,onChange:T=>D(W=>({...W,assignForum:ze(T.target.value,0)})),className:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:I.assignEtc,onChange:T=>D(W=>({...W,assignEtc:ze(T.target.value,0)})),className:j})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uD569\uACA9) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC544\uB798 \uAE30\uC900\uC740 \uC218\uB8CC/\uD569\uACA9 \uD310\uC815 \uBC0F \uC131\uC801 \uC0C1\uD0DC \uD45C\uC2DC(\uBBF8\uB2EC/\uC218\uB8CC/\uD569\uACA9)\uC5D0 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."}),!_&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 text-orange-800 px-4 py-3 rounded-lg text-sm",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9\uC774 \uAEBC\uC838 \uC788\uC5B4\uC694. \uADF8\uB798\uC11C \uC9C0\uAE08\uC740 \u201C\uD569\uACA9 \uAE30\uC900\u201D \uC785\uB825\uCE78\uC744 \uC7A0\uAC00\uB450\uC5C8\uC2B5\uB2C8\uB2E4. (\uC218\uB8CC \uAE30\uC900\uB9CC \uC0AC\uC6A9\uB429\uB2C8\uB2E4)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:I.limitTotalScore,onChange:T=>D(W=>({...W,limitTotalScore:ze(T.target.value,0)})),className:`${j}${_?"":" bg-gray-100 text-gray-500"}`,disabled:!_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:I.limitProgress,onChange:T=>D(W=>({...W,limitProgress:ze(T.target.value,0)})),className:`${j}${_?"":" bg-gray-100 text-gray-500"}`,disabled:!_})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uC644\uB8CC) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294 \uD658\uACBD\uC5D0\uC11C\uB294 \u201C\uC218\uB8CC(\uC644\uB8CC)\u201D\uAC00 \uCD5C\uC885 \uC0C1\uD0DC\uAC00 \uB429\uB2C8\uB2E4."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:I.completeLimitTotalScore,onChange:T=>D(W=>({...W,completeLimitTotalScore:ze(T.target.value,0)})),className:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:I.completeLimitProgress,onChange:T=>D(W=>({...W,completeLimitProgress:ze(T.target.value,0)})),className:j})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC635\uC158"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38\uCC38\uC5EC \uD3EC\uD568"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uC870\uAC74\uC5D0 \uC124\uBB38\uCC38\uC5EC \uC5EC\uBD80\uB97C \uD3EC\uD568\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.assignSurveyYn==="Y",onChange:T=>D(W=>({...W,assignSurveyYn:T.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38 \uB3C5\uB824"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC124\uBB38 \uB3C5\uB824 \uBA54\uC2DC\uC9C0/\uD45C\uC2DC \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.pushSurveyYn==="Y",onChange:T=>D(W=>({...W,pushSurveyYn:T.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uBA74 \u201C\uD569\uACA9\uC99D\u201D \uBC1C\uAE09\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I.passYn==="Y",onChange:T=>D(W=>({...W,passYn:T.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void L(),disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:d?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function od(r){const n=(r.template_nm||"").trim(),c=(r.template_cd||"").trim();return n&&c?`${n} (${c})`:n||c||`\uD15C\uD50C\uB9BF #${r.id}`}function Rm({courseId:r,detail:n,onReload:c}){const[d,p]=o.useState([]),[m,v]=o.useState(!1),[I,D]=o.useState(!1),[R,_]=o.useState(null),[L,j]=o.useState("Y"),[T,W]=o.useState(0),[G,B]=o.useState("N"),[q,H]=o.useState(""),[P,z]=o.useState(0),[Y,h]=o.useState("R"),[g,F]=o.useState("A");o.useEffect(()=>{let b=!1;return(async()=>{v(!0);try{const w=await le.getCertificateTemplates({templateType:"C"});if(w.rst_code!=="0000")throw new Error(w.rst_message);b||p(w.rst_data??[])}catch{b||p([])}finally{b||v(!1)}})(),()=>{b=!0}},[]),o.useEffect(()=>{n&&(j(Gs(n,"cert_complete_yn","Y")),W(St(n,"cert_template_id",0)),B(Gs(n,"complete_no_yn","N")),H(gs(n,"complete_prefix","")),z(St(n,"postfix_cnt",0)),h(gs(n,"postfix_type","R")==="C"?"C":"R"),F(gs(n,"postfix_ord","A")==="D"?"D":"A"))},[n]);const N=async()=>{if(!r){_("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!n){_("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}D(!0),_(null);try{const b=await le.updateCourseCertificateSettings({courseId:r,certCompleteYn:L,certTemplateId:T,passCertTemplateId:St(n,"pass_cert_template_id",0),completeNoYn:G,completePrefix:q,postfixCnt:Math.max(0,ze(P,0)),postfixType:Y,postfixOrd:g});if(b.rst_code!=="0000")throw new Error(b.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(b){_(b instanceof Error?b.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}};return e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:R}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uC99D \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC\uC99D \uCD9C\uB825 \uBC84\uD2BC\uC744 \uC0AC\uC6A9\uD560\uC9C0 \uC5EC\uBD80\uB97C \uC124\uC815\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L==="Y",onChange:b=>j(b.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uC99D \uD15C\uD50C\uB9BF"}),e.jsxs("select",{value:T,onChange:b=>W(ze(b.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:m,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),d.map(b=>e.jsx("option",{value:b.id,children:od(b)},b.id))]}),m&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uBC88\uD638 \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uCC98\uB9AC \uC2DC \uC218\uB8CC\uBC88\uD638\uB97C \uC0DD\uC131/\uBD80\uC5EC\uD558\uB294 \uADDC\uCE59\uC785\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G==="Y",onChange:b=>B(b.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uC55E\uC790\uB9AC(\uC811\uB450)"}),e.jsx("input",{type:"text",value:q,onChange:b=>H(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"\uC608: 2025-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uB4B7\uC790\uB9AC\uC218"}),e.jsx("input",{type:"number",value:P,onChange:b=>z(ze(b.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right",min:0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB4B7\uC790\uB9AC \uBC29\uC2DD"}),e.jsxs("select",{value:Y,onChange:b=>h(b.target.value==="C"?"C":"R"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"R",children:"\uC218\uAC15\uC21C\uBC88"}),e.jsx("option",{value:"C",children:"\uC218\uAC15\uC0DD\uC544\uC774\uB514"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C \uBC29\uC2DD"}),e.jsxs("select",{value:g,onChange:b=>F(b.target.value==="D"?"D":"A"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"A",children:"\uC624\uB984\uCC28\uC21C"}),e.jsx("option",{value:"D",children:"\uB0B4\uB9BC\uCC28\uC21C"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void N(),disabled:I,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:I?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function $m({courseId:r,detail:n,onReload:c}){const[d,p]=o.useState([]),[m,v]=o.useState(!1),[I,D]=o.useState(!1),[R,_]=o.useState(null),[L,j]=o.useState(0);o.useEffect(()=>{let W=!1;return(async()=>{v(!0);try{const B=await le.getCertificateTemplates({templateType:"P"});if(B.rst_code!=="0000")throw new Error(B.rst_message);W||p(B.rst_data??[])}catch{W||p([])}finally{W||v(!1)}})(),()=>{W=!0}},[]),o.useEffect(()=>{n&&j(St(n,"pass_cert_template_id",0))},[n]);const T=async()=>{if(!r){_("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!n){_("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}D(!0),_(null);try{const W=await le.updateCourseCertificateSettings({courseId:r,certCompleteYn:Gs(n,"cert_complete_yn","Y"),certTemplateId:St(n,"cert_template_id",0),passCertTemplateId:L,completeNoYn:Gs(n,"complete_no_yn","N"),completePrefix:gs(n,"complete_prefix",""),postfixCnt:St(n,"postfix_cnt",0),postfixType:gs(n,"postfix_type","R")==="C"?"C":"R",postfixOrd:gs(n,"postfix_ord","A")==="D"?"D":"A"});if(W.rst_code!=="0000")throw new Error(W.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await c()}catch(W){_(W instanceof Error?W.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}};return e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:R}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD569\uACA9\uC99D \uD15C\uD50C\uB9BF"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9\uC99D \uCD9C\uB825 \uC2DC \uC0AC\uC6A9\uD560 \uD15C\uD50C\uB9BF\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4. (\uBBF8\uC9C0\uC815\uC774\uBA74 \uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4)"}),e.jsxs("select",{value:L,onChange:W=>j(ze(W.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:m,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),d.map(W=>e.jsx("option",{value:W.id,children:od(W)},W.id))]}),m&&e.jsx("p",{className:"text-sm text-gray-500",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void T(),disabled:I,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:I?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function Om({course:r}){const n=o.useMemo(()=>Js({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),c=r==null?void 0:r.id,[d,p]=o.useState({attendance:20,exam:40,assignment:30,etc:10}),[m,v]=o.useState({"A+":95,A:90,"B+":85,B:80,"C+":75,C:70,"D+":65,D:60,F:0}),[I,D]=o.useState(!1),[R,_]=o.useState(!1),[L,j]=o.useState(null);o.useEffect(()=>{if(!n)return;let B=!1;return(async()=>{_(!0),j(null);try{const H=await le.getHaksaCourseEval(n);if(H.rst_code!=="0000")throw new Error(H.rst_message);const P=Array.isArray(H.rst_data)?H.rst_data[0]:H.rst_data,z=(P==null?void 0:P.eval_json)||"";if(z)try{const Y=JSON.parse(z);if(!B){p(Y.weights);const h=Y.cutoffs||{};v({"A+":ze(h["A+"],95),A:ze(h.A,90),"B+":ze(h["B+"],85),B:ze(h.B,80),"C+":ze(h["C+"],75),C:ze(h.C,70),"D+":ze(h["D+"],65),D:ze(h.D,60),F:Math.max(0,ze(h.D??60,60)-1)})}return}catch{}if(c)try{const Y=localStorage.getItem(`haksa_eval_weights_${c}`),h=localStorage.getItem(`haksa_eval_cutoffs_${c}`);if(Y&&h){const g={weights:JSON.parse(Y),cutoffs:JSON.parse(h)};if(!B){p(g.weights);const F=g.cutoffs||{};v({"A+":ze(F["A+"],95),A:ze(F.A,90),"B+":ze(F["B+"],85),B:ze(F.B,80),"C+":ze(F["C+"],75),C:ze(F.C,70),"D+":ze(F["D+"],65),D:ze(F.D,60),F:Math.max(0,ze(F.D??60,60)-1)})}await le.updateHaksaCourseEval({...n,evalJson:JSON.stringify(g)})}}catch{}}catch(H){B||j(H instanceof Error?H.message:"\uD3C9\uAC00 \uAE30\uC900\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B||_(!1)}})(),()=>{B=!0}},[n,c]);const T=d.attendance+d.exam+d.assignment+d.etc,W=()=>{if(!n){j("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}D(!0),j(null),(async()=>{try{const B={weights:d,cutoffs:{...m,F:Math.max(0,ze(m.D,60)-1)}},q=await le.updateHaksaCourseEval({...n,evalJson:JSON.stringify(B)});if(q.rst_code!=="0000")throw new Error(q.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(B){j(B instanceof Error?B.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}})()},G="w-full px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[L&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:L}),R&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC544\uB798 \uC124\uC815\uC740 \uC774 \uACFC\uBAA9\uC758 \uC131\uC801 \uD310\uC815 \uAE30\uC900\uC73C\uB85C \uC0AC\uC6A9\uB429\uB2C8\uB2E4."]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{className:`text-sm font-medium ${T===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",T]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D"}),e.jsx("input",{type:"number",value:d.attendance,onChange:B=>p(q=>({...q,attendance:ze(B.target.value,0)})),className:G,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:d.exam,onChange:B=>p(q=>({...q,exam:ze(B.target.value,0)})),className:G,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:d.assignment,onChange:B=>p(q=>({...q,assignment:ze(B.target.value,0)})),className:G,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:d.etc,onChange:B=>p(q=>({...q,etc:ze(B.target.value,0)})),className:G,min:0,max:100})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC131\uC801 \uB4F1\uAE09 \uAE30\uC900 (A+~D)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uAC01 \uB4F1\uAE09\uC758 \uCD5C\uC18C \uC810\uC218\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uD574\uB2F9 \uC810\uC218 \uC774\uC0C1\uC774\uBA74 \uD574\uB2F9 \uB4F1\uAE09)"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2 text-center",children:"A+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["A+"],onChange:B=>v(q=>({...q,"A+":ze(B.target.value,95)})),className:`${G} bg-blue-100 border-blue-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-1",children:"~100\uC810"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2 text-center",children:"A \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.A,onChange:B=>v(q=>({...q,A:ze(B.target.value,90)})),className:`${G} bg-blue-50 border-blue-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["A+"]-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2 text-center",children:"B+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["B+"],onChange:B=>v(q=>({...q,"B+":ze(B.target.value,85)})),className:`${G} bg-green-100 border-green-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.A-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2 text-center",children:"B \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.B,onChange:B=>v(q=>({...q,B:ze(B.target.value,80)})),className:`${G} bg-green-50 border-green-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["B+"]-1,"\uC810"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-800 mb-2 text-center",children:"C+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["C+"],onChange:B=>v(q=>({...q,"C+":ze(B.target.value,75)})),className:`${G} bg-yellow-100 border-yellow-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.B-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2 text-center",children:"C \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.C,onChange:B=>v(q=>({...q,C:ze(B.target.value,70)})),className:`${G} bg-yellow-50 border-yellow-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["C+"]-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800 mb-2 text-center",children:"D+ \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m["D+"],onChange:B=>v(q=>({...q,"D+":ze(B.target.value,65)})),className:`${G} bg-orange-100 border-orange-300`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m.C-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2 text-center",children:"D \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m.D,onChange:B=>v(q=>({...q,D:ze(B.target.value,60)})),className:`${G} bg-orange-50 border-orange-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",m["D+"]-1,"\uC810"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\uB4F1\uAE09 \uC694\uC57D"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsxs("span",{className:"px-3 py-1 bg-blue-200 text-blue-800 rounded-full",children:["A+: ",m["A+"],"~100\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:["A: ",m.A,"~",m["A+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-green-200 text-green-800 rounded-full",children:["B+: ",m["B+"],"~",m.A-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full",children:["B: ",m.B,"~",m["B+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-200 text-yellow-800 rounded-full",children:["C+: ",m["C+"],"~",m.B-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:["C: ",m.C,"~",m["C+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-200 text-orange-800 rounded-full",children:["D+: ",m["D+"],"~",m.C-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full",children:["D: ",m.D,"~",m["D+"]-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full",children:["F: 0~",m.D-1,"\uC810"]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:W,disabled:I,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:I?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function $c({isOpen:r,onClose:n,onSave:c,mode:d="create",showWeekSession:p=!1,weekCount:m=15,initialData:v}){const[D,R]=o.useState({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null});if(o.useEffect(()=>{r&&d==="edit"&&v?R({title:v.title||"",description:v.description||"",dueDate:v.dueDate||"",dueTime:v.dueTime||"",totalScore:v.totalScore??100,submissionType:v.submissionType||"file",fileTypes:v.fileTypes||"",maxFileSize:v.maxFileSize??10,allowLateSubmission:v.allowLateSubmission??!1,latePenalty:v.latePenalty??0,weekNumber:v.weekNumber??1,sessionNumber:v.sessionNumber??1,file:null}):r&&d==="create"&&R({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null})},[r,d,v]),!r)return null;const _=j=>{j.preventDefault(),c(D),n()},L=d==="edit";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:L?"\uACFC\uC81C \uC218\uC815":"\uACFC\uC81C \uB4F1\uB85D"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:D.title,onChange:j=>R({...D,title:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),p&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:D.weekNumber,onChange:j=>R({...D,weekNumber:parseInt(j.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:m},(j,T)=>T+1).map(j=>e.jsxs("option",{value:j,children:[j,"\uC8FC\uCC28"]},j))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:D.sessionNumber,onChange:j=>R({...D,sessionNumber:parseInt(j.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(j,T)=>T+1).map(j=>e.jsxs("option",{value:j,children:[j,"\uCC28\uC2DC"]},j))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:D.description,onChange:j=>R({...D,description:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:D.dueDate,onChange:j=>R({...D,dueDate:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:D.dueTime,onChange:j=>R({...D,dueTime:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:D.totalScore,onChange:j=>R({...D,totalScore:parseInt(j.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:D.submissionType,onChange:j=>R({...D,submissionType:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(D.submissionType==="file"||D.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:j=>{const T=j.target.files&&j.target.files[0]?j.target.files[0]:null;R({...D,file:T})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),D.file&&e.jsx("button",{type:"button",onClick:()=>R({...D,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),D.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",D.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:D.fileTypes,onChange:j=>R({...D,fileTypes:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:D.maxFileSize,onChange:j=>R({...D,maxFileSize:parseInt(j.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:D.allowLateSubmission,onChange:j=>R({...D,allowLateSubmission:j.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),D.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:D.latePenalty,onChange:j=>R({...D,latePenalty:parseInt(j.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:L?"\uC218\uC815":"\uB4F1\uB85D"})]})]})]})})}function zm({isOpen:r,onClose:n,onEdit:c,assignment:d}){if(!r||!d)return null;const p=()=>{n(),c()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-lg overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"bg-purple-600 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"\uACFC\uC81C \uC0C1\uC138 \uC815\uBCF4"}),e.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C\uBA85"})]}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:d.title})]}),d.description&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uC124\uBA85"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap bg-gray-50 p-3 rounded-lg",children:d.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(I0,{className:"w-4 h-4"}),e.jsx("span",{children:"\uB9C8\uAC10\uC77C"})]}),e.jsx("p",{className:"text-gray-900 font-medium",children:d.dueDate||"-"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[e.jsx(Il,{className:"w-4 h-4"}),e.jsx("span",{children:"\uBC30\uC810"})]}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[d.totalScore||0,"\uC810"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[e.jsx(vu,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC81C\uCD9C \uD604\uD669"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full",style:{width:d.total&&d.total>0?`${(d.submitted||0)/d.total*100}%`:"0%"}})}),e.jsxs("span",{className:"text-gray-900 font-medium whitespace-nowrap",children:[d.submitted||0," / ",d.total||0,"\uBA85"]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"\uB2EB\uAE30"}),e.jsxs("button",{onClick:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]})]})]})})}function Um({isOpen:r,onClose:n,courseId:c,task:d,onRefresh:p}){const[m,v]=o.useState((d==null?void 0:d.feedback)||""),[I,D]=o.useState(!1);if(!r||!d)return null;const R=async()=>{D(!0);try{const _=await le.confirmHomeworkTask({courseId:c,taskId:d.id,feedback:m});if(_.rst_code!=="0000")throw new Error(_.rst_message);alert("\uD3C9\uAC00\uC644\uB8CC \uCC98\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),p(),n()}catch(_){alert(_ instanceof Error?_.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCD94\uAC00 \uACFC\uC81C \uC0C1\uC138 \uD655\uC778"})]}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(ks,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uC9C0\uC2DC \uB0B4\uC6A9"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 text-gray-800 text-sm whitespace-pre-wrap",children:d.task}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Lr,{className:"w-3 h-3"}),"\uBD80\uC5EC: ",d.reg_date_conv]})})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(Em,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD559\uC0DD \uC81C\uCD9C \uB0B4\uC6A9"})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${d.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:d.submit_yn_label})]}),d.submit_yn==="Y"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[d.subject&&e.jsx("div",{className:"font-semibold text-gray-900 mb-2 border-b border-gray-200 pb-2",children:d.subject}),e.jsx("div",{className:"text-gray-800 text-sm whitespace-pre-wrap min-h-[100px]",children:d.content||"\uB0B4\uC6A9 \uC5C6\uC74C"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uC81C\uCD9C: ",d.submit_date_conv]})]}):e.jsx("div",{className:"py-10 text-center text-gray-400 border border-dashed border-gray-200 rounded-lg",children:"\uC544\uC9C1 \uC81C\uCD9C\uB41C \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD50\uC218\uC790 \uD53C\uB4DC\uBC31 \uBC0F \uD3C9\uAC00"})]}),e.jsx("textarea",{value:m,onChange:_=>v(_.target.value),placeholder:"\uCD94\uAC00 \uACFC\uC81C\uC5D0 \uB300\uD55C \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none min-h-[120px]"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 font-semibold",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uB2EB\uAE30"}),d.submit_yn==="Y"&&e.jsx("button",{onClick:R,disabled:I,className:"px-6 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:I?e.jsx("span",{children:"\uCC98\uB9AC \uC911..."}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD3C9\uAC00\uC644\uB8CC(\uD655\uC778)"})]})})]})]})]})}function On({isOpen:r,onClose:n,onSelect:c,multiSelect:d=!0,onMultiSelect:p,recommendContext:m,excludeLessonIds:v}){const I="recommend",[R,_]=o.useState(""),[L,j]=o.useState(""),[T,W]=o.useState(I),[G,B]=o.useState(""),[q,H]=o.useState(""),[P,z]=o.useState(""),[Y,h]=o.useState(!1),[g,F]=o.useState([]),[N,b]=o.useState([]),[K,w]=o.useState(0),[C,f]=o.useState(1),[k,E]=o.useState(!1),[$,M]=o.useState(!1),[S,A]=o.useState(!1),[y,Q]=o.useState(null),[Z,ue]=o.useState([]),[ye,ke]=o.useState([]),[se,be]=o.useState(!1),[Ne,ce]=o.useState(""),[pe,Ee]=o.useState(new Set),[fe,De]=o.useState(null),He=20,ie=(ne,je)=>{if(ne.stopPropagation(),!je.mediaKey)return;const _e=`/kollus/preview.jsp?key=${encodeURIComponent(je.mediaKey)}`,Ge=Math.max(Number(je.contentWidth??0),900),Re=Math.max(Number(je.contentHeight??0),506);window.open(_e,"_blank",`width=${Ge},height=${Re},resizable=yes,scrollbars=yes`)||Q("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};Ue.useEffect(()=>{r&&(_(""),j(""),W(I),f(1),F([]),w(0),ke([]),ue([]),ce(""),Ee(new Set),B(""),H(""),z(""))},[r]),Ue.useEffect(()=>{r&&(f(1),F([]),w(0),Ee(new Set),Q(null))},[r,T]),Ue.useEffect(()=>{r&&T==="all"&&(f(1),F([]),w(0),Ee(new Set))},[r,T,R,L]),Ue.useEffect(()=>{r||Ee(new Set)},[r]),Ue.useEffect(()=>{if(!r||T!=="all")return;let ne=!1;const je=setTimeout(()=>{(async()=>{const Ge=C===1;E(Ge),M(!Ge),Q(null);try{const Re=await le.getKollusList({keyword:R,categoryKey:L||void 0,page:C,limit:He});if(Re.rst_code!=="0000")throw new Error(Re.rst_message);const Ae=(Re.rst_data??[]).map(Te=>({id:String(Te.id||Te.media_content_key),mediaKey:Te.media_content_key,title:Te.title,description:Te.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${Te.original_file_name}`:"",category:Te.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:Te.thumbnail||Te.snapshot_url||"",duration:Te.duration||"-",totalTime:Number(Te.total_time??0),contentWidth:Number(Te.content_width??0),contentHeight:Number(Te.content_height??0),originalFileName:Te.original_file_name||""})),ve=Array.isArray(Re.rst_categories)?Re.rst_categories:[];ne||(F(Te=>Ge?Ae:[...Te,...Ae]),w(Number(Re.rst_total??Ae.length)),ve.length>0&&b(ve))}catch(Re){ne||Q(Re instanceof Error?Re.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ne||(E(!1),M(!1))}})()},250);return()=>{ne=!0,clearTimeout(je)}},[r,T,R,L,C]),Ue.useEffect(()=>{if(!r||T!=="recommend")return;let ne=!1;const je=setTimeout(()=>{(async()=>{const Ge=JSON.stringify({courseName:(m==null?void 0:m.courseName)??"",courseIntro:(m==null?void 0:m.courseIntro)??"",courseDetail:(m==null?void 0:m.courseDetail)??"",lessonTitle:(m==null?void 0:m.lessonTitle)??"",lessonDescription:(m==null?void 0:m.lessonDescription)??"",keywords:R??"",topK:120,similarityThreshold:.2});if(!(Z.length>0&&Ne===Ge)){be(!0),Q(null);try{const Re=await le.getContentRecommendations({courseName:m==null?void 0:m.courseName,courseIntro:m==null?void 0:m.courseIntro,courseDetail:m==null?void 0:m.courseDetail,lessonTitle:m==null?void 0:m.lessonTitle,lessonDescription:m==null?void 0:m.lessonDescription,keywords:R,topK:120,similarityThreshold:.2});if(Re.rst_code!=="0000")throw new Error(Re.rst_message);const Ae=(Re.rst_data??[]).map((ve,Te)=>{const Ke=String(ve.lesson_id??ve.id??ve.media_content_key??"").trim();return{id:Ke?`${Ke}__${Te}`:String(Te),mediaKey:ve.media_content_key||Ke,title:ve.title,description:"",category:ve.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:ve.thumbnail||ve.snapshot_url||"",duration:ve.duration||"-",totalTime:Number(ve.total_time??0),contentWidth:Number(ve.content_width??0),contentHeight:Number(ve.content_height??0),lessonId:Ke||void 0,originalFileName:ve.original_file_name||"",score:ve.score?Number(ve.score):void 0,summary:ve.summary||"",keywords:ve.keywords||""}});ne||(ue(Ae),ce(Ge))}catch(Re){ne||Q(Re instanceof Error?Re.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ne||be(!1)}}})()},250);return()=>{ne=!0,clearTimeout(je)}},[r,T,R,Z.length,Ne,m==null?void 0:m.courseName,m==null?void 0:m.courseIntro,m==null?void 0:m.courseDetail,m==null?void 0:m.lessonTitle,m==null?void 0:m.lessonDescription]),Ue.useEffect(()=>{if(!r||T!=="recommend")return;const ne=new Set;(v??[]).forEach(_e=>{ne.add(String(_e))});const je=Z.filter(_e=>!(!_e.lessonId||ne.has(_e.lessonId))).slice(0,50);ke(je)},[r,T,v,Z]);const Me=T==="recommend"?ye:g,U=T==="recommend"?ye.length:K,Ce=ne=>{if(d){Ee(je=>{const _e=new Set(je);return _e.has(ne.id)?_e.delete(ne.id):_e.add(ne.id),_e});return}J(ne)},J=async ne=>{try{if(A(!0),ne.lessonId){const Re={...ne,id:ne.lessonId};c(Re),n();return}const je=await le.upsertKollusLesson({mediaContentKey:ne.mediaKey,title:ne.title,totalTime:ne.totalTime,contentWidth:ne.contentWidth,contentHeight:ne.contentHeight});if(je.rst_code!=="0000")throw new Error(je.rst_message);const _e=Number(je.rst_data??0),Ge={...ne,lessonId:_e,id:String(_e)};c(Ge),n()}catch(je){Q(je instanceof Error?je.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{A(!1)}},oe=async()=>{const ne=Me.filter(je=>pe.has(je.id));if(ne.length!==0)try{A(!0);const je=await Promise.all(ne.map(async _e=>{if(_e.lessonId)return{..._e,id:_e.lessonId};const Ge=await le.upsertKollusLesson({mediaContentKey:_e.mediaKey,title:_e.title,totalTime:_e.totalTime,contentWidth:_e.contentWidth,contentHeight:_e.contentHeight});if(Ge.rst_code!=="0000")throw new Error(Ge.rst_message);const Re=Number(Ge.rst_data??0);return{..._e,lessonId:Re,id:String(Re)}}));p?p(je):je.forEach(_e=>c(_e)),n()}catch(je){Q(je instanceof Error?je.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{A(!1)}},ae=()=>{const ne=Me.map(_e=>_e.id),je=ne.length>0&&ne.every(_e=>pe.has(_e));Ee(_e=>{const Ge=new Set(_e);return je?ne.forEach(Re=>Ge.delete(Re)):ne.forEach(Re=>Ge.add(Re)),Ge})},de=async()=>{if(!G.trim()){Q("URL\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!q.trim()){Q("\uAC15\uC758\uBA85\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(!G.startsWith("http://")&&!G.startsWith("https://")){Q("URL\uC740 http:// \uB610\uB294 https://\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4.");return}try{h(!0),Q(null);const ne=await le.upsertExternalLinkLesson({url:G.trim(),title:q.trim(),totalTime:typeof P=="number"?P:void 0});if(ne.rst_code!=="0000")throw new Error(ne.rst_message);const je=Number(ne.rst_data??0),_e={id:String(je),mediaKey:G.trim(),title:q.trim(),description:"",category:"\uC678\uBD80\uB9C1\uD06C",thumbnail:"",totalTime:typeof P=="number"?P:0,lessonId:je};p?p([_e]):c(_e),n()}catch(ne){Q(ne instanceof Error?ne.message:"\uC678\uBD80\uB9C1\uD06C \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{h(!1)}};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-gray-900",children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(dt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>W("recommend"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${T==="recommend"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"\uCD94\uCC9C"}),e.jsx("button",{type:"button",onClick:()=>W("all"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${T==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"\uC804\uCCB4"}),e.jsxs("button",{type:"button",onClick:()=>W("external"),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-sm transition-colors ${T==="external"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Rc,{className:"w-4 h-4"}),"\uC678\uBD80\uB9C1\uD06C"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",U,"\uAC74"]})]}),T!=="external"&&e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:R,onChange:ne=>_(ne.target.value),placeholder:T==="recommend"?"\uCD94\uCC9C \uD0A4\uC6CC\uB4DC \uCD94\uAC00...":"\uC81C\uBAA9\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),T==="all"&&e.jsxs("select",{value:L,onChange:ne=>j(ne.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),N.map(ne=>e.jsx("option",{value:ne.key,children:ne.name},ne.key))]})]}),T!=="external"&&e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",e.jsx("span",{className:"text-blue-600 font-medium",children:T==="all"?K:U}),"\uAC74"]}),d&&e.jsxs("button",{onClick:oe,disabled:pe.size===0||S,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${pe.size>0&&!S?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Ll,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC120\uD0DD\uCD94\uAC00 (",pe.size,"\uAC74)"]})]})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:y}),T==="external"&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uC678\uBD80 URL\uB85C \uCF58\uD150\uCE20 \uCD94\uAC00"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"url",value:G,onChange:ne=>B(ne.target.value),placeholder:"https://example.com/video",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube, Vimeo \uB4F1 \uC678\uBD80 \uC601\uC0C1 URL\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\uAC15\uC758\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:q,onChange:ne=>H(ne.target.value),placeholder:"\uAC15\uC758 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uD559\uC2B5\uC2DC\uAC04 (\uBD84)"}),e.jsx("input",{type:"number",min:"0",value:P,onChange:ne=>z(ne.target.value===""?"":Number(ne.target.value)),placeholder:"\uC608: 30",className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{type:"button",onClick:de,disabled:Y,className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:[e.jsx(Rc,{className:"w-4 h-4"}),Y?"\uCD94\uAC00 \uC911...":"\uC678\uBD80\uB9C1\uD06C \uCD94\uAC00"]})})]})]}),T!=="external"&&(k||se)&&e.jsx("div",{className:"py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),T!=="external"&&!k&&!se&&e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[d&&e.jsx("th",{className:"px-3 py-2 w-10",children:e.jsx("input",{type:"checkbox",checked:Me.length>0&&Me.every(ne=>pe.has(ne.id)),onChange:ae,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"No"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:T==="recommend"?"\uC81C\uBAA9 / \uD0A4\uC6CC\uB4DC":"\uAC15\uC758\uBA85"}),T!=="recommend"&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uC2DC\uAC04"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uC6D0\uBCF8\uD30C\uC77C"})]}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uBBF8\uB9AC\uBCF4\uAE30"}),T==="recommend"&&e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uB0B4\uC6A9"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Me.map((ne,je)=>e.jsxs(Ue.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-blue-50 cursor-pointer transition-colors ${pe.has(ne.id)?"bg-blue-50":""}`,onClick:()=>Ce(ne),children:[d&&e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:pe.has(ne.id),onChange:()=>{},className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:je+1}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:ne.category})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-900",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("div",{className:"truncate font-medium",children:ne.title}),T==="recommend"&&ne.keywords&&e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:ne.keywords.split(",").slice(0,5).map((_e,Ge)=>e.jsx("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:_e.trim()},Ge))})]})}),T!=="recommend"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-600",children:ne.totalTime?`${ne.totalTime}\uBD84`:ne.duration}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-500 max-w-xs truncate",children:ne.originalFileName||"-"})]}),e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsxs("button",{type:"button",onClick:_e=>ie(_e,ne),disabled:!ne.mediaKey,className:"inline-flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"\uC601\uC0C1 \uBBF8\uB9AC\uBCF4\uAE30",children:[e.jsx($l,{className:"w-3 h-3"}),e.jsx("span",{children:"\uBBF8\uB9AC\uBCF4\uAE30"})]})}),T==="recommend"&&e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("button",{type:"button",onClick:_e=>{_e.stopPropagation(),De(fe===ne.id?null:ne.id)},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 rounded transition-colors",children:fe===ne.id?"\uB2EB\uAE30":"\uBCF4\uAE30"})})]}),T==="recommend"&&fe===ne.id&&ne.summary&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:d?5:4,className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:[e.jsx("strong",{className:"text-gray-900",children:"\uC694\uC57D:"})," ",ne.summary]})})})]},ne.id))})]}),Me.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:T==="recommend"?"\uCD94\uCC9C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]}),!k&&!se&&T==="all"&&g.length<K&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"button",onClick:()=>f(ne=>ne+1),disabled:$,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:$?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})})]})]})}):null}const cd=({courseId:r,courseName:n,onClose:c,onSaveComplete:d,embedded:p=!1})=>{const[m,v]=Ue.useState([]),[I,D]=Ue.useState([]),[R,_]=Ue.useState(!1),[L,j]=Ue.useState(!1),[T,W]=Ue.useState(null),[G,B]=Ue.useState(!1),[q,H]=Ue.useState(null),P=Ue.useCallback(async()=>{if(r){_(!0),W(null);try{const M=await le.getCurriculum({courseId:r});if(M.rst_code!=="0000")throw new Error(M.rst_message);const S=M.rst_data??[],A=new Map;S.forEach(Q=>{const Z=Q.section_id||0;A.has(Z)||A.set(Z,{sectionId:Z,sectionName:Q.section_nm||`${Q.chapter}\uCC28\uC2DC`,lessons:[]}),A.get(Z).lessons.push({lessonId:Q.lesson_id,lessonName:Q.lesson_nm||"",lessonType:Q.lesson_type||"",lessonTypeConv:Q.lesson_type_conv||"",onoffType:Q.onoff_type||"",onoffTypeConv:Q.onoff_type_conv||"",totalTime:Q.total_time_min||0,completeTime:Q.complete_time_min||0,duration:Q.duration_conv||"",chapter:Q.chapter})});const y=Array.from(A.values());v(y),D(JSON.parse(JSON.stringify(y)))}catch(M){W(M instanceof Error?M.message:"\uCC28\uC2DC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(!1)}}},[r]);Ue.useEffect(()=>{P()},[P]);const z=()=>{const M=Date.now();v([...m,{sectionId:M,sectionName:`${m.length+1}\uCC28\uC2DC`,lessons:[],isNew:!0}])},Y=(M,S)=>{v(m.map(A=>A.sectionId===M?{...A,sectionName:S}:A))},h=M=>{v(m.filter(S=>S.sectionId!==M))},g=M=>{H(M),B(!0)},F=M=>{q!==null&&M.forEach(S=>N(q,S)),B(!1),H(null)},N=(M,S)=>{v(A=>A.map(y=>{if(y.sectionId===M){const Q=S.lessonId??S.id;if(y.lessons.find(ue=>String(ue.lessonId)===String(Q)))return y;const Z={lessonId:Q,lessonName:S.title,lessonType:S.lessonType||S.lesson_type||"05",lessonTypeConv:S.category||"",totalTime:S.totalTime||0,completeTime:S.totalTime||0,duration:S.duration||"",isNew:!0};return{...y,lessons:[...y.lessons,Z]}}return y}))},b=(M,S)=>{v(m.map(A=>A.sectionId===M?{...A,lessons:A.lessons.filter(y=>y.lessonId!==S)}:A))},K=(M,S,A)=>{v(m.map(y=>y.sectionId===M?{...y,lessons:y.lessons.map(Q=>Q.lessonId===S?{...Q,completeTime:A}:Q)}:y))},w=(M,S)=>{S!==0&&v(m.map(A=>{if(A.sectionId===M){const y=[...A.lessons];return[y[S-1],y[S]]=[y[S],y[S-1]],{...A,lessons:y}}return A}))},C=(M,S)=>{v(m.map(A=>{if(A.sectionId===M){if(S>=A.lessons.length-1)return A;const y=[...A.lessons];return[y[S],y[S+1]]=[y[S+1],y[S]],{...A,lessons:y}}return A}))},f=async()=>{j(!0),W(null);try{const M=new Set;I.forEach(Z=>{Z.lessons.forEach(ue=>{ue.isNew||M.add(Number(ue.lessonId))})});const S=new Set;m.forEach(Z=>{Z.lessons.forEach(ue=>{ue.isNew||S.add(Number(ue.lessonId))})});for(const Z of M)if(!S.has(Z)){const ue=await le.deleteCurriculumLesson({courseId:r,lessonId:Z});if(ue.rst_code!=="0000")throw new Error(ue.rst_message)}const A=new Set(I.map(Z=>Z.sectionId)),y=new Set(m.filter(Z=>!Z.isNew).map(Z=>Z.sectionId));for(const Z of A)!y.has(Z)&&Z!==0&&await le.deleteCurriculumSection({courseId:r,sectionId:Z});for(const Z of m)if(Z.isNew){const ue=await le.insertCurriculumSection({courseId:r,sectionName:Z.sectionName});if(ue.rst_code!=="0000")throw new Error(ue.rst_message);Z.sectionId=ue.rst_data||Z.sectionId,Z.isNew=!1}for(const Z of m)for(const ue of Z.lessons)if(ue.isNew){const ye=await le.addCurriculumLesson({courseId:r,sectionId:Z.sectionId,lessonId:Number(ue.lessonId)});if(ye.rst_code!=="0000")throw new Error(ye.rst_message);ue.isNew=!1}let Q=0;for(const Z of m)for(const ue of Z.lessons)Q++,ue.isNew||await le.updateCurriculumLesson({courseId:r,lessonId:Number(ue.lessonId),chapter:Q,sectionId:Z.sectionId,completeTime:ue.completeTime});alert("\uCC28\uC2DC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await P(),d==null||d()}catch(M){const S=M instanceof Error?M.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";W(S),alert("\uC800\uC7A5 \uC2E4\uD328: "+S)}finally{j(!1)}},k=m.reduce((M,S)=>M+S.lessons.length,0),E=p?"bg-white":"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",$=p?"":"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col";return e.jsxs("div",{className:E,children:[e.jsxs("div",{className:$,children:[!p&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCC28\uC2DC \uD3B8\uC9D1"}),n&&e.jsx("p",{className:"text-sm text-gray-600",children:n})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:p?"":"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCC28\uC2DC ",m.length,"\uAC1C \xB7 \uB808\uC2A8 ",k,"\uAC1C"]}),e.jsxs("button",{type:"button",onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),R&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:T}),!R&&m.map((M,S)=>e.jsxs("div",{className:"mb-4 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[S+1,"\uCC28\uC2DC"]}),e.jsx("input",{type:"text",value:M.sectionName,onChange:A=>Y(M.sectionId,A.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),M.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC2E0\uADDC"})]}),e.jsx("button",{type:"button",onClick:()=>h(M.sectionId),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(jt,{className:"w-5 h-5"})})]}),e.jsxs("button",{type:"button",onClick:()=>g(M.sectionId),className:"flex items-center gap-2 px-3 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors mb-3",children:[e.jsx(Rr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC601\uC0C1 \uCD94\uAC00"})]}),M.lessons.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uAD6C\uBD84"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uAC15\uC758\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC778\uC815\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC0AD\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC21C\uC11C"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.lessons.map((A,y)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-medium",children:y+1}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A.onoffType==="N"?"bg-green-100 text-green-700":A.onoffType==="F"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700"}`,children:A.onoffTypeConv||(A.onoffType==="N"?"\uC628\uB77C\uC778":A.onoffType==="F"?"\uC624\uD504\uB77C\uC778":"\uBE14\uB80C\uB514\uB4DC")})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900",children:A.lessonName}),A.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"\uC2E0\uADDC"})]})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-600",children:[A.totalTime||A.duration||"-","\uBD84"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",min:"0",value:A.completeTime||"",onChange:Q=>K(M.sectionId,A.lessonId,Number(Q.target.value)),className:"w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uBD84"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>b(M.sectionId,A.lessonId),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>w(M.sectionId,y),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:y===0,children:e.jsx(z0,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>C(M.sectionId,y),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:y===M.lessons.length-1,children:e.jsx(dr,{className:"w-4 h-4"})})]})})]},A.lessonId))})]})})]},M.sectionId))]}),e.jsxs("div",{className:`flex items-center justify-end gap-3 p-4 ${p?"mt-4":"border-t border-gray-200"}`,children:[!p&&c&&e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:f,disabled:L,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:L?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]}),e.jsx(On,{isOpen:G,onClose:()=>{B(!1),H(null)},onSelect:()=>{},onMultiSelect:F,multiSelect:!0})]})},dd=r=>({id:String(r.id),title:r.exam_nm,description:r.content||"",questionIds:r.range_idx?r.range_idx.split(",").filter(Boolean):[],duration:r.exam_time||60,totalPoints:r.total_points||0,passingScore:r.assign1||60,shuffleQuestions:r.shuffle_yn==="Y",showResults:!0,createdAt:r.reg_date||new Date().toISOString()}),Hm=r=>{let n="multiple_choice";return(r.question_type===3||r.question_type===4)&&(n="short_answer"),{id:String(r.id),type:n,title:r.question,content:r.question_text,points:r.score||5,categoryId:r.category_id?String(r.category_id):void 0}},Ym=async()=>{try{const r=await le.getExamTemplates();return r.rst_code==="0000"?(r.rst_data??[]).map(dd):[]}catch{return[]}};function Qm(){const[r,n]=o.useState([]),[c,d]=o.useState([]),[p,m]=o.useState([]),[v,I]=o.useState(!0),[D,R]=o.useState(!1),[_,L]=o.useState(null),[j,T]=o.useState(""),[W,G]=o.useState(!1),[B,q]=o.useState(null),[H,P]=o.useState(!1),[z,Y]=o.useState(new Set),[h,g]=o.useState(""),[F,N]=o.useState(!1),[b,K]=o.useState({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),w=async()=>{try{I(!0),L(null);const se=await le.getExamTemplates();if(se.rst_code!=="0000")throw new Error(se.rst_message);const be=(se.rst_data??[]).map(dd);n(be)}catch(se){L(se instanceof Error?se.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}};o.useEffect(()=>{w()},[]);const C=async()=>{try{const se=await le.getQuestionCategories();se.rst_code==="0000"&&m(se.rst_data??[])}catch{}},f=async se=>{try{N(!0);const be=await le.getQuestionBankList({categoryId:se?Number(se):void 0,limit:200});if(be.rst_code!=="0000")throw new Error(be.rst_message);const Ne=(be.rst_data??[]).map(Hm);d(Ne)}catch(be){L(be instanceof Error?be.message:"\uBB38\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}},k=r.filter(se=>!j||se.title.toLowerCase().includes(j.toLowerCase())),E=c.filter(se=>!h||se.categoryId===h),$=()=>{q(null),K({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),G(!0)},M=se=>{q(se),K({title:se.title,description:se.description,questionIds:se.questionIds,duration:se.duration,passingScore:se.passingScore,shuffleQuestions:se.shuffleQuestions,showResults:se.showResults}),G(!0)},S=async()=>{if(b.title.trim())try{if(R(!0),L(null),B){const se=await le.updateExamTemplate({id:Number(B.id),examName:b.title.trim(),examTime:b.duration,questionCnt:b.questionIds.length,shuffleYn:b.shuffleQuestions,passingScore:b.passingScore,questionIds:b.questionIds,content:b.description.trim()});if(se.rst_code!=="0000")throw new Error(se.rst_message)}else{const se=await le.createExamTemplate({examName:b.title.trim(),examTime:b.duration,questionCnt:b.questionIds.length,shuffleYn:b.shuffleQuestions,passingScore:b.passingScore,questionIds:b.questionIds,content:b.description.trim()});if(se.rst_code!=="0000")throw new Error(se.rst_message)}await w(),G(!1)}catch(se){L(se instanceof Error?se.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}},A=async se=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{R(!0);const be=await le.deleteExamTemplate({id:Number(se)});if(be.rst_code!=="0000")throw new Error(be.rst_message);await w()}catch(be){L(be instanceof Error?be.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}},y=async()=>{Y(new Set(b.questionIds)),P(!0),await Promise.all([C(),f()])},Q=async se=>{g(se),await f(se||void 0)},Z=se=>{Y(be=>{const Ne=new Set(be);return Ne.has(se)?Ne.delete(se):Ne.add(se),Ne})},ue=()=>{K(se=>({...se,questionIds:Array.from(z)})),P(!1)},ke=(()=>{const se=b.questionIds.map(Ne=>c.find(ce=>ce.id===Ne)).filter(Boolean),be=se.reduce((Ne,ce)=>Ne+ce.points,0);return{count:se.length,totalPoints:be}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uC2DC\uD5D8\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC744 \uC0DD\uC131\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:$,disabled:D,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uC0DD\uC131"})]})]}),_&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[_,e.jsx("button",{onClick:()=>L(null),className:"ml-2 underline",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:se=>T(se.target.value),placeholder:"\uC2DC\uD5D8 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),v?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Yt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):e.jsx("div",{className:"grid gap-4",children:k.length>0?k.map(se=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:se.title}),se.description&&e.jsx("p",{className:"text-gray-500 mt-1",children:se.description}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"w-4 h-4 text-indigo-500"}),e.jsxs("span",{children:[se.questionIds.length,"\uBB38\uC81C"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lr,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{children:[se.duration,"\uBD84"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"\uD569\uACA9:"}),e.jsxs("span",{className:"font-medium",children:[se.passingScore,"\uC810"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>M(se),disabled:D,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Xt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>A(se.id),disabled:D,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-5 h-5"})})]})]})},se.id)):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm text-center py-16 text-gray-400",children:[e.jsx(Ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:$,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uC2DC\uD5D8 \uC0DD\uC131\uD558\uAE30"})]})}),W&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>G(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:B?"\uC2DC\uD5D8 \uC218\uC815":"\uC2DC\uD5D8 \uC0DD\uC131"}),e.jsx("button",{onClick:()=>G(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.title,onChange:se=>K(be=>({...be,title:se.target.value})),placeholder:"\uC608: \uC911\uAC04\uACE0\uC0AC",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:b.description,onChange:se=>K(be=>({...be,description:se.target.value})),placeholder:"\uC2DC\uD5D8\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCD9C\uC81C \uBB38\uC81C"}),e.jsxs("button",{type:"button",onClick:y,className:"w-full flex items-center justify-between px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-400 hover:text-indigo-600 transition-colors",children:[e.jsx("span",{children:b.questionIds.length>0?`${ke.count}\uBB38\uC81C \uC120\uD0DD\uB428 (\uCD1D ${ke.totalPoints}\uC810)`:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBB38\uC81C \uC120\uD0DD"}),e.jsx(Tn,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC2DC\uAC04 (\uBD84)"}),e.jsx("input",{type:"number",value:b.duration,onChange:se=>K(be=>({...be,duration:parseInt(se.target.value)||0})),min:1,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD569\uACA9 \uC810\uC218"}),e.jsx("input",{type:"number",value:b.passingScore,onChange:se=>K(be=>({...be,passingScore:parseInt(se.target.value)||0})),min:0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.shuffleQuestions,onChange:se=>K(be=>({...be,shuffleQuestions:se.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uBB38\uC81C \uC21C\uC11C \uB79C\uB364 \uBC30\uCE58"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.showResults,onChange:se=>K(be=>({...be,showResults:se.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC2DC\uD5D8 \uC885\uB8CC \uD6C4 \uACB0\uACFC \uACF5\uAC1C"})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:S,disabled:!b.title.trim()||D,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[D?e.jsx(Yt,{className:"w-4 h-4 animate-spin"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>P(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["\uBB38\uC81C \uC120\uD0DD (",z.size,"\uAC1C \uC120\uD0DD\uB428)"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-shrink-0 px-6 py-3 border-b border-gray-100 bg-gray-50",children:e.jsxs("select",{value:h,onChange:se=>Q(se.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),p.map(se=>e.jsx("option",{value:se.id,children:se.category_nm},se.id))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:F?e.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-400",children:[e.jsx(Yt,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"\uBB38\uC81C \uBD88\uB7EC\uC624\uB294 \uC911..."})]}):E.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:E.map(se=>e.jsx("div",{className:`px-6 py-4 cursor-pointer transition-colors ${z.has(se.id)?"bg-indigo-50":"hover:bg-gray-50"}`,onClick:()=>Z(se.id),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center mt-0.5 ${z.has(se.id)?"border-indigo-500 bg-indigo-500 text-white":"border-gray-300"}`,children:z.has(se.id)&&e.jsx(Ll,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:se.title}),se.content&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 truncate",children:se.content}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full ${se.type==="multiple_choice"?"bg-blue-100 text-blue-700":se.type==="short_answer"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:se.type==="multiple_choice"?"\uAC1D\uAD00\uC2DD":se.type==="short_answer"?"\uC8FC\uAD00\uC2DD":"OX\uD615"}),e.jsxs("span",{children:[se.points,"\uC810"]})]})]})]})},se.id))}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Tn,{className:"w-10 h-10 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBA3C\uC800 \uBB38\uC81C\uB97C \uCD94\uAC00\uD574\uC8FC\uC138\uC694."})]})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:ue,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(Ll,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})]})]})}const _l=()=>{const r=new Date().toISOString().split("T")[0],n=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0];return{startDate:r,startTime:"09:00",endDate:n,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}},El=()=>({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,file:null}),Sl=()=>({title:"",description:"",link:"",file:null});function Km({isOpen:r,onClose:n,weekNumber:c,onAdd:d}){const[p,m]=o.useState(null),[v,I]=o.useState(""),[D,R]=o.useState(""),[_,L]=o.useState(El()),[j,T]=o.useState(Sl()),[W,G]=o.useState(!1),[B,q]=o.useState(null),[H,P]=o.useState([]),[z,Y]=o.useState(""),[h,g]=o.useState(_l());o.useEffect(()=>{if(!r||p!=="exam")return;let S=!1;return(async()=>{try{const y=await Ym();S||P(y)}catch{S||P([])}})(),()=>{S=!0}},[r,p]);const F=H.find(S=>S.id===z);if(o.useEffect(()=>{F&&g(S=>({...S,points:F.totalPoints}))},[F]),!r)return null;const N=S=>{var A;if(S.preventDefault(),!!p){if(p==="video"){if(!B)return;d({weekNumber:c,type:p,title:v.trim()||B.title,description:D.trim()||void 0,duration:B.duration,completeTime:B.totalTime||0,mediaKey:B.mediaKey,lessonId:B.lessonId,originalVideoTitle:B.title})}else if(p==="exam"){if(!z)return;d({weekNumber:c,type:p,title:(F==null?void 0:F.title)||"\uC2DC\uD5D8",description:((A=F==null?void 0:F.description)==null?void 0:A.trim())||void 0,examId:z,examSettings:{startDate:h.startDate,startTime:h.startTime,endDate:h.endDate,endTime:h.endTime,points:h.points,allowRetake:h.allowRetake,retakeScore:h.retakeScore,retakeCount:h.retakeCount,showResults:h.showResults}})}else if(p==="assignment"){if(!_.title.trim()||!_.description.trim()||!_.dueDate||!_.dueTime)return;d({weekNumber:c,type:p,title:_.title.trim(),description:_.description.trim(),assignmentSettings:{dueDate:_.dueDate,dueTime:_.dueTime,totalScore:Number(_.totalScore||0),submissionType:_.submissionType,fileTypes:_.fileTypes.trim()||void 0,maxFileSize:Number(_.maxFileSize||0),allowLateSubmission:_.allowLateSubmission,latePenalty:Number(_.latePenalty||0),fileName:_.file?_.file.name:void 0}})}else if(p==="document"){if(!j.title.trim())return;const y=j.link.trim(),Q=j.file?j.file.name:"";if(!y&&!Q)return;d({weekNumber:c,type:p,title:j.title.trim(),description:j.description.trim()||void 0,documentSettings:{link:y||void 0,fileName:Q||void 0}})}b(),n()}},b=()=>{m(null),I(""),R(""),q(null),Y(""),g(_l()),L(El()),T(Sl())},K=S=>{q({mediaKey:S.mediaKey,lessonId:S.lessonId,title:S.title,duration:S.duration||(S.totalTime?`${S.totalTime}\uBD84`:void 0),totalTime:S.totalTime||0}),G(!1)},w=[{type:"video",icon:Rr,label:"\uB3D9\uC601\uC0C1",color:"blue",desc:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC120\uD0DD"},{type:"exam",icon:Ir,label:"\uC2DC\uD5D8",color:"red",desc:"\uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uC2DC\uD5D8\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4"},{type:"assignment",icon:vt,label:"\uACFC\uC81C",color:"purple",desc:"\uD574\uB2F9 \uC8FC\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD569\uB2C8\uB2E4"},{type:"document",icon:hs,label:"\uD559\uC2B5\uC790\uB8CC",color:"green",desc:"PDF, \uBB38\uC11C \uB4F1 \uD559\uC2B5\uC790\uB8CC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"}],C=(S,A)=>{if(A)switch(S){case"blue":return"border-blue-500 bg-blue-50 text-blue-700";case"red":return"border-red-500 bg-red-50 text-red-700";case"purple":return"border-purple-500 bg-purple-50 text-purple-700";case"green":return"border-green-500 bg-green-50 text-green-700";default:return"border-gray-500 bg-gray-50 text-gray-700"}return"border-gray-200 hover:border-gray-300 hover:bg-gray-50"},f=S=>{switch(S){case"blue":return"text-blue-600";case"red":return"text-red-600";case"purple":return"text-purple-600";case"green":return"text-green-600";default:return"text-gray-600"}},k=p==="assignment"&&(!_.title.trim()||!_.description.trim()||!_.dueDate||!_.dueTime),E=p==="document"&&(!j.title.trim()||!j.link.trim()&&!j.file),$=!p||p==="video"&&!B||p==="exam"&&!z||k||E,M=p==="exam"?"\uC2DC\uD5D8\uCD94\uAC00":p==="assignment"?"\uB4F1\uB85D":p==="document"?"\uC5C5\uB85C\uB4DC":"\uCD94\uAC00\uD558\uAE30";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[c,"\uC8FC\uCC28 \uCF58\uD150\uCE20 \uCD94\uAC00"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"\uCD94\uAC00\uD560 \uCF58\uD150\uCE20 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694"})]}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\uCF58\uD150\uCE20 \uC720\uD615"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(({type:S,icon:A,label:y,color:Q,desc:Z})=>e.jsxs("button",{type:"button",onClick:()=>{m(S),q(null),Y(""),I(""),R(""),L(El()),T(Sl()),g(_l())},className:`flex flex-col items-start p-4 border-2 rounded-lg transition-all ${C(Q,p===S)}`,children:[e.jsx(A,{className:`w-6 h-6 mb-2 ${p===S?"":f(Q)}`}),e.jsx("span",{className:"font-medium",children:y}),e.jsx("span",{className:`text-xs mt-1 ${p===S?"opacity-80":"text-gray-500"}`,children:Z})]},S))})]}),p&&e.jsxs(e.Fragment,{children:[p==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),B?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:B.title}),B.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",B.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>G(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>G(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx($n,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),B&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:v,onChange:S=>I(S.target.value),placeholder:B.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:D,onChange:S=>R(S.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),p==="exam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),H.length>0?e.jsxs("select",{value:z,onChange:S=>Y(S.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),H.map(S=>e.jsxs("option",{value:S.id,children:[S.title," (",S.questionIds.length,"\uBB38\uC81C, ",S.totalPoints,"\uC810)"]},S.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx(Ir,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC2DC\uD5D8\uAD00\uB9AC \uBA54\uB274\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),z&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:h.startDate,onChange:S=>g(A=>({...A,startDate:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:h.startTime,onChange:S=>g(A=>({...A,startTime:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:h.endDate,onChange:S=>g(A=>({...A,endDate:S.target.value})),min:h.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:h.endTime,onChange:S=>g(A=>({...A,endTime:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:h.points,onChange:S=>g(A=>({...A,points:parseInt(S.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.allowRetake,onChange:S=>g(A=>({...A,allowRetake:S.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),h.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:h.retakeScore,onChange:S=>g(A=>({...A,retakeScore:parseInt(S.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:h.retakeCount,onChange:S=>g(A=>({...A,retakeCount:parseInt(S.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.showResults,onChange:S=>g(A=>({...A,showResults:S.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),p==="assignment"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:_.title,onChange:S=>L({..._,title:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:_.description,onChange:S=>L({..._,description:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:_.dueDate,onChange:S=>L({..._,dueDate:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:_.dueTime,onChange:S=>L({..._,dueTime:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:_.totalScore,onChange:S=>L({..._,totalScore:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.submissionType,onChange:S=>L({..._,submissionType:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(_.submissionType==="file"||_.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:S=>{const A=S.target.files&&S.target.files[0]?S.target.files[0]:null;L({..._,file:A})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),_.file&&e.jsx("button",{type:"button",onClick:()=>L({..._,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),_.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",_.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:_.fileTypes,onChange:S=>L({..._,fileTypes:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:_.maxFileSize,onChange:S=>L({..._,maxFileSize:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:_.allowLateSubmission,onChange:S=>L({..._,allowLateSubmission:S.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),_.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:_.latePenalty,onChange:S=>L({..._,latePenalty:parseInt(S.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]})]}),p==="document"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:j.title,onChange:S=>T({...j,title:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:j.description,onChange:S=>T({...j,description:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:j.link,onChange:S=>T({...j,link:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:S=>{var A;return T({...j,file:((A=S.target.files)==null?void 0:A[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."}),j.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",j.file.name]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:$,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:M})]})]})]})]}),e.jsx(On,{isOpen:W,onClose:()=>G(!1),onSelect:K,multiSelect:!1,recommendContext:{lessonTitle:v,lessonDescription:D}})]})}function Vm({isOpen:r,onClose:n,content:c,onSave:d}){const[p,m]=o.useState(""),[v,I]=o.useState(""),[D,R]=o.useState(""),[_,L]=o.useState(!1),[j,T]=o.useState(null);if(o.useEffect(()=>{if(c){const H=c.originalVideoTitle||c.title,P=c.title!==H;m(P?c.title:""),I(c.description||""),R(c.duration||""),c.type==="video"&&c.mediaKey?T({mediaKey:c.mediaKey,lessonId:c.lessonId,title:c.originalVideoTitle||c.title,duration:c.duration}):T(null)}},[c]),!r||!c)return null;const W=H=>{if(H.preventDefault(),c.type==="video"){if(!j)return;d({...c,title:p.trim()||j.title,description:v.trim()||void 0,duration:j.duration,mediaKey:j.mediaKey,lessonId:j.lessonId,originalVideoTitle:j.title})}else{if(!p.trim())return;d({...c,title:p.trim(),description:v.trim()||void 0})}},G=H=>{T({mediaKey:H.mediaKey,lessonId:H.lessonId,title:H.title,duration:H.duration||(H.totalTime?`${H.totalTime}\uBD84`:void 0)}),L(!1)},B=H=>{switch(H){case"video":return"\uB3D9\uC601\uC0C1";case"exam":return"\uC2DC\uD5D8";case"assignment":return"\uACFC\uC81C";case"document":return"\uD559\uC2B5\uC790\uB8CC"}},q=H=>{switch(H){case"video":return e.jsx(Rr,{className:"w-5 h-5 text-blue-600"});case"exam":return e.jsx(Ir,{className:"w-5 h-5 text-red-600"});case"assignment":return e.jsx(vt,{className:"w-5 h-5 text-purple-600"});case"document":return e.jsx(hs,{className:"w-5 h-5 text-green-600"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[q(c.type),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[B(c.type)," \uD3B8\uC9D1"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[c.weekNumber,"\uC8FC\uCC28"]})]})]}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:W,className:"p-6 space-y-6",children:[c.type==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),j?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:j.title}),j.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",j.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>L(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>L(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx($n,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),j&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:p,onChange:H=>m(H.target.value),placeholder:j.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]})]}),c.type!=="video"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[B(c.type)," \uC81C\uBAA9",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",value:p,onChange:H=>m(H.target.value),placeholder:"\uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:v,onChange:H=>I(H.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:c.type==="video"&&!j||c.type!=="video"&&!p.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\uC800\uC7A5"})]})]})]})]}),e.jsx(On,{isOpen:_,onClose:()=>L(!1),onSelect:G,multiSelect:!1,recommendContext:{lessonTitle:p||(j==null?void 0:j.title)||"",lessonDescription:v}})]})}const Wm=r=>`haksa_curriculum_v2_${r}`,qm=r=>{const n=`haksa_curriculum_${r}`;try{const c=localStorage.getItem(n);if(!c)return null;const d=JSON.parse(c);if(!d.length)return null;const p=new Map;d.forEach(v=>{const I=v.weekNumber||1;p.has(I)||p.set(I,[]),p.get(I).push(v)});const m=[];return p.forEach((v,I)=>{m.push({weekNumber:I,sessions:[{sessionId:`session_migrated_${I}_${Date.now()}`,sessionName:"1\uCC28\uC2DC",sessionNo:I,startDate:"",startTime:"",endDate:"",endTime:"",contents:v,isExpanded:!0}]})}),localStorage.removeItem(n),m.length>0?m:null}catch{return null}},Gm=r=>Array.from({length:r},(n,c)=>({weekNumber:c+1,title:`${c+1}\uC8FC\uCC28`,isExpanded:c===0,sessions:[]})),Jm=r=>{const n=r.flatMap(d=>d.sessions.map(p=>p.sessionNo||0)).filter(d=>d>0);return(n.length>0?Math.max(...n):0)+1},Fl=(r,n)=>Array.from({length:n},(c,d)=>r.find(m=>m.weekNumber===d+1)||{weekNumber:d+1,title:`${d+1}\uC8FC\uCC28`,isExpanded:d===0,sessions:[]});function Xm({courseId:r,course:n}){const c=(n==null?void 0:n.sourceType)==="haksa",d=o.useMemo(()=>Js({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),p=(()=>{if(n!=null&&n.haksaWeek){const ce=parseInt(n.haksaWeek,10);if(!isNaN(ce)&&ce>0)return ce}return 15})(),[m,v]=o.useState(()=>Gm(p)),[I,D]=o.useState(!1),[R,_]=o.useState(null),[L,j]=o.useState(!1),T=o.useRef(!0),W=o.useRef([]),G=o.useRef(d),B=o.useMemo(()=>Fl(m,p),[p,m]);o.useEffect(()=>{W.current=B},[B]),o.useEffect(()=>{G.current=d},[d]),o.useEffect(()=>()=>{T.current=!1},[]),o.useEffect(()=>{c&&!d&&_("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[c,d]),o.useEffect(()=>{if(!c||!d)return;let ce=!1;return(async()=>{D(!0),_(null);try{const Ee=await le.getHaksaCurriculum(d);if(Ee.rst_code!=="0000")throw new Error(Ee.rst_message);const fe=Array.isArray(Ee.rst_data)?Ee.rst_data[0]:Ee.rst_data,De=(fe==null?void 0:fe.curriculum_json)||"";if(De){const He=JSON.parse(De);ce||v(Fl(He,p))}else if(n!=null&&n.id){let He=null;try{const ie=localStorage.getItem(Wm(n.id));ie&&(He=JSON.parse(ie))}catch{}if(He||(He=qm(n.id)),He&&!ce){const ie=Fl(He,p);v(ie),await le.updateHaksaCurriculum({...d,curriculumJson:JSON.stringify(ie)})}}}catch(Ee){ce||_(Ee instanceof Error?Ee.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ce||(D(!1),j(!0))}})(),()=>{ce=!0}},[c,d,n==null?void 0:n.id,p]),o.useEffect(()=>{if(!c||!d||!L)return;const ce=setTimeout(()=>{(async()=>{try{const pe=await le.updateHaksaCurriculum({...d,curriculumJson:JSON.stringify(B)});if(pe.rst_code!=="0000")throw new Error(pe.rst_message)}catch(pe){T.current&&_(pe instanceof Error?pe.message:"\uAC15\uC758\uBAA9\uCC28 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},400);return()=>clearTimeout(ce)},[c,d,L,B]),o.useEffect(()=>()=>{!c||!G.current||!L||le.updateHaksaCurriculum({...G.current,curriculumJson:JSON.stringify(W.current)})},[c,L]);const[q,H]=o.useState(!1),[P,z]=o.useState(1),[Y,h]=o.useState(null),[g,F]=o.useState(!1),[N,b]=o.useState(null),[K,w]=o.useState(null),C=ce=>{v(pe=>pe.map(Ee=>Ee.weekNumber===ce?{...Ee,isExpanded:!Ee.isExpanded}:Ee))},f=(ce,pe)=>{v(Ee=>Ee.map(fe=>fe.weekNumber===ce?{...fe,sessions:fe.sessions.map(De=>De.sessionId===pe?{...De,isExpanded:!De.isExpanded}:De)}:fe))},k=ce=>{v(pe=>{const Ee=Jm(pe);return pe.map(fe=>{if(fe.weekNumber===ce){const De=fe.sessions.length+1,He={sessionId:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionName:`${De}\uCC28\uC2DC`,sessionNo:Ee,startDate:"",startTime:"",endDate:"",endTime:"",contents:[],isExpanded:!0};return{...fe,sessions:[...fe.sessions,He]}}return fe})})},E=(ce,pe,Ee)=>{v(fe=>fe.map(De=>De.weekNumber===ce?{...De,sessions:De.sessions.map(He=>He.sessionId===pe?{...He,sessionName:Ee}:He)}:De))},$=(ce,pe,Ee,fe)=>{v(De=>De.map(He=>He.weekNumber===ce?{...He,sessions:He.sessions.map(ie=>ie.sessionId===pe?{...ie,[Ee]:fe}:ie)}:He))},M=(ce,pe)=>{confirm("\uC774 \uCC28\uC2DC\uC640 \uD3EC\uD568\uB41C \uBAA8\uB4E0 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&v(Ee=>Ee.map(fe=>fe.weekNumber===ce?{...fe,sessions:fe.sessions.filter(De=>De.sessionId!==pe)}:fe))},S=(ce,pe)=>{z(ce),h(pe),H(!0)},A=(ce,pe)=>{b(ce),w(pe),F(!0)},y=ce=>{if(!Y)return;const pe={...ce,id:`content_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()};v(Ee=>Ee.map(fe=>fe.weekNumber===P?{...fe,sessions:fe.sessions.map(De=>De.sessionId===Y?{...De,contents:[...De.contents,pe]}:De)}:fe))},Q=(ce,pe,Ee)=>{confirm("\uC774 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&v(fe=>fe.map(De=>De.weekNumber===ce?{...De,sessions:De.sessions.map(He=>He.sessionId===pe?{...He,contents:He.contents.filter(ie=>ie.id!==Ee)}:He)}:De))},Z=ce=>{K&&(v(pe=>pe.map(Ee=>({...Ee,sessions:Ee.sessions.map(fe=>fe.sessionId===K?{...fe,contents:fe.contents.map(De=>De.id===ce.id?ce:De)}:fe)}))),F(!1),b(null),w(null))},ue=(ce,pe,Ee,fe)=>{v(De=>De.map(He=>He.weekNumber===ce?{...He,sessions:He.sessions.map(ie=>ie.sessionId===pe?{...ie,contents:ie.contents.map(Me=>Me.id===Ee?{...Me,completeTime:fe}:Me)}:ie)}:He))},ye=ce=>{switch(ce){case"video":return e.jsx(Rr,{className:"w-4 h-4 text-blue-600"});case"exam":return e.jsx(Ir,{className:"w-4 h-4 text-red-600"});case"assignment":return e.jsx(vt,{className:"w-4 h-4 text-purple-600"});case"document":return e.jsx(hs,{className:"w-4 h-4 text-green-600"})}},ke=ce=>{switch(ce){case"video":return e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"\uB3D9\uC601\uC0C1"});case"exam":return e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"\uC2DC\uD5D8"});case"assignment":return e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"\uACFC\uC81C"});case"document":return e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC790\uB8CC"})}},se=B.flatMap(ce=>ce.sessions.flatMap(pe=>pe.contents)),Ne={sessions:B.reduce((ce,pe)=>ce+pe.sessions.length,0),total:se.length,videos:se.filter(ce=>ce.type==="video").length,exams:se.filter(ce=>ce.type==="exam").length,assignments:se.filter(ce=>ce.type==="assignment").length,documents:se.filter(ce=>ce.type==="document").length};return c?e.jsxs("div",{className:"space-y-4",children:[R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:R}),I&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uC8FC\uCC28\uBCC4 \uAC15\uC758\uBAA9\uCC28"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:["\uCD1D ",p,"\uC8FC\uCC28"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:(n==null?void 0:n.haksaCourseName)||(n==null?void 0:n.subjectName)||"\uAC15\uC88C\uBA85 \uC5C6\uC74C"})]}),(Ne.sessions>0||Ne.total>0)&&e.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[e.jsxs("div",{className:"px-4 py-3 bg-indigo-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-indigo-600",children:Ne.sessions}),e.jsx("div",{className:"text-xs text-indigo-600",children:"\uCC28\uC2DC"})]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:Ne.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"\uC804\uCCB4"})]}),e.jsxs("div",{className:"px-4 py-3 bg-blue-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:Ne.videos}),e.jsx("div",{className:"text-xs text-blue-600",children:"\uB3D9\uC601\uC0C1"})]}),e.jsxs("div",{className:"px-4 py-3 bg-red-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-red-600",children:Ne.exams}),e.jsx("div",{className:"text-xs text-red-600",children:"\uC2DC\uD5D8"})]}),e.jsxs("div",{className:"px-4 py-3 bg-purple-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-purple-600",children:Ne.assignments}),e.jsx("div",{className:"text-xs text-purple-600",children:"\uACFC\uC81C"})]}),e.jsxs("div",{className:"px-4 py-3 bg-green-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-green-600",children:Ne.documents}),e.jsx("div",{className:"text-xs text-green-600",children:"\uC790\uB8CC"})]})]}),e.jsx("div",{className:"space-y-2",children:B.map(ce=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>C(ce.weekNumber),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ce.isExpanded?e.jsx(dr,{className:"w-5 h-5 text-gray-500"}):e.jsx(Jt,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:ce.title}),ce.sessions.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[ce.sessions.length,"\uAC1C \uCC28\uC2DC"]})]}),e.jsxs("button",{onClick:pe=>{pe.stopPropagation(),k(ce.weekNumber)},className:"flex items-center gap-1 px-3 py-1.5 text-sm text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),ce.isExpanded&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-white space-y-3",children:ce.sessions.length>0?ce.sessions.map((pe,Ee)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 bg-indigo-50/50 cursor-pointer hover:bg-indigo-50 transition-colors",onClick:()=>f(ce.weekNumber,pe.sessionId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[pe.isExpanded?e.jsx(dr,{className:"w-4 h-4 text-indigo-500"}):e.jsx(Jt,{className:"w-4 h-4 text-indigo-500"}),e.jsx("input",{type:"text",value:pe.sessionName,onChange:fe=>E(ce.weekNumber,pe.sessionId,fe.target.value),onClick:fe=>fe.stopPropagation(),className:"px-2 py-1 bg-white border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),pe.contents.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 text-xs rounded",children:[pe.contents.length,"\uAC1C \uCF58\uD150\uCE20"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:fe=>{fe.stopPropagation(),S(ce.weekNumber,pe.sessionId)},className:"flex items-center gap-1 px-2.5 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[e.jsx(yt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),M(ce.weekNumber,pe.sessionId)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"\uCC28\uC2DC \uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]})]}),pe.isExpanded&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 bg-white",children:[e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"\uCC28\uC2DC \uC218\uAC15\uAE30\uAC04(\uB0A0\uC9DC+\uC2DC\uAC04)"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"date",value:pe.startDate||"",onChange:fe=>$(ce.weekNumber,pe.sessionId,"startDate",fe.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"time",value:pe.startTime||"",onChange:fe=>$(ce.weekNumber,pe.sessionId,"startTime",fe.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:pe.endDate||"",onChange:fe=>$(ce.weekNumber,pe.sessionId,"endDate",fe.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("input",{type:"time",value:pe.endTime||"",onChange:fe=>$(ce.weekNumber,pe.sessionId,"endTime",fe.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"\uC65C: \uCC28\uC2DC \uC218\uAC15\uAE30\uAC04\uC744 \uC9C0\uB098\uBA74 \uCF58\uD150\uCE20\uB97C \uC7A0\uADF8\uACE0, \uCD9C\uC11D \uD310\uC815\uB3C4 \uC774 \uAE30\uAC04\uC73C\uB85C \uACC4\uC0B0\uD569\uB2C8\uB2E4."})]}),pe.contents.length>0?e.jsx("div",{className:"space-y-2",children:pe.contents.map(fe=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-lg group hover:bg-gray-100 transition-colors",children:[ye(fe.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800 truncate",children:fe.title}),ke(fe.type)]}),fe.description&&e.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:fe.description})]}),fe.duration&&e.jsx("span",{className:"text-sm text-gray-500 flex-shrink-0",children:fe.duration}),fe.type==="video"&&e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"\uC778\uC815\uC2DC\uAC04"}),e.jsx("input",{type:"number",min:"0",value:fe.completeTime||"",onChange:De=>ue(ce.weekNumber,pe.sessionId,fe.id,Number(De.target.value)),onClick:De=>De.stopPropagation(),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uBD84"}),e.jsx("span",{className:"text-xs text-gray-500",children:"\uBD84"})]}),e.jsx("button",{onClick:()=>A(fe,pe.sessionId),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uD3B8\uC9D1",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(ce.weekNumber,pe.sessionId,fe.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]},fe.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>S(ce.weekNumber,pe.sessionId),className:"mt-2 text-sm text-blue-600 hover:underline",children:"+ \uCF58\uD150\uCE20 \uCD94\uAC00\uD558\uAE30"})]})]})]},pe.sessionId)):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>k(ce.weekNumber),className:"mt-2 text-sm text-indigo-600 hover:underline",children:"+ \uCC28\uC2DC \uCD94\uAC00\uD558\uAE30"})]})})]},ce.weekNumber))}),e.jsx(Km,{isOpen:q,onClose:()=>H(!1),weekNumber:P,onAdd:y}),e.jsx(Vm,{isOpen:g,onClose:()=>{F(!1),b(null),w(null)},content:N,onSave:Z})]}):e.jsx(cd,{courseId:r,embedded:!0})}function Oc(r){if(r==null)return"";const n=String(r),c=/[",\r\n]/.test(n),d=n.replace(/"/g,'""');return c?`"${d}"`:d}function Zm(r,n){const c=[];return c.push(r.map(Oc).join(",")),n.forEach(d=>{c.push(d.map(Oc).join(","))}),c.join(`\r
`)}function Pn(r,n,c){const d=`\uFEFF${Zm(n,c)}`,p=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(p),v=document.createElement("a");v.href=m,v.download=r,document.body.appendChild(v),v.click(),v.remove(),URL.revokeObjectURL(m)}function zc(r){if(!r)return"-";const n=String(r).trim();return n.length<=1?"*":`${n[0]}${"*".repeat(n.length-1)}`}function Pl(r){if(!r)return"-";const n=String(r).trim();return n.length<=2?"*".repeat(n.length):n.length<=4?`${n[0]}${"*".repeat(n.length-1)}`:`${n.slice(0,2)}${"*".repeat(n.length-4)}${n.slice(-2)}`}function Uc(r){if(!r)return"-";const n=String(r).trim(),[c,d]=n.split("@");return d?`${c.length<=1?"*":`${c[0]}${"*".repeat(Math.min(3,c.length-1))}`}@${d}`:Pl(n)}function ex(r){if(!r)return"-";const n=String(r).replace(/\D/g,"");return n.length<7?r:n.length===10?`${n.slice(0,3)}-***-${n.slice(6)}`:n.length>=11?`${n.slice(0,3)}-****-${n.slice(-4)}`:r}function tx({courseId:r,course:n}){const c=Number((n==null?void 0:n.mappedCourseId)??r),d=(n==null?void 0:n.sourceType)==="haksa",[p,m]=o.useState([]),[v,I]=o.useState([]),[D,R]=o.useState(!1),[_,L]=o.useState(null),[j,T]=o.useState(""),[W,G]=o.useState(!0),[B,q]=o.useState(!1),[H,P]=o.useState(""),[z,Y]=o.useState(null),[h,g]=o.useState(null),[F,N]=o.useState(!1),[b,K]=o.useState(!1),[w,C]=o.useState(""),[f,k]=o.useState(""),[E,$]=o.useState("\uC804\uCCB4"),[M,S]=o.useState("\uC804\uCCB4"),[A,y]=o.useState([]),[Q,Z]=o.useState(1),[ue,ye]=o.useState(0),[ke,se]=o.useState(!1),[be,Ne]=o.useState(null),[ce,pe]=o.useState([]),Ee=async Ae=>{R(!0),L(null),G(!0);try{const ve=await le.getCourseStudents({courseId:c,keyword:Ae??j});if(ve.rst_code!=="0000")throw new Error(ve.rst_message);m(ve.rst_data??[])}catch(ve){L(ve instanceof Error?ve.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}};o.useEffect(()=>{if(d)return;let Ae=!1;return(async()=>{R(!0),L(null);try{const Te=await le.getCourseStudents({courseId:c});if(Te.rst_code!=="0000")throw new Error(Te.rst_message);Ae||m(Te.rst_data??[])}catch(Te){Ae||L(Te instanceof Error?Te.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{Ae||R(!1)}})(),()=>{Ae=!0}},[c,d]);const fe=async Ae=>{if(!(n!=null&&n.haksaCourseCode)){L("\uD559\uC0AC \uACFC\uBAA9 \uCF54\uB4DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}R(!0),L(null),G(!0);try{const ve=await le.getHaksaCourseStudents({courseCode:n.haksaCourseCode,openYear:n.haksaOpenYear,openTerm:n.haksaOpenTerm,bunbanCode:n.haksaBunbanCode,groupCode:n.haksaGroupCode,keyword:Ae});if(ve.rst_code!=="0000")throw new Error(ve.rst_message);I(ve.rst_data??[])}catch(ve){L(ve instanceof Error?ve.message:"\uD559\uC0AC \uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}};o.useEffect(()=>{d&&fe("")},[d,n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]);const De=p.length;o.useEffect(()=>{const Ae=setTimeout(()=>k(w),250);return()=>clearTimeout(Ae)},[w]),o.useEffect(()=>{if(!b)return;let Ae=!1;return(async()=>{se(!0),Ne(null);try{const Te=M!=="\uC804\uCCB4"?M:E!=="\uC804\uCCB4"?E:void 0,Ke=await le.getLearners({keyword:f,deptKeyword:Te,page:Q,limit:30});if(Ke.rst_code!=="0000")throw new Error(Ke.rst_message);const Ve=Ke.rst_data??[],Pe=Ve.map(ut=>{const Rt=String(ut.dept_path||""),mt=Rt.split(" > ").map(Zt=>Zt.trim()).filter(Boolean),os=mt[0]||String(ut.dept_nm||"-")||"-",_s=(mt.length>0?mt[mt.length-1]:String(ut.dept_nm||"-"))||"-";return{id:String(ut.id),name:String(ut.name||ut.user_nm||"-"),campus:os,major:_s,studentId:String(ut.student_id||""),email:String(ut.email||""),deptPath:Rt}});Ae||(y(Pe),ye(Number(Ke.rst_total??Ke.rst_count??Ve.length??0)))}catch(Te){Ae||Ne(Te instanceof Error?Te.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{Ae||se(!1)}})(),()=>{Ae=!0}},[b,f,E,M,Q]);const He=Ae=>{Y(Ae),g(null),q(!0)},ie=()=>{F||(q(!1),g(null),Y(null))},Me=async Ae=>{const ve=H.trim();if(!ve)return g("\uC0AC\uC720\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1;const Te=d?[]:p.map(Pe=>Number(Pe.user_id)).filter(Pe=>Number.isFinite(Pe)&&Pe>0),Ke=d?v.length:p.length,Ve=Ae==="download"?"\uC218\uAC15\uC0DD \uC815\uBCF4 \uB2E4\uC6B4\uB85C\uB4DC":"\uC218\uAC15\uC0DD \uC815\uBCF4 \uBCF4\uAE30";try{N(!0);const Pe=await le.logPrivacyAccess({logType:Ae==="download"?"E":"V",purpose:ve,pageName:Ve,courseId:c,userIds:Te,userCnt:Ke});if(Pe.rst_code!=="0000")throw new Error(Pe.rst_message);return!0}catch(Pe){return g(Pe instanceof Error?Pe.message:"\uAC1C\uC778\uC815\uBCF4 \uB85C\uADF8 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),!1}finally{N(!1)}},U=Ae=>{if(!B)return null;const ve=z==="download"?"\uAC1C\uC778 \uC815\uBCF4 \uBCF4\uAE30":"\uAC00\uB824\uC9C4 \uC815\uBCF4 \uBCF4\uAE30";return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-xl",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ve}),e.jsx("button",{onClick:ie,className:"text-gray-400 hover:text-gray-600","aria-label":"\uB2EB\uAE30",children:"\u2715"})]}),e.jsxs("div",{className:"px-6 py-4 space-y-4 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-gray-100 rounded-lg px-4 py-3 leading-6",children:"\uAC1C\uC778\uC815\uBCF4\uBCF4\uD638\uB97C \uC704\uD558\uC5EC \uAC1C\uC778\uC815\uBCF4\uC758 \uC785.\uCD9C\uB825 \uBC0F \uC218\uC815\uC0AC\uD56D, \uD30C\uC77C\uBCC4.\uB2F4\uB2F9\uC790\uBCC4 \uB370\uC774\uD130\uC811\uADFC\uB0B4\uC5ED\uC744 \uAE30\uB85D\uD569\uB2C8\uB2E4."}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-1",children:"\uAE30\uB85D \uD56D\uBAA9"}),e.jsx("div",{children:"\uC544\uC774\uB514(\uC2DD\uBCC4\uC815\uBCF4), \uC131\uBA85, \uC870\uD68C\uC77C\uC2DC, \uC870\uD68C\uC790\uC544\uC774\uD53C, \uC218\uD589\uC5C5\uBB34, \uC870\uD68C \uBAA9\uC801 \uB4F1"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-1",children:"\uCC38\uACE0"}),e.jsx("div",{children:"\uAC1C\uC778\uC815\uBCF4 \uBCF4\uD638\uBC95 \uC81C29\uC870(\uC548\uC804\uC870\uCE58\uC758\uBB34), \uB3D9\uBC95 \uC2DC\uD589\uB839 \uC81C30\uC870(\uAC1C\uC778\uC815\uBCF4\uC758 \uC548\uC804\uC131 \uD655\uBCF4 \uC870\uCE58), \uAC1C\uC778\uC815\uBCF4\uC758 \uC548\uC804\uC131 \uD655\uBCF4\uC870\uCE58 \uAE30\uC900 \uACE0\uC2DC \uC81C8\uC870(\uC811\uC18D\uAE30\uB85D\uC758 \uBCF4\uAD00 \uBC0F \uC810\uAC80)"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-1",children:"\uC870\uD68C \uBAA9\uC801"}),e.jsx("input",{value:H,onChange:Te=>P(Te.target.value),placeholder:"\uC870\uD68C \uBAA9\uC801\uC744 \uC785\uB825\uD558\uC138\uC694.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h&&e.jsx("div",{className:"text-sm text-red-600",children:h})]}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-center",children:e.jsx("button",{onClick:async()=>{!z||!await Me(z)||(z==="view"&&G(!1),z==="download"&&Ae(),ie())},className:"px-6 py-2 text-sm text-white bg-amber-500 rounded-lg hover:bg-amber-600 disabled:bg-amber-300",disabled:F,children:F?"\uC800\uC7A5 \uC911...":"\uAC1C\uC778\uC815\uBCF4 \uC870\uD68C \uAE30\uB85D \uB0B4\uC6A9\uC744 \uD655\uC778\uD558\uC600\uC2B5\uB2C8\uB2E4."})})]})})},Ce=()=>{K(!0),C(""),k(""),$("\uC804\uCCB4"),S("\uC804\uCCB4"),Z(1),pe([])},J=()=>{ke||K(!1)},oe=Ae=>{const ve=ce.some(Te=>Te.id===Ae.id);pe(ve?Te=>Te.filter(Ke=>Ke.id!==Ae.id):Te=>[...Te,Ae])},ae=()=>{pe([...A])},de=()=>{pe([])},ne=async()=>{const Ae=ce.map(ve=>Number(ve.id)).filter(ve=>Number.isFinite(ve)&&ve>0);if(Ae.length===0){alert("\uC120\uD0DD\uB41C \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{const ve=await le.addCourseStudents({courseId:c,userIds:Ae});if(ve.rst_code!=="0000")throw new Error(ve.rst_message);const Te=Number(ve.rst_data??0),Ke=Number(ve.rst_skipped??0),Ve=Number(ve.rst_not_found??0);alert(`\uCD94\uAC00 \uC644\uB8CC: ${Te}\uBA85${Ke>0?` (\uC911\uBCF5 ${Ke}\uBA85 \uC81C\uC678)`:""}${Ve>0?` (\uBBF8\uC874\uC7AC ${Ve}\uAC74)`:""}`),J(),await Ee()}catch(ve){alert(ve instanceof Error?ve.message:"\uC218\uAC15\uC0DD \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},je=async(Ae,ve)=>{if(window.confirm(`${ve||"\uD574\uB2F9 \uC218\uAC15\uC0DD"}\uC744(\uB97C) \uACFC\uBAA9\uC5D0\uC11C \uC81C\uC678\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const Ke=await le.removeCourseStudent({courseId:c,userId:Ae});if(Ke.rst_code!=="0000")throw new Error(Ke.rst_message);await Ee()}catch(Ke){alert(Ke instanceof Error?Ke.message:"\uC218\uAC15\uC0DD \uC81C\uC678 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},_e=o.useMemo(()=>[...p].sort((Ae,ve)=>String(Ae.name||"").localeCompare(String(ve.name||""))),[p]),Ge=()=>{const Ae=new Date().toISOString().slice(0,10).replace(/-/g,""),ve=`course_${c}_students_${Ae}.csv`,Te=["No","course_user_id","user_id","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uC9C4\uB3C4\uC728(%)"],Ke=_e.map((Ve,Pe)=>{const ut=Number(Ve.progress??Ve.progress_ratio??0);return[Pe+1,Ve.course_user_id,Ve.user_id,Ve.student_id??"",Ve.name??"",Ve.email??"",Math.round(ut)]});Pn(ve,Te,Ke)},Re=()=>{He("download")},et=()=>{if(!b)return null;const Ae=["\uC804\uCCB4",...Array.from(new Set(A.map(Pe=>Pe.campus).filter(Boolean)))],ve=["\uC804\uCCB4",...Array.from(new Set(A.filter(Pe=>E==="\uC804\uCCB4"||Pe.campus===E).map(Pe=>Pe.major).filter(Boolean)))],Te=Math.max(1,Math.ceil((ue||0)/30)),Ke=Q>1,Ve=Q<Te;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uD559\uC2B5\uC790 \uC120\uD0DD"}),e.jsx("button",{onClick:J,className:"text-gray-400 hover:text-gray-600","aria-label":"\uB2EB\uAE30",children:"?"})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC774\uB984 \uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:w,onChange:Pe=>{C(Pe.target.value),Z(1)},placeholder:"\uD559\uC2B5\uC790 \uC774\uB984 \uAC80\uC0C9...",className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCEA0\uD37C\uC2A4"}),e.jsx("select",{value:E,onChange:Pe=>{$(Pe.target.value),S("\uC804\uCCB4"),Z(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:Ae.map(Pe=>e.jsx("option",{value:Pe,children:Pe},Pe))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5"}),e.jsx("select",{value:M,onChange:Pe=>{S(Pe.target.value),Z(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:ve.map(Pe=>e.jsx("option",{value:Pe,children:Pe},Pe))})]})]}),be&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:be}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ae,disabled:ke,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC804\uCCB4 \uC120\uD0DD"}),e.jsx("button",{onClick:de,disabled:ke,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD604\uC7AC \uBAA9\uB85D \uC804\uCCB4 \uD574\uC81C"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:ke?"\uBD88\uB7EC\uC624\uB294 \uC911...":`\uAC80\uC0C9 \uACB0\uACFC: ${ue}\uBA85 / \uC120\uD0DD\uB41C: ${ce.length}\uBA85`})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.map(Pe=>{const ut=ce.some(Rt=>Rt.id===Pe.id);return e.jsxs("div",{onClick:()=>oe(Pe),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${ut?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-900",children:Pe.name}),ut&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white",children:"\u2713"})})]}),e.jsx("div",{className:"text-sm text-gray-600",children:Pe.campus}),e.jsx("div",{className:"text-sm text-gray-600",children:Pe.major})]},Pe.id)}),!ke&&!be&&A.length===0&&e.jsx("div",{className:"col-span-3 text-center text-sm text-gray-500 py-6",children:"\uD45C\uC2DC\uD560 \uD559\uC2B5\uC790\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{type:"button",disabled:ke||!Ke,onClick:()=>Z(Pe=>Math.max(1,Pe-1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uC774\uC804"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Q," / ",Te]}),e.jsx("button",{type:"button",disabled:ke||!Ve,onClick:()=>Z(Pe=>Math.min(Te,Pe+1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uB2E4\uC74C"})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:J,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:ne,disabled:ke||ce.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 transition-colors",children:"\uC120\uD0DD \uD559\uC2B5\uC790 \uCD94\uAC00"})]})]})})};if(d){const Ae=v.length,ve=[...v].sort((Ve,Pe)=>String(Ve.name||"").localeCompare(String(Pe.name||""))),Te=()=>{const Ve=new Date().toISOString().slice(0,10).replace(/-/g,""),Pe=`haksa_course_${(n==null?void 0:n.haksaCourseCode)||"unknown"}_students_${Ve}.csv`,ut=["No","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uD734\uB300\uD3F0","\uC0C1\uD0DC"],Rt=ve.map((mt,os)=>[os+1,mt.student_id??"",mt.name??"",mt.email??"",mt.mobile??"",mt.visible==="Y"?"\uC815\uC0C1":mt.visible==="N"?"\uD3D0\uAC15":mt.visible??""]);Pn(Pe,ut,Rt)},Ke=()=>{He("download")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(qs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC218\uAC15\uC0DD \uBAA9\uB85D\uC740 \uD559\uC0AC View\uB97C \uC77D\uC5B4\uC624\uB294 \uBC29\uC2DD\uC73C\uB85C \uC81C\uACF5\uB429\uB2C8\uB2E4(\uC77D\uAE30 \uC804\uC6A9)."]})]}),W&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(qs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:"\uAC1C\uC778\uC815\uBCF4 \uBCF4\uD638\uB97C \uC704\uD574 \uC774\uB984/\uC774\uBA54\uC77C/\uD734\uB300\uD3F0\uC774 \uAC00\uB824\uC838 \uC788\uC2B5\uB2C8\uB2E4. \uD655\uC778\uC774 \uD544\uC694\uD558\uBA74 \u201C\uAC00\uB824\uC9C4 \uC815\uBCF4 \uBCF4\uAE30\u201D\uB97C \uB20C\uB7EC \uC8FC\uC138\uC694."})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",Ae,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:j,onChange:Ve=>T(Ve.target.value),placeholder:"\uD559\uBC88/\uC774\uB984/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>fe(j),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),W?e.jsx("button",{onClick:()=>He("view"),disabled:Ae===0,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:bg-amber-300 transition-colors",children:e.jsx("span",{children:"\uAC00\uB824\uC9C4 \uC815\uBCF4 \uBCF4\uAE30"})}):e.jsx("span",{className:"text-sm text-emerald-600",children:"\uAC1C\uC778\uC815\uBCF4 \uD45C\uC2DC\uC911"}),e.jsxs("button",{onClick:Ke,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),D&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),_&&e.jsx("div",{className:"text-sm text-red-600",children:_}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD734\uB300\uD3F0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[ve.map((Ve,Pe)=>{const ut=Ve.visible==="Y"?"\uC815\uC0C1":Ve.visible==="N"?"\uD3D0\uAC15":Ve.visible||"-";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:Pe+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:W?Pl(Ve.student_id):Ve.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:W?zc(Ve.name):Ve.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:W?Uc(Ve.email):Ve.email||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:W?ex(Ve.mobile):Ve.mobile||"-"}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:ut})]},`${Ve.student_id}-${Pe}`)}),!D&&!_&&ve.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),U(Te)]})}return e.jsxs("div",{children:[W&&e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-200 text-gray-700 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(qs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("div",{children:"\uAC1C\uC778\uC815\uBCF4 \uBCF4\uD638\uB97C \uC704\uD574 \uC774\uB984/\uC774\uBA54\uC77C\uC774 \uAC00\uB824\uC838 \uC788\uC2B5\uB2C8\uB2E4. \uD655\uC778\uC774 \uD544\uC694\uD558\uBA74 \u201C\uAC00\uB824\uC9C4 \uC815\uBCF4 \uBCF4\uAE30\u201D\uB97C \uB20C\uB7EC \uC8FC\uC138\uC694."})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",De,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:j,onChange:Ae=>T(Ae.target.value),placeholder:"\uC774\uB984/\uC544\uC774\uB514/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>Ee(j),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uAC15\uC0DD \uCD94\uAC00"})]}),W?e.jsx("button",{onClick:()=>He("view"),disabled:De===0,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:bg-amber-300 transition-colors",children:e.jsx("span",{children:"\uAC00\uB824\uC9C4 \uC815\uBCF4 \uBCF4\uAE30"})}):e.jsx("span",{className:"text-sm text-emerald-600",children:"\uAC1C\uC778\uC815\uBCF4 \uD45C\uC2DC\uC911"}),e.jsxs("button",{onClick:Re,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),D&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),_&&e.jsx("div",{className:"text-sm text-red-600",children:_}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[_e.map((Ae,ve)=>{const Te=Number(Ae.progress??Ae.progress_ratio??0);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:ve+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:W?Pl(Ae.student_id):Ae.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:W?zc(Ae.name):Ae.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:W?Uc(Ae.email):Ae.email||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${Math.max(0,Math.min(100,Te))}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(Te),"%"]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("button",{onClick:()=>je(Number(Ae.user_id),Ae.name),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(jt,{className:"w-4 h-4"}),"\uC81C\uC678"]})})]},Ae.course_user_id||`${Ae.user_id}-${ve}`)}),!D&&!_&&_e.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),U(Ge),et()]})}function Hc({isOpen:r,onClose:n,detail:c}){return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uB3C4 \uC0C1\uC138"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"p-5 space-y-3",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"text-gray-900",children:c.name||"-"})," (",c.student_id||"-",")"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uCC28\uC2DC: ",c.chapter?`${c.chapter}\uCC28\uC2DC`:"-"," \xB7 ",c.lesson_nm||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC9C4\uB3C4\uC728: ",Math.round(Number(c.ratio??0)),"%"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uD559\uC2B5\uC2DC\uAC04: ",c.study_time_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uB9C8\uC9C0\uB9C9 \uD559\uC2B5: ",c.last_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC5EC\uBD80: ",c.complete_yn==="Y"?"\uC644\uB8CC":"\uBBF8\uC644\uB8CC"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC77C\uC2DC: ",c.complete_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uBCF4\uAE30\uD69F\uC218: ",Number(c.view_cnt??0),"\uD68C"]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),e.jsx("div",{className:"flex justify-end p-5 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uD655\uC778"})})]})}):null}function sx({courseId:r,course:n}){const c=(n==null?void 0:n.sourceType)==="haksa",d=c?Number((n==null?void 0:n.mappedCourseId)??0):r,[p,m]=o.useState(null),v=p&&p>0?p:d,I=o.useMemo(()=>Js({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),[D,R]=o.useState([]),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState(!1),[B,q]=o.useState([]),[H,P]=o.useState(!1),[z,Y]=o.useState(null),[h,g]=o.useState(null),[F,N]=o.useState(null),[b,K]=o.useState([]),[w,C]=o.useState(!1),[f,k]=o.useState(null),[E,$]=o.useState([]),[M,S]=o.useState(!1),[A,y]=o.useState(null),[Q,Z]=o.useState(""),[ue,ye]=o.useState("attendance"),[ke,se]=o.useState(!1),[be,Ne]=o.useState(null);o.useEffect(()=>{g(null),N(null),K([]),$([]),Z("")},[r,n==null?void 0:n.mappedCourseId,n==null?void 0:n.sourceType]),o.useEffect(()=>{if(!c){m(null);return}if(d>0){m(null);return}if(!I){T("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let J=!1;return(async()=>{G(!0),T(null);try{const ae=await le.resolveHaksaCourse(I);if(ae.rst_code!=="0000")throw new Error(ae.rst_message);const de=Array.isArray(ae.rst_data)?ae.rst_data[0]:ae.rst_data,ne=Number((de==null?void 0:de.mapped_course_id)??0);if(!ne||Number.isNaN(ne))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");J||m(ne)}catch(ae){J||(m(null),T(ae instanceof Error?ae.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{J||G(!1)}})(),()=>{J=!0}},[c,d,I]),o.useEffect(()=>{if(!c||!I){R([]);return}let J=!1;return(async()=>{L(!0),T(null);try{const ae=await le.getHaksaCurriculum(I);if(ae.rst_code!=="0000")throw new Error(ae.rst_message);const de=Array.isArray(ae.rst_data)?ae.rst_data[0]:ae.rst_data,ne=(de==null?void 0:de.curriculum_json)||"",je=ne?JSON.parse(ne):[];J||R(Array.isArray(je)?je:[])}catch(ae){J||(R([]),T(ae instanceof Error?ae.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{J||L(!1)}})(),()=>{J=!0}},[c,I]),o.useEffect(()=>{if(!v||c&&_)return;let J=!1;return(async()=>{P(!0),Y(null);try{const ae=await le.getProgressSummary({courseId:v});if(ae.rst_code!=="0000")throw new Error(ae.rst_message);const de=ae.rst_data??[];if(J)return;q(de),!c&&!h&&de.length>0&&g(Number(de[0].lesson_id))}catch(ae){J||Y(ae instanceof Error?ae.message:"\uC9C4\uB3C4 \uC694\uC57D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{J||P(!1)}})(),()=>{J=!0}},[v,c,_]);const ce=o.useMemo(()=>{const J=new Map;return B.forEach(oe=>{J.set(Number(oe.lesson_id),oe)}),J},[B]),pe=o.useMemo(()=>c?[...D].sort((oe,ae)=>{const de=Number(oe.weekNumber??0),ne=Number(ae.weekNumber??0);return de-ne}).map((oe,ae)=>{const de=Number(oe.weekNumber??0),ne=Number.isFinite(de)&&de>0?de:ae+1,je=oe.title||`${ne}\uC8FC\uCC28`,Ge=(Array.isArray(oe.sessions)?oe.sessions:[]).map((Re,et)=>{const ve=(Array.isArray(Re.contents)?Re.contents:[]).filter(Ke=>String(Ke.type||"").toLowerCase()==="video"),Te=ve.map(Ke=>({lessonId:Number(Ke.lessonId??0),title:Ke.title||Ke.originalVideoTitle||"\uB3D9\uC601\uC0C1"})).filter(Ke=>Ke.lessonId>0);return{sessionId:String(Re.sessionId||`${ne}-${et+1}`),sessionName:Re.sessionName||`${et+1}\uCC28\uC2DC`,weekNumber:ne,weekTitle:je,sessionNo:Number(Re.sessionNo??0)||void 0,startDate:Re.startDate,startTime:Re.startTime,endDate:Re.endDate,endTime:Re.endTime,videoLessons:Te,videoCount:ve.length}});return{weekNumber:ne,weekTitle:je,sessions:Ge}}):[],[D,c]),Ee=o.useMemo(()=>pe.flatMap(J=>J.sessions),[pe]);o.useEffect(()=>{if(!c||F==="overall")return;if(Ee.length===0){N(null),g(null);return}if(F&&Ee.some(de=>de.sessionId===F))return;const oe=Ee.find(de=>de.videoLessons.length>0),ae=Ee[0];N((oe??ae).sessionId)},[c,Ee,F]),o.useEffect(()=>{var ae;if(!c)return;if(F==="overall"){g(-1);return}const J=Ee.find(de=>de.sessionId===F),oe=((ae=J==null?void 0:J.videoLessons[0])==null?void 0:ae.lessonId)??null;g(oe)},[c,F,Ee]),o.useEffect(()=>{if(!c)return;if(ue!=="attendance"){$([]);return}if(!F||F==="overall"){$([]);return}if(!I||!v)return;let J=!1;return(async()=>{S(!0),y(null);try{const ae=await le.getHaksaAttendance({...I,courseId:v,sessionId:F});if(ae.rst_code!=="0000")throw new Error(ae.rst_message);J||$(ae.rst_data??[])}catch(ae){J||($([]),y(ae instanceof Error?ae.message:"\uCD9C\uC11D \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{J||S(!1)}})(),()=>{J=!0}},[c,I,F,v]);const fe=o.useMemo(()=>B.find(J=>Number(J.lesson_id)===Number(h)),[B,h]),De=o.useMemo(()=>Ee.find(J=>J.sessionId===F)??null,[Ee,F]),He=J=>{if(J.videoLessons.length===0)return null;const oe=J.videoLessons.map(ne=>ce.get(ne.lessonId)).filter(ne=>!!ne);if(oe.length===0)return null;const ae=oe.reduce((ne,je)=>ne+Number(je.complete_rate??0),0)/oe.length,de=oe.reduce((ne,je)=>ne+Number(je.avg_ratio??0),0)/oe.length;return{completeRate:ae,avgRatio:de}},ie=async J=>{if(v){C(!0),k(null);try{const oe=await le.getProgressStudents({courseId:v,lessonId:J});if(oe.rst_code!=="0000")throw new Error(oe.rst_message);K(oe.rst_data??[])}catch(oe){k(oe instanceof Error?oe.message:"\uC9C4\uB3C4 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C(!1)}}};o.useEffect(()=>{h===null||h===0||!v||c&&ue!=="progress"||ie(h)},[h,v,c,ue]);const Me=o.useMemo(()=>{const J=Q.trim().toLowerCase();return J?b.filter(oe=>{const ae=String(oe.name||"").toLowerCase(),de=String(oe.student_id||"").toLowerCase(),ne=String(oe.email||"").toLowerCase();return ae.includes(J)||de.includes(J)||ne.includes(J)}):b},[b,Q]),U=o.useMemo(()=>{const J=Q.trim().toLowerCase();return J?E.filter(oe=>{const ae=String(oe.name||"").toLowerCase(),de=String(oe.student_id||"").toLowerCase();return ae.includes(J)||de.includes(J)}):E},[E,Q]),Ce=async J=>{if(!(!h||!v)){se(!0),Ne(null);try{const oe=await le.getProgressDetail({courseId:v,courseUserId:Number(J.course_user_id),lessonId:Number(h)});if(oe.rst_code!=="0000")throw new Error(oe.rst_message);const ae=Array.isArray(oe.rst_data)?oe.rst_data[0]:oe.rst_data;Ne(ae??null)}catch(oe){alert(oe instanceof Error?oe.message:"\uC9C4\uB3C4 \uC0C1\uC138 \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),se(!1)}}};return c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(qs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:["\uD559\uC0AC \uACFC\uBAA9\uC740 ",e.jsx("strong",{children:"\uC8FC\uCC28/\uCC28\uC2DC \uAE30\uC900"}),"\uC73C\uB85C \uCD9C\uC11D\uC744 \uD310\uC815\uD569\uB2C8\uB2E4. \uB3D9\uC601\uC0C1/\uC2DC\uD5D8/\uACFC\uC81C \uBAA8\uB450 ",e.jsx("strong",{children:"\uCC28\uC2DC \uC218\uAC15\uAE30\uAC04 \uC548\uC5D0 \uC81C\uCD9C\xB7\uC644\uB8CC"}),"\uB418\uC5B4\uC57C \uCD9C\uC11D\uC785\uB2C8\uB2E4. \uD544\uC694\uD558\uBA74 ",e.jsx("strong",{children:"\uC9C4\uB3C4 \uBCF4\uAE30"}),"\uB85C \uC804\uD658\uD574 \uC608\uC804 \uC9C4\uB3C4 \uD654\uBA74\uB3C4 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."]})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:j}),W&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg text-sm",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700 flex items-center justify-between gap-3",children:[e.jsx("span",{children:"\uC8FC\uCC28\uBCC4 \uCC28\uC2DC \uBAA9\uB85D"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("button",{onClick:()=>ye("attendance"),className:`px-2 py-1 rounded ${ue==="attendance"?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700"}`,children:"\uCD9C\uC11D \uBCF4\uAE30"}),e.jsx("button",{onClick:()=>ye("progress"),className:`px-2 py-1 rounded ${ue==="progress"?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700"}`,children:"\uC9C4\uB3C4 \uBCF4\uAE30"})]})]}),_&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),z&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:z}),!_&&pe.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[ue==="progress"&&e.jsx("button",{onClick:()=>{N("overall"),g(-1)},className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${F==="overall"?"bg-purple-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}),e.jsx("div",{className:"text-xs text-gray-600",children:"\uC804\uCCB4 \uC9C4\uB3C4\uC728 \uD655\uC778"})]}),e.jsx(Jt,{className:`w-4 h-4 ${F==="overall"?"text-purple-600":"text-gray-400"}`})]})}),pe.map(J=>e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 bg-gray-50 border-b border-gray-200",children:[J.weekTitle,J.sessions.length>0?` \xB7 ${J.sessions.length}\uAC1C \uCC28\uC2DC`:""]}),e.jsx("div",{className:"divide-y divide-gray-200",children:J.sessions.map(oe=>{const ae=oe.sessionId===F,de=He(oe),ne=oe.videoCount>0?`\uB3D9\uC601\uC0C1 ${oe.videoCount}\uAC1C`:"\uB3D9\uC601\uC0C1 \uC5C6\uC74C";return e.jsx("button",{onClick:()=>N(oe.sessionId),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${ae?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:oe.sessionName}),e.jsxs("div",{className:"text-xs text-gray-600",children:[ne,ue==="progress"&&de?` \xB7 \uC644\uB8CC ${Math.round(de.completeRate)}% \xB7 \uD3C9\uADE0 ${Math.round(de.avgRatio)}%`:""]})]}),e.jsx(Jt,{className:`w-4 h-4 text-gray-400 ${ae?"text-blue-600":""}`})]})},oe.sessionId)})})]},`week-${J.weekNumber}`))]})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700 min-w-0 flex-1 truncate",children:F==="overall"&&ue==="progress"?e.jsx("span",{className:"text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}):De?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[De.weekTitle," \xB7 ",De.sessionName]}),(De.startDate||De.endDate)&&e.jsxs("span",{className:"text-gray-600",children:[" ","\xB7 ",De.startDate||"-"," ",De.startTime||"00:00"," ","~ ",De.endDate||"-"," ",De.endTime||"23:59"]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[ue==="progress"&&De&&De.videoLessons.length>1&&e.jsx("select",{value:h??"",onChange:J=>g(Number(J.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 max-w-[200px] truncate",children:De.videoLessons.map(J=>e.jsx("option",{value:J.lessonId,children:J.title},J.lessonId))}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:Q,onChange:J=>Z(J.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),ue==="attendance"&&M&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),ue==="attendance"&&A&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:A}),ue==="attendance"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uCD9C\uC11D"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uB3D9\uC601\uC0C1"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uC2DC\uD5D8"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uACFC\uC81C"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[U.map(J=>{const oe=J.attend_yn==="Y",ae=Number(J.video_done_cnt??0),de=Number(J.video_total_cnt??0),ne=Number(J.exam_done_cnt??0),je=Number(J.exam_total_cnt??0),_e=Number(J.homework_done_cnt??0),Ge=Number(J.homework_total_cnt??0);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${oe?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:oe?"\uCD9C\uC11D":"\uACB0\uC11D"})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:[ae,"/",de]}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:[ne,"/",je]}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:[_e,"/",Ge]})]},J.course_user_id)}),!M&&!A&&U.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),ue==="progress"&&e.jsxs(e.Fragment,{children:[De&&De.videoLessons.length===0&&e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"\uC120\uD0DD\uD55C \uCC28\uC2DC\uC5D0\uB294 \uB3D9\uC601\uC0C1 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),w&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),(h===-1||h)&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uCD1D \uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:h===-1?"\uC804\uCCB4 \uC9C4\uB3C4\uC728":"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:h===-1?"\uC218\uB8CC\uC5EC\uBD80":"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),h!==-1&&e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[Me.map(J=>{const oe=Math.max(0,Math.min(100,Number(J.ratio??0))),ae=J.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:J.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${h===-1?"bg-purple-600":ae?"bg-green-600":"bg-blue-600"}`,style:{width:`${oe}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(oe),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:h===-1?e.jsx("span",{className:`px-2 py-1 rounded text-xs ${ae?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:ae?"\uC218\uB8CC":"\uBBF8\uC218\uB8CC"}):J.last_date_conv||"-"}),h!==-1&&e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:e.jsx("button",{onClick:()=>Ce(J),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors whitespace-nowrap",children:"\uBCF4\uAE30"})})]},J.course_user_id)}),!w&&!f&&Me.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:h===-1?5:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]})]}),e.jsx(Hc,{isOpen:ke,onClose:()=>se(!1),detail:be})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700",children:"\uCC28\uC2DC \uBAA9\uB85D"}),H&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),z&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:z}),!H&&!z&&B.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[e.jsx("button",{onClick:()=>g(-1),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${h===-1?"bg-purple-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}),e.jsx("div",{className:"text-xs text-gray-600",children:"\uC804\uCCB4 \uC9C4\uB3C4\uC728 \uD655\uC778"})]}),e.jsx(Jt,{className:`w-4 h-4 ${h===-1?"text-purple-600":"text-gray-400"}`})]})}),B.map(J=>{const oe=Number(J.lesson_id)===Number(h),ae=Number(J.complete_rate??0);return e.jsx("button",{onClick:()=>g(Number(J.lesson_id)),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${oe?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm text-gray-900 truncate",children:[J.chapter,". ",J.lesson_nm||"-"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["\uC644\uB8CC ",Math.round(ae),"% \xB7 \uD3C9\uADE0 ",Math.round(Number(J.avg_ratio??0)),"%"]})]}),e.jsx(Jt,{className:`w-4 h-4 text-gray-400 ${oe?"text-blue-600":""}`})]})},`${J.lesson_id}-${J.chapter}`)})]})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700 min-w-0 flex-1 truncate",children:h===-1?e.jsx("span",{className:"text-purple-700 font-medium",children:"\uC804\uCCB4 \uC815\uBCF4 \uBCF4\uAE30"}):fe?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[fe.chapter,"\uCC28\uC2DC"]}),e.jsxs("span",{className:"text-gray-600",children:[" \xB7 ",fe.lesson_nm]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:Q,onChange:J=>Z(J.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),w&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:"\uCD1D \uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:h===-1?"\uC804\uCCB4 \uC9C4\uB3C4\uC728":"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap",children:h===-1?"\uC218\uB8CC\uC5EC\uBD80":"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),h!==-1&&e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[Me.map(J=>{const oe=Math.max(0,Math.min(100,Number(J.ratio??0))),ae=J.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:J.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:J.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${h===-1?"bg-purple-600":ae?"bg-green-600":"bg-blue-600"}`,style:{width:`${oe}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(oe),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:h===-1?e.jsx("span",{className:`px-2 py-1 rounded text-xs ${ae?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:ae?"\uC218\uB8CC":"\uBBF8\uC218\uB8CC"}):J.last_date_conv||"-"}),h!==-1&&e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:e.jsx("button",{onClick:()=>Ce(J),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors whitespace-nowrap",children:"\uBCF4\uAE30"})})]},J.course_user_id)}),!w&&!f&&Me.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:h===-1?5:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]}),e.jsx(Hc,{isOpen:ke,onClose:()=>se(!1),detail:be})]})}const rx=new Set(["p","br","b","i","u","strong","em","span","ul","ol","li","h1","h2","h3","h4","h5","h6","table","thead","tbody","tr","th","td","blockquote","pre","code","hr","div"]),ux=new Set(["class","style","colspan","rowspan","align","valign"]),Yc=/^on|^data-|javascript:|vbscript:|expression\(/i,nx=/expression|url\s*\(|behavior|binding|-moz-binding|javascript/i;function Ml(r){if(r==null)return"";const n=String(r),p=new DOMParser().parseFromString(`<div>${n}</div>`,"text/html").body.firstChild;if(!p)return"";const m=v=>{const I=Array.from(v.childNodes);for(const D of I)if(D.nodeType===Node.ELEMENT_NODE){const R=D,_=R.tagName.toLowerCase();if(!rx.has(_)){const j=document.createTextNode(R.textContent||"");v.replaceChild(j,D);continue}const L=Array.from(R.attributes);for(const j of L){const T=j.name.toLowerCase(),W=j.value;if(Yc.test(T)||Yc.test(W)){R.removeAttribute(j.name);continue}if(!ux.has(T)){R.removeAttribute(j.name);continue}T==="style"&&nx.test(W)&&R.removeAttribute("style")}m(R)}};return m(p),p.innerHTML}function ax({course:r}){const[n,c]=o.useState(""),[d,p]=o.useState(""),[m,v]=o.useState(!1),[I,D]=o.useState(null),[R,_]=o.useState([]),[L,j]=o.useState([]),T=o.useMemo(()=>r.courseId||r.course_id_conv||r.course_cd||String(r.id),[r.courseId,r.course_id_conv,r.course_cd,r.id]),W=o.useMemo(()=>r.subjectName||r.course_nm||r.course_nm_conv||"-",[r.subjectName,r.course_nm,r.course_nm_conv]),G=o.useMemo(()=>r.period||r.period_conv||"-",[r.period,r.period_conv]),B=o.useMemo(()=>r.programName||r.program_nm_conv||"-",[r.programName,r.program_nm_conv]),q=h=>{if(!h)return{start:"",end:""};const g=h.match(/(\d{4})[.\/-](\d{2})[.\/-](\d{2})/g);if(!g||g.length<2)return{start:"",end:""};const F=N=>{const b=N.replace(/[.]/g,"-").split("-");if(b.length<3)return"";const[K,w,C]=b;return`${K}-${w}-${C}`};return{start:F(g[0]),end:F(g[1])}},H=async()=>{var f;const h=Number(r.mappedCourseId??r.mapped_course_id??0);if(h>0)return h;if(r.sourceType!=="haksa"){const k=Number(r.id);return Number.isFinite(k)?k:0}const g=r.haksaCourseCode??r.haksa_course_code,F=r.haksaOpenYear??r.haksa_open_year,N=r.haksaOpenTerm??r.haksa_open_term,b=r.haksaBunbanCode??r.haksa_bunban_code,K=r.haksaGroupCode??r.haksa_group_code;if(!g||!F||!N||!b||!K)return 0;const w=await le.resolveHaksaCourse({courseCode:g,openYear:F,openTerm:N,bunbanCode:b,groupCode:K});if(w.rst_code!=="0000")throw new Error(w.rst_message);const C=Number(((f=w.rst_data)==null?void 0:f.mapped_course_id)??0);return Number.isFinite(C)?C:0},P=async h=>{v(!0),D(null);try{const g=await H();if(!g)throw new Error("\uD559\uC0AC \uACFC\uBAA9\uC774 LMS\uC5D0 \uB9E4\uD551\uB418\uC9C0 \uC54A\uC544 \uCD9C\uB825\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");const F=await le.getCourseFeedbackReport({courseId:g,startDate:(h==null?void 0:h.start)||n||void 0,endDate:(h==null?void 0:h.end)||d||void 0});if(F.rst_code!=="0000")throw new Error(F.rst_message);_(F.rst_homework??[]),j(F.rst_qna??[])}catch(g){_([]),j([]),D(g instanceof Error?g.message:"\uD1B5\uD569 \uCD9C\uB825 \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}},z=async()=>{await P()},Y=()=>{if(R.length===0&&L.length===0){alert("\uCD9C\uB825\uD560 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}const h=Z=>Z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),g=Z=>h(Z).replace(/\n/g,"<br />"),F=(Z,ue)=>`<span class="${ue==="green"?"badge green":ue==="orange"?"badge orange":ue==="blue"?"badge blue":"badge gray"}">${h(Z)}</span>`,N="\uACFC\uBAA9 \uD1B5\uD569 \uCD9C\uB825",b=W,K=T,w=G,C=B,f=`${n||"-"} ~ ${d||"-"}`,k=new Map;R.forEach(Z=>{const ue=Number(Z.homework_id??0);k.has(ue)||k.set(ue,{homeworkName:Z.homework_nm||`\uACFC\uC81C ${ue}`,rows:[]}),k.get(ue).rows.push(Z)});const E=Array.from(k.entries()).sort((Z,ue)=>Z[0]-ue[0]).map(([Z,ue])=>({homeworkId:Z,homeworkName:ue.homeworkName,rows:ue.rows})),$=E.length===0?'<div class="empty">\uACFC\uC81C \uC81C\uCD9C \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</div>':E.map(Z=>{const ue=Z.rows.map(ye=>{const ke=ye.submitted||ye.submit_yn==="Y",se=ye.confirmed||ye.confirm_yn==="Y",be=ye.user_nm||ye.login_id||"-",Ne=ye.student_id||ye.login_id||"-",ce=ye.submitted_at||"-",pe=ye.score_conv||(ye.score!==void 0?String(ye.score):"-"),Ee=Number(ye.task_cnt??0),fe=ye.last_task_date_conv||"-",De=ye.feedback?g(ye.feedback):"-";return`
            <div class="item">
              <div class="item-head">
                <div class="who">
                  <div class="name">${h(be)}</div>
                  <div class="meta">\uD559\uBC88: ${h(Ne)}</div>
                </div>
                <div class="status">
                  ${ke?F("\uC81C\uCD9C","blue"):F("\uBBF8\uC81C\uCD9C","gray")}
                  ${se?F("\uD655\uC778\uC644\uB8CC","green"):F("\uBBF8\uD655\uC778","orange")}
                </div>
              </div>
              <div class="grid">
                <div class="kv"><div class="k">\uC81C\uCD9C\uC77C</div><div class="v">${h(ce)}</div></div>
                <div class="kv"><div class="k">\uC810\uC218</div><div class="v">${h(pe)}</div></div>
                <div class="kv"><div class="k">\uC7AC\uC81C\uCD9C(\uCD94\uAC00\uACFC\uC81C)</div><div class="v">${Ee}\uAC74</div></div>
                <div class="kv"><div class="k">\uC7AC\uC81C\uCD9C \uCD5C\uADFC\uC77C</div><div class="v">${h(fe)}</div></div>
              </div>
              <div class="feedback">
                <div class="k">\uD53C\uB4DC\uBC31</div>
                <div class="v">${De}</div>
              </div>
            </div>
          `}).join("");return`
          <section class="section">
            <div class="section-title">\uACFC\uC81C: ${h(Z.homeworkName)} <span class="muted">(ID:${Z.homeworkId}, ${Z.rows.length}\uBA85)</span></div>
            <div class="items">
              ${ue}
            </div>
          </section>
        `}).join(""),M=L.length===0?'<div class="empty">Q&A \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</div>':L.map(Z=>{const ue=Z.question_user_nm||Z.question_login_id||"-",ye=Z.question_reg_date_conv||"-",ke=Z.answered?F("\uB2F5\uBCC0\uC644\uB8CC","green"):F("\uB300\uAE30","orange"),se=Z.question_content||"",be=Z.answer_content||"<em>\uB2F5\uBCC0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</em>",Ne=Z.answer_reg_date_conv||"-";return`
          <section class="section">
            <div class="section-title">
              Q&A: ${h(Z.subject||"-")}
              <span class="muted">(${h(ue)} \xB7 ${h(ye)} \xB7 ${ke})</span>
            </div>
            <div class="qna">
              <div class="q-block">
                <div class="k">\uC9C8\uBB38</div>
                <div class="v prose">${se}</div>
              </div>
              <div class="q-block">
                <div class="k">\uB2F5\uBCC0 <span class="muted">(\uCD5C\uADFC: ${h(Ne)})</span></div>
                <div class="v prose">${be}</div>
              </div>
            </div>
          </section>
        `}).join(""),S=`
      <!doctype html>
      <html lang="ko">
        <head>
          <meta charset="utf-8" />
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <title>${h(N)}</title>
          <style>
            @page { size: A4 landscape; margin: 10mm; }
            * { box-sizing: border-box; }
            html, body { height: 100%; }
            body {
              margin: 0;
              font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", Arial, sans-serif;
              color: #111827;
              background: #ffffff;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
            }
            .container { padding: 10mm; }
            .title { font-size: 18px; font-weight: 700; margin: 0 0 8px; }
            .sub { font-size: 12px; color: #4b5563; margin: 0 0 14px; }
            .meta {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 6px 16px;
              font-size: 12px;
              color: #374151;
              padding: 10px 12px;
              border: 1px solid #e5e7eb;
              border-radius: 10px;
              margin-bottom: 16px;
            }
            .meta .k { color: #6b7280; }
            .section { margin-bottom: 18px; }
            .section-title {
              display: flex;
              align-items: baseline;
              gap: 8px;
              font-weight: 700;
              font-size: 14px;
              margin: 0 0 10px;
            }
            .muted { color: #6b7280; font-weight: 500; font-size: 12px; }
            .empty {
              border: 1px dashed #e5e7eb;
              border-radius: 10px;
              padding: 12px;
              color: #6b7280;
              font-size: 12px;
            }
            .items { display: flex; flex-direction: column; gap: 10px; }
            .item {
              border: 1px solid #e5e7eb;
              border-radius: 12px;
              padding: 10px 12px;
              page-break-inside: avoid;
            }
            .item-head {
              display: flex;
              align-items: flex-start;
              justify-content: space-between;
              gap: 12px;
              margin-bottom: 8px;
            }
            .who .name { font-weight: 700; font-size: 13px; }
            .who .meta { font-size: 11px; color: #6b7280; padding: 0; border: 0; border-radius: 0; margin: 2px 0 0; display: block; }
            .status { display: flex; gap: 6px; flex-wrap: wrap; justify-content: flex-end; }
            .badge {
              display: inline-flex;
              align-items: center;
              padding: 2px 8px;
              border-radius: 999px;
              font-size: 11px;
              font-weight: 700;
              border: 1px solid transparent;
              white-space: nowrap;
            }
            .badge.green { background: #dcfce7; color: #166534; }
            .badge.orange { background: #ffedd5; color: #9a3412; }
            .badge.blue { background: #dbeafe; color: #1d4ed8; }
            .badge.gray { background: #f3f4f6; color: #4b5563; }
            .grid {
              display: grid;
              grid-template-columns: 1fr 1fr 1fr 1fr;
              gap: 6px 12px;
              font-size: 12px;
              color: #374151;
              margin-bottom: 8px;
            }
            .kv { display: flex; gap: 6px; }
            .kv .k { color: #6b7280; min-width: 86px; }
            .kv .v { color: #111827; }
            .feedback .k { color: #6b7280; font-size: 12px; margin-bottom: 4px; }
            .feedback .v { font-size: 12px; color: #111827; line-height: 1.5; }
            .qna {
              border: 1px solid #e5e7eb;
              border-radius: 12px;
              padding: 10px 12px;
              page-break-inside: avoid;
            }
            .q-block + .q-block { margin-top: 10px; padding-top: 10px; border-top: 1px solid #f3f4f6; }
            .q-block .k { font-weight: 700; font-size: 12px; margin-bottom: 4px; }
            .prose { font-size: 12px; line-height: 1.55; color: #111827; }
            .prose p { margin: 0 0 6px; }
            .prose img { max-width: 100%; height: auto; }
            @media print {
              .container { padding: 0; }
            }
          </style>
        </head>
        <body>
          <div class="container">
            <h1 class="title">${h(N)}</h1>
            <p class="sub">\uB300\uD559\uAD50 \uAD50\uC218\uC790\uC6A9 \uD1B5\uD569 \uCD9C\uB825(\uACFC\uBAA9 \uC804\uCCB4 \uAE30\uAC04 \uAE30\uC900)</p>

            <div class="meta">
              <div><span class="k">\uACFC\uBAA9\uBA85</span>: ${h(b)}</div>
              <div><span class="k">\uACFC\uBAA9\uCF54\uB4DC</span>: ${h(K)}</div>
              <div><span class="k">\uACFC\uC815\uBA85</span>: ${h(C)}</div>
              <div><span class="k">\uACFC\uBAA9\uAE30\uAC04</span>: ${h(w)}</div>
              <div><span class="k">\uC870\uD68C\uAE30\uAC04</span>: ${h(f)}</div>
              <div><span class="k">\uCD9C\uB825\uC77C\uC2DC</span>: ${h(new Date().toLocaleString("ko-KR"))}</div>
            </div>

            <section class="section">
              <div class="section-title">\uACFC\uC81C \uC81C\uCD9C/\uD53C\uB4DC\uBC31 <span class="muted">(${R.length}\uAC74)</span></div>
              ${$}
            </section>

            <section class="section">
              <div class="section-title">Q&A \uC9C8\uBB38/\uB2F5\uBCC0 <span class="muted">(${L.length}\uAC74)</span></div>
              ${M}
            </section>
          </div>

          <script>
            // \uC65C: \uC0C8 \uCC3D\uC5D0\uC11C \uB80C\uB354\uB9C1\uC774 \uB05D\uB09C \uB4A4 \uC778\uC1C4\uB97C \uD638\uCD9C\uD574\uC57C \uBE48 \uD398\uC774\uC9C0\uAC00 \uB098\uC624\uB294 \uBB38\uC81C\uB97C \uC904\uC77C \uC218 \uC788\uC2B5\uB2C8\uB2E4.
            window.addEventListener('load', () => {
              setTimeout(() => {
                window.print();
              }, 150);
            });
          <\/script>
        </body>
      </html>
    `,A=()=>{const Z=window.open("about:blank","_blank");if(!Z)return!1;try{try{Z.opener=null}catch{}return Z.document.open(),Z.document.write(S),Z.document.close(),!0}catch{try{Z.close()}catch{}return!1}},y=()=>{const Z=new Blob([S],{type:"text/html;charset=utf-8"}),ue=URL.createObjectURL(Z),ye=window.open(ue,"_blank");return ye?(ye.addEventListener("load",()=>{setTimeout(()=>URL.revokeObjectURL(ue),500)}),!0):(URL.revokeObjectURL(ue),!1)};A()||y()||alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5B4 \uCD9C\uB825 \uCC3D\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};return Ue.useEffect(()=>{let h=!1;return(async()=>{const F=q(r.period||r.period_conv||"");h||(c(F.start),p(F.end));try{await P({start:F.start,end:F.end})}catch(N){h||D(N instanceof Error?N.message:"\uD1B5\uD569 \uCD9C\uB825 \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})(),()=>{h=!0}},[r.id,r.mappedCourseId,r.sourceType,r.period,r.period_conv,r.haksaCourseCode,r.haksaOpenYear,r.haksaOpenTerm,r.haksaBunbanCode,r.haksaGroupCode,r.haksa_course_code,r.haksa_open_year,r.haksa_open_term,r.haksa_bunban_code,r.haksa_group_code]),e.jsxs("div",{className:"space-y-6",children:[e.jsx("style",{children:`
          @media print {
            @page { size: A4 landscape; margin: 10mm; }
            header, aside { display: none !important; }
            main { padding: 0 !important; }
            .print-hidden { display: none !important; }
            .print-card { border: none !important; box-shadow: none !important; }
            body { background: white !important; }
            .print-wide { width: 100% !important; max-width: 100% !important; }
            .print-table-wrap { overflow: visible !important; }
            .print-table { width: 100% !important; min-width: 0 !important; table-layout: auto !important; }
            .print-table th, .print-table td {
              word-break: break-word !important;
              white-space: normal !important;
              padding: 6px 8px !important;
              font-size: 11px !important;
            }
          }
        `}),e.jsxs("div",{className:"print-hidden",children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:"\uACFC\uBAA9\uBCC4 \uACFC\uC81C/Q&A \uD1B5\uD569 \uCD9C\uB825"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD604\uC7AC \uACFC\uBAA9 \uAE30\uC900\uC73C\uB85C \uC81C\uCD9C/\uD53C\uB4DC\uBC31\uACFC Q&A\uB97C \uCD9C\uB825\uD569\uB2C8\uB2E4."})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-4 print-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uAE30\uAC04"}),e.jsx("input",{type:"date",value:n,onChange:h=>c(h.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"~"}),e.jsx("input",{type:"date",value:d,onChange:h=>p(h.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:z,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",disabled:m,children:m?"\uC870\uD68C \uC911...":"\uC870\uD68C"}),e.jsxs("button",{onClick:Y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:m||R.length===0&&L.length===0,children:[e.jsx(ad,{className:"w-4 h-4 inline-block mr-2"}),"\uCD9C\uB825"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"\uCD9C\uB825\uC740 \uC0C8 \uCC3D\uC73C\uB85C \uC5F4\uB9BD\uB2C8\uB2E4(\uD31D\uC5C5 \uD5C8\uC6A9 \uD544\uC694)"})]})]})}),I&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg print-hidden",children:I}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 print-card print-wide",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-gray-900 mb-2",children:"\uACFC\uBAA9 \uC815\uBCF4"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["\uACFC\uBAA9\uBA85: ",W]}),e.jsxs("div",{children:["\uACFC\uBAA9\uCF54\uB4DC: ",T||"-"]}),e.jsxs("div",{children:["\uAE30\uAC04: ",G]}),e.jsxs("div",{children:["\uACFC\uC815\uBA85: ",B]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(hs,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"text-gray-900",children:"\uACFC\uC81C \uC81C\uCD9C/\uD53C\uB4DC\uBC31"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",R.length,"\uAC74)"]})]}),m?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):R.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uACFC\uC81C \uC81C\uCD9C \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg print-wide print-table-wrap",children:e.jsxs("table",{className:"w-full text-sm min-w-[1200px] print-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-gray-700 w-48",children:"\uACFC\uC81C\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-700 w-36",children:"\uC81C\uCD9C\uC790"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-32",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-24",children:"\uC81C\uCD9C\uC5EC\uBD80"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-36",children:"\uC81C\uCD9C\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-24",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-24",children:"\uD655\uC778\uC5EC\uBD80"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-28",children:"\uC7AC\uC81C\uCD9C \uAC74\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700 w-36",children:"\uC7AC\uC81C\uCD9C \uCD5C\uADFC\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-700 min-w-[240px]",children:"\uD53C\uB4DC\uBC31"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:R.map((h,g)=>{const F=h.score_conv||(h.score!==void 0?String(h.score):"-"),N=h.confirmed||h.confirm_yn==="Y",b=h.submitted||h.submit_yn==="Y",K=h.student_id||h.login_id||"-",w=Number(h.task_cnt??0),C=h.last_task_date_conv||"-";return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-gray-900 whitespace-nowrap",children:h.homework_nm||"-"}),e.jsx("td",{className:"px-4 py-3 text-gray-700 whitespace-nowrap",children:h.user_nm||h.login_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-600 whitespace-nowrap",children:K}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:b?"\uC81C\uCD9C":"\uBBF8\uC81C\uCD9C"})}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-600 whitespace-nowrap",children:h.submitted_at||"-"}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-600 whitespace-nowrap",children:F}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:N?"\uD655\uC778\uC644\uB8CC":"\uBBF8\uD655\uC778"})}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-700 whitespace-nowrap",children:w}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-600 whitespace-nowrap",children:C}),e.jsx("td",{className:"px-4 py-3 text-gray-700 whitespace-pre-wrap break-words",children:h.feedback||"-"})]},`${h.homework_id}-${h.course_user_id}-${g}`)})})]})})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ks,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"text-gray-900",children:"Q&A \uC9C8\uBB38/\uB2F5\uBCC0"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",L.length,"\uAC74)"]})]}),m?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):L.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"Q&A \uB0B4\uC5ED\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"space-y-4",children:L.map(h=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:h.subject||"-"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[h.question_user_nm||h.question_login_id||"-"," \xB7 ",h.question_reg_date_conv||"-"]})]}),e.jsx("div",{className:"p-4 text-sm text-gray-800 prose max-w-none",dangerouslySetInnerHTML:{__html:Ml(h.question_content)}}),e.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-t border-gray-200 text-sm text-gray-600",children:["\uB2F5\uBCC0: ",h.answered?"\uC644\uB8CC":"\uB300\uAE30"," \xB7 ",h.answer_reg_date_conv||"-"]}),e.jsx("div",{className:"p-4 text-sm text-gray-800 prose max-w-none",dangerouslySetInnerHTML:{__html:Ml(h.answer_content)||"<em>\uB2F5\uBCC0\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.</em>"}})]},h.question_id))})]})]})]})]})}const Mn=r=>{if(r!=null&&r.haksaWeek){const n=parseInt(r.haksaWeek,10);if(!Number.isNaN(n)&&n>0)return n}return 15},lx=r=>`${r}\uCC28\uC2DC`,zl=async({haksaKey:r,weekNumber:n,sessionNumber:c,content:d})=>{if(!r)throw new Error("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uAC15\uC758\uBAA9\uCC28\uC5D0 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");const p=await le.getHaksaCurriculum(r);if(p.rst_code!=="0000")throw new Error(p.rst_message);const m=Array.isArray(p.rst_data)?p.rst_data[0]:p.rst_data,v=(m==null?void 0:m.curriculum_json)||"";let I=[];if(v)try{const W=JSON.parse(v);I=Array.isArray(W)?W:[]}catch{I=[]}const D=Number(n||1),R=Number(c||1),_=lx(R);let L=I.find(W=>W.weekNumber===D);L||(L={weekNumber:D,title:`${D}\uC8FC\uCC28`,isExpanded:!0,sessions:[]},I.push(L)),Array.isArray(L.sessions)||(L.sessions=[]);let j=L.sessions.find(W=>W.sessionName===_);j||(j={sessionId:`session_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,sessionName:_,isExpanded:!0,contents:[]},L.sessions.push(j)),Array.isArray(j.contents)||(j.contents=[]),j.contents.push({...d,id:`content_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,createdAt:new Date().toISOString(),weekNumber:D});const T=await le.updateHaksaCurriculum({...r,curriculumJson:JSON.stringify(I)});if(T.rst_code!=="0000")throw new Error(T.rst_message)},Qc=["info-basic","info-evaluation","info-completion"],Kc=["assignment-management","assignment-feedback"];function Cd({course:r,onBack:n,initialTab:c,initialQnaPostId:d,onTabChange:p}){const[m,v]=o.useState(r),I=N=>!N||N==="info"?"info-basic":N==="assignment"?"assignment-management":N,D=I(c),[R,_]=o.useState(D),[L,j]=o.useState(()=>Qc.includes(D)),[T,W]=o.useState(()=>Kc.includes(D));o.useEffect(()=>{if(!c)return;const N=I(c);_(N),j(Qc.includes(N)),W(Kc.includes(N))},[c]),o.useEffect(()=>{p==null||p(R)},[R,p]),o.useEffect(()=>{window.scrollTo(0,0)},[]),o.useEffect(()=>{v(r)},[r]);const G=[{id:"info",label:"\uACFC\uBAA9\uC815\uBCF4",icon:qs,isSubTab:!1,hasSubTabs:!0},{id:"curriculum",label:"\uAC15\uC758\uBAA9\uCC28",icon:nd,isSubTab:!1},{id:"students",label:"\uC218\uAC15\uC0DD",icon:vu,isSubTab:!1},{id:"attendance",label:"\uC9C4\uB3C4/\uCD9C\uC11D",icon:ps,isSubTab:!1},{id:"exam",label:"\uC2DC\uD5D8",icon:hs,isSubTab:!1},{id:"assignment",label:"\uACFC\uC81C",icon:Ln,isSubTab:!1,hasSubTabs:!0},{id:"materials",label:"\uC790\uB8CC",icon:$n,isSubTab:!1},{id:"qna",label:"Q&A",icon:ks,isSubTab:!1},{id:"feedback-report",label:"\uD1B5\uD569\uCD9C\uB825",icon:ad,isSubTab:!1},{id:"grades",label:"\uC131\uC801\uAD00\uB9AC",icon:Il,isSubTab:!1},{id:"completion",label:"\uC218\uB8CC\uAD00\uB9AC",icon:ls,isSubTab:!1}],B=[{id:"info-basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:qs},{id:"info-evaluation",label:"\uD3C9\uAC00/\uC218\uB8CC \uAE30\uC900",icon:ps},{id:"info-completion",label:"\uC218\uB8CC\uC99D",icon:Il}],q=[{id:"assignment-management",label:"\uACFC\uC81C \uAD00\uB9AC",icon:Ln},{id:"assignment-feedback",label:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC",icon:ks}],H=N=>{N==="info"?(j(!L),L||_("info-basic")):N==="assignment"?(W(!T),T||_("assignment-management")):(_(N),g.map(b=>b.id).includes(N)||j(!1),["assignment-management","assignment-feedback"].includes(N)||W(!1))},P=Number((m==null?void 0:m.mappedCourseId)??m.id),z=(m==null?void 0:m.sourceType)==="haksa"&&(!(m!=null&&m.mappedCourseId)||Number.isNaN(P)||P<=0),Y=(m==null?void 0:m.sourceType)==="haksa"||!!(m!=null&&m.haksaCourseCode||m!=null&&m.haksaOpenYear||m!=null&&m.haksaOpenTerm||m!=null&&m.haksaBunbanCode||m!=null&&m.haksaGroupCode)||String((m==null?void 0:m.courseType)||"").includes("\uD559\uC0AC"),h=Y?G.filter(N=>N.id!=="completion"):G,g=Y?B.filter(N=>N.id!=="info-completion"):B;o.useEffect(()=>{Y&&(R==="completion"||R==="info-completion")&&_("info-basic")},[R,Y]);const F=()=>{switch(R){case"info":case"info-basic":return e.jsx(Fn,{course:m,onCourseUpdated:v,initialSubTab:"basic"});case"info-evaluation":return e.jsx(Fn,{course:m,onCourseUpdated:v,initialSubTab:"evaluation"});case"info-completion":return Y?e.jsx(Fn,{course:m,onCourseUpdated:v,initialSubTab:"basic"}):e.jsx(Fn,{course:m,onCourseUpdated:v,initialSubTab:"completion"});case"curriculum":return e.jsx(Xm,{courseId:P,course:m});case"students":return e.jsx(tx,{courseId:P,course:m});case"attendance":return e.jsx(sx,{courseId:P,course:m});case"exam":return z?e.jsx(ix,{course:m}):e.jsx(ox,{courseId:P,course:m});case"assignment":return e.jsx(dx,{courseId:P,course:m});case"assignment-management":return e.jsx(md,{courseId:P,course:m});case"assignment-feedback":return e.jsx(xd,{courseId:P});case"materials":return e.jsx(Cx,{courseId:P,showWeekSession:(m==null?void 0:m.sourceType)==="haksa",weekCount:Mn(m),course:m});case"feedback-report":return e.jsx(ax,{course:m});case"qna":return e.jsx(mx,{courseId:P,initialPostId:d});case"grades":return(m==null?void 0:m.sourceType)==="haksa"?e.jsx(gd,{course:m}):e.jsx(xx,{courseId:P});case"completion":return Y?null:e.jsx(gx,{courseId:P,course:m});default:return null}};return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"fixed w-64",style:{maxHeight:"calc(100vh - 40px)",overflowY:"auto"},children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Rn,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("nav",{className:"flex flex-col",children:h.map(N=>{const b=N.icon,K=N.id==="info",w=N.id==="assignment",C=R===N.id||K&&g.map(f=>f.id).includes(R)||w&&(R==="assignment-management"||R==="assignment-feedback");return e.jsxs(Ue.Fragment,{children:[e.jsxs("button",{onClick:()=>H(N.id),className:`flex items-center justify-between px-4 py-3 border-l-4 transition-colors text-left ${C?"border-blue-600 bg-blue-50 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{children:N.label})]}),(K||w)&&((K?L:T)?e.jsx(dr,{className:"w-4 h-4"}):e.jsx(Jt,{className:"w-4 h-4"}))]}),K&&L&&e.jsx("div",{className:"bg-gray-50",children:g.map(f=>{const k=f.icon;return e.jsxs("button",{onClick:()=>{_(f.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${R===f.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id)})}),w&&T&&e.jsx("div",{className:"bg-gray-50",children:q.map(f=>{const k=f.icon;return e.jsxs("button",{onClick:()=>{_(f.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${R===f.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:f.label})]},f.id)})})]},N.id)})})})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:m.subjectName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["\uACFC\uC815ID: ",m.courseId]}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:m.courseType}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:m.period}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsxs("span",{children:["\uC218\uAC15\uC0DD: ",m.students,"\uBA85"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:F()})]})]})})}function ix({course:r}){const n=o.useMemo(()=>Js({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),[c,d]=o.useState([]),[p,m]=o.useState(!1),[v,I]=o.useState(null);return o.useEffect(()=>{if(!n){I("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),d([]);return}let D=!1;return(async()=>{m(!0),I(null);try{const _=await le.getHaksaCurriculum(n);if(_.rst_code!=="0000")throw new Error(_.rst_message);const L=Array.isArray(_.rst_data)?_.rst_data[0]:_.rst_data,j=(L==null?void 0:L.curriculum_json)||"";if(!j){D||d([]);return}const T=JSON.parse(j),G=(Array.isArray(T)?T.flatMap(B=>(B.sessions||[]).flatMap(q=>q.contents||[])):[]).filter(B=>String(B.type||"").toLowerCase()==="exam");D||d(G)}catch(_){D||(d([]),I(_ instanceof Error?_.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{D||m(!1)}})(),()=>{D=!0}},[n]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg text-sm",children:["\uD559\uC0AC \uACFC\uBAA9\uC758 \uC2DC\uD5D8\uC740 ",e.jsx("b",{children:"\uAC15\uC758\uBAA9\uCC28"}),"\uC5D0\uC11C \uC8FC\uCC28/\uCC28\uC2DC\uC5D0 \uB4F1\uB85D\uD55C \uD56D\uBAA9\uC744 \uAE30\uC900\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),v&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:v}),p&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!p&&c.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded-full",children:["\uCD1D ",c.length,"\uAC1C"]})]}),c.map(D=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:D.title||"\uC2DC\uD5D8"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[D.weekNumber||1,"\uC8FC\uCC28"]})]}),D.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:D.description}),D.examSettings&&e.jsxs("div",{className:"mt-2 ml-7 text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["\uBC30\uC810: ",D.examSettings.points??0,"\uC810"]}),e.jsxs("div",{children:["\uC7AC\uC751\uC2DC:"," ",D.examSettings.allowRetake?`\uAC00\uB2A5 (${D.examSettings.retakeScore??0}\uC810 \uBBF8\uB9CC, ${D.examSettings.retakeCount??0}\uD68C)`:"\uBD88\uAC00"]}),e.jsxs("div",{children:["\uACB0\uACFC\uB178\uCD9C: ",D.examSettings.showResults===!1?"\uBE44\uB178\uCD9C":"\uB178\uCD9C"]})]})]}),D.createdAt&&e.jsx("div",{className:"text-sm text-gray-400 flex-shrink-0",children:new Date(D.createdAt).toLocaleDateString("ko-KR")})]})},D.id))]}):!p&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(hs,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uC2DC\uD5D8\uC744 \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})}function ox({courseId:r,course:n}){const c=(n==null?void 0:n.sourceType)==="haksa"&&(!(n!=null&&n.mappedCourseId)||Number.isNaN(r)||r<=0),d=o.useMemo(()=>Js({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),[p,m]=o.useState(null),[v,I]=o.useState(!1),[D,R]=o.useState([]),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState([]),[B,q]=o.useState(!1),H=o.useRef([]),P=o.useRef(d),[z,Y]=o.useState(null),[h,g]=o.useState({}),F=new Date().toISOString().split("T")[0],N=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[b,K]=o.useState({startDate:F,startTime:"09:00",endDate:N,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!c||!d)return;let E=!1;return(async()=>{q(!1),T(null);try{const M=await le.getHaksaExams(d);if(M.rst_code!=="0000")throw new Error(M.rst_message);const S=Array.isArray(M.rst_data)?M.rst_data[0]:M.rst_data,A=(S==null?void 0:S.exams_json)||"";if(A){const y=JSON.parse(A);E||G(Array.isArray(y)?y:[]);return}if(n!=null&&n.id)try{const y=localStorage.getItem(`haksa_exams_${n.id}`);if(y){const Q=JSON.parse(y);E||G(Array.isArray(Q)?Q:[]),await le.updateHaksaExams({...d,examsJson:y})}}catch{E||G([])}}catch(M){E||T(M instanceof Error?M.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{E||q(!0)}})(),()=>{E=!0}},[c,d,n==null?void 0:n.id]),o.useEffect(()=>{c&&!d&&T("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[c,d]),o.useEffect(()=>{H.current=W},[W]),o.useEffect(()=>{P.current=d},[d]),o.useEffect(()=>()=>{!c||!P.current||!B||le.updateHaksaExams({...P.current,examsJson:JSON.stringify(H.current)})},[c,B]),o.useEffect(()=>{if(r&&!c)try{const E=localStorage.getItem(`prism_exam_settings_${r}`);E&&g(JSON.parse(E))}catch{g({})}},[r,c]);const w=async()=>{if(!(!r||c)){L(!0),T(null);try{const E=await le.getExams({courseId:r});if(E.rst_code!=="0000")throw new Error(E.rst_message);const M=(E.rst_data??[]).map(S=>({id:Number(S.exam_id),title:S.exam_nm,date:S.start_date_conv||S.start_date||"-",duration:S.exam_time?`${S.exam_time}\uBD84`:"-",submitted:Number(S.submitted_cnt??0),total:Number(S.total_cnt??0)}));R(M)}catch(E){T(E instanceof Error?E.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{L(!1)}}};o.useEffect(()=>{c||w()},[r,c]);const C=E=>{const $=h[E.id]||{};Y(E),K({startDate:$.startDate||F,startTime:$.startTime||"09:00",endDate:$.endDate||N,endTime:$.endTime||"18:00",points:$.points||0,allowRetake:$.allowRetake||!1,retakeScore:$.retakeScore||0,retakeCount:$.retakeCount||0,showResults:$.showResults!==!1})},f=()=>{if(!z)return;const E={...h,[z.id]:{...b}};if(g(E),r)try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(E))}catch{}Y(null)},k=async E=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const $=await le.deleteExam({courseId:r,examId:E});if($.rst_code!=="0000")throw new Error($.rst_message);const M={...h};if(delete M[E],g(M),r)try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(M))}catch{}await w(),alert("\uC2DC\uD5D8\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch($){alert($ instanceof Error?$.message:"\uC2DC\uD5D8 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};if(c)return e.jsx(px,{haksaKey:d,haksaExams:W,setHaksaExams:G,weekCount:Mn(n)});if(p!==null){const E=D.find($=>$.id===p);return e.jsx(cx,{courseId:r,examId:p,exam:E,onBack:()=>m(null),onRefresh:()=>void w()})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),j&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:j}),_&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!_&&D.length>0&&e.jsx("div",{className:"space-y-3",children:D.map(E=>{const $=h[E.id]||{};return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>m(E.id),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ps,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:E.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[E.submitted,"/",E.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[$.startDate||E.date||"-"," ",$.startTime||""," ~ ",$.endDate||"-"," ",$.endTime||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uC2DC\uAC04"}),e.jsx("span",{className:"text-gray-900",children:E.duration})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[$.points||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:$.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",$.retakeScore,"\uC810 \uBBF8\uB9CC, ",$.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:$.showResults!==!1?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:M=>{M.stopPropagation(),C(E)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:M=>{M.stopPropagation(),k(E.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]})]})},E.id)})}),!_&&D.length===0&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(ps,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]})]}),e.jsx(hx,{isOpen:v,onClose:()=>I(!1),weekCount:Mn(n),showWeekSession:(n==null?void 0:n.sourceType)==="haksa",onSave:async E=>{try{const $=(E.startDate||new Date().toISOString().split("T")[0]).replace(/-/g,"")+"090000",M=(E.endDate||new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]).replace(/-/g,"")+"180000",S=await le.linkExam({courseId:r,examId:E.examId,startDate:$,endDate:M,assignScore:E.points||100,allowRetake:E.allowRetake||!1,showResults:E.showResults!==!1});if(S.rst_code!=="0000")throw new Error(S.rst_message);if((n==null?void 0:n.sourceType)==="haksa")try{await zl({haksaKey:d,weekNumber:E.weekNumber,sessionNumber:E.sessionNumber,content:{type:"exam",title:E.title,description:E.description||"",examId:String(E.examId),examSettings:{points:E.points,allowRetake:E.allowRetake,retakeScore:E.retakeScore,retakeCount:E.retakeCount,showResults:E.showResults,startDate:E.startDate,endDate:E.endDate}}})}catch(y){alert(y instanceof Error?y.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}const A={...h,[E.examId]:{startDate:E.startDate,startTime:"09:00",endDate:E.endDate,endTime:"18:00",points:E.points,allowRetake:E.allowRetake,retakeScore:E.retakeScore,retakeCount:E.retakeCount,showResults:E.showResults,weekNumber:E.weekNumber,sessionNumber:E.sessionNumber}};g(A);try{localStorage.setItem(`prism_exam_settings_${r}`,JSON.stringify(A))}catch{}await w(),alert("\uC2DC\uD5D8\uC774 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch($){alert($ instanceof Error?$.message:"\uC2DC\uD5D8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}}),z&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Y(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>Y(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:z.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:b.startDate,onChange:E=>K($=>({...$,startDate:E.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:b.startTime,onChange:E=>K($=>({...$,startTime:E.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:b.endDate,onChange:E=>K($=>({...$,endDate:E.target.value})),min:b.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:b.endTime,onChange:E=>K($=>({...$,endTime:E.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:b.points,onChange:E=>K($=>({...$,points:parseInt(E.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.allowRetake,onChange:E=>K($=>({...$,allowRetake:E.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),b.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:b.retakeScore,onChange:E=>K($=>({...$,retakeScore:parseInt(E.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:b.retakeCount,onChange:E=>K($=>({...$,retakeCount:parseInt(E.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.showResults,onChange:E=>K($=>({...$,showResults:E.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>Y(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:f,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function cx({courseId:r,examId:n,exam:c,onBack:d,onRefresh:p}){const[m,v]=o.useState(null),[I,D]=o.useState(""),[R,_]=o.useState([]),[L,j]=o.useState(!1),[T,W]=o.useState(null),G=(c==null?void 0:c.title)??"\uC2DC\uD5D8",B=(c==null?void 0:c.date)??"-",q=(c==null?void 0:c.duration)??"-",H=async()=>{if(!(!r||!n)){j(!0),W(null);try{const w=await le.getExamUsers({courseId:r,examId:n});if(w.rst_code!=="0000")throw new Error(w.rst_message);const f=(w.rst_data??[]).map(k=>({courseUserId:Number(k.course_user_id),studentId:k.login_id,name:k.user_nm,score:Number(k.marking_score??0),submitted:!!k.submitted,submittedAt:k.submitted_at??"-"}));_(f)}catch(w){W(w instanceof Error?w.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{j(!1)}}};o.useEffect(()=>{H()},[r,n]);const P=R.filter(w=>w.submitted),z={average:P.length>0?Math.round(P.reduce((w,C)=>w+C.score,0)/P.length*10)/10:0,highest:P.length>0?Math.max(...P.map(w=>w.score)):0,lowest:P.length>0?Math.min(...P.map(w=>w.score)):0,submitted:P.length,total:R.length},h=(()=>{const w=[{range:"90-100",min:90,max:100,count:0},{range:"80-89",min:80,max:89,count:0},{range:"70-79",min:70,max:79,count:0},{range:"60-69",min:60,max:69,count:0},{range:"0-59",min:0,max:59,count:0}];return P.forEach(C=>{const f=w.find(k=>C.score>=k.min&&C.score<=k.max);f&&f.count++}),w})(),g=()=>{const w=new Date().toISOString().slice(0,10).replace(/-/g,""),C=`course_${r}_exam_${n}_${w}.csv`,f=["No","\uD559\uBC88","\uC774\uB984","\uC81C\uCD9C\uC5EC\uBD80","\uC81C\uCD9C\uC2DC\uAC04","\uC810\uC218"],k=R.map((E,$)=>[$+1,E.studentId??"",E.name??"",E.submitted?"Y":"N",E.submittedAt??"",E.submitted?Number(E.score??0):""]);Pn(C,f,k)},F=(w,C)=>{v(w),D(C.toString())},N=async w=>{const C=parseInt(I,10);if(isNaN(C)||C<0||C>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}try{const f=await le.updateExamScore({courseId:r,examId:n,courseUserId:w,markingScore:C});if(f.rst_code!=="0000")throw new Error(f.rst_message);await H(),p(),v(null),D("")}catch(f){alert(f instanceof Error?f.message:"\uC810\uC218 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},b=()=>{v(null),D("")},K=async w=>{if(confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uC2DC\uD5D8 \uC751\uC2DC\uB97C \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const C=await le.cancelExamSubmit({courseId:r,examId:n,courseUserId:w});if(C.rst_code!=="0000")throw new Error(C.rst_message);await H(),p(),alert("\uC751\uC2DC\uAC00 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(C){alert(C instanceof Error?C.message:"\uC751\uC2DC \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Rn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:G}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC2DC\uD5D8\uC77C: ",B," \xB7 \uC2DC\uD5D8\uC2DC\uAC04: ",q]})]})]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC"})]})]}),T&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:T}),L&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-700 mb-1",children:"\uD3C9\uADE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-blue-900",children:[z.average,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"\uCD5C\uACE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[z.highest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-red-700 mb-1",children:"\uCD5C\uC800 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-red-900",children:[z.lowest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-1",children:"\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-purple-900",children:[z.submitted,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1",children:"\uBBF8\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[z.total-z.submitted,"\uBA85"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:"\uC810\uC218 \uBD84\uD3EC"}),e.jsx("div",{className:"space-y-3",children:h.map(w=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[w.range,"\uC810"]}),e.jsxs("span",{className:"text-sm text-gray-900",children:[w.count,"\uBA85"]})]}),e.jsx("div",{className:"w-full h-8 bg-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 flex items-center justify-end px-2",style:{width:z.submitted>0?`${w.count/z.submitted*100}%`:"0%"},children:w.count>0&&e.jsxs("span",{className:"text-xs text-white",children:[Math.round(w.count/z.submitted*100),"%"]})})})]},w.range))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD559\uC0DD\uBCC4 \uC810\uC218"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC810\uC218\uB97C \uD074\uB9AD\uD558\uC5EC \uC218\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCC44\uC810"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:R.map((w,C)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:C+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:w.studentId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:w.name}),e.jsx("td",{className:"px-4 py-4 text-center",children:w.submitted?m===w.courseUserId?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:I,onChange:f=>D(f.target.value),onKeyDown:f=>{f.key==="Enter"?N(w.courseUserId):f.key==="Escape"&&b()},className:"w-16 px-2 py-1 border border-blue-500 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>N(w.courseUserId),className:"p-1 text-green-600 hover:bg-green-100 rounded transition-colors",title:"\uC800\uC7A5",children:e.jsx(ls,{className:"w-4 h-4"})}),e.jsx("button",{onClick:b,className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uCDE8\uC18C",children:e.jsx(jt,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>F(w.courseUserId,w.score),className:`inline-flex items-center justify-center px-3 py-1 rounded-lg hover:opacity-80 transition-opacity ${w.score>=90?"bg-green-100 text-green-700":w.score>=80?"bg-blue-100 text-blue-700":w.score>=70?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[w.score,"\uC810"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:w.submitted?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:[e.jsx(ls,{className:"w-3 h-3"}),"\uC81C\uCD9C \uC644\uB8CC"]}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:"\uBBF8\uC81C\uCD9C"})}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:w.submittedAt}),e.jsx("td",{className:"px-4 py-4 text-center",children:w.submitted&&m!==w.courseUserId&&e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>F(w.courseUserId,w.score),className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"\uC810\uC218 \uC218\uC815",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>K(w.courseUserId),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uC751\uC2DC \uCDE8\uC18C",children:e.jsx(jt,{className:"w-4 h-4"})})]})})]},w.courseUserId))})]})})]})]})}function dx({courseId:r,course:n}){const[c,d]=o.useState("management");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>d("management"),className:`px-4 py-2 transition-colors ${c==="management"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uACFC\uC81C \uAD00\uB9AC"}),e.jsx("button",{onClick:()=>d("feedback"),className:`px-4 py-2 transition-colors ${c==="feedback"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC"})]}),c==="management"&&e.jsx(md,{courseId:r,course:n}),c==="feedback"&&e.jsx(xd,{courseId:r})]})}function md({courseId:r,course:n}){const[c,d]=o.useState(!1),[p,m]=o.useState(!1),[v,I]=o.useState(null),[D,R]=o.useState(!1),[_,L]=o.useState(null),j=Number((n==null?void 0:n.mappedCourseId)??r),T=(n==null?void 0:n.sourceType)==="haksa"&&(!(n!=null&&n.mappedCourseId)||Number.isNaN(j)||j<=0),W=Mn(n),G=(n==null?void 0:n.sourceType)==="haksa",B=o.useMemo(()=>Js({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),[q,H]=o.useState([]),[P,z]=o.useState(!1),[Y,h]=o.useState(null),[g,F]=o.useState([]),[N,b]=o.useState(!1);o.useEffect(()=>{if(!T||!B)return;let k=!1;return(async()=>{b(!0),h(null);try{const $=await le.getHaksaCurriculum(B);if($.rst_code!=="0000")throw new Error($.rst_message);const M=Array.isArray($.rst_data)?$.rst_data[0]:$.rst_data,S=(M==null?void 0:M.curriculum_json)||"";if(!S){k||F([]);return}const A=JSON.parse(S),Q=(Array.isArray(A)?A.flatMap(Z=>(Z.sessions||[]).flatMap(ue=>ue.contents||[])):[]).filter(Z=>{const ue=String(Z.type||"").toLowerCase();return ue==="assignment"||ue==="homework"});k||F(Q)}catch($){k||(F([]),h($ instanceof Error?$.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{k||b(!1)}})(),()=>{k=!0}},[T,B]);const K=async()=>{if(!(!r||T)){z(!0),h(null);try{const k=await le.getHomeworks({courseId:r});if(k.rst_code!=="0000")throw new Error(k.rst_message);const $=(k.rst_data??[]).map(M=>({id:Number(M.homework_id),title:M.homework_nm||M.module_nm||"\uACFC\uC81C",description:M.content||"",dueDate:M.end_date_conv||M.end_date||"-",totalScore:Number(M.assign_score??100),submitted:Number(M.submitted_cnt??0),total:Number(M.total_cnt??0)}));H($)}catch(k){h(k instanceof Error?k.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{z(!1)}}};if(o.useEffect(()=>{T||K()},[r,T]),T)return e.jsxs("div",{className:"space-y-4",children:[Y&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:Y}),N&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),g.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C"}),e.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:["\uCD1D ",g.length,"\uAC1C"]})]}),g.map(k=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:k.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[k.weekNumber,"\uC8FC\uCC28"]})]}),k.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:k.description})]}),e.jsx("div",{className:"text-sm text-gray-400",children:new Date(k.createdAt).toLocaleDateString("ko-KR")})]})},k.id))]}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(vt,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uACFC\uC81C\uB97C \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]});const w=k=>{let E="",$="";if(k.dueDate){const M=k.dueDate.replace(/-/g,"");M.length>=8&&(E=`${M.slice(0,4)}-${M.slice(4,6)}-${M.slice(6,8)}`),M.length>=12&&($=`${M.slice(8,10)}:${M.slice(10,12)}`)}I({id:k.id,title:k.title||"",description:k.description||"",dueDate:E,dueTime:$||"23:59",totalScore:k.totalScore||100}),m(!0)},C=async k=>{if(v)try{const E=await le.updateHomework({courseId:r,homeworkId:v.id,title:k.title,description:k.description,dueDate:k.dueDate,dueTime:k.dueTime,totalScore:Number(k.totalScore||0),file:k.file});if(E.rst_code!=="0000")throw new Error(E.rst_message);await K(),alert("\uACFC\uC81C\uAC00 \uC218\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),m(!1),I(null)}catch(E){alert(E instanceof Error?E.message:"\uACFC\uC81C \uC218\uC815 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},f=(k,E)=>{(async()=>{if(confirm(`\uACFC\uC81C "${E}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774\uBBF8 \uC81C\uCD9C \uB0B4\uC5ED\uC774 \uC788\uB294 \uACBD\uC6B0, \uC11C\uBC84\uC5D0\uC11C \uC0AD\uC81C\uAC00 \uCC28\uB2E8\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`))try{const M=await le.deleteHomework({courseId:r,homeworkId:k});if(M.rst_code!=="0000")throw new Error(M.rst_message);await K(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(M){alert(M instanceof Error?M.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ln,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uB4F1\uB85D"})]})}),Y&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:Y}),P&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!P&&q.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694."}),!P&&q.length>0&&e.jsx("div",{className:"space-y-3",children:q.map(k=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{L(k),R(!0)},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ln,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:k.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[k.submitted,"/",k.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uB9C8\uAC10\uC77C"}),e.jsx("span",{className:"text-gray-900",children:k.dueDate||"-"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[k.totalScore||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC81C\uCD9C \uD604\uD669"}),e.jsxs("span",{className:"text-gray-900",children:[k.submitted," / ",k.total,"\uBA85"]})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:E=>{E.stopPropagation(),w(k)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:E=>{E.stopPropagation(),f(k.id,k.title)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]})]})},k.id))})]}),e.jsx($c,{isOpen:c,onClose:()=>d(!1),showWeekSession:G,weekCount:W,onSave:k=>{(async()=>{try{const E=await le.createHomework({courseId:r,title:k.title,description:k.description,dueDate:k.dueDate,dueTime:k.dueTime,totalScore:Number(k.totalScore||0),onoffType:"N",file:k.file});if(E.rst_code!=="0000")throw new Error(E.rst_message);if((n==null?void 0:n.sourceType)==="haksa")try{await zl({haksaKey:B,weekNumber:Number(k.weekNumber||1),sessionNumber:Number(k.sessionNumber||1),content:{type:"assignment",title:k.title,description:k.description,dueDate:k.dueDate,dueTime:k.dueTime,totalScore:Number(k.totalScore||0)}})}catch($){alert($ instanceof Error?$.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await K(),alert("\uACFC\uC81C\uAC00 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(E){alert(E instanceof Error?E.message:"\uACFC\uC81C \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()}}),e.jsx($c,{isOpen:p,onClose:()=>{m(!1),I(null)},onSave:C,mode:"edit",showWeekSession:G,weekCount:W,initialData:v||void 0}),e.jsx(zm,{isOpen:D,onClose:()=>{R(!1),L(null)},onEdit:()=>{_&&w(_)},assignment:_})]})}function xd({courseId:r}){const[n,c]=o.useState([]),[d,p]=o.useState(null),[m,v]=o.useState([]),[I,D]=o.useState(null),[R,_]=o.useState("0"),[L,j]=o.useState(""),[T,W]=o.useState(!1),[G,B]=o.useState(!1),[q,H]=o.useState(null),P=A=>A===!0||A===1||A==="1"||A==="Y"||A==="true",z=async()=>{var A;if(r){W(!0),H(null);try{const y=await le.getHomeworks({courseId:r});if(y.rst_code!=="0000")throw new Error(y.rst_message);const Z=(y.rst_data??[]).map(ye=>({id:Number(ye.homework_id),title:ye.homework_nm||ye.module_nm||"\uACFC\uC81C"}));c(Z);const ue=((A=Z[0])==null?void 0:A.id)??null;p(ye=>ye&&Z.some(ke=>ke.id===ye)?ye:ue),ue||(v([]),D(null),_("0"),j(""))}catch(y){H(y instanceof Error?y.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{W(!1)}}},Y=async A=>{if(!(!r||!A)){B(!0),H(null);try{const y=await le.getHomeworkUsers({courseId:r,homeworkId:A});if(y.rst_code!=="0000")throw new Error(y.rst_message);const Z=(y.rst_data??[]).map(ue=>({courseUserId:Number(ue.course_user_id),studentId:ue.login_id,name:ue.user_nm,submitted:P(ue.submitted),submittedAt:ue.submitted_at??"-",confirm:P(ue.confirm),markingScore:Number(ue.marking_score??0),scoreConv:ue.score_conv??"",feedback:ue.feedback??"",taskCnt:Number(ue.task_cnt??0)}));v(Z),D(ue=>ue&&Z.some(ye=>ye.courseUserId===ue)?ue:null)}catch(y){H(y instanceof Error?y.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B(!1)}}};o.useEffect(()=>{z()},[r]),o.useEffect(()=>{d&&Y(d)},[r,d]);const h=m.find(A=>A.courseUserId===I)??null,g=A=>{D(A);const y=m.find(Q=>Q.courseUserId===A);_(String((y==null?void 0:y.markingScore)??0)),j(String((y==null?void 0:y.feedback)??""))},F=()=>{if(!d||!I)return;const A=parseInt(R,10);if(isNaN(A)||A<0||A>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}(async()=>{try{const y=await le.updateHomeworkFeedback({courseId:r,homeworkId:d,courseUserId:I,markingScore:A,feedback:L});if(y.rst_code!=="0000")throw new Error(y.rst_message);await Y(d),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(y){alert(y instanceof Error?y.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},N=()=>{!d||!I||confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uACFC\uC81C \uC81C\uCD9C\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(async()=>{try{const A=await le.cancelHomeworkSubmit({courseId:r,homeworkId:d,courseUserId:I});if(A.rst_code!=="0000")throw new Error(A.rst_message);await Y(d),D(null),_("0"),j(""),alert("\uC81C\uCD9C\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(A){alert(A instanceof Error?A.message:"\uC81C\uCD9C \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},b=()=>{if(!d||!I)return;const A=prompt("\uCD94\uAC00\uACFC\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");!A||!A.trim()||(async()=>{try{const y=await le.appendHomeworkTask({courseId:r,homeworkId:d,courseUserId:I,task:A.trim()});if(y.rst_code!=="0000")throw new Error(y.rst_message);await Y(d),alert("\uCD94\uAC00\uACFC\uC81C\uAC00 \uBD80\uC5EC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(y){alert(y instanceof Error?y.message:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},[K,w]=o.useState([]),[C,f]=o.useState(!1),[k,E]=o.useState(null),$=async(A,y)=>{f(!0);try{const Q=await le.getHomeworkTasks({courseId:r,homeworkId:A,courseUserId:y});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);w(Q.rst_data??[])}catch{w([])}finally{f(!1)}},M=A=>{g(A),d&&$(d,A)},S={total:m.length,needFeedback:m.filter(A=>A.submitted&&!A.confirm).length,doneFeedback:m.filter(A=>A.confirm).length};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"\uACFC\uC81C \uC120\uD0DD:"}),e.jsxs("select",{value:d??"",onChange:A=>{const y=A.target.value?Number(A.target.value):null;p(y),D(null),_("0"),j("")},disabled:T||n.length===0,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[n.length===0&&e.jsx("option",{value:"",children:"\uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),n.map(A=>e.jsx("option",{value:A.id,children:A.title},A.id))]})]}),q&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:q}),G&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),n.length===0&&!T?e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uBA3C\uC800 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694. (\uACFC\uC81C \uAD00\uB9AC \uD0ED\uC5D0\uC11C \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.)"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 rounded-t-lg border border-b-0 border-gray-200",children:e.jsxs("h4",{className:"text-gray-900",children:["\uC218\uAC15\uC0DD \uBAA9\uB85D (",m.length,"\uBA85)"]})}),e.jsxs("div",{className:"border border-gray-200 rounded-b-lg divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:[m.map(A=>{const y=I===A.courseUserId,Q=A.submitted?A.confirm?{label:"\uD53C\uB4DC\uBC31 \uC644\uB8CC",className:"bg-green-100 text-green-700"}:{label:"\uD53C\uB4DC\uBC31 \uD544\uC694",className:"bg-orange-100 text-orange-700"}:{label:"\uBBF8\uC81C\uCD9C",className:"bg-red-100 text-red-700"};return e.jsxs("button",{onClick:()=>M(A.courseUserId),className:`w-full p-4 text-left transition-colors ${y?"bg-blue-50 border-l-4 border-blue-600":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 mb-1",children:A.name}),e.jsx("div",{className:"text-sm text-gray-600",children:A.studentId})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${Q.className}`,children:Q.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["\uC81C\uCD9C: ",A.submittedAt]}),e.jsxs("span",{children:["\uC810\uC218: ",A.markingScore,"\uC810",A.scoreConv?` (${A.scoreConv})`:""]})]}),0<A.taskCnt&&e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:["\uCD94\uAC00\uACFC\uC81C ",A.taskCnt,"\uAC74"]})]},A.courseUserId)}),m.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]})]}),e.jsx("div",{children:h?e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsxs("h4",{className:"text-gray-900",children:[h.name," (",h.studentId,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC81C\uCD9C\uC2DC\uAC04: ",h.submittedAt]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC810\uC218(0~100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:R,onChange:A=>_(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 border border-blue-200 text-blue-700 rounded-lg hover:bg-blue-50 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD53C\uB4DC\uBC31"}),e.jsx("textarea",{value:L,onChange:A=>j(A.target.value),placeholder:"\uD559\uC0DD\uC5D0\uAC8C \uC804\uB2EC\uD560 \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{_(String(h.markingScore??0)),j(String(h.feedback??""))},className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),h.submitted&&e.jsx("button",{onClick:N,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\uC81C\uCD9C \uCDE8\uC18C"}),e.jsx("button",{onClick:F,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC800\uC7A5"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 mb-2",children:"\uD53C\uB4DC\uBC31 \uC548\uB0B4"}),e.jsxs("div",{className:"text-sm text-blue-700",children:["- \uC800\uC7A5\uC744 \uB204\uB974\uBA74 \uC810\uC218/\uD53C\uB4DC\uBC31\uC774 DB\uC5D0 \uC800\uC7A5\uB418\uACE0, \uC131\uC801(\uACFC\uC81C \uC810\uC218)\uC5D0 \uC989\uC2DC \uBC18\uC601\uB429\uB2C8\uB2E4.",e.jsx("br",{}),"- \uC624\uD504\uB77C\uC778 \uACFC\uC81C\uCC98\uB7FC \uC81C\uCD9C \uAE30\uB85D\uC774 \uC5C6\uC5B4\uB3C4, \uD544\uC694\uD558\uBA74 \uC810\uC218 \uC785\uB825\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."]})]}),K.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D (",K.length,"\uAC74)"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-200 max-h-[300px] overflow-y-auto",children:K.map(A=>e.jsxs("button",{onClick:()=>E(A),className:"w-full text-left p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium group-hover:text-blue-600",children:A.task_preview}),e.jsx("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:A.need_review?e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded border border-orange-200",children:"\uC7AC\uD3C9\uAC00 \uD544\uC694"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${A.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:A.submit_yn_label}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${A.confirm_yn==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:A.confirm_yn_label})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uBD80\uC5EC: ",A.reg_date_conv,A.submit_yn==="Y"&&e.jsxs("span",{className:"ml-3",children:["\uC81C\uCD9C: ",A.submit_date_conv]})]}),A.subject&&e.jsxs("div",{className:"mt-1 text-xs text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"\uC81C\uCD9C \uC81C\uBAA9:"})," ",A.subject]})]},A.id))}),e.jsx("div",{className:"mt-2 text-[11px] text-gray-400",children:"* \uAC01 \uD56D\uBAA9\uC744 \uD074\uB9AD\uD558\uBA74 \uC81C\uCD9C \uC0C1\uC138 \uB0B4\uC6A9 \uD655\uC778 \uBC0F \uD3C9\uAC00\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),C&&e.jsx("div",{className:"text-center text-gray-500 text-sm py-2",children:"\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}):e.jsx("div",{className:"border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(ks,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{children:"\uD559\uC0DD\uC744 \uC120\uD0DD\uD558\uC5EC"}),e.jsx("p",{children:"\uC810\uC218\uC640 \uD53C\uB4DC\uBC31\uC744 \uC800\uC7A5\uD558\uC138\uC694"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"\uCD1D \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[S.total,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-orange-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uD544\uC694"}),e.jsxs("div",{className:"text-2xl text-orange-900",children:[S.needFeedback,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uC644\uB8CC"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[S.doneFeedback,"\uBA85"]})]})]})]}),e.jsx(Um,{isOpen:!!k,onClose:()=>E(null),courseId:r,task:k,onRefresh:()=>{d&&I&&($(d,I),Y(d))}})]})}function Cx({courseId:r,showWeekSession:n=!1,weekCount:c=15,course:d}){const[p,m]=o.useState(!1),[v,I]=o.useState([]),[D,R]=o.useState(!1),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState(!1),[B,q]=o.useState(null),H=(d==null?void 0:d.sourceType)==="haksa",P=H?Number((d==null?void 0:d.mappedCourseId)??0):Number.isFinite(r)?r:0,z=B&&B>0?B:P,[Y,h]=o.useState({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1}),g=o.useMemo(()=>Js({haksaCourseCode:d==null?void 0:d.haksaCourseCode,haksaOpenYear:d==null?void 0:d.haksaOpenYear,haksaOpenTerm:d==null?void 0:d.haksaOpenTerm,haksaBunbanCode:d==null?void 0:d.haksaBunbanCode,haksaGroupCode:d==null?void 0:d.haksaGroupCode}),[d==null?void 0:d.haksaCourseCode,d==null?void 0:d.haksaOpenYear,d==null?void 0:d.haksaOpenTerm,d==null?void 0:d.haksaBunbanCode,d==null?void 0:d.haksaGroupCode]),F=()=>{h({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1})};o.useEffect(()=>{if(!H){q(null);return}if(P>0){q(null);return}if(!g){T("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let C=!1;return(async()=>{G(!0),T(null);try{const k=await le.resolveHaksaCourse(g);if(k.rst_code!=="0000")throw new Error(k.rst_message);const E=Array.isArray(k.rst_data)?k.rst_data[0]:k.rst_data,$=Number((E==null?void 0:E.mapped_course_id)??0);if(!$||Number.isNaN($))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");C||q($)}catch(k){C||(q(null),T(k instanceof Error?k.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{C||G(!1)}})(),()=>{C=!0}},[H,P,g]);const N=async()=>{if(z){R(!0),T(null);try{const C=await le.getMaterials({courseId:z});if(C.rst_code!=="0000")throw new Error(C.rst_message);const k=(C.rst_data??[]).map(E=>({id:Number(E.library_id),title:E.library_nm,uploadDate:E.upload_date_conv||"-",size:E.file_size_conv||"-",downloadUrl:E.file_url||E.library_link||"",hasFile:!!E.file_url,hasLink:!!E.library_link}));I(k)}catch(C){T(C instanceof Error?C.message:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}}};o.useEffect(()=>{N()},[z]);const b=C=>{const f=C.downloadUrl;if(!f){alert("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uD30C\uC77C/\uB9C1\uD06C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}window.open(f,"_blank","noopener,noreferrer")},K=(C,f)=>{(async()=>{if(!z){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(confirm(`\uC790\uB8CC "${f}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const E=await le.deleteMaterial({courseId:z,libraryId:C});if(E.rst_code!=="0000")throw new Error(E.rst_message);await N(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(E){alert(E instanceof Error?E.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},w=()=>{(async()=>{var E;const C=Y.title.trim(),f=!!Y.file,k=!!Y.link.trim();if(!C){alert("\uC790\uB8CC\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!z){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(!f&&!k){alert("\uC790\uB8CC \uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC694\uD569\uB2C8\uB2E4.");return}L(!0);try{const $=await le.uploadMaterial({courseId:z,title:C,content:Y.content,link:Y.link,file:Y.file});if($.rst_code!=="0000")throw new Error($.rst_message);if((d==null?void 0:d.sourceType)==="haksa")try{await zl({haksaKey:g,weekNumber:Number(Y.weekNumber||1),sessionNumber:Number(Y.sessionNumber||1),content:{type:"document",title:Y.title,description:Y.content,link:Y.link,fileName:((E=Y.file)==null?void 0:E.name)||""}})}catch(M){alert(M instanceof Error?M.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC790\uB8CC\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await N(),m(!1),F(),alert("\uC5C5\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch($){alert($ instanceof Error?$.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{L(!1)}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"})]})}),j&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:j}),W&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-700 rounded-lg",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),D&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!D&&v.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uC790\uB8CC\uB97C \uC5C5\uB85C\uB4DC\uD574 \uC8FC\uC138\uC694."}),e.jsx("div",{className:"space-y-2",children:v.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($n,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:C.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:[C.uploadDate," \xB7 ",C.size,C.hasLink&&!C.hasFile&&e.jsx("span",{className:"ml-2",children:"(\uB9C1\uD06C)"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(C),className:"px-3 py-1.5 text-sm text-blue-700 hover:bg-blue-50 rounded transition-colors",children:"\uB2E4\uC6B4\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>K(C.id,C.title),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]})]},C.id))})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>{m(!1),F()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsxs("form",{onSubmit:C=>{C.preventDefault(),w()},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:Y.title,onChange:C=>h({...Y,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),n&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:Y.weekNumber,onChange:C=>h({...Y,weekNumber:parseInt(C.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:c},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:Y.sessionNumber,onChange:C=>h({...Y,sessionNumber:parseInt(C.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:Y.content,onChange:C=>h({...Y,content:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:Y.link,onChange:C=>h({...Y,link:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:C=>{var f;return h({...Y,file:((f=C.target.files)==null?void 0:f[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),F()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:_,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:_,children:_?"\uC5C5\uB85C\uB4DC \uC911...":"\uC5C5\uB85C\uB4DC"})]})]})]})})]})}function mx({courseId:r,initialPostId:n}){const[c,d]=o.useState(""),[p,m]=o.useState([]),[v,I]=o.useState(!1),[D,R]=o.useState(null),[_,L]=o.useState(null),[j,T]=o.useState(null),[W,G]=o.useState(!1),[B,q]=o.useState(""),H=o.useRef(!1),P=g=>g===!0||g===1||g==="1"||g==="Y"||g==="true",z=async g=>{if(r){I(!0),R(null);try{const F=await le.getQnas({courseId:r,keyword:g==null?void 0:g.keyword});if(F.rst_code!=="0000")throw new Error(F.rst_message);const b=(F.rst_data??[]).map(K=>({id:Number(K.id),subject:K.subject,student:K.user_nm||K.login_id||"-",date:K.reg_date_conv||"-",answered:P(K.answered)||Number(K.proc_status??0)===1}));m(b)}catch(F){R(F instanceof Error?F.message:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}}},Y=async g=>{if(!(!r||!g)){G(!0),R(null);try{const F=await le.getQnaDetail({courseId:r,postId:g});if(F.rst_code!=="0000")throw new Error(F.rst_message);const N=Array.isArray(F.rst_data)?F.rst_data[0]:F.rst_data;T(N??null),q(String((N==null?void 0:N.answer_content)??""))}catch(F){R(F instanceof Error?F.message:"Q&A \uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{G(!1)}}};o.useEffect(()=>{z({keyword:c.trim()?c.trim():void 0})},[r]),o.useEffect(()=>{H.current=!1,L(null),T(null),q("")},[r]),o.useEffect(()=>{n&&(H.current||(H.current=!0,L(n)))},[n]),o.useEffect(()=>{_&&Y(_)},[r,_]);const h=()=>{if(!_)return;const g=B.trim();if(!g){alert("\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const F=await le.answerQna({courseId:r,postId:_,content:g});if(F.rst_code!=="0000")throw new Error(F.rst_message);await Y(_),await z({keyword:c.trim()?c.trim():void 0}),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(F){alert(F instanceof Error?F.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};if(_){const g=j?P(j.answered):!1;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{L(null),T(null),q("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Rn,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:"Q&A"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC9C8\uBB38 \uC0C1\uC138 \uBC0F \uB2F5\uBCC0"})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${g?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"})]}),D&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:D}),W&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:j.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j.question_user_nm," \xB7 ",j.question_reg_date_conv||"-"]})]}),e.jsx("div",{className:"p-4 text-sm text-gray-800 prose max-w-none",dangerouslySetInnerHTML:{__html:Ml(j.question_content)}})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-900",children:"\uB2F5\uBCC0"}),e.jsx("div",{className:"text-xs text-gray-500",children:j.answer_reg_date_conv?`\uCD5C\uADFC \uC800\uC7A5: ${j.answer_reg_date_conv}`:""})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("textarea",{value:B,onChange:F=>q(F.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694..."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:h,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:g?"\uB2F5\uBCC0 \uC218\uC815":"\uB2F5\uBCC0 \uB4F1\uB85D"})})]})]})]})]})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),placeholder:"\uAC80\uC0C9\uC5B4(\uC81C\uBAA9)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:g=>{g.key==="Enter"&&z({keyword:c.trim()?c.trim():void 0})}}),e.jsx("button",{onClick:()=>void z({keyword:c.trim()?c.trim():void 0}),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]}),D&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:D}),v&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!v&&p.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"Q&A \uAE00\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("div",{className:"space-y-4",children:p.map(g=>e.jsx("button",{onClick:()=>L(g.id),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:g.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[g.student," \xB7 ",g.date]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${g.answered?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.answered?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"}),e.jsx(Jt,{className:"w-5 h-5 text-gray-400"})]})]})},g.id))})]})}function xx({courseId:r}){const[n,c]=o.useState([]),[d,p]=o.useState(null),[m,v]=o.useState(!1),[I,D]=o.useState(!1),[R,_]=o.useState(null),L=(h,g=0)=>{const F=Number(h);return Number.isFinite(F)?F:g},j=h=>{if(!d)return;const g=Array.isArray(d)?d[0]:d;if(!(!g||typeof g!="object"))return g[h]??g[h.toUpperCase()]},T=async()=>{if(r){v(!0),_(null);try{const h=await le.getGrades({courseId:r});if(h.rst_code!=="0000")throw new Error(h.rst_message);const F=(h.rst_data??[]).map(N=>({courseUserId:Number(N.course_user_id),studentId:N.login_id,name:N.user_nm,progressRatio:L(N.progress_ratio,0),examScore:L(N.exam_score,0),homeworkScore:L(N.homework_score,0),etcScore:L(N.etc_score,0),totalScore:L(N.total_score,0),statusLabel:N.status_label||""}));c(F),p(h.rst_course??null)}catch(h){_(h instanceof Error?h.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}}};o.useEffect(()=>{T()},[r]);const W=h=>h==="\uD569\uACA9"?"bg-green-100 text-green-700":h==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700",G={progressRate:L(j("complete_limit_progress"),0),totalScore:L(j("complete_limit_total_score"),0)},B=String(j("pass_yn")||"")==="Y",q={progressRate:L(j("limit_progress"),0),totalScore:L(j("limit_total_score"),0)},H={progress:L(j("assign_progress"),0),exam:L(j("assign_exam"),0),homework:L(j("assign_homework"),0),forum:L(j("assign_forum"),0),etc:L(j("assign_etc"),0)},P=H.progress+H.exam+H.homework+H.forum+H.etc,z=()=>{(async()=>{if(confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uC2DC\uD5D8/\uACFC\uC81C \uC810\uC218, \uC9C4\uB3C4\uC728 \uB4F1\uC744 \uAE30\uC900\uC73C\uB85C \uCD1D\uC810\uC774 \uB2E4\uC2DC \uACC4\uC0B0\uB429\uB2C8\uB2E4.)`)){D(!0);try{const g=await le.recalcGrades({courseId:r});if(g.rst_code!=="0000")throw new Error(g.rst_message);await T(),alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(g){alert(g instanceof Error?g.message:"\uC7AC\uACC4\uC0B0 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}}})()},Y=()=>{const h=new Date().toISOString().slice(0,10).replace(/-/g,""),g=`course_${r}_grades_${h}.csv`,F=["No","course_user_id","\uD559\uBC88","\uC774\uB984","\uC9C4\uB3C4\uC728(%)","\uC2DC\uD5D8","\uACFC\uC81C","\uAE30\uD0C0","\uCD1D\uC810","\uC0C1\uD0DC"],N=n.map((b,K)=>[K+1,b.courseUserId??"",b.studentId??"",b.name??"",Math.round(L(b.progressRatio,0)),L(b.examScore,0),L(b.homeworkScore,0),L(b.etcScore,0),L(b.totalScore,0),b.statusLabel??""]);Pn(g,F,N)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"\uC131\uC801 \uC870\uD68C \uBC0F \uAD00\uB9AC"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:z,disabled:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",children:[e.jsx($l,{className:"w-4 h-4"}),e.jsx("span",{children:I?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"})]}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC131\uC801\uD45C \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4 ",H.progress," / \uC2DC\uD5D8 ",H.exam," / \uACFC\uC81C ",H.homework,H.forum>0?` / \uD1A0\uB860 ${H.forum}`:""," / \uAE30\uD0C0 ",H.etc,P>0?` (\uD569\uACC4 ${P})`:""]})]}),e.jsxs("div",{className:`grid gap-4 text-sm ${B?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",G.progressRate,"% \uC774\uC0C1",G.totalScore>0?`, \uCD1D\uC810 ${G.totalScore}\uC810 \uC774\uC0C1`:""]})]}),B&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",q.progressRate,"% \uC774\uC0C1",q.totalScore>0?`, \uCD1D\uC810 ${q.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})]}),R&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:R}),m&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!m&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC2DC\uD5D8"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACFC\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAE30\uD0C0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACB0\uACFC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[n.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:h.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:h.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(h.progressRatio*10)/10,"%"]}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:h.examScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:h.homeworkScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:h.etcScore}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:Math.round(h.totalScore*100)/100})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full ${W(h.statusLabel)}`,children:h.statusLabel||"\uBBF8\uB2EC"})})]},h.courseUserId)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC131\uC801 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function gx({courseId:r,course:n}){const c=(n==null?void 0:n.sourceType)==="haksa"&&(!(n!=null&&n.mappedCourseId)||Number.isNaN(r)||r<=0),[d,p]=o.useState([]),[m,v]=o.useState([]),[I,D]=o.useState(null),[R,_]=o.useState(!1),[L,j]=o.useState(!1),[T,W]=o.useState(null),G=(f,k=0)=>{const E=Number(f);return Number.isFinite(E)?E:k},B=f=>{if(!I)return;const k=Array.isArray(I)?I[0]:I;if(!(!k||typeof k!="object"))return k[f]??k[f.toUpperCase()]},q=async()=>{if(r){_(!0),W(null);try{const f=await le.getCompletions({courseId:r});if(f.rst_code!=="0000")throw new Error(f.rst_message);const E=(f.rst_data??[]).map($=>({courseUserId:Number($.course_user_id),studentId:$.login_id,name:$.user_nm,progressRatio:G($.progress_ratio,0),totalScore:G($.total_score,0),completeStatus:String($.complete_status||""),completeYn:String($.complete_yn||""),completeDate:$.complete_date_conv||"-",closeYn:String($.close_yn||""),closeDate:$.close_date_conv||"-",statusLabel:$.status_label||""}));v(E),D(f.rst_course??null),p($=>$.filter(M=>E.some(S=>S.courseUserId===M)))}catch(f){W(f instanceof Error?f.message:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(!1)}}};o.useEffect(()=>{q()},[r]);const H={progressRate:G(B("complete_limit_progress"),0),totalScore:G(B("complete_limit_total_score"),0)},P=String(B("pass_yn")||"")==="Y",z={progressRate:G(B("limit_progress"),0),totalScore:G(B("limit_total_score"),0)},Y=f=>f.completeStatus==="C"||f.completeStatus==="P",h=f=>f.completeStatus==="P",g=f=>f==="\uD569\uACA9"?"bg-green-100 text-green-700":f==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":f==="\uC885\uB8CC"?"bg-gray-100 text-gray-700":f==="\uBBF8\uC218\uB8CC"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-800",F=f=>{f.target.checked?p(m.map(k=>k.courseUserId)):p([])},N=f=>{p(k=>k.includes(f)?k.filter(E=>E!==f):[...k,f])},b=(f,k)=>{if(d.length===0){alert("\uCC98\uB9AC\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}(async()=>{if(confirm(`${k}\uC744(\uB97C) \uC2E4\uD589\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC120\uD0DD \uC778\uC6D0: ${d.length}\uBA85`)){j(!0);try{const $=await le.updateCompletion({courseId:r,action:f,courseUserIds:d});if($.rst_code!=="0000")throw new Error($.rst_message);await q(),alert("\uCC98\uB9AC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch($){alert($ instanceof Error?$.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{j(!1)}}})()},K=(f,k)=>{const E=window.open("","_blank");if(!E){alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const $=await le.issueCertificate({courseUserId:f,type:k});if($.rst_code!=="0000")throw new Error($.rst_message);const M=$.rst_data;if(!M)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");E.location.href=M}catch($){try{E.close()}catch{}alert($ instanceof Error?$.message:"\uC99D\uBA85\uC11C \uCD9C\uB825 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},w=f=>{if(d.length===0){alert("\uCD9C\uB825\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}const E=m.filter(M=>d.includes(M.courseUserId)).filter(M=>f==="P"?h(M):Y(M));if(E.length===0){alert(f==="P"?"\uD569\uACA9\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uC218\uB8CC\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(E.length>20){alert("\uD55C \uBC88\uC5D0 \uB108\uBB34 \uB9CE\uC774 \uCD9C\uB825\uD558\uBA74 \uD31D\uC5C5 \uCC28\uB2E8\uC774 \uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. 20\uBA85 \uC774\uD558\uB85C \uB098\uB220\uC11C \uCD9C\uB825\uD574 \uC8FC\uC138\uC694.");return}const $=E.map(M=>({row:M,win:window.open("","_blank")}));if($.some(M=>!M.win)){$.forEach(M=>{var S;try{(S=M.win)==null||S.close()}catch{}}),alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{var S;const M=[];for(const A of $)try{const y=await le.issueCertificate({courseUserId:A.row.courseUserId,type:f});if(y.rst_code!=="0000")throw new Error(y.rst_message);const Q=y.rst_data;if(!Q)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");A.win.location.href=Q}catch(y){try{(S=A.win)==null||S.close()}catch{}M.push(`${A.row.name}: ${y instanceof Error?y.message:"\uC624\uB958"}`)}M.length>0&&alert(`\uC77C\uBD80 \uCD9C\uB825\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.

${M.join(`
`)}`)})()},C=m.filter(f=>d.includes(f.courseUserId)&&h(f)).length;return c?e.jsx(gd,{course:n}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:`grid gap-4 text-sm ${P?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",H.progressRate,"% \uC774\uC0C1",H.totalScore>0?`, \uCD1D\uC810 ${H.totalScore}\uC810 \uC774\uC0C1`:""]})]}),P&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",z.progressRate,"% \uC774\uC0C1",z.totalScore>0?`, \uCD1D\uC810 ${z.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 justify-end",children:[e.jsx("button",{onClick:()=>void q(),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:R||L,children:"\uC0C8\uB85C\uACE0\uCE68"}),e.jsx("button",{onClick:()=>b("complete_y",P?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:L,children:P?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"}),e.jsx("button",{onClick:()=>b("complete_n","\uD310\uC815 \uCD08\uAE30\uD654"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:bg-gray-200",disabled:L,children:"\uD310\uC815 \uCD08\uAE30\uD654"}),e.jsx("button",{onClick:()=>b("close_y","\uC885\uB8CC(\uB9C8\uAC10) \uCC98\uB9AC"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",disabled:L,children:"\uC885\uB8CC(\uB9C8\uAC10)"}),e.jsx("button",{onClick:()=>b("close_n","\uC885\uB8CC \uD574\uC81C"),className:"px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:bg-gray-200",disabled:L,children:"\uC885\uB8CC \uD574\uC81C"})]}),e.jsxs("div",{className:"mb-4 flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>w("C"),disabled:d.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC218\uB8CC\uC99D \uC77C\uAD04\uCD9C\uB825 (",d.length,")"]})]}),P&&e.jsxs("button",{onClick:()=>w("P"),disabled:d.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uD569\uACA9\uC99D \uC77C\uAD04\uCD9C\uB825 (",C,")"]})]})]}),T&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:T}),R&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),!R&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"checkbox",onChange:F,checked:m.length>0&&d.length===m.length,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD310\uC815/\uC885\uB8CC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC99D\uBA85\uC11C \uCD9C\uB825"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[m.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:d.includes(f.courseUserId),onChange:()=>N(f.courseUserId),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:f.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:f.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.progressRatio*10)/10,"%"]}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.totalScore*100)/100,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${g(f.statusLabel)}`,children:f.statusLabel||"\uBBF8\uD310\uC815"})}),e.jsxs("td",{className:"px-4 py-4 text-center text-xs text-gray-600",children:[e.jsxs("div",{children:["\uD310\uC815: ",f.completeStatus||"-"]}),e.jsxs("div",{children:["\uC885\uB8CC: ",f.closeYn||"-"]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>K(f.courseUserId,"C"),disabled:!Y(f),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uC218\uB8CC\uC99D"}),P&&e.jsx("button",{onClick:()=>K(f.courseUserId,"P"),disabled:!h(f),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uD569\uACA9\uC99D"})]})})]},f.courseUserId)),m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC218\uB8CC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function px({haksaKey:r,haksaExams:n,setHaksaExams:c,weekCount:d}){const[p,m]=o.useState(!1),[v,I]=o.useState(null),[D,R]=o.useState([]),[_,L]=o.useState(""),[j,T]=o.useState(null),[W,G]=o.useState(1),[B,q]=o.useState(1),H=new Date().toISOString().split("T")[0],P=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[z,Y]=o.useState({startDate:H,startTime:"09:00",endDate:P,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!p)return;let C=!1;return(async()=>{T(null);try{const k=await le.getExamTemplates({limit:200});if(k.rst_code!=="0000")throw new Error(k.rst_message);const $=(k.rst_data??[]).map(M=>({id:String(M.id),title:M.exam_nm||"\uC2DC\uD5D8",description:M.content||"",questionCount:Number(M.question_cnt??0),totalPoints:Number(M.total_points??0)}));C||R($)}catch(k){C||(R([]),T(k instanceof Error?k.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{C=!0}},[p]);const h=D.find(C=>C.id===_);o.useEffect(()=>{h&&Y(C=>({...C,points:h.totalPoints||0}))},[h]);const g=()=>{L(""),G(1),q(1),Y({startDate:H,startTime:"09:00",endDate:P,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0})},F=async C=>{if(c(C),!!r)try{const f=await le.updateHaksaExams({...r,examsJson:JSON.stringify(C)});if(f.rst_code!=="0000")throw new Error(f.rst_message)}catch(f){T(f instanceof Error?f.message:"\uC2DC\uD5D8 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},N=()=>{if(!_||!h)return;const C={id:`exam_${Date.now()}`,examId:_,title:h.title,description:h.description,questionCount:h.questionCount||0,totalPoints:h.totalPoints,type:"exam",weekNumber:W,sessionNumber:B,sessionName:`${B}\uCC28\uC2DC`,createdAt:new Date().toISOString(),settings:{...z}},f=[...n,C];F(f),m(!1),g()},b=C=>{var f,k,E,$,M,S,A,y,Q;I(C),L(C.examId),G(C.weekNumber||1),q(C.sessionNumber||1),Y({startDate:((f=C.settings)==null?void 0:f.startDate)||H,startTime:((k=C.settings)==null?void 0:k.startTime)||"09:00",endDate:((E=C.settings)==null?void 0:E.endDate)||P,endTime:(($=C.settings)==null?void 0:$.endTime)||"18:00",points:((M=C.settings)==null?void 0:M.points)||C.totalPoints||0,allowRetake:((S=C.settings)==null?void 0:S.allowRetake)||!1,retakeScore:((A=C.settings)==null?void 0:A.retakeScore)||0,retakeCount:((y=C.settings)==null?void 0:y.retakeCount)||0,showResults:((Q=C.settings)==null?void 0:Q.showResults)!==!1})},K=()=>{if(!v)return;const C=n.map(f=>f.id===v.id?{...f,weekNumber:W,sessionNumber:B,sessionName:`${B}\uCC28\uC2DC`,settings:{...z}}:f);F(C),I(null),g()},w=C=>{if(!confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))return;const f=n.filter(k=>k.id!==C);F(f)};return e.jsxs("div",{className:"space-y-4",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:j}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(C=>{var f,k,E,$,M,S,A;return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ps,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:C.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[C.questionCount||0,"\uBB38\uC81C"]}),e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[C.weekNumber||1,"\uC8FC\uCC28"]}),e.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-xs rounded",children:C.sessionName||`${C.sessionNumber||1}\uCC28\uC2DC`})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[((f=C.settings)==null?void 0:f.startDate)||"-"," ",((k=C.settings)==null?void 0:k.startTime)||""," ~ ",((E=C.settings)==null?void 0:E.endDate)||"-"," ",(($=C.settings)==null?void 0:$.endTime)||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[((M=C.settings)==null?void 0:M.points)||C.totalPoints||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:(S=C.settings)!=null&&S.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",C.settings.retakeScore,"\uC810 \uBBF8\uB9CC, ",C.settings.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:(A=C.settings)!=null&&A.showResults?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:()=>b(C),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(C.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(jt,{className:"w-4 h-4"})})]})]})},C.id)})}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(ps,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:W,onChange:C=>G(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:d},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:B,onChange:C=>q(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),D.length>0?e.jsxs("select",{value:_,onChange:C=>L(C.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),D.map(C=>e.jsxs("option",{value:C.id,children:[C.title," (",C.questionCount||0,"\uBB38\uC81C, ",C.totalPoints,"\uC810)"]},C.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),_&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:z.startDate,onChange:C=>Y(f=>({...f,startDate:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:z.startTime,onChange:C=>Y(f=>({...f,startTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:z.endDate,onChange:C=>Y(f=>({...f,endDate:C.target.value})),min:z.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:z.endTime,onChange:C=>Y(f=>({...f,endTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:z.points,onChange:C=>Y(f=>({...f,points:parseInt(C.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.allowRetake,onChange:C=>Y(f=>({...f,allowRetake:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),z.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:z.retakeScore,onChange:C=>Y(f=>({...f,retakeScore:parseInt(C.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:z.retakeCount,onChange:C=>Y(f=>({...f,retakeCount:parseInt(C.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.showResults,onChange:C=>Y(f=>({...f,showResults:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:N,disabled:!_,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"\uC2DC\uD5D8\uCD94\uAC00"})]})]})]}),v&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>I(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>I(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:W,onChange:C=>G(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:d},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uC8FC\uCC28"]},C))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:B,onChange:C=>q(parseInt(C.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(C,f)=>f+1).map(C=>e.jsxs("option",{value:C,children:[C,"\uCC28\uC2DC"]},C))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:v.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:z.startDate,onChange:C=>Y(f=>({...f,startDate:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:z.startTime,onChange:C=>Y(f=>({...f,startTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:z.endDate,onChange:C=>Y(f=>({...f,endDate:C.target.value})),min:z.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:z.endTime,onChange:C=>Y(f=>({...f,endTime:C.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:z.points,onChange:C=>Y(f=>({...f,points:parseInt(C.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.allowRetake,onChange:C=>Y(f=>({...f,allowRetake:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),z.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:z.retakeScore,onChange:C=>Y(f=>({...f,retakeScore:parseInt(C.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:z.retakeCount,onChange:C=>Y(f=>({...f,retakeCount:parseInt(C.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.showResults,onChange:C=>Y(f=>({...f,showResults:C.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>I(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:K,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function hx({isOpen:r,onClose:n,onSave:c,showWeekSession:d=!1,weekCount:p=15}){const[m,v]=o.useState([]),[I,D]=o.useState(""),[R,_]=o.useState(!1),[L,j]=o.useState(null),[T,W]=o.useState(1),[G,B]=o.useState(1),q=new Date().toISOString().split("T")[0],H=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[P,z]=o.useState({startDate:q,endDate:H,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});o.useEffect(()=>{if(!r)return;let g=!1;return(async()=>{j(null);try{const N=await le.getExamTemplates({limit:200});if(N.rst_code!=="0000")throw new Error(N.rst_message);const K=(N.rst_data??[]).map(w=>({id:String(w.id),title:w.exam_nm||"\uC2DC\uD5D8",description:w.content||"",duration:Number(w.exam_time??60),questionCount:Number(w.question_cnt??0),totalPoints:Number(w.total_points??0)}));g||v(K)}catch(N){g||(v([]),j(N instanceof Error?N.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{g=!0}},[r]);const Y=m.find(g=>g.id===I);o.useEffect(()=>{Y&&z(g=>({...g,points:Y.totalPoints||0}))},[Y]);const h=()=>{!I||!Y||(c({examId:parseInt(I,10),title:Y.title,description:Y.description,duration:Y.duration||60,questionCount:Y.questionCount||0,points:P.points,allowRetake:P.allowRetake,retakeScore:P.retakeScore,retakeCount:P.retakeCount,showResults:P.showResults,startDate:P.startDate,endDate:P.endDate,weekNumber:T,sessionNumber:G}),D(""),z({startDate:q,endDate:H,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}),n())};return r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:n}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[d&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:T,onChange:g=>W(parseInt(g.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:p},(g,F)=>F+1).map(g=>e.jsxs("option",{value:g,children:[g,"\uC8FC\uCC28"]},g))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:G,onChange:g=>B(parseInt(g.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(g,F)=>F+1).map(g=>e.jsxs("option",{value:g,children:[g,"\uCC28\uC2DC"]},g))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),m.length>0?e.jsxs("select",{value:I,onChange:g=>D(g.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),m.map(g=>e.jsxs("option",{value:g.id,children:[g.title," (",g.questionCount||0,"\uBB38\uC81C, ",g.totalPoints,"\uC810)"]},g.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),I&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:P.startDate,onChange:g=>z(F=>({...F,startDate:g.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:P.endDate,onChange:g=>z(F=>({...F,endDate:g.target.value})),min:P.startDate,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:P.points,onChange:g=>z(F=>({...F,points:parseInt(g.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.allowRetake,onChange:g=>z(F=>({...F,allowRetake:g.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),P.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:P.retakeScore,onChange:g=>z(F=>({...F,retakeScore:parseInt(g.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:P.retakeCount,onChange:g=>z(F=>({...F,retakeCount:parseInt(g.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.showResults,onChange:g=>z(F=>({...F,showResults:g.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),L&&e.jsx("div",{className:"px-6 pb-2 text-sm text-red-600",children:L}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:n,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:h,disabled:!I,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"})]})]})]}):null}function gd({course:r}){const n=o.useMemo(()=>Js({haksaCourseCode:r==null?void 0:r.haksaCourseCode,haksaOpenYear:r==null?void 0:r.haksaOpenYear,haksaOpenTerm:r==null?void 0:r.haksaOpenTerm,haksaBunbanCode:r==null?void 0:r.haksaBunbanCode,haksaGroupCode:r==null?void 0:r.haksaGroupCode}),[r==null?void 0:r.haksaCourseCode,r==null?void 0:r.haksaOpenYear,r==null?void 0:r.haksaOpenTerm,r==null?void 0:r.haksaBunbanCode,r==null?void 0:r.haksaGroupCode]),c=r==null?void 0:r.id,[d,p]=o.useState([]),[m,v]=o.useState([]),[I,D]=o.useState(""),[R,_]=o.useState(!1),[L,j]=o.useState(!1),[T,W]=o.useState(null),G=[{value:"A+",label:"A+ (95-100)",min:95,color:"bg-blue-200 text-blue-800"},{value:"A",label:"A (90-94)",min:90,color:"bg-blue-100 text-blue-700"},{value:"B+",label:"B+ (85-89)",min:85,color:"bg-green-200 text-green-800"},{value:"B",label:"B (80-84)",min:80,color:"bg-green-100 text-green-700"},{value:"C+",label:"C+ (75-79)",min:75,color:"bg-yellow-200 text-yellow-800"},{value:"C",label:"C (70-74)",min:70,color:"bg-yellow-100 text-yellow-700"},{value:"D+",label:"D+ (65-69)",min:65,color:"bg-orange-200 text-orange-800"},{value:"D",label:"D (60-64)",min:60,color:"bg-orange-100 text-orange-700"},{value:"F",label:"F (0-59)",min:0,color:"bg-red-100 text-red-700"}],B=N=>N>=95?"A+":N>=90?"A":N>=85?"B+":N>=80?"B":N>=75?"C+":N>=70?"C":N>=65?"D+":N>=60?"D":"F";o.useEffect(()=>{if(!n)return;let N=!1;(async()=>{_(!0),W(null);try{const[K,w]=await Promise.all([le.getHaksaCourseStudents({courseCode:n.courseCode,openYear:n.openYear,openTerm:n.openTerm,bunbanCode:n.bunbanCode,groupCode:n.groupCode}),le.getHaksaGrades(n)]);if(K.rst_code!=="0000")throw new Error(K.rst_message);if(w.rst_code!=="0000")throw new Error(w.rst_message);const C=new Map;(w.rst_data??[]).forEach(k=>{k.student_id&&C.set(String(k.student_id),{grade:k.grade||"",score:Number(k.score??0)})});const f=(K.rst_data??[]).map(k=>{const E=String(k.student_id||""),$=C.get(E);return{id:E,name:k.name||"-",studentId:E||"-",score:($==null?void 0:$.score)??0,grade:($==null?void 0:$.grade)??""}});if(c&&f.length>0&&C.size===0)try{const k=localStorage.getItem(`haksa_grades_${c}`);if(k){const E=JSON.parse(k),$=f.map(M=>{const S=E.find(A=>String(A.id)===M.id);return{...M,grade:(S==null?void 0:S.grade)||M.grade,score:Number((S==null?void 0:S.score)??M.score??0)}});await le.updateHaksaGrades({...n,gradesJson:JSON.stringify($.map(M=>({student_id:M.id,grade:M.grade,score:M.score??0})))}),N||p($);return}}catch{}N||p(f)}catch(K){p([]),W(K instanceof Error?K.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(!1)}})()},[n,c]);const q=async N=>{if(!n)return!1;try{const b=N.map(w=>({student_id:w.id,grade:w.grade,score:Number(w.score??0)})),K=await le.updateHaksaGrades({...n,gradesJson:JSON.stringify(b)});if(K.rst_code!=="0000")throw new Error(K.rst_message);return!0}catch(b){return W(b instanceof Error?b.message:"\uC131\uC801 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),!1}},H=N=>{p(N),q(N)},P=(N,b)=>{const K=d.map(w=>w.id===N?{...w,grade:b}:w);H(K)},z=()=>{(async()=>{if(!confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uD604\uC7AC \uC810\uC218\uB97C \uAE30\uC900\uC73C\uB85C A/B/C/D/F\uAC00 \uB2E4\uC2DC \uD310\uC815\uB429\uB2C8\uB2E4.)`))return;j(!0);const b=d.map(w=>({...w,grade:B(w.score)}));p(b),await q(b)&&alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),j(!1)})()},Y=()=>{if(!I||m.length===0)return;const N=d.map(b=>m.includes(b.id)?{...b,grade:I}:b);H(N),v([]),D("")},h=N=>{v(N?d.map(b=>b.id):[])},g=N=>{v(b=>b.includes(N)?b.filter(K=>K!==N):[...b,N])},F=N=>{const b=G.find(K=>K.value===N);return(b==null?void 0:b.color)||"bg-gray-100 text-gray-700"};return e.jsxs("div",{className:"space-y-6",children:[T&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:T}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD559\uC0AC \uACFC\uBAA9 \uC131\uC801 \uAE30\uC900"}),e.jsx("div",{className:"flex flex-wrap gap-3 text-sm",children:G.map(N=>e.jsx("span",{className:`px-3 py-1 rounded-full ${N.color}`,children:N.label},N.value))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:z,disabled:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:L?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"}),m.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:I,onChange:N=>D(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC131\uC801 \uC120\uD0DD"}),G.map(N=>e.jsx("option",{value:N.value,children:N.value},N.value))]}),e.jsxs("button",{onClick:Y,disabled:!I,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:["\uC120\uD0DD \uD559\uC0DD \uC77C\uAD04 \uC801\uC6A9 (",m.length,"\uBA85)"]})]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:m.length===d.length&&d.length>0,onChange:N=>h(N.target.checked),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801 \uBCC0\uACBD"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[R&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!R&&d.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:m.includes(N.id),onChange:()=>g(N.id),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:N.name}),e.jsx("td",{className:"px-4 py-4 text-center text-gray-600",children:N.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-gray-900 font-medium",children:[N.score,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:N.grade?e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${F(N.grade)}`,children:N.grade}):e.jsx("span",{className:"text-gray-400",children:"\uBBF8\uD310\uC815"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("select",{value:N.grade||"",onChange:b=>P(N.id,b.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD"}),G.map(b=>e.jsx("option",{value:b.value,children:b.value},b.value))]})})]},N.id)),!R&&d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uB4F1\uB85D\uB41C \uD559\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),d.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"\uC131\uC801 \uBD84\uD3EC"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[G.map(N=>{const b=d.filter(K=>K.grade===N.value).length;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${N.color}`,children:N.value}),e.jsxs("span",{className:"text-gray-600",children:[b,"\uBA85"]})]},N.value)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:"\uBBF8\uD310\uC815"}),e.jsxs("span",{className:"text-gray-600",children:[d.filter(N=>!N.grade).length,"\uBA85"]})]})]})]})]})}const Vc=[{value:"regular",label:"\uC815\uADDC\uACFC\uC815"},{value:"non-regular",label:"\uBE44\uC815\uADDC\uACFC\uC815"}],Wc=[{value:"degree",label:"\uD559\uC704"},{value:"professional",label:"\uC804\uBB38\uAE30\uC220"},{value:"master",label:"\uAE30\uB2A5\uC7A5"},{value:"senior",label:"\uC2E0\uC911\uB144"},{value:"hightech",label:"\uD558\uC774\uD14C\uD06C"}];function Tl(r){if(!r)return null;try{const n=JSON.parse(r);return!n||typeof n!="object"?null:n}catch{return null}}function fx(r,n){return{id:String(r.id),sourceType:"prism",courseId:r.course_id_conv||r.course_cd||String(r.id),courseType:[r.course_type_conv,r.onoff_type_conv].filter(Boolean).join(" / ")||"\uBBF8\uC9C0\uC815",subjectName:r.course_nm_conv||r.course_nm||"-",programId:r.program_id||0,programName:n,period:r.period_conv||"-",students:r.student_cnt||0,status:r.status_label||"\uB300\uAE30"}}function pd({course:r,onBack:n}){var Ne,ce,pe,Ee,fe,De,He;const[c,d]=o.useState(!1),[p,m]=o.useState(null),[v,I]=o.useState(null),[D,R]=o.useState([]),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState(!1),[B,q]=o.useState([]),[H,P]=o.useState(""),[z,Y]=o.useState(!1),[h,g]=o.useState(null),[F,N]=o.useState(null),[b,K]=o.useState(!1),[w,C]=o.useState(!1),[f,k]=o.useState(!1),[E,$]=o.useState({courseName:"",courseCategory:"",classification:"",departmentName:"",major:"",courseDescription:""}),M=async()=>{if(!(!v||!window.confirm(`\uC815\uB9D0\uB85C \uC774 \uACFC\uC815\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
\uC0AD\uC81C\uB41C \uACFC\uC815\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`))){k(!0);try{const Me=await le.deleteProgram({id:Number(r.id)});if(Me.rst_code!=="0000")throw new Error(Me.rst_message);alert("\uACFC\uC815\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),n()}catch(Me){alert(Me instanceof Error?Me.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{k(!1)}}},S=async()=>{d(!0),m(null);try{const ie=Number(r.id);if(!Number.isFinite(ie)||ie<=0)throw new Error("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const[Me,U]=await Promise.all([le.getProgram(ie),le.getProgramCourses({programId:ie})]);if(Me.rst_code!=="0000")throw new Error(Me.rst_message);const Ce=Me.rst_data,J=Array.isArray(Ce)?Ce[0]:Ce;I(J??null),U.rst_code==="0000"&&R(U.rst_data??[])}catch(ie){m(ie instanceof Error?ie.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{d(!1),L(!1)}};o.useEffect(()=>{S()},[r.id]);const A=o.useMemo(()=>Tl(v==null?void 0:v.plan_json),[v==null?void 0:v.plan_json]),y=(v==null?void 0:v.course_nm)??r.name,Q=()=>{var Me,U,Ce,J,oe,ae,de;const ie=Tl(v==null?void 0:v.plan_json);$({courseName:(v==null?void 0:v.course_nm)??r.name??"",courseCategory:((U=(Me=ie==null?void 0:ie.basic)==null?void 0:Me.courseCategory)==null?void 0:U.value)??"",classification:((J=(Ce=ie==null?void 0:ie.basic)==null?void 0:Ce.classification)==null?void 0:J.value)??"",departmentName:((oe=ie==null?void 0:ie.basic)==null?void 0:oe.departmentName)??"",major:((ae=ie==null?void 0:ie.basic)==null?void 0:ae.major)??"",courseDescription:((de=ie==null?void 0:ie.basic)==null?void 0:de.courseDescription)??""}),K(!0)},Z=()=>{K(!1)},ue=async()=>{var ie,Me;if(v){C(!0);try{const U=Tl(v==null?void 0:v.plan_json),Ce={...U,version:1,basic:{...U==null?void 0:U.basic,courseCategory:{value:E.courseCategory,label:((ie=Vc.find(oe=>oe.value===E.courseCategory))==null?void 0:ie.label)??E.courseCategory},classification:{value:E.classification,label:((Me=Wc.find(oe=>oe.value===E.classification))==null?void 0:Me.label)??E.classification},departmentName:E.departmentName,major:E.major,courseDescription:E.courseDescription}},J=await le.modifyProgram({id:Number(r.id),courseName:E.courseName.trim(),planJson:JSON.stringify(Ce)});if(J.rst_code!=="0000")throw new Error(J.rst_message);await S(),K(!1)}catch(U){alert(U instanceof Error?U.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C(!1)}}},ye=async()=>{G(!0),P(""),Y(!0);try{const ie=await le.getMyCourses({});if(ie.rst_code==="0000"){const Me=new Set(D.map(Ce=>Ce.id)),U=(ie.rst_data??[]).filter(Ce=>!Me.has(Ce.id));q(U)}}catch{}finally{Y(!1)}},ke=async ie=>{g(ie);try{const Me=Number(r.id),U=await le.setCourseProgram({courseId:ie,programId:Me});if(U.rst_code!=="0000")throw new Error(U.rst_message);await S(),q(Ce=>Ce.filter(J=>J.id!==ie))}catch(Me){alert(Me instanceof Error?Me.message:"\uACFC\uBAA9 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{g(null)}},se=async ie=>{if(window.confirm("\uC774 \uACFC\uBAA9\uC744 \uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){N(ie);try{const U=await le.setCourseProgram({courseId:ie,programId:0});if(U.rst_code!=="0000")throw new Error(U.rst_message);await S()}catch(U){alert(U instanceof Error?U.message:"\uACFC\uBAA9 \uBD84\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(null)}}},be=o.useMemo(()=>{if(!H.trim())return B;const ie=H.toLowerCase();return B.filter(Me=>{var U,Ce,J;return((U=Me.course_nm)==null?void 0:U.toLowerCase().includes(ie))||((Ce=Me.course_id_conv)==null?void 0:Ce.toLowerCase().includes(ie))||((J=Me.course_cd)==null?void 0:J.toLowerCase().includes(ie))})},[B,H]);return j?e.jsx(Cd,{course:j,onBack:()=>T(null)}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Rn,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-gray-900",children:"\uACFC\uC815 \uC0C1\uC138"}),b?e.jsx("input",{type:"text",value:E.courseName,onChange:ie=>$({...E,courseName:ie.target.value}),className:"mt-1 px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"\uACFC\uC815\uBA85 \uC785\uB825"}):e.jsx("p",{className:"text-sm text-gray-600",children:y})]})]}),!c&&!p&&v&&!b&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:M,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:f?"\uC0AD\uC81C \uC911...":"\uC0AD\uC81C"})]}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]})]}),b&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:Z,disabled:w,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(dt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCDE8\uC18C"})]}),e.jsxs("button",{onClick:ue,disabled:w,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:w?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),c&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!c&&p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:p}),!c&&!p&&!v&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uACFC\uC815 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."}),!c&&!p&&v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4"})]})}),e.jsx("div",{className:"p-6",children:b?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC720\uD615"}),e.jsxs("select",{value:E.courseCategory,onChange:ie=>$({...E,courseCategory:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),Vc.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsxs("select",{value:E.classification,onChange:ie=>$({...E,classification:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),Wc.map(ie=>e.jsx("option",{value:ie.value,children:ie.label},ie.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:E.departmentName,onChange:ie=>$({...E,departmentName:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85 \uC785\uB825"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:E.major,onChange:ie=>$({...E,major:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885 \uC785\uB825"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((ce=(Ne=A==null?void 0:A.basic)==null?void 0:Ne.courseCategory)==null?void 0:ce.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((Ee=(pe=A==null?void 0:A.basic)==null?void 0:pe.classification)==null?void 0:Ee.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uD559\uACFC\uBA85"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((fe=A==null?void 0:A.basic)==null?void 0:fe.departmentName)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((De=A==null?void 0:A.basic)==null?void 0:De.major)??"-"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uACFC\uC815\uC124\uBA85"})]})}),e.jsx("div",{className:"p-6",children:b?e.jsx("textarea",{value:E.courseDescription,onChange:ie=>$({...E,courseDescription:ie.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}):(He=A==null?void 0:A.basic)!=null&&He.courseDescription?e.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:A.basic.courseDescription}):e.jsx("p",{className:"text-gray-400 italic",children:"\uACFC\uC815\uC124\uBA85\uC774 \uB4F1\uB85D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dm,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[D.length,"\uAC1C \uACFC\uBAA9"]}),e.jsxs("button",{onClick:ye,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00"})]})]})]})}),e.jsx("div",{className:"p-6",children:_?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):D.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 italic mb-4",children:"\uC18C\uC18D\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("button",{onClick:ye,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00\uD558\uAE30"})]})]}):e.jsx("div",{className:"space-y-3",children:D.map(ie=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:ie.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ie.course_id_conv??ie.course_cd??`ID: ${ie.id}`,ie.year&&` \xB7 ${ie.year}\uB144`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${ie.status_label==="\uC9C4\uD589\uC911"?"bg-green-100 text-green-700":ie.status_label==="\uC885\uB8CC"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-700"}`,children:ie.status_label??"\uB300\uAE30"}),e.jsxs("button",{onClick:()=>T(fx(ie,y)),className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors",title:"\uACFC\uBAA9 \uAD00\uB9AC",children:[e.jsx(ld,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>se(ie.id),disabled:F===ie.id,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-red-700 bg-red-50 rounded hover:bg-red-100 transition-colors disabled:opacity-50",title:"\uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC",children:[e.jsx(jt,{className:"w-4 h-4"}),e.jsx("span",{children:F===ie.id?"\uBD84\uB9AC \uC911...":"\uBD84\uB9AC"})]})]})]},ie.id))})})]})]}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>G(!1),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"\uACFC\uBAA9\uBA85 \uB610\uB294 \uACFC\uBAA9\uCF54\uB4DC\uB85C \uAC80\uC0C9...",value:H,onChange:ie=>P(ie.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:z?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"\uACFC\uBAA9 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}):be.length===0?e.jsx("p",{className:"text-center text-gray-400 py-8",children:H?"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uCD94\uAC00\uD560 \uC218 \uC788\uB294 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"space-y-2",children:be.map(ie=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:ie.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ie.course_id_conv??ie.course_cd??`ID: ${ie.id}`,ie.year&&` \xB7 ${ie.year}\uB144`]})]}),e.jsxs("button",{onClick:()=>ke(ie.id),disabled:h===ie.id,className:"flex items-center gap-1 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:h===ie.id?"\uCD94\uAC00 \uC911...":"\uCD94\uAC00"})]})]},ie.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:()=>G(!1),className:"w-full px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"\uB2EB\uAE30"})})]})})]})}function In(r){const n=Number.parseInt(String(r||"").trim(),10),c=Number.isFinite(n)&&n>0?n:15;return Math.min(c,200)}function yx(r,n){const c=new Map;n.forEach(p=>c.set(String(p.id),p));const d=[];for(let p=1;p<=r;p+=1){const m=String(p),v=c.get(m)??n[p-1];v?d.push({...v,id:m}):d.push({id:m,title:"",description:"",videos:[]})}return d}function hd({initialStep:r,onStepChange:n}={}){const[c,d]=o.useState(r??"basic"),[p,m]=o.useState(!0);o.useEffect(()=>{const N=r??"basic";d(b=>b===N?b:N)},[r]),o.useEffect(()=>{n==null||n(c)},[c,n]);const[v,I]=o.useState(!1),[D,R]=o.useState(null),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState([]),[B,q]=o.useState({subjectName:"",selectedCourse:null,categoryId:0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]});o.useEffect(()=>{if(!p)return;const N=In(B.hours);B.sessions.length!==N&&q(b=>{const K=In(b.hours);return b.sessions.length===K?b:{...b,sessions:yx(K,b.sessions)}})},[p,B.hours,B.sessions.length]),o.useEffect(()=>{let N=!0;return L(!0),T(null),le.getCourseCategories().then(b=>{if(!N)return;if(b.rst_code!=="0000")throw new Error(b.rst_message);const K=b.rst_data??[];G(K);const w=K.find(C=>C.category_nm==="\uC790\uC728\uAC15\uC88C")??K.find(C=>(C.category_nm??"").includes("\uC790\uC728"));w&&q(C=>C.categoryId>0?C:{...C,categoryId:Number(w.id)})}).catch(b=>{N&&T(b instanceof Error?b.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}).finally(()=>{N&&L(!1)}),()=>{N=!1}},[]);const H=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:qs},{id:"learners",label:"\uD559\uC2B5\uC790 \uC120\uD0DD",icon:vu},{id:"curriculum",label:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131",icon:nd},{id:"confirm",label:"\uCD5C\uC885 \uD655\uC778",icon:ls}],P=H.findIndex(N=>N.id===c),z=()=>{const N=P+1;N<H.length&&d(H[N].id)},Y=()=>{const N=P-1;N>=0&&d(H[N].id)},h=N=>{q(b=>({...b,...N}))},g=()=>{const N=W.find(b=>b.category_nm==="\uC790\uC728\uAC15\uC88C")??W.find(b=>(b.category_nm??"").includes("\uC790\uC728"));d("basic"),m(!0),q({subjectName:"",selectedCourse:null,categoryId:N?Number(N.id):0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]})},F=async()=>{R(null);const N=B.subjectName.trim();if(!N){R("\uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!B.year.trim()){R("\uB144\uB3C4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!B.startDate||!B.endDate){R("\uC218\uC5C5\uC2DC\uC791\uC77C\uACFC \uC218\uC5C5 \uC885\uB8CC\uC77C\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}I(!0);try{const b=B.selectedCourse?Number(B.selectedCourse.id):0,K=String(In(B.hours)),w=await le.createCourse({courseName:N,year:B.year.trim(),studyStartDate:B.startDate,studyEndDate:B.endDate,programId:b>0?b:void 0,categoryId:B.categoryId>0?B.categoryId:void 0,semester:B.semester,credit:B.credits,lessonTime:K,content1:B.description,content2:B.objectives,courseFile:B.courseFileName||void 0});if(w.rst_code!=="0000")throw new Error(w.rst_message);const C=Number(w.rst_data);if(!C)throw new Error("\uACFC\uBAA9 \uC0DD\uC131 \uACB0\uACFC(course_id)\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");if(B.selectedLearners.length>0){const f=B.selectedLearners.map(k=>Number(k.id)).filter(k=>Number.isFinite(k)&&k>0);if(f.length>0){const k=await le.addCourseStudents({courseId:C,userIds:f});if(k.rst_code!=="0000")throw new Error(k.rst_message)}}for(let f=0;f<B.sessions.length;f+=1){const k=B.sessions[f],E=k.title.trim()||`${f+1}\uCC28\uC2DC`,$=await le.insertCurriculumSection({courseId:C,sectionName:E});if($.rst_code!=="0000")throw new Error($.rst_message);const M=Number($.rst_data);if(M)for(const S of k.videos){const A=S.lessonId?Number(S.lessonId):0,y=S.url.trim();if(!A&&!y)continue;const Q=await le.addCurriculumLesson({courseId:C,sectionId:M,lessonId:A>0?A:void 0,url:A>0?void 0:y,title:S.title.trim()||void 0});if(Q.rst_code!=="0000")throw new Error(Q.rst_message)}}alert("\uACFC\uBAA9\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uB2F4\uB2F9\uACFC\uBAA9 \uBA54\uB274\uC5D0\uC11C \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4)"),g()}catch(b){R(b instanceof Error?b.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uC0C8 \uACFC\uBAA9 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uB2E8\uACC4\uBCC4\uB85C \uAD50\uC721\uACFC\uBAA9\uC744 \uAC1C\uC124\uD558\uACE0 \uC124\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),D&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:D}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:H.map((N,b)=>{const K=N.icon,w=N.id===c,C=b<P;return e.jsxs(Ue.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${w||C?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${w||C?"text-blue-600":"text-gray-500"}`,children:N.label})]}),b<H.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${C?"bg-blue-600":"bg-gray-200"}`})]},N.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[c==="basic"&&e.jsx(bx,{formData:B,updateFormData:h,courseCategories:W,categoryLoading:_,categoryError:j}),c==="learners"&&e.jsx(Bx,{formData:B,updateFormData:h}),c==="curriculum"&&e.jsx(vx,{formData:B,updateFormData:h,onTouched:()=>m(!1)}),c==="confirm"&&e.jsx(jx,{formData:B,courseCategories:W}),e.jsxs("div",{className:"flex items-center justify-between pt-8 mt-8 border-t border-gray-200",children:[e.jsx("button",{onClick:Y,disabled:P===0,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),P<H.length-1?e.jsx("button",{onClick:z,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uB2E4\uC74C"}):e.jsx("button",{onClick:F,disabled:v,className:`px-6 py-2 bg-green-600 text-white rounded-lg transition-colors ${v?"opacity-60 cursor-not-allowed":"hover:bg-green-700"}`,children:v?"\uC800\uC7A5 \uC911...":"\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function bx({formData:r,updateFormData:n,courseCategories:c,categoryLoading:d,categoryError:p}){const[m,v]=o.useState(!1),[I,D]=o.useState(!1),[R,_]=o.useState(null),L=Ue.useRef(null),j=B=>{n({selectedCourse:B}),v(!1)},T=()=>{var B;(B=L.current)==null||B.click()},W=()=>{n({courseFileName:"",courseFileUrl:""})},G=async B=>{var H,P;const q=(H=B.target.files)==null?void 0:H[0];if(B.target.value="",!!q){if(q.size>10*1024*1024){_("\uC774\uBBF8\uC9C0\uB294 10MB \uC774\uD558\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}D(!0),_(null);try{const z=await le.uploadCourseImage({file:q});if(z.rst_code!=="0000")throw new Error(z.rst_message);const Y=Array.isArray(z.rst_data)?(P=z.rst_data)==null?void 0:P[0]:z.rst_data;if(!(Y!=null&&Y.file_name))throw new Error("\uC5C5\uB85C\uB4DC \uACB0\uACFC\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");n({courseFileName:String(Y.file_name),courseFileUrl:String(Y.file_url||"")})}catch(z){_(z instanceof Error?z.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4 \uC785\uB825"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815"}),e.jsxs("button",{onClick:()=>v(!0),className:"w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 hover:bg-gray-200 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:r.selectedCourse?r.selectedCourse.name:"\uACFC\uC815 \uC120\uD0DD"}),e.jsx(Mr,{className:"w-4 h-4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:String(r.categoryId),disabled:d,onChange:B=>n({categoryId:Number(B.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"0",children:d?"\uCE74\uD14C\uACE0\uB9AC \uBD88\uB7EC\uC624\uB294 \uC911...":"[\uBBF8\uC9C0\uC815]"}),c.map(B=>e.jsx("option",{value:String(B.id),children:B.label||B.name_conv||B.category_nm},B.id))]}),p&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:p})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uBAA9\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.subjectName,onChange:B=>n({subjectName:B.target.value}),placeholder:"\uC608: AI \uAE30\uCD08 \uD504\uB85C\uADF8\uB798\uBC0D",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uBA54\uC778 \uC774\uBBF8\uC9C0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:T,disabled:I,className:`flex-1 px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 transition-colors flex items-center justify-between ${I?"opacity-60 cursor-not-allowed":"hover:bg-gray-200"}`,children:[e.jsx("span",{children:I?"\uC5C5\uB85C\uB4DC \uC911...":r.courseFileName?"\uC774\uBBF8\uC9C0 \uBCC0\uACBD":"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx(Mr,{className:"w-4 h-4"})]}),r.courseFileName&&e.jsx("button",{type:"button",onClick:W,className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uC0AD\uC81C"})]}),e.jsx("input",{ref:L,type:"file",accept:"image/*",className:"hidden",onChange:G}),R&&e.jsx("div",{className:"text-sm text-red-600",children:R}),r.courseFileUrl&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:r.courseFileUrl,alt:"\uBA54\uC778 \uC774\uBBF8\uC9C0",className:"w-full h-32 object-cover"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4/\uD559\uAE30"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r.year,onChange:B=>n({year:B.target.value}),placeholder:"2024",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:r.semester,onChange:B=>n({semester:B.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"1\uD559\uAE30"}),e.jsx("option",{children:"2\uD559\uAE30"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uC218"}),e.jsx("input",{type:"number",value:r.hours,onChange:B=>n({hours:B.target.value}),onBlur:()=>{const B=String(In(r.hours));String(r.hours||"").trim()!==B&&n({hours:B})},placeholder:"48",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uC5C5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",value:r.startDate,onChange:B=>n({startDate:B.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:r.endDate,onChange:B=>n({endDate:B.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:r.description,onChange:B=>n({description:B.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC138\uBD80\uB0B4\uC6A9"}),e.jsx("textarea",{value:r.objectives,onChange:B=>n({objectives:B.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C \uB0B4\uC6A9",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx(id,{isOpen:m,onClose:()=>v(!1),onSelect:j,selectedCourse:r.selectedCourse})]})}function Bx({formData:r,updateFormData:n}){const[c,d]=o.useState(""),[p,m]=o.useState(""),[v,I]=o.useState("\uC804\uCCB4"),[D,R]=o.useState("\uC804\uCCB4"),[_,L]=o.useState([]),[j,T]=o.useState(1),[W,G]=o.useState(0),B=30,[q,H]=o.useState(!1),[P,z]=o.useState(null);Ue.useEffect(()=>{const C=setTimeout(()=>m(c),250);return()=>clearTimeout(C)},[c]),Ue.useEffect(()=>{let C=!1;return(async()=>{H(!0),z(null);try{const k=D!=="\uC804\uCCB4"?D:v!=="\uC804\uCCB4"?v:void 0,E=await le.getLearners({keyword:p,deptKeyword:k,page:j,limit:B});if(E.rst_code!=="0000")throw new Error(E.rst_message);const $=E.rst_data??[],M=$.map(S=>{const A=String(S.dept_path||""),y=A.split(" > ").map(ue=>ue.trim()).filter(Boolean),Q=y[0]||String(S.dept_nm||"-")||"-",Z=(y.length>0?y[y.length-1]:String(S.dept_nm||"-"))||"-";return{id:String(S.id),name:String(S.name||S.user_nm||"-"),campus:Q,major:Z,studentId:String(S.student_id||""),email:String(S.email||""),deptPath:A}});C||(L(M),G(Number(E.rst_total??E.rst_count??$.length??0)))}catch(k){C||z(k instanceof Error?k.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{C||H(!1)}})(),()=>{C=!0}},[p,v,D,j]);const Y=["\uC804\uCCB4",...Array.from(new Set(_.map(C=>C.campus).filter(Boolean)))],h=["\uC804\uCCB4",...Array.from(new Set(_.filter(C=>v==="\uC804\uCCB4"||C.campus===v).map(C=>C.major).filter(Boolean)))],g=C=>{const f=r.selectedLearners.some(k=>k.id===C.id);n(f?{selectedLearners:r.selectedLearners.filter(k=>k.id!==C.id)}:{selectedLearners:[...r.selectedLearners,C]})},F=()=>{n({selectedLearners:[..._]})},N=()=>{n({selectedLearners:[]})},b=Math.max(1,Math.ceil((W||0)/B)),K=j>1,w=j<b;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uD559\uC2B5\uC790 \uC120\uD0DD"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC774\uB984 \uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:C=>{d(C.target.value),T(1)},placeholder:"\uD559\uC2B5\uC790 \uC774\uB984 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCEA0\uD37C\uC2A4"}),e.jsx("select",{value:v,onChange:C=>{I(C.target.value),R("\uC804\uCCB4"),T(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Y.map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5"}),e.jsx("select",{value:D,onChange:C=>{R(C.target.value),T(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:h.map(C=>e.jsx("option",{value:C,children:C},C))})]})]}),P&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:P}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:F,disabled:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC804\uCCB4 \uC120\uD0DD"}),e.jsx("button",{onClick:N,disabled:q,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD604\uC7AC \uBAA9\uB85D \uC804\uCCB4 \uD574\uC81C"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:q?"\uBD88\uB7EC\uC624\uB294 \uC911...":`\uAC80\uC0C9 \uACB0\uACFC: ${W}\uBA85 / \uC120\uD0DD\uB41C: ${r.selectedLearners.length}\uBA85`})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:_.map(C=>{const f=r.selectedLearners.some(k=>k.id===C.id);return e.jsxs("div",{onClick:()=>g(C),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${f?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-900",children:C.name}),f&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(ls,{className:"w-3 h-3 text-white"})})]}),e.jsx("div",{className:"text-sm text-gray-600",children:C.campus}),e.jsx("div",{className:"text-sm text-gray-600",children:C.major})]},C.id)})}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{type:"button",disabled:q||!K,onClick:()=>T(C=>Math.max(1,C-1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uC774\uC804"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j," / ",b]}),e.jsx("button",{type:"button",disabled:q||!w,onClick:()=>T(C=>Math.min(b,C+1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uB2E4\uC74C"})]})]})}function vx({formData:r,updateFormData:n,onTouched:c}){const[d,p]=o.useState(!1),[m,v]=o.useState(null),I=m?r.sessions.find(B=>B.id===m)??null:null,D=()=>{c==null||c();const B={id:String(r.sessions.length+1),title:"",description:"",videos:[]};n({sessions:[...r.sessions,B]})},R=(B,q)=>{c==null||c();const H=r.sessions.map(P=>P.id===B?{...P,...q}:P);n({sessions:H})},_=B=>{c==null||c(),r.sessions.length>1&&n({sessions:r.sessions.filter(q=>q.id!==B)})},L=B=>{c==null||c();const q=r.sessions.find(H=>H.id===B);if(q){const H={id:`${B}-video-${Date.now()}-${Math.random()}`,title:"",url:""};R(B,{videos:[...q.videos,H]})}},j=(B,q,H)=>{c==null||c();const P=r.sessions.find(z=>z.id===B);if(P){const z=P.videos.map(Y=>Y.id===q?{...Y,...H}:Y);R(B,{videos:z})}},T=(B,q)=>{c==null||c();const H=r.sessions.find(P=>P.id===B);H&&R(B,{videos:H.videos.filter(P=>P.id!==q)})},W=B=>{if(c==null||c(),m){const q=r.sessions.find(H=>H.id===m);if(q){const H={id:`${m}-video-${Date.now()}-${Math.random()}`,title:B.title,url:"",lessonId:String(B.lessonId??B.id)};R(m,{videos:[...q.videos,H]})}}p(!1)},G=B=>{v(B),p(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131"}),e.jsx("div",{className:"space-y-6",children:r.sessions.map((B,q)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 relative",children:[r.sessions.length>1&&e.jsx("button",{onClick:()=>_(B.id),className:"absolute top-4 right-4 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsxs("h4",{className:"text-gray-900 mb-4",children:[q+1,"\uCC28\uC2DC"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:B.title,onChange:H=>R(B.id,{title:H.target.value}),placeholder:"\uC608: Python \uAE30\uCD08 \uBB38\uBC95",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC124\uBA85"}),e.jsx("textarea",{value:B.description,onChange:H=>R(B.id,{description:H.target.value}),placeholder:"\uC774 \uCC28\uC2DC\uC5D0\uC11C \uD559\uC2B5\uD560 \uB0B4\uC6A9\uC744 \uC124\uBA85\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"block text-sm text-gray-700",children:["\uAC15\uC758 \uC601\uC0C1 (",B.videos.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>G(B.id),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uCF58\uD150\uCE20 \uAC80\uC0C9"}),e.jsxs("button",{type:"button",onClick:()=>L(B.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-4 h-4"}),"\uC601\uC0C1 \uCD94\uAC00"]})]})]}),B.videos.length>0?e.jsx("div",{className:"space-y-3",children:B.videos.map((H,P)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-lg text-sm shrink-0",children:P+1}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uC601\uC0C1 \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:H.title,onChange:z=>j(B.id,H.id,{title:z.target.value}),placeholder:"\uC601\uC0C1 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uB808\uC2A8 ID \uB610\uB294 URL"}),e.jsx("input",{type:"text",value:H.lessonId?`\uB808\uC2A8 ID: ${H.lessonId}`:H.url,onChange:z=>{H.lessonId||j(B.id,H.id,{url:z.target.value})},disabled:!!H.lessonId,placeholder:H.lessonId?"":"\uC678\uBD80 URL\uC744 \uC785\uB825\uD558\uC138\uC694",className:`w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${H.lessonId?"bg-gray-100 text-gray-500":""}`})]})]}),e.jsx("button",{type:"button",onClick:()=>T(B.id,H.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors shrink-0",children:e.jsx(dt,{className:"w-4 h-4"})})]})},H.id))}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"\uC601\uC0C1\uC744 \uCD94\uAC00\uD574\uC8FC\uC138\uC694"})})]})]})]},B.id))}),e.jsxs("button",{onClick:D,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(yt,{className:"w-5 h-5"}),"\uCC28\uC2DC \uCD94\uAC00"]}),e.jsx(On,{isOpen:d,onClose:()=>p(!1),onSelect:W,recommendContext:{courseName:r.subjectName,courseIntro:r.description,courseDetail:r.objectives,lessonTitle:(I==null?void 0:I.title)??"",lessonDescription:(I==null?void 0:I.description)??""},excludeLessonIds:r.sessions.flatMap(B=>B.videos).map(B=>B.lessonId?Number(String(B.lessonId).replace(/[^0-9]/g,"")):0).filter(B=>Number.isFinite(B)&&B>0)})]})}function jx({formData:r,courseCategories:n}){const c=n.find(p=>Number(p.id)===Number(r.categoryId)),d=(c==null?void 0:c.label)||(c==null?void 0:c.name_conv)||(c==null?void 0:c.category_nm)||"-";return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uC885 \uD655\uC778"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uACFC\uBAA9\uBA85:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.subjectName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC18C\uC18D \uACFC\uC815:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.selectedCourse?r.selectedCourse.name:"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:d})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uB144\uB3C4/\uD559\uAE30:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.year," ",r.semester]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC2DC\uC218:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.hours||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uD559\uC810:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:r.credits||"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uD559\uC2B5\uC790"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uC120\uD0DD\uB41C \uD559\uC2B5\uC790:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.selectedLearners.length,"\uBA85"]})]}),r.selectedLearners.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.selectedLearners.map(p=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:p.name},p.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uCC28\uC2DC \uAD6C\uC131"}),e.jsxs("div",{className:"text-sm mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"\uCD1D \uCC28\uC2DC:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[r.sessions.length,"\uCC28\uC2DC"]})]}),e.jsx("div",{className:"space-y-3",children:r.sessions.map((p,m)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-gray-900 mb-1",children:[m+1,"\uCC28\uC2DC: ",p.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]}),p.description&&e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:p.description}),p.videos.length>0&&e.jsxs("div",{className:"mt-3 pl-4 border-l-2 border-blue-300",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["\uAC15\uC758 \uC601\uC0C1 ",p.videos.length,"\uAC1C"]}),e.jsx("div",{className:"space-y-1",children:p.videos.map((v,I)=>e.jsxs("div",{className:"text-sm text-gray-600",children:[I+1,". ",v.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]},v.id))})]})]},p.id))})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-900",children:'\uC704 \uB0B4\uC6A9\uC744 \uD655\uC778\uD558\uACE0 "\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC" \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uACFC\uBAA9 \uAC1C\uC124\uC744 \uC644\uB8CC\uD558\uC138\uC694.'})})]})}const Dx={"degree-major":"\uD559\uC704\uC804\uACF5","degree-major-advanced":"\uD559\uC704\uC804\uACF5\uC2EC\uD654","professional-tech":"\uC804\uBB38\uAE30\uC220","high-tech":"\uD558\uC774\uD14C\uD06C","master-craftsman":"\uAE30\uB2A5\uC7A5","high-school-consignment":"\uACE0\uAD50\uC704\uD0C1","new-seniors":"\uC2E0\uC911\uB144"},Nx={beginner:"\uCD08\uAE09",intermediate:"\uC911\uAE09",advanced:"\uACE0\uAE09"};function Ax(r){return{version:1,basic:{courseCategory:{value:r.courseCategory,label:r.courseCategory==="regular"?"\uC815\uADDC\uACFC\uC815":r.courseCategory==="non-regular"?"\uBE44\uC815\uADDC\uACFC\uC815":r.courseCategory},classification:{value:r.classification,label:Dx[r.classification]??r.classification},courseName:r.courseName,department:r.department,major:r.major,departmentName:r.departmentName,courseDescription:r.courseDescription},training:{trainingPeriodText:r.trainingPeriodText,startDateYmd:r.startDateYmd,endDateYmd:r.endDateYmd,trainingLevel:{value:r.trainingLevel,label:Nx[r.trainingLevel]??r.trainingLevel},trainingTarget:r.trainingTarget,trainingGoal:r.trainingGoal},curriculum:r.curriculumItems,teachingPlans:r.teachingPlans,evaluations:r.evaluations}}function qc(r){const n=r.replace(/[^0-9]/g,"");return n.length===8?n:""}function wx(r){const n=r.trim();if(!n)return null;const c=n.match(/(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})\s*(?:-|~||)\s*(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})/);if(!c)return null;const d=qc(c[1]),p=qc(c[2]);return!d||!p?null:{start:d,end:p}}function kx({onCreated:r,initialStep:n,onStepChange:c}={}){const[d,p]=o.useState(n??"basic");o.useEffect(()=>{const Ce=n??"basic";p(J=>J===Ce?J:Ce)},[n]),o.useEffect(()=>{c==null||c(d)},[d,c]);const[m,v]=o.useState(""),[I,D]=o.useState(""),[R,_]=o.useState(""),[L,j]=o.useState(""),[T,W]=o.useState(""),[G,B]=o.useState(""),[q,H]=o.useState(""),[P,z]=o.useState(""),[Y,h]=o.useState(""),[g,F]=o.useState(""),[N,b]=o.useState(""),[K,w]=o.useState(!1),[C,f]=o.useState(null),[k,E]=o.useState([]),[$,M]=o.useState([]),[S,A]=o.useState([]),[y,Q]=o.useState([]),[Z,ue]=o.useState([]),[ye,ke]=o.useState(""),[se,be]=o.useState(!1),Ne=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:qs},{id:"subjects",label:"\uC18C\uC18D \uACFC\uBAA9",icon:vt}],ce=Ne.findIndex(Ce=>Ce.id===d);o.useEffect(()=>{d==="subjects"&&pe()},[d]);const pe=async()=>{be(!0);try{const Ce=await le.getPrograms();if(Ce.rst_code==="0000"&&Ce.rst_data){const J=Ce.rst_data.map(oe=>{var _e,Ge,Re,et,Ae,ve,Te,Ke,Ve,Pe,ut,Rt,mt,os,_s,Zt,fs;let ae=null;try{oe.plan_json&&(ae=JSON.parse(oe.plan_json))}catch{}let de="-";const ne=((_e=ae==null?void 0:ae.training)==null?void 0:_e.startDateYmd)||oe.start_date||"";ne&&ne.length>=4&&(de=ne.substring(0,4));const je=((Ge=ae==null?void 0:ae.training)==null?void 0:Ge.trainingPeriodText)||oe.training_period||"-";return{id:String(oe.id),name:oe.course_nm||((Re=ae==null?void 0:ae.basic)==null?void 0:Re.courseName)||`\uACFC\uC815 ${oe.id}`,year:de,semester:"",credits:"",classification:((Ae=(et=ae==null?void 0:ae.basic)==null?void 0:et.classification)==null?void 0:Ae.label)||((Te=(ve=ae==null?void 0:ae.basic)==null?void 0:ve.classification)==null?void 0:Te.value)||"\uBBF8\uBD84\uB958",department:((Ke=ae==null?void 0:ae.basic)==null?void 0:Ke.department)||"",major:((Ve=ae==null?void 0:ae.basic)==null?void 0:Ve.major)||"",departmentName:((Pe=ae==null?void 0:ae.basic)==null?void 0:Pe.departmentName)||"",trainingPeriod:je,trainingLevel:((Rt=(ut=ae==null?void 0:ae.training)==null?void 0:ut.trainingLevel)==null?void 0:Rt.label)||((os=(mt=ae==null?void 0:ae.training)==null?void 0:mt.trainingLevel)==null?void 0:os.value)||"-",trainingTarget:((_s=ae==null?void 0:ae.training)==null?void 0:_s.trainingTarget)||"",trainingGoal:((Zt=ae==null?void 0:ae.training)==null?void 0:Zt.trainingGoal)||"",instructor:((fs=ae==null?void 0:ae.basic)==null?void 0:fs.instructor)||"",students:0,subjects:Number(oe.course_cnt??0)}});ue(J)}}catch{}finally{be(!1)}},Ee=()=>(f(null),m?I?R.trim()?!0:(f("\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uBD84\uB958\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1)),fe=()=>{if(d==="basic"){if(!Ee())return;p("subjects")}},De=()=>{d==="subjects"&&p("basic")},He=Ce=>{y.find(J=>J.id===Ce.id)||Q([...y,Ce])},ie=Ce=>{Q(y.filter(J=>J.id!==Ce))},Me=Z.filter(Ce=>Ce.name.toLowerCase().includes(ye.toLowerCase())&&!y.find(J=>J.id===Ce.id)),U=async()=>{f(null);const Ce=wx(q);w(!0);try{const J=JSON.stringify(Ax({courseCategory:m,classification:I,courseName:R.trim(),department:L.trim(),major:T.trim(),departmentName:G.trim(),courseDescription:N.trim(),trainingPeriodText:q.trim(),startDateYmd:(Ce==null?void 0:Ce.start)||"",endDateYmd:(Ce==null?void 0:Ce.end)||"",trainingLevel:P,trainingTarget:Y.trim(),trainingGoal:g.trim(),curriculumItems:k,teachingPlans:$,evaluations:S})),oe=await le.createProgram({courseName:R.trim(),startDate:(Ce==null?void 0:Ce.start)||"",endDate:(Ce==null?void 0:Ce.end)||"",planJson:J});if(oe.rst_code!=="0000")throw new Error(oe.rst_message);const ae=Number(oe.rst_data??0);if(ae>0&&y.length>0)for(const de of y){const ne=Number(de.id);if(!ne)continue;const je=await le.setCourseProgram({courseId:ne,programId:ae});if(je.rst_code!=="0000")throw new Error(je.rst_message)}alert("\uACFC\uC815\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),r==null||r()}catch(J){f(J instanceof Error?J.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{w(!1)}};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uC0C8\uB85C\uC6B4 \uAD50\uC721 \uACFC\uC815\uC744 \uAC1C\uC124\uD569\uB2C8\uB2E4."})]}),C&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:C}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:Ne.map((Ce,J)=>{const oe=Ce.icon,ae=Ce.id===d,de=J<ce;return e.jsxs(Ue.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${ae||de?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(oe,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${ae?"text-blue-600 font-medium":de?"text-blue-600":"text-gray-500"}`,children:Ce.label})]}),J<Ne.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${de?"bg-blue-600":"bg-gray-200"}`})]},Ce.id)})})}),d==="basic"&&e.jsx(_x,{courseCategory:m,setCourseCategory:v,classification:I,setClassification:D,courseName:R,setCourseName:_,departmentName:G,setDepartmentName:B,major:T,setMajor:W,courseDescription:N,setCourseDescription:b}),d==="subjects"&&e.jsx(Ex,{selectedSubjects:y,availableSubjects:Me,searchTerm:ye,setSearchTerm:ke,addSubject:He,removeSubject:ie,loading:se,courseName:R}),e.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6",children:[e.jsx("button",{onClick:De,disabled:ce===0,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),d==="basic"?e.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"\uB2E4\uC74C"}),e.jsx(Jt,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:U,disabled:K,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(is,{className:"w-5 h-5"}),e.jsx("span",{children:K?"\uC800\uC7A5 \uC911...":"\uACFC\uC815 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function _x({courseCategory:r,setCourseCategory:n,classification:c,setClassification:d,courseName:p,setCourseName:m,departmentName:v,setDepartmentName:I,major:D,setMajor:R,courseDescription:_,setCourseDescription:L}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uC720\uD615 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r,onChange:j=>{const T=j.target.value;n(T),T==="non-regular"&&c&&!["professional-tech","master-craftsman","new-seniors","high-tech"].includes(c)&&d("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),e.jsx("option",{value:"regular",disabled:!0,className:"text-gray-400",children:"\uC815\uADDC\uACFC\uC815"}),e.jsx("option",{value:"non-regular",children:"\uBE44\uC815\uADDC\uACFC\uC815"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uBD84\uB958 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c,onChange:j=>d(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!r,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),r==="regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"degree-major",children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{value:"degree-major-advanced",children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"high-school-consignment",children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"})]}),r==="non-regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:v,onChange:j=>I(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:D,onChange:j=>R(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uBA85"}),e.jsx("input",{type:"text",value:p,onChange:j=>m(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uACFC\uC815\uC124\uBA85"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC18C\uAC1C"}),e.jsx("textarea",{value:_,onChange:j=>L(j.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uACFC\uC815\uC758 \uBAA9\uC801, \uB300\uC0C1, \uD2B9\uC9D5 \uB4F1\uC744 \uC790\uC720\uB86D\uAC8C \uC791\uC131\uD574 \uC8FC\uC138\uC694."})]})]})]})}function Ex({selectedSubjects:r,availableSubjects:n,searchTerm:c,setSearchTerm:d,addSubject:p,removeSubject:m,loading:v,courseName:I}){const[D,R]=Ue.useState("plism"),[_,L]=Ue.useState(null),[j,T]=Ue.useState(!1),[W,G]=Ue.useState([]),[B,q]=Ue.useState(!1),[H,P]=Ue.useState(null),[z,Y]=Ue.useState(""),[h,g]=Ue.useState(!1),[F,N]=Ue.useState(null),[b,K]=Ue.useState(""),[w,C]=Ue.useState(""),[f,k]=Ue.useState(!1),[E,$]=Ue.useState([]),[M,S]=Ue.useState(!1),[A,y]=Ue.useState(null),[Q,Z]=Ue.useState(null),[ue,ye]=Ue.useState([]),[ke,se]=Ue.useState([]),[be,Ne]=Ue.useState(!1),[ce,pe]=Ue.useState(!1),[Ee,fe]=Ue.useState(null),[De,He]=Ue.useState(!1),[ie,Me]=Ue.useState(null),U=async de=>{N(de),K(`${de.name} (\uBCF5\uC0AC\uBCF8)`),C(""),y(null),g(!0)},Ce=()=>{Z(null),ye([]),se([]),fe(null)},J=()=>{g(!1),N(null),K(""),C(""),y(null)};Ue.useEffect(()=>{if(!h)return;let de=!1;return(async()=>{S(!0),y(null);try{const je=await le.getTutors();if(je.rst_code!=="0000")throw new Error(je.rst_message);const Ge=(je.rst_data??[]).map(Re=>({id:Number(Re.user_id),name:String(Re.tutor_nm||"")}));de||$(Ge)}catch(je){de||y(je instanceof Error?je.message:"\uAD50\uC218/\uAC15\uC0AC \uBAA9\uB85D \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{de||S(!1)}})(),()=>{de=!0}},[h]);const oe=async()=>{var de;if(F){if(!b.trim()){alert("\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!w){alert("\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}k(!0);try{const ne=await le.copyCourse({sourceCourseId:Number(F.id),courseName:b.trim(),tutorId:Number(w)});if(ne.rst_code!=="0000")throw new Error(ne.rst_message);const je={...F,id:String(ne.rst_data),name:b.trim(),instructor:((de=E.find(_e=>_e.id===Number(w)))==null?void 0:de.name)??""};J(),Z(je)}catch(ne){const je=ne instanceof Error?ne.message:"\uACFC\uBAA9 \uBCF5\uC0AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";y(je),alert(je)}finally{k(!1)}}};Ue.useEffect(()=>{if(D!=="plism")return;let de=!1;const je=setTimeout(async()=>{q(!0),P(null);try{const _e=await le.getMyCoursesCombined({tab:"prism",keyword:z||void 0});if(_e.rst_code!=="0000")throw new Error(_e.rst_message);const Re=(_e.rst_data??[]).map(et=>({id:String(et.courseId||et.id),name:String(et.subjectName||et.course_nm||""),year:String(et.period||et.year||"-").split("-")[0],semester:"",credits:"",classification:String(et.courseType||et.category_nm||"\uBBF8\uBD84\uB958"),department:String(et.programName||et.dept_nm||""),major:"",departmentName:String(et.programName||""),trainingPeriod:String(et.period||"-"),trainingLevel:"-",trainingTarget:"",trainingGoal:"",instructor:"",students:Number(et.student_cnt||0),subjects:0}));de||G(Re)}catch(_e){de||P(_e instanceof Error?_e.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{de||q(!1)}},300);return()=>{de=!0,clearTimeout(je)}},[D,z]);const ae=W.filter(de=>!r.find(ne=>ne.id===de.id));return e.jsxs(e.Fragment,{children:[h&&F&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uACFC\uBAA9 \uBCF5\uC0AC"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC6D0\uBCF8: ",F.name]})]}),e.jsx("button",{onClick:J,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C8 \uACFC\uBAA9\uBA85"}),e.jsx("input",{type:"text",value:b,onChange:de=>K(de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC"}),e.jsxs("select",{value:w,onChange:de=>C(de.target.value?Number(de.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:M,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD574 \uC8FC\uC138\uC694"}),E.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))]}),M&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"\uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),A&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:A})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:f,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:oe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:f,children:"\uBCF5\uC0AC \uD6C4 \uCC28\uC2DC \uD3B8\uC9D1"})]})]})}),Q&&e.jsx(cd,{courseId:Number(Q.id),courseName:Q.name,onClose:Ce,onSaveComplete:()=>{p(Q),Ce()}}),j&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>T(!1),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uC2E0\uADDC \uAC1C\uC124"})]})}),e.jsx("div",{className:"p-6",children:e.jsx(hd,{})})]}),_&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:[e.jsxs("button",{onClick:()=>L(null),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsxs("button",{onClick:()=>{p(_),L(null)},className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC774 \uACFC\uC815 \uCD94\uAC00"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(pd,{course:{id:_.id,name:_.name,classification:_.classification,department:_.department,major:_.major,departmentName:_.departmentName,trainingPeriod:_.trainingPeriod,trainingLevel:_.trainingLevel,trainingTarget:_.trainingTarget,trainingGoal:_.trainingGoal,instructor:_.instructor,year:_.year,students:_.students,subjects:_.subjects},onBack:()=>L(null)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800",children:[e.jsxs("strong",{children:['"',I,'"']})," \uACFC\uC815\uC5D0 \uD3EC\uD568\uB420 \uACFC\uBAA9\uC744 \uC120\uD0DD\uD558\uC138\uC694."]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["\uC120\uD0DD\uB41C \uC18C\uC18D \uACFC\uBAA9 (",r.length,"\uAC1C)"]}),r.length>0?e.jsx("div",{className:"space-y-2",children:r.map(de=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:de.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[de.year," ",de.semester," ",de.credits&&`\u2022 ${de.credits}\uD559\uC810`]})]}),e.jsx("button",{onClick:()=>m(de.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(jt,{className:"w-5 h-5"})})]},de.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(vt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uC120\uD0DD\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm",children:"\uC544\uB798\uC5D0\uC11C \uACFC\uBAA9\uC744 \uAC80\uC0C9\uD558\uC5EC \uCD94\uAC00\uD558\uC138\uC694."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAC80\uC0C9"})}),e.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:e.jsx("button",{type:"button",onClick:()=>R("plism"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${D==="plism"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"PLISM"})}),D==="plism"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:z,onChange:de=>Y(de.target.value),placeholder:"\uACFC\uBAA9\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H?e.jsx("div",{className:"text-center py-8 text-red-500",children:e.jsx("p",{children:H})}):B?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):ae.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(vt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:'\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB97C \uC2DC\uB3C4\uD558\uAC70\uB098 "\uC2E0\uADDC \uAC1C\uC124"\uC744 \uD074\uB9AD\uD558\uC138\uC694.'})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:ae.map(de=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:de.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:de.year})]}),e.jsx("p",{className:"font-medium text-gray-900",children:de.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[de.departmentName||de.department||"-",de.students>0&&` \u2022 \uC218\uAC15\uC0DD ${de.students}\uBA85`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>p(de),className:"flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"\uACFC\uBAA9 \uBC14\uB85C \uCD94\uAC00",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{type:"button",onClick:()=>U(de),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"\uCC28\uC2DC \uD3B8\uC9D1 \uD6C4 \uCD94\uAC00",children:e.jsx("span",{children:"\uCC28\uC2DC \uD3B8\uC9D1"})})]})]},de.id))})]})]})]})]})}const Sx=String(new Date().getFullYear()),Ht={tab:"haksa",year:Sx,keyword:"",page:1,pageSize:20,courseType:"\uC804\uCCB4",status:"\uC804\uCCB4",haksaCategory:"\uC804\uCCB4",haksaGrad:"\uC804\uCCB4",haksaCurriculum:"\uC804\uCCB4",sortOrder:"desc"};function Gc(r){const n={},c=r.source||r.listTab||r.tab;(c==="haksa"||c==="prism")&&(n.tab=c),r.year&&(n.year=r.year),r.keyword!==void 0&&(n.keyword=r.keyword);const d=Number(r.page);!Number.isNaN(d)&&d>0&&(n.page=Math.floor(d));const p=Number(r.pageSize);return!Number.isNaN(p)&&p>0&&(n.pageSize=Math.floor(p)),r.courseType&&(n.courseType=r.courseType),r.status&&(n.status=r.status),r.haksaCategory&&(n.haksaCategory=r.haksaCategory),r.haksaGrad&&(n.haksaGrad=r.haksaGrad),r.haksaCurriculum&&(n.haksaCurriculum=r.haksaCurriculum),(r.sortOrder==="asc"||r.sortOrder==="desc")&&(n.sortOrder=r.sortOrder),n}function Jc(r){const n={};return r.tab!=="haksa"&&(n.source=r.tab),r.year&&(n.year=r.year),r.keyword&&(n.keyword=r.keyword),r.page>1&&(n.page=String(r.page)),r.pageSize!==20&&(n.pageSize=String(r.pageSize)),r.tab==="prism"&&(r.courseType!=="\uC804\uCCB4"&&(n.courseType=r.courseType),r.status!=="\uC804\uCCB4"&&(n.status=r.status)),r.tab==="haksa"&&(r.haksaCategory!=="\uC804\uCCB4"&&(n.haksaCategory=r.haksaCategory),r.haksaGrad!=="\uC804\uCCB4"&&(n.haksaGrad=r.haksaGrad),r.haksaCurriculum!=="\uC804\uCCB4"&&(n.haksaCurriculum=r.haksaCurriculum),r.sortOrder!=="desc"&&(n.sortOrder=r.sortOrder)),n}function Fx(r,n){switch(n.type){case"SET_TAB":return{...r,tab:n.payload,page:1};case"SET_YEAR":return{...r,year:n.payload,page:1};case"SET_KEYWORD":return{...r,keyword:n.payload,page:1};case"SET_PAGE":return{...r,page:n.payload};case"SET_PAGE_SIZE":return{...r,pageSize:n.payload,page:1};case"SET_COURSE_TYPE":return{...r,courseType:n.payload,page:1};case"SET_STATUS":return{...r,status:n.payload,page:1};case"SET_HAKSA_CATEGORY":return{...r,haksaCategory:n.payload,page:1};case"SET_HAKSA_GRAD":return{...r,haksaGrad:n.payload,page:1};case"SET_HAKSA_CURRICULUM":return{...r,haksaCurriculum:n.payload,page:1};case"SET_SORT_ORDER":return{...r,sortOrder:n.payload,page:1};case"SYNC_FROM_URL":return{...r,...n.payload};case"RESET_FILTERS":return{...Ht,year:r.year};default:return r}}const fd=o.createContext(null);function Tx({children:r,initialParams:n={},onParamsChange:c}){const d=o.useMemo(()=>{const g=Gc(n);return{...Ht,...g}},[]),[p,m]=o.useReducer(Fx,d),v=o.useRef(c);v.current=c;const I=o.useCallback(()=>{var F;const g=Jc(p);(F=v.current)==null||F.call(v,g)},[p]),D=o.useCallback(()=>Jc(p),[p]),R=o.useCallback(g=>m({type:"SET_TAB",payload:g}),[]),_=o.useCallback(g=>m({type:"SET_YEAR",payload:g}),[]),L=o.useCallback(g=>m({type:"SET_KEYWORD",payload:g}),[]),j=o.useCallback(g=>m({type:"SET_PAGE",payload:g}),[]),T=o.useCallback(g=>m({type:"SET_PAGE_SIZE",payload:g}),[]),W=o.useCallback(g=>m({type:"SET_COURSE_TYPE",payload:g}),[]),G=o.useCallback(g=>m({type:"SET_STATUS",payload:g}),[]),B=o.useCallback(g=>m({type:"SET_HAKSA_CATEGORY",payload:g}),[]),q=o.useCallback(g=>m({type:"SET_HAKSA_GRAD",payload:g}),[]),H=o.useCallback(g=>m({type:"SET_HAKSA_CURRICULUM",payload:g}),[]),P=o.useCallback(g=>m({type:"SET_SORT_ORDER",payload:g}),[]),z=o.useCallback(()=>m({type:"RESET_FILTERS"}),[]),Y=o.useCallback(g=>{const F=Gc(g),N={tab:F.tab??Ht.tab,year:F.year??Ht.year,keyword:F.keyword??Ht.keyword,page:F.page??Ht.page,pageSize:F.pageSize??Ht.pageSize,courseType:F.courseType??Ht.courseType,status:F.status??Ht.status,haksaCategory:F.haksaCategory??Ht.haksaCategory,haksaGrad:F.haksaGrad??Ht.haksaGrad,haksaCurriculum:F.haksaCurriculum??Ht.haksaCurriculum,sortOrder:F.sortOrder??Ht.sortOrder};m({type:"SYNC_FROM_URL",payload:N})},[]),h=o.useMemo(()=>({filters:p,setTab:R,setYear:_,setKeyword:L,setPage:j,setPageSize:T,setCourseType:W,setStatus:G,setHaksaCategory:B,setHaksaGrad:q,setHaksaCurriculum:H,setSortOrder:P,resetFilters:z,syncToUrl:I,syncFromUrl:Y,getUrlParams:D}),[p,R,_,L,j,T,W,G,B,q,H,P,z,I,Y,D]);return e.jsx(fd.Provider,{value:h,children:r})}function Ix(){const r=o.useContext(fd);if(!r)throw new Error("useCourseFilters\uB294 CourseFilterProvider \uC548\uC5D0\uC11C \uC0AC\uC6A9\uD574\uC57C \uD569\uB2C8\uB2E4.");return r}const Lx=["info","info-basic","info-evaluation","info-completion","curriculum","students","attendance","exam","assignment","assignment-management","assignment-feedback","materials","qna","grades","completion"],Px=new Set(Lx),Mx=["\uC804\uCCB4","\uC11C\uC6B8\uC815\uC218","\uC11C\uC6B8\uAC15\uC11C","\uC131\uB0A8","\uBD84\uB2F9\uC735\uD569","\uC81C\uC8FC","\uC778\uCC9C","\uB0A8\uC778\uCC9C","\uD654\uC131","\uAD11\uBA85\uC735\uD569","\uCD98\uCC9C","\uC6D0\uC8FC","\uAC15\uB989","\uB300\uC804","\uCCAD\uC8FC","\uC544\uC0B0","\uCDA9\uB0A8","\uCDA9\uC8FC","\uAD11\uC8FC","\uC804\uBD81","\uC804\uB0A8","\uC775\uC0B0","\uC21C\uCC9C","\uB300\uAD6C","\uAD6C\uBBF8","\uB0A8\uB300\uAD6C","\uD3EC\uD56D","\uC601\uC8FC","\uC601\uB0A8\uC735\uD569\uAE30\uC220","\uCC3D\uC6D0","\uBD80\uC0B0","\uC6B8\uC0B0","\uB3D9\uBD80\uC0B0","\uC9C4\uC8FC","\uC11D\uC720\uD654\uD559\uACF5\uC815","\uBC18\uB3C4\uCCB4\uC735\uD569","\uBC14\uC774\uC624","\uB85C\uBD07","\uD56D\uACF5","\uC2E0\uAE30\uC220\uAD50\uC721\uC6D0"],Rx=["\uC804\uCCB4","\uC804\uACF5\uD544\uC218","\uC804\uACF5\uAD50\uACFC","\uC804\uACF5\uC120\uD0DD","\uAD50\uC591\uC120\uD0DD","\uAD50\uC591\uAD50\uACFC","\uAD50\uC591\uD544\uC218"],$x=["\uC804\uCCB4","off","elearning"],Xc=(r={},n={})=>{const c=Object.keys(r),d=Object.keys(n);if(c.length!==d.length)return!1;for(const p of c)if(r[p]!==n[p])return!1;return!0},Ox=r=>{const n=String((r==null?void 0:r.haksa_course_code)??"").trim(),c=String((r==null?void 0:r.haksa_open_year)??"").trim(),d=String((r==null?void 0:r.haksa_open_term)??"").trim(),p=String((r==null?void 0:r.haksa_bunban_code)??"").trim(),m=String((r==null?void 0:r.haksa_group_code)??"").trim(),v=[n,c,d,p,m].filter(Boolean);if(v.length===5)return`H_${v.join("_")}`;const I=String((r==null?void 0:r.course_id_conv)??(r==null?void 0:r.course_cd)??(r==null?void 0:r.id)??"").trim();return`H_${n||"UNKNOWN"}_${p||"0"}_${I||"0"}`},zx=r=>{switch(r){case"\uB300\uAE30":return"bg-gray-100 text-gray-700";case"\uC2E0\uCCAD\uAE30\uAC04":return"bg-blue-100 text-blue-700";case"\uD559\uC2B5\uAE30\uAC04":return"bg-green-100 text-green-700";case"\uC885\uB8CC":return"bg-gray-200 text-gray-600";default:return"bg-gray-100 text-gray-700"}};function Ux({routeSubPath:r,routeParams:n,onRouteChange:c}){const{filters:d,setTab:p,setYear:m,setKeyword:v,setPage:I,setPageSize:D,setCourseType:R,setStatus:_,setHaksaCategory:L,setHaksaGrad:j,setHaksaCurriculum:T,setSortOrder:W,syncFromUrl:G,getUrlParams:B}=Ix(),[q,H]=o.useState(["\uC804\uCCB4",String(new Date().getFullYear())]),[P,z]=o.useState(d.keyword),[Y,h]=o.useState([]),[g,F]=o.useState(!1),[N,b]=o.useState(null),[K,w]=o.useState(0),[C,f]=o.useState(null),[k,E]=o.useState(null),[$,M]=o.useState(null),S=o.useRef({subPath:r,params:n??{}}),A=o.useRef(n);o.useEffect(()=>{if(r==="manage"){A.current=n;return}const U=A.current,Ce=n??{};if(A.current=Ce,U!==void 0&&!Xc(U,Ce)){G(Ce);const J=Ce.keyword??"";J!==P&&z(J)}},[n,r,G,P]),S.current={subPath:r,params:n??{}};const y=o.useCallback(U=>{if(!c)return;const Ce=S.current;Ce.subPath===U.subPath&&Xc(Ce.params,U.params)||c(U)},[c]),Q=o.useCallback((U,Ce)=>{const J=(U==null?void 0:U.source_type)==="haksa"||(U==null?void 0:U.source_type)==="prism"?U.source_type:Ce,oe=U.status_label??"\uB300\uAE30",ae=[(U.course_type_conv||"").trim(),(U.onoff_type_conv||"").trim()].filter(Boolean),ne=J==="haksa"?U.id?String(U.id):Ox(U):String(U.id),je=U.mapped_course_id?Number(U.mapped_course_id):void 0;return{id:ne,mappedCourseId:je&&Number.isFinite(je)?je:void 0,sourceType:J,courseId:U.course_id_conv||U.course_cd||String(U.id),courseType:ae.length>0?ae.join(" / "):"\uBBF8\uC9C0\uC815",subjectName:U.course_nm_conv||U.subject_nm_conv||U.course_nm||"-",programId:Number(U.program_id??0),programName:U.program_nm_conv||"-",period:U.period_conv||"-",students:Number(U.student_cnt??0),status:oe,haksaCategory:U.haksa_category||"",haksaDeptName:U.haksa_dept_name||"",haksaWeek:U.haksa_week||"",haksaOpenTerm:U.haksa_open_term||"",haksaCourseCode:U.haksa_course_code||"",haksaVisible:U.haksa_visible||"",haksaStartdate:U.haksa_startdate||"",haksaBunbanCode:U.haksa_bunban_code||"",haksaGrade:U.haksa_grade||"",haksaGradName:U.haksa_grad_name||"",haksaDayCd:U.haksa_day_cd||"",haksaClassroom:U.haksa_classroom||"",haksaCurriculumCode:U.haksa_curriculum_code||"",haksaCourseEname:U.haksa_course_ename||"",haksaTypeSyllabus:U.haksa_type_syllabus||"",haksaOpenYear:U.haksa_open_year||"",haksaDeptCode:U.haksa_dept_code||"",haksaCourseName:U.haksa_course_name||"",haksaGroupCode:U.haksa_group_code||"",haksaEnddate:U.haksa_enddate||"",haksaEnglish:U.haksa_english||"",haksaHour1:U.haksa_hour1||"",haksaCurriculumName:U.haksa_curriculum_name||"",haksaGradCode:U.haksa_grad_code||"",haksaIsSyllabus:U.haksa_is_syllabus||""}},[]);o.useEffect(()=>{let U=!1;const Ce=String(new Date().getFullYear());return(async()=>{try{const oe=await le.getCourseYears();if(oe.rst_code!=="0000")throw new Error(oe.rst_message);const ae=(oe.rst_data??[]).map(je=>String(je.year||"").trim()).filter(Boolean),ne=["\uC804\uCCB4",...Array.from(new Set(ae)).sort((je,_e)=>_e.localeCompare(je))];if(U)return;H(ne.length>1?ne:["\uC804\uCCB4",Ce])}catch{U||H(["\uC804\uCCB4",Ce])}})(),()=>{U=!0}},[]),o.useEffect(()=>{let U=!1;return(async()=>{F(!0),b(null);try{const J=await le.getMyCoursesCombined({tab:d.tab,year:d.year==="\uC804\uCCB4"?void 0:d.year,keyword:d.keyword||void 0,page:d.page,pageSize:d.pageSize,haksaCategory:d.tab==="haksa"&&d.haksaCategory!=="\uC804\uCCB4"?d.haksaCategory:void 0,haksaGrad:d.tab==="haksa"&&d.haksaGrad!=="\uC804\uCCB4"?d.haksaGrad:void 0,haksaCurriculum:d.tab==="haksa"&&d.haksaCurriculum!=="\uC804\uCCB4"?d.haksaCurriculum:void 0,sortOrder:d.tab==="haksa"?d.sortOrder:void 0});if(J.rst_code!=="0000")throw new Error(J.rst_message);const oe=J.rst_data??[],ae=Number(J.rst_total_count??oe.length),de=oe.map(ne=>Q(ne,d.tab));U||(h(de),w(Number.isNaN(ae)?oe.length:ae))}catch(J){U||b(J instanceof Error?J.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U||F(!1)}})(),()=>{U=!0}},[d.tab,d.year,d.keyword,d.page,d.pageSize,d.haksaCategory,d.haksaGrad,d.haksaCurriculum,d.sortOrder,Q]),o.useEffect(()=>{const U=setTimeout(()=>{P.trim()!==d.keyword&&v(P.trim())},300);return()=>clearTimeout(U)},[P,d.keyword,v]),o.useEffect(()=>{c&&r!=="manage"&&(C||y({subPath:void 0,params:B()}))},[B,c,y,r,C]),o.useEffect(()=>{r!=="manage"&&(f(null),E(null))},[r]);const Z=o.useCallback(U=>{for(const Ce of U){const J=n==null?void 0:n[Ce];if(J)return J}return""},[n]),ue=Z(["courseId","course_id","id"]),ye=Z(["direct","directOpen","direct_open"]),ke=r==="manage"&&ye==="1",se=Z(["cmTab","cm_tab","tab","targetTab","tab_id"]),be=Px.has(se)?se:void 0,Ne=Z(["source","source_type","sourceType","listTab"]),ce=Ne==="haksa"||Ne==="prism"?Ne:void 0,pe=Z(["qnaPostId","qna_post_id","postId","post_id"]),Ee=(()=>{const U=Number(pe);return Number.isFinite(U)&&U>0?U:void 0})();o.useEffect(()=>{if(!ke||!ue)return;let U=!1;return(async()=>{try{const J=Number(ue);if(!Number.isFinite(J)||J<=0)throw new Error("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const oe=await le.getCourseResolve({courseId:J,sourceType:ce});if(oe.rst_code!=="0000")throw new Error(oe.rst_message);const ae=Array.isArray(oe.rst_data)?oe.rst_data[0]:oe.rst_data;if(!ae)throw new Error("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");const de=Q(ae,ce??"prism");U||(E(be??null),f(de))}catch(J){U||b(J instanceof Error?J.message:"\uACFC\uBAA9 \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})(),()=>{U=!0}},[ke,ue,ce,be,Q]);const fe=o.useCallback(async(U,Ce)=>{if(E(Ce??null),U.sourceType!=="haksa"){f(U);return}if(U.mappedCourseId&&U.mappedCourseId>0){f(U);return}if(!U.haksaCourseCode||!U.haksaOpenYear||!U.haksaOpenTerm||!U.haksaBunbanCode||!U.haksaGroupCode){alert("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}M(U.id);try{const J=await le.resolveHaksaCourse({courseCode:U.haksaCourseCode,openYear:U.haksaOpenYear,openTerm:U.haksaOpenTerm,bunbanCode:U.haksaBunbanCode,groupCode:U.haksaGroupCode});if(J.rst_code!=="0000")throw new Error(J.rst_message);const oe=Array.isArray(J.rst_data)?J.rst_data[0]:J.rst_data,ae=Number((oe==null?void 0:oe.mapped_course_id)??0);if(!ae||Number.isNaN(ae))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");f({...U,mappedCourseId:ae})}catch(J){alert(J instanceof Error?J.message:"\uD559\uC0AC \uACFC\uBAA9 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{M(null)}},[]);o.useEffect(()=>{if(!c||!C)return;const U=k??be??"info-basic",Ce=C.subjectName||C.courseId;y({subPath:"manage",params:{courseId:C.id,source:C.sourceType,cmTab:U,courseName:Ce}})},[c,y,be,C,k]);const De=o.useMemo(()=>d.tab==="haksa"?Y.filter(U=>{const Ce=d.haksaCategory==="\uC804\uCCB4"||(U.haksaCategory||"").toLowerCase()===d.haksaCategory.toLowerCase(),J=d.haksaGrad==="\uC804\uCCB4"||(U.haksaGradName||"").includes(d.haksaGrad),oe=d.haksaCurriculum==="\uC804\uCCB4"||(U.haksaCurriculumName||"")===d.haksaCurriculum;return Ce&&J&&oe}):Y.filter(U=>{const Ce=d.courseType==="\uC804\uCCB4"||U.courseType===d.courseType,J=d.status==="\uC804\uCCB4"||U.status===d.status;return Ce&&J}),[d,Y]),He=o.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(Y.map(Ce=>Ce.courseType).filter(Ce=>Ce&&Ce!=="\uBBF8\uC9C0\uC815"))).sort((Ce,J)=>Ce.localeCompare(J))],[Y]),ie=Math.max(1,Math.ceil(K/d.pageSize)),Me=o.useMemo(()=>{const U=Math.max(1,d.page-2),Ce=Math.min(ie,d.page+2);return Array.from({length:Ce-U+1},(J,oe)=>U+oe)},[d.page,ie]);return o.useEffect(()=>{d.page>ie&&ie>0&&I(ie)},[ie,d.page,I]),C?e.jsx(Cd,{course:C,initialTab:k??be??void 0,initialQnaPostId:r==="manage"?Ee:void 0,onTabChange:U=>E(U),onBack:()=>{f(null),E(null),y({subPath:void 0,params:B()})}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uB2F4\uB2F9 \uACFC\uBAA9"}),e.jsx("p",{className:"text-gray-600",children:"\uB2F4\uB2F9\uD558\uACE0 \uC788\uB294 \uACFC\uBAA9 \uBAA9\uB85D\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>p("haksa"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${d.tab==="haksa"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uC815\uADDC"}),e.jsx("button",{onClick:()=>p("prism"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${d.tab==="prism"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uBE44\uC815\uADDC"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:d.tab==="haksa"?e.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:d.year,onChange:U=>m(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:q.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:d.haksaCategory,onChange:U=>L(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:$x.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2E8\uACFC\uB300\uD559"}),e.jsx("select",{value:d.haksaGrad,onChange:U=>j(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Mx.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uAD6C\uBD84"}),e.jsx("select",{value:d.haksaCurriculum,onChange:U=>T(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Rx.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C"}),e.jsxs("select",{value:d.sortOrder,onChange:U=>W(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"desc",children:"\uAC15\uC88C\uCF54\uB4DC \uB0B4\uB9BC\uCC28\uC21C"}),e.jsx("option",{value:"asc",children:"\uAC15\uC88C\uCF54\uB4DC \uC624\uB984\uCC28\uC21C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:P,onChange:U=>z(U.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:d.year,onChange:U=>m(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:q.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:d.courseType,onChange:U=>R(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:He.map(U=>e.jsx("option",{value:U,children:U},U))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:d.status,onChange:U=>_(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"\uC804\uCCB4",children:"\uC804\uCCB4"}),e.jsx("option",{value:"\uB300\uAE30",children:"\uB300\uAE30"}),e.jsx("option",{value:"\uC2E0\uCCAD\uAE30\uAC04",children:"\uC2E0\uCCAD\uAE30\uAC04"}),e.jsx("option",{value:"\uD559\uC2B5\uAE30\uAC04",children:"\uD559\uC2B5\uAE30\uAC04"}),e.jsx("option",{value:"\uC885\uB8CC",children:"\uC885\uB8CC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:P,onChange:U=>z(U.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC694\uCCAD"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uBAA9\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:d.tab==="haksa"?"\uD559\uACFC/\uC804\uACF5":"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uAE30\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC218\uAC15\uC0DD"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:N})})}):g?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})})}):De.length>0?De.map((U,Ce)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:(d.page-1)*d.pageSize+Ce+1}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${U.sourceType==="prism"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:U.sourceType==="prism"?"LMS":"\uD559\uC0AC"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:U.courseId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:U.sourceType==="haksa"&&U.haksaCategory?U.haksaCategory:U.courseType}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:U.subjectName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:U.sourceType==="haksa"&&U.haksaDeptName?U.haksaDeptName:U.programName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:U.period}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-900",children:[e.jsx(vu,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:U.students})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs rounded-full ${zx(U.status)}`,children:U.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{className:"flex items-center gap-1 px-4 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors disabled:opacity-60",title:"\uACFC\uBAA9 \uAD00\uB9AC",onClick:()=>void fe(U),disabled:$===U.id,children:[e.jsx(ld,{className:"w-4 h-4"}),e.jsx("span",{children:$===U.id?"\uC5F0\uB3D9 \uC911...":"\uAD00\uB9AC"})]})})})]},U.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})})})]})})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"\uCD1D"}),e.jsx("span",{className:"text-blue-600",children:K}),e.jsx("span",{children:"\uAC1C\uC758 \uACFC\uBAA9"}),e.jsxs("span",{className:"text-gray-400",children:["/ \uD604\uC7AC ",De.length,"\uAC1C \uD45C\uC2DC"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"page-size",className:"text-gray-600",children:"\uD398\uC774\uC9C0\uB2F9"}),e.jsx("select",{id:"page-size",value:d.pageSize,onChange:U=>D(Number(U.target.value)),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[20,50,100].map(U=>e.jsx("option",{value:U,children:U},U))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>I(1),disabled:d.page===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uCC98\uC74C"}),e.jsx("button",{type:"button",onClick:()=>I(Math.max(1,d.page-1)),disabled:d.page===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uC774\uC804"}),Me.map(U=>e.jsx("button",{type:"button",onClick:()=>I(U),className:`px-3 py-1.5 text-sm border rounded-md ${U===d.page?"bg-blue-600 text-white border-blue-600":"border-gray-300"}`,children:U},U)),e.jsx("button",{type:"button",onClick:()=>I(Math.min(ie,d.page+1)),disabled:d.page===ie,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB2E4\uC74C"}),e.jsx("button",{type:"button",onClick:()=>I(ie),disabled:d.page===ie,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB05D"})]})]})}function Hx({routeSubPath:r,routeParams:n,onRouteChange:c}){const d=o.useMemo(()=>n??{},[]),p=o.useCallback(m=>{c&&r!=="manage"&&c({subPath:void 0,params:m})},[c,r]);return e.jsx(Tx,{initialParams:d,onParamsChange:p,children:e.jsx(Ux,{routeSubPath:r,routeParams:n,onRouteChange:c})})}function Yx(r){if(!r)return null;try{const n=JSON.parse(r);return!n||typeof n!="object"?null:n}catch{return null}}function Qx(r){const n=[r.startDateYmd,r.startDate].filter(Boolean);for(const p of n){const m=String(p);if(m.length>=4&&/^\d{4}/.test(m))return m.substring(0,4)}const d=(r.trainingPeriod||"").match(/(\\d{4})/);return d?d[1]:"-"}function Kx(){const[r,n]=o.useState(""),[c,d]=o.useState("\uC804\uCCB4"),[p,m]=o.useState("\uC804\uCCB4"),[v,I]=o.useState("list"),[D,R]=o.useState(null),[_,L]=o.useState([]),[j,T]=o.useState(!1),[W,G]=o.useState(null),B=async()=>{T(!0),G(null);try{const P=await le.getPrograms();if(P.rst_code!=="0000")throw new Error(P.rst_message);const Y=(P.rst_data??[]).map(h=>{var b,K,w,C,f,k,E,$,M,S,A,y,Q,Z,ue,ye,ke,se,be,Ne,ce;const g=Yx(h.plan_json),F=((b=g==null?void 0:g.training)==null?void 0:b.trainingPeriodText)||h.training_period||"-",N=Qx({startDateYmd:(K=g==null?void 0:g.training)==null?void 0:K.startDateYmd,startDate:h.start_date,trainingPeriod:F});return{id:String(h.id),courseCategory:((C=(w=g==null?void 0:g.basic)==null?void 0:w.courseCategory)==null?void 0:C.label)||((k=(f=g==null?void 0:g.basic)==null?void 0:f.courseCategory)==null?void 0:k.value)||"-",classification:(($=(E=g==null?void 0:g.basic)==null?void 0:E.classification)==null?void 0:$.label)||((S=(M=g==null?void 0:g.basic)==null?void 0:M.classification)==null?void 0:S.value)||"\uBBF8\uBD84\uB958",name:h.course_nm||((A=g==null?void 0:g.basic)==null?void 0:A.courseName)||`\uACFC\uC815 ${h.id}`,department:((y=g==null?void 0:g.basic)==null?void 0:y.department)||"",major:((Q=g==null?void 0:g.basic)==null?void 0:Q.major)||"",departmentName:((Z=g==null?void 0:g.basic)==null?void 0:Z.departmentName)||"",trainingPeriod:F,trainingLevel:((ye=(ue=g==null?void 0:g.training)==null?void 0:ue.trainingLevel)==null?void 0:ye.label)||((se=(ke=g==null?void 0:g.training)==null?void 0:ke.trainingLevel)==null?void 0:se.value)||"-",trainingTarget:((be=g==null?void 0:g.training)==null?void 0:be.trainingTarget)||"",trainingGoal:((Ne=g==null?void 0:g.training)==null?void 0:Ne.trainingGoal)||"",instructor:((ce=g==null?void 0:g.basic)==null?void 0:ce.instructor)||"",year:N,students:0,subjects:Number(h.course_cnt??0)}});L(Y)}catch(P){G(P instanceof Error?P.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{T(!1)}};o.useEffect(()=>{B()},[]);const q=o.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(_.map(z=>z.year).filter(z=>z&&z!=="-"))).sort((z,Y)=>Y.localeCompare(z))],[_]),H=o.useMemo(()=>{const P=r.trim().toLowerCase();return _.filter(z=>{const Y=[z.name,z.department,z.major,z.departmentName,z.instructor,z.trainingLevel,z.trainingTarget,z.trainingGoal].map(N=>String(N||"").toLowerCase()).filter(Boolean),h=P===""||Y.some(N=>N.includes(P)),g=p==="\uC804\uCCB4"||z.year===p,F=c==="\uC804\uCCB4"||z.classification===c;return h&&g&&F})},[_,r,p,c]);return D?e.jsx(pd,{course:D,onBack:()=>{R(null),B()}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uD0D0\uC0C9"}),e.jsx("p",{className:"text-gray-600",children:"\uAC1C\uC124\uB41C \uBAA8\uB4E0 \uAD50\uC721 \uACFC\uC815\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:P=>n(P.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85, \uAD50\uC218\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]}),e.jsx("select",{value:p,onChange:P=>m(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:q.map(P=>e.jsx("option",{value:P,children:P},P))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I("grid"),className:`p-2 rounded-lg transition-colors ${v==="grid"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(nm,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>I("list"),className:`p-2 rounded-lg transition-colors ${v==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(vt,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:H.length}),"\uAC1C\uC758 \uACFC\uC815"]})}),W?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:W})}):j?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):e.jsxs(e.Fragment,{children:[v==="grid"?e.jsx("div",{className:"grid grid-cols-3 gap-6",children:H.map(P=>e.jsxs("div",{onClick:()=>R(P),className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[P.thumbnail?e.jsx("img",{src:P.thumbnail,alt:P.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(vt,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-3 py-1 bg-white bg-opacity-90 rounded-full text-xs text-gray-900",children:P.classification})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:P.name}),e.jsx("p",{className:"text-sm text-gray-600",children:[P.department,P.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:P.departmentName||"-"})]})})]},P.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-20",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-28",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-24",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap w-24",children:"\uC18C\uC18D \uACFC\uBAA9"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(P=>e.jsxs("tr",{onClick:()=>R(P),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 whitespace-nowrap",children:P.id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:P.courseCategory||"-"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:P.classification})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 break-words",children:P.name})}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-600 whitespace-nowrap",children:[P.subjects,"\uAC1C"]})]},P.id))})]})}),H.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(vt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})})]})]})}function Vx({onNavigate:r,onOpenCourse:n}={}){const[c,d]=o.useState(!1),[p,m]=o.useState(null),[v,I]=o.useState(null),[D,R]=o.useState([]),[_,L]=o.useState([]),[j,T]=o.useState([]);o.useEffect(()=>{let h=!1;return(async()=>{d(!0),m(null);try{const F=await le.getDashboard();if(F.rst_code!=="0000")throw new Error(F.rst_message);if(h)return;I(F.rst_data??null),R(F.rst_courses??[]),L(F.rst_submissions??[]),T(F.rst_qna??[])}catch(F){h||m(F instanceof Error?F.message:"\uB300\uC2DC\uBCF4\uB4DC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{h||d(!1)}})(),()=>{h=!0}},[]);const W=o.useMemo(()=>[{title:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9",value:(v==null?void 0:v.active_course_cnt)??0,icon:vt,color:"bg-blue-100 text-blue-600",bgColor:"bg-blue-50"},{title:"\uBBF8\uD655\uC778 \uACFC\uC81C",value:(v==null?void 0:v.pending_homework_cnt)??0,icon:ps,color:"bg-orange-100 text-orange-600",bgColor:"bg-orange-50"},{title:"\uBBF8\uB2F5\uBCC0 Q&A",value:(v==null?void 0:v.unanswered_qna_cnt)??0,icon:ks,color:"bg-purple-100 text-purple-600",bgColor:"bg-purple-50"}],[v==null?void 0:v.active_course_cnt,v==null?void 0:v.pending_homework_cnt,v==null?void 0:v.unanswered_qna_cnt]),G=o.useMemo(()=>D.slice(0,3),[D]),B=o.useMemo(()=>_.slice(0,3),[_]),q=o.useMemo(()=>j.slice(0,3),[j]),H=()=>{r==null||r("courses")},P=()=>{r==null||r("assignment-manage")},z=()=>{r==null||r("qna-manage")},Y=h=>{if(n){n(h);return}r==null||r("courses")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"\uB300\uC2DC\uBCF4\uB4DC"}),e.jsx("p",{className:"text-gray-600",children:"\uAD50\uC218\uC790 \uD65C\uB3D9 \uD604\uD669\uC744 \uD55C\uB208\uC5D0 \uD655\uC778\uD558\uC138\uC694"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:W.map((h,g)=>e.jsxs("div",{className:`${h.bgColor} border border-gray-200 rounded-lg p-6 transition-all hover:shadow-md`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`${h.color} p-3 rounded-lg`,children:e.jsx(h.icon,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:h.value}),e.jsx("div",{className:"text-sm text-gray-600",children:h.title})]})]},g))}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uD589 \uC911\uC778 \uAC15\uC88C"})]}),e.jsx("button",{onClick:H,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):D.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:G.map(h=>{const g=Math.round(Number(h.avg_progress_ratio??0)),F=Number(h.student_cnt??0),N=Number(h.pending_homework_cnt??0),b=Number(h.unanswered_qna_cnt??0);return e.jsxs("button",{type:"button",onClick:()=>Y({courseId:h.id,courseName:h.course_nm,targetTab:"attendance",sourceType:h.source_type==="haksa"?"haksa":"prism"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:h.course_nm}),e.jsx("p",{className:"text-sm text-gray-600",children:h.period_conv||"-"})]}),(N>0||b>0)&&e.jsxs("div",{className:"flex items-center gap-2",children:[N>0&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:["\uBBF8\uD655\uC778 \uACFC\uC81C ",N,"\uAC74"]}),b>0&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:["\uBBF8\uB2F5\uBCC0 Q&A ",b,"\uAC74"]})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vu,{className:"w-4 h-4"}),F,"\uBA85"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uD3C9\uADE0 \uC9C4\uB3C4\uC728"}),e.jsxs("span",{className:"text-gray-900",children:[g,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,g))}%`}})})]})]},h.id)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uC81C \uBAA9\uB85D"})]}),e.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):_.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC \uC81C\uCD9C\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:B.map(h=>{const g=!!h.confirmed,F=`${h.user_nm||"-"} \xB7 ${h.course_nm}`,N=h.submitted_at||"-";return e.jsxs("button",{type:"button",onClick:()=>Y({courseId:h.course_id,courseName:h.course_nm,targetTab:"assignment-feedback",sourceType:h.source_type==="haksa"?"haksa":"prism"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:h.homework_nm}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:F})]}),g?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"\uD655\uC778\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uD655\uC778"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:N})]})]},`${h.homework_id}-${h.course_user_id}`)})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uADFC Q&A"})]}),e.jsx("button",{onClick:z,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),c?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):j.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC Q&A\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:q.map(h=>e.jsxs("button",{type:"button",onClick:()=>Y({courseId:h.course_id,courseName:h.course_nm,targetTab:"qna",qnaPostId:h.post_id,sourceType:h.source_type==="haksa"?"haksa":"prism"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:h.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[h.user_nm||"-"," \xB7 ",h.course_nm]})]}),h.answered?e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:"\uB2F5\uBCC0\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uB2F5\uBCC0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:h.reg_date_conv||"-"})]})]},h.post_id))})]})]})}function Wx({isOpen:r,onClose:n,onUploadComplete:c,categories:d=[]}){const[p,m]=o.useState(""),[v,I]=o.useState(""),[D,R]=o.useState(null),[_,L]=o.useState("idle"),[j,T]=o.useState(0),[W,G]=o.useState(""),B=o.useRef(null),q=o.useRef(null),H=o.useRef(0),P=o.useCallback(K=>{if(!K)return;if(!["video/mp4","video/webm","video/avi","video/mov","video/quicktime","video/x-msvideo"].includes(K.type)&&!K.name.match(/\.(mp4|webm|avi|mov|mkv|wmv)$/i)){G("\uB3D9\uC601\uC0C1 \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. (mp4, webm, avi, mov \uB4F1)");return}if(R(K),G(""),!p){const C=K.name.replace(/\.[^.]+$/,"");m(C)}},[p]),z=o.useCallback(K=>{K.preventDefault(),K.stopPropagation();const w=K.dataTransfer.files[0];P(w)},[P]),Y=o.useCallback(K=>{K.preventDefault(),K.stopPropagation()},[]),h=async()=>{var w,C;if(!D){G("\uD30C\uC77C\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}if(!p.trim()){G("\uC81C\uBAA9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}const K=++H.current;L("getting-url"),T(0),G("");try{const f=await le.getKollusUploadUrl({title:p.trim(),categoryKey:v||void 0,expireTime:3600});if(K!==H.current)return;const k=f.rst_data;let E="",$="";if(Array.isArray(k)&&k.length>0?(E=((w=k[0])==null?void 0:w.upload_url)||"",$=((C=k[0])==null?void 0:C.upload_key)||""):k&&typeof k=="object"&&(E=k.upload_url||"",$=k.upload_key||""),f.rst_code!=="0000"||!E)throw new Error(f.rst_message||"\uC5C5\uB85C\uB4DC URL \uC0DD\uC131 \uC2E4\uD328");if(!$)throw new Error("\uC5C5\uB85C\uB4DC \uD0A4(upload_key)\uB97C \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758\uD574 \uC8FC\uC138\uC694.");if(L("uploading"),await new Promise((S,A)=>{const y=new XMLHttpRequest;q.current=y,y.upload.addEventListener("progress",Z=>{if(Z.lengthComputable){const ue=Math.round(Z.loaded/Z.total*100);T(ue)}}),y.addEventListener("load",()=>{y.status>=200&&y.status<300?S():A(new Error(`\uC5C5\uB85C\uB4DC \uC2E4\uD328 (${y.status})`))}),y.addEventListener("error",()=>{A(new Error("\uB124\uD2B8\uC6CC\uD06C \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}),y.addEventListener("abort",()=>{A(new Error("\uC5C5\uB85C\uB4DC\uAC00 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))});const Q=new FormData;Q.append("upload-file",D),y.open("POST",E,!0),y.send(Q)}),K!==H.current)return;T(100),L("linking");const M=await le.attachKollusToChannel({uploadKey:$});if(K!==H.current)return;if(M.rst_code!=="0000")throw new Error(M.rst_message||"\uCC44\uB110 \uC5F0\uACB0 \uC2E4\uD328");L("success"),setTimeout(()=>{K===H.current&&(F(),c==null||c())},2e3)}catch(f){if(K!==H.current)return;L("error"),G(f instanceof Error?f.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},g=()=>{H.current+=1,q.current&&(q.current.abort(),q.current=null),L("idle"),T(0)},F=()=>{if(_==="getting-url"||_==="uploading"||_==="linking"){if(!window.confirm("\uC5C5\uB85C\uB4DC \uC911\uC785\uB2C8\uB2E4. \uC815\uB9D0 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))return;g()}m(""),I(""),R(null),L("idle"),T(0),G(""),n()},N=K=>K<1024?`${K} B`:K<1024*1024?`${(K/1024).toFixed(1)} KB`:K<1024*1024*1024?`${(K/(1024*1024)).toFixed(1)} MB`:`${(K/(1024*1024*1024)).toFixed(2)} GB`;if(!r)return null;const b=_==="getting-url"||_==="uploading"||_==="linking";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Pc,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uB3D9\uC601\uC0C1 \uC5C5\uB85C\uB4DC"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Kollus VOD\uC5D0 \uB3D9\uC601\uC0C1\uC744 \uC5C5\uB85C\uB4DC\uD569\uB2C8\uB2E4"})]})]}),e.jsx("button",{onClick:F,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["\uC601\uC0C1 \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p,onChange:K=>m(K.target.value),placeholder:"\uC601\uC0C1 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",disabled:b,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"\uCE74\uD14C\uACE0\uB9AC (\uC120\uD0DD)"}),e.jsxs("select",{value:v,onChange:K=>I(K.target.value),disabled:b,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD \uC548\uD568"}),d.map(K=>e.jsx("option",{value:K.key,children:K.name},K.key))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["\uB3D9\uC601\uC0C1 \uD30C\uC77C ",e.jsx("span",{className:"text-red-500",children:"*"})]}),D?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Pc,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:D.name}),e.jsx("p",{className:"text-sm text-gray-500",children:N(D.size)})]}),!b&&e.jsx("button",{onClick:()=>R(null),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:e.jsx(dt,{className:"w-4 h-4"})})]}):e.jsxs("div",{onDrop:z,onDragOver:Y,onClick:()=>{var K;return(K=B.current)==null?void 0:K.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx(Mr,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-1",children:"\uD30C\uC77C\uC744 \uB4DC\uB798\uADF8\uD558\uAC70\uB098 \uD074\uB9AD\uD558\uC5EC \uC120\uD0DD"}),e.jsx("p",{className:"text-sm text-gray-400",children:"MP4, WebM, AVI, MOV \uB4F1 \uC9C0\uC6D0"})]}),e.jsx("input",{ref:B,type:"file",accept:"video/*",onChange:K=>{var w;return P((w=K.target.files)==null?void 0:w[0])},className:"hidden"})]}),b&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Yt,{className:"w-5 h-5 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:_==="getting-url"?"\uC5C5\uB85C\uB4DC \uC900\uBE44 \uC911...":_==="linking"?"\uCC44\uB110\uC5D0 \uB4F1\uB85D \uC911... (\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694)":`\uC5C5\uB85C\uB4DC \uC911... ${j}%`})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_==="getting-url"?5:j}%`}})})]}),_==="success"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(ls,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"\uC5C5\uB85C\uB4DC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uCC44\uB110 \uB4F1\uB85D/\uCC98\uB9AC\uAE4C\uC9C0 \uC2DC\uAC04\uC774 \uAC78\uB9B4 \uC218 \uC788\uC5B4 \uC7A0\uC2DC \uD6C4 \uBAA9\uB85D\uC5D0\uC11C \uD655\uC778\uD574 \uC8FC\uC138\uC694."})]}),W&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(H0,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-red-800",children:W})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:b?e.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}):_==="success"?e.jsx("button",{onClick:F,className:"px-4 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors",children:"\uB2EB\uAE30"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:F,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:h,disabled:!D||!p.trim(),className:"px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx(Mr,{className:"w-4 h-4"}),"\uC5C5\uB85C\uB4DC"]})]})})]})})}function Zc({activeTab:r}){const[n,c]=o.useState(""),[d,p]=o.useState(""),[m,v]=o.useState([]),[I,D]=o.useState([]),[R,_]=o.useState(0),[L,j]=o.useState(1),[T,W]=o.useState(!1),[G,B]=o.useState(!1),[q,H]=o.useState(null),[P,z]=o.useState(!1),Y=30;Ue.useEffect(()=>{j(1),v([]),_(0)},[n,d,r]),Ue.useEffect(()=>{let N=!1;const b=setTimeout(()=>{(async()=>{const w=L===1;B(w),W(!w),H(null);try{const C=r==="favorites"?await le.getKollusWishlistList({keyword:n,page:L,limit:Y}):await le.getKollusList({keyword:n,categoryKey:d||void 0,page:L,limit:Y});if(C.rst_code!=="0000")throw new Error(C.rst_message);const k=(C.rst_data??[]).map($=>({id:String($.id||$.media_content_key),mediaKey:$.media_content_key,title:$.title,description:$.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${$.original_file_name}`:"",category:$.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",categoryKey:$.category_key,snapshotUrl:$.snapshot_url,originalFileName:$.original_file_name||"",thumbnail:$.thumbnail||$.snapshot_url||"",duration:$.duration||"-",totalTime:Number($.total_time??0),contentWidth:Number($.content_width??0),contentHeight:Number($.content_height??0),isFavorite:!!$.is_favorite})),E=Array.isArray(C.rst_categories)?C.rst_categories:[];N||(v($=>w?k:[...$,...k]),_(Number(C.rst_total??k.length)),r!=="favorites"&&E.length>0&&D(E))}catch(C){N||H(C instanceof Error?C.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N||(B(!1),W(!1))}})()},250);return()=>{N=!0,clearTimeout(b)}},[r,n,d,L]);const h=I,g=async(N,b)=>{N.preventDefault(),N.stopPropagation();try{const K=await le.toggleKollusWishlist({mediaContentKey:b.mediaKey,title:b.title,snapshotUrl:b.snapshotUrl||b.thumbnail,categoryKey:b.categoryKey,categoryName:b.category,originalFileName:b.originalFileName,totalTime:b.totalTime,contentWidth:b.contentWidth,contentHeight:b.contentHeight});if(K.rst_code!=="0000")throw new Error(K.rst_message);const w=Number(K.rst_data??0)===1;v(C=>r==="favorites"&&!w?C.filter(f=>f.mediaKey!==b.mediaKey):C.map(f=>f.mediaKey===b.mediaKey?{...f,isFavorite:w}:f))}catch(K){H(K instanceof Error?K.message:"\uCC1C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},F=N=>{if(!N.mediaKey)return;const b=`/kollus/preview.jsp?key=${encodeURIComponent(N.mediaKey)}`,K=Math.max(Number(N.contentWidth??0),900),w=Math.max(Number(N.contentHeight??0),506);window.open(b,"_blank",`width=${K},height=${w},resizable=yes,scrollbars=yes`)||H("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:r==="all"?"\uC804\uCCB4 \uCF58\uD150\uCE20":"\uCC1C\uD55C \uCF58\uD150\uCE20"}),e.jsx("p",{className:"text-gray-600",children:r==="all"?"\uBAA8\uB4E0 \uAD50\uC721 \uCF58\uD150\uCE20\uB97C \uAC80\uC0C9\uD558\uACE0 \uACFC\uC815\uC5D0 \uD65C\uC6A9\uD558\uC138\uC694.":"\uC990\uACA8\uCC3E\uAE30\uD55C \uCF58\uD150\uCE20\uB9CC \uBAA8\uC544\uC11C \uD655\uC778\uD558\uC138\uC694."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:N=>c(N.target.value),placeholder:"\uCF58\uD150\uCE20 \uC81C\uBAA9\uC774\uB098 \uD0DC\uADF8\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r!=="favorites"&&e.jsxs("select",{value:d,onChange:N=>p(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),h.map(N=>e.jsx("option",{value:N.key,children:N.name},N.key))]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:R}),"\uAC1C\uC758 \uCF58\uD150\uCE20"]}),r==="all"&&e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Mr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC601\uC0C1 \uC5C5\uB85C\uB4DC"})]})]})}),q&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:q}),G&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!G&&e.jsx("div",{className:"grid grid-cols-3 gap-6",children:m.map(N=>e.jsxs("div",{className:"group bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",role:"button",tabIndex:0,onClick:()=>F(N),onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&F(N)},children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[N.thumbnail?e.jsx("img",{src:N.thumbnail,alt:N.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(vt,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-black bg-opacity-60 flex items-center justify-center",children:e.jsx($l,{className:"w-6 h-6 text-white ml-0.5"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white px-2 py-1 rounded text-xs",children:N.category}),e.jsx("button",{type:"button",onClick:b=>g(b,N),className:"absolute top-2 right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors",title:N.isFavorite?"\uCC1C \uD574\uC81C":"\uCC1C\uD558\uAE30",children:e.jsx(im,{className:`w-4 h-4 ${N.isFavorite?"fill-red-500 text-red-500":"text-gray-400"}`})}),N.duration&&N.duration!=="-"&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:N.duration})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2 line-clamp-1",children:N.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:N.description})]})]},N.id))}),!G&&!q&&m.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(vt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})}),!G&&m.length<R&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"button",onClick:()=>j(N=>N+1),disabled:T,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:T?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})}),e.jsx(Wx,{isOpen:P,onClose:()=>z(!1),categories:I})]})}const qx=r=>({id:String(r.id),name:r.category_nm,parentId:r.parent_id>0?String(r.parent_id):null,createdAt:new Date().toISOString()}),Gx=r=>{const n=new Map,c=[];return r.forEach(d=>{n.set(d.id,{...d,children:[]})}),r.forEach(d=>{const p=n.get(d.id);d.parentId&&n.has(d.parentId)?n.get(d.parentId).children.push(p):c.push(p)}),c};function Jx(){const[r,n]=o.useState([]),[c,d]=o.useState(new Set),[p,m]=o.useState(!0),[v,I]=o.useState(!1),[D,R]=o.useState(null),[_,L]=o.useState(!1),[j,T]=o.useState(null),[W,G]=o.useState(""),[B,q]=o.useState(null),H=async()=>{try{m(!0),R(null);const b=await le.getQuestionCategories();if(b.rst_code!=="0000")throw new Error(b.rst_message);const K=(b.rst_data??[]).map(qx);n(K)}catch(b){R(b instanceof Error?b.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{m(!1)}};o.useEffect(()=>{H()},[]);const P=Gx(r),z=b=>{d(K=>{const w=new Set(K);return w.has(b)?w.delete(b):w.add(b),w})},Y=(b=null)=>{T(null),G(""),q(b),L(!0)},h=b=>{T(b),G(b.name),q(b.parentId),L(!0)},g=async()=>{if(W.trim())try{if(I(!0),R(null),j){const b=await le.updateQuestionCategory({id:Number(j.id),categoryName:W.trim(),parentId:B?Number(B):0});if(b.rst_code!=="0000")throw new Error(b.rst_message)}else{const b=await le.createQuestionCategory({categoryName:W.trim(),parentId:B?Number(B):0});if(b.rst_code!=="0000")throw new Error(b.rst_message)}await H(),L(!1),T(null),G("")}catch(b){R(b instanceof Error?b.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}},F=async b=>{if(r.some(w=>w.parentId===b)){alert("\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC788\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(confirm("\uC774 \uCE74\uD14C\uACE0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{I(!0);const w=await le.deleteQuestionCategory({id:Number(b)});if(w.rst_code!=="0000")throw new Error(w.rst_message);await H()}catch(w){R(w instanceof Error?w.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}},N=(b,K=0)=>{const w=c.has(b.id),C=b.children&&b.children.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 hover:bg-gray-50 border-b border-gray-100 ${K>0?"bg-gray-50/50":""}`,style:{paddingLeft:`${16+K*24}px`},children:[C?e.jsx("button",{onClick:()=>z(b.id),className:"p-1 hover:bg-gray-200 rounded",children:w?e.jsx(dr,{className:"w-4 h-4 text-gray-500"}):e.jsx(Jt,{className:"w-4 h-4 text-gray-500"})}):e.jsx("span",{className:"w-6"}),e.jsx(Mc,{className:"w-4 h-4 text-indigo-500"}),e.jsx("span",{className:"flex-1 text-gray-800",children:b.name}),e.jsx("button",{onClick:()=>Y(b.id),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00",disabled:v,children:e.jsx(yt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(b),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:v,children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F(b.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:v,children:e.jsx(jt,{className:"w-4 h-4"})})]}),w&&C&&e.jsx("div",{children:b.children.map(f=>N(f,K+1))})]},b.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C \uCE74\uD14C\uACE0\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uBB38\uC81C\uB97C \uBD84\uB958\uD560 \uCE74\uD14C\uACE0\uB9AC\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:()=>Y(null),disabled:v,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"})]})]}),D&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:D}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:p?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Yt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):P.length>0?e.jsx("div",{children:P.map(b=>N(b))}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Mc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>Y(null),className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00\uD558\uAE30"})]})}),_&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>L(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j?"\uCE74\uD14C\uACE0\uB9AC \uC218\uC815":"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCE74\uD14C\uACE0\uB9AC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:W,onChange:b=>G(b.target.value),placeholder:"\uCE74\uD14C\uACE0\uB9AC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC0C1\uC704 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:B||"",onChange:b=>q(b.target.value||null),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC5C6\uC74C (\uCD5C\uC0C1\uC704)"}),r.filter(b=>b.id!==(j==null?void 0:j.id)).map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:g,disabled:!W.trim()||v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[v?e.jsx(Yt,{className:"w-4 h-4 animate-spin"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const Xx=r=>r===1||r===2?"multiple_choice":r===3||r===4?"short_answer":"multiple_choice",ed=r=>r==="multiple_choice"?1:r==="short_answer"?3:1,Zx=r=>{const n=Xx(r.question_type),c=[];if(r.question_type===1||r.question_type===2)for(let d=1;d<=(r.item_cnt||4);d++){const p=`item${d}`,m=r[p];if(m){const v=(r.answer||"").split("||");c.push({id:String(d),text:m,isCorrect:v.includes(String(d))})}}return{id:String(r.id),categoryId:r.category_id?String(r.category_id):null,type:n,title:r.question,content:r.question_text||"",choices:n==="multiple_choice"?c:void 0,correctAnswer:n!=="multiple_choice"?r.answer:void 0,points:r.score||5,createdAt:r.reg_date||new Date().toISOString()}},td={multiple_choice:"\uAC1D\uAD00\uC2DD",short_answer:"\uC8FC\uAD00\uC2DD",ox:"OX\uD615"},eg={multiple_choice:"bg-blue-100 text-blue-700",short_answer:"bg-green-100 text-green-700",ox:"bg-purple-100 text-purple-700"};function tg(){const[r,n]=o.useState([]),[c,d]=o.useState([]),[p,m]=o.useState(!0),[v,I]=o.useState(!1),[D,R]=o.useState(null),[_,L]=o.useState(""),[j,T]=o.useState(""),[W,G]=o.useState(""),[B,q]=o.useState(!1),[H,P]=o.useState(null),[z,Y]=o.useState({categoryId:"",type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),h=async()=>{try{m(!0),R(null);const C=await le.getQuestionCategories();C.rst_code==="0000"&&d(C.rst_data??[]);const f=W==="multiple_choice"?1:W==="short_answer"?3:void 0,k=await le.getQuestionBankList({categoryId:j?Number(j):void 0,questionType:f,keyword:_||void 0,limit:100});if(k.rst_code!=="0000")throw new Error(k.rst_message);const E=(k.rst_data??[]).map(Zx);n(E)}catch(C){R(C instanceof Error?C.message:"\uBB38\uC81C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{m(!1)}};o.useEffect(()=>{h()},[_,j,W]);const g=()=>{P(null),Y({categoryId:null,type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),q(!0)},F=C=>{P(C),Y({categoryId:C.categoryId,type:C.type,title:C.title,content:C.content,points:C.points,choices:C.choices||[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:C.correctAnswer||""}),q(!0)},N=async()=>{if(z.title.trim())try{I(!0),R(null);let C="";if(z.type==="multiple_choice"){const k=z.choices.findIndex(E=>E.isCorrect);C=k>=0?String(k+1):"1"}else z.type,C=z.correctAnswer;const f=z.type==="multiple_choice"?z.choices.map(k=>k.text).filter(k=>k.trim()):void 0;if(H){const k=await le.updateQuestion({id:Number(H.id),categoryId:z.categoryId?Number(z.categoryId):void 0,questionType:ed(z.type),question:z.title.trim(),questionText:z.content.trim(),answer:C,points:z.points,items:f});if(k.rst_code!=="0000")throw new Error(k.rst_message)}else{const k=await le.createQuestion({categoryId:z.categoryId?Number(z.categoryId):void 0,questionType:ed(z.type),question:z.title.trim(),questionText:z.content.trim(),answer:C,points:z.points,items:f});if(k.rst_code!=="0000")throw new Error(k.rst_message)}await h(),q(!1)}catch(C){R(C instanceof Error?C.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}},b=async C=>{if(confirm("\uC774 \uBB38\uC81C\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{I(!0);const f=await le.deleteQuestion({id:Number(C)});if(f.rst_code!=="0000")throw new Error(f.rst_message);await h()}catch(f){R(f instanceof Error?f.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(!1)}},K=C=>{if(!C)return"-";const f=c.find(k=>String(k.id)===C);return(f==null?void 0:f.category_nm)||"-"},w=(C,f,k)=>{Y(E=>({...E,choices:E.choices.map(($,M)=>M===C?{...$,[f]:k}:f==="isCorrect"&&k===!0?{...$,isCorrect:!1}:$)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C\uC740\uD589"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC5D0 \uC0AC\uC6A9\uD560 \uBB38\uC81C\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:g,disabled:v,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBB38\uC81C \uCD94\uAC00"})]})]}),D&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:D}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:_,onChange:C=>L(C.target.value),placeholder:"\uBB38\uC81C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),e.jsxs("select",{value:j,onChange:C=>T(C.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),c.map(C=>e.jsx("option",{value:C.id,children:C.category_nm},C.id))]}),e.jsxs("select",{value:W,onChange:C=>G(C.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uC720\uD615"}),e.jsx("option",{value:"multiple_choice",children:"\uAC1D\uAD00\uC2DD"}),e.jsx("option",{value:"short_answer",children:"\uC8FC\uAD00\uC2DD"}),e.jsx("option",{value:"ox",children:"OX\uD615"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:p?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(Yt,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):r.length>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uBB38\uC81C"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC720\uD615"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uBC30\uC810"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:C.title}),C.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:C.content})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${eg[C.type]}`,children:td[C.type]})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:K(C.categoryId)}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-900",children:[C.points,"\uC810"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>F(C),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:v,children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(C.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:v,children:e.jsx(jt,{className:"w-4 h-4"})})]})})]},C.id))})]}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Tn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:g,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uBB38\uC81C \uCD94\uAC00\uD558\uAE30"})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",r.length,"\uAC1C \uBB38\uC81C"]}),B&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>q(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H?"\uBB38\uC81C \uC218\uC815":"\uBB38\uC81C \uCD94\uAC00"}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uC720\uD615"}),e.jsx("div",{className:"flex gap-3",children:["multiple_choice","short_answer","ox"].map(C=>e.jsx("button",{type:"button",onClick:()=>Y(f=>({...f,type:C})),className:`flex-1 py-3 px-4 rounded-lg border-2 transition-colors ${z.type===C?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300"}`,children:td[C]},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:z.categoryId||"",onChange:C=>Y(f=>({...f,categoryId:C.target.value||null})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C"}),c.map(C=>e.jsx("option",{value:C.id,children:C.category_nm},C.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uBB38\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:z.title,onChange:C=>Y(f=>({...f,title:C.target.value})),placeholder:"\uBB38\uC81C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uB0B4\uC6A9"}),e.jsx("textarea",{value:z.content,onChange:C=>Y(f=>({...f,content:C.target.value})),placeholder:"\uBB38\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694",rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),z.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC120\uD0DD\uC9C0"}),e.jsx("div",{className:"space-y-3",children:z.choices.map((C,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>w(f,"isCorrect",!0),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${C.isCorrect?"border-green-500 bg-green-500 text-white":"border-gray-300 hover:border-green-400"}`,children:C.isCorrect&&e.jsx("span",{className:"text-xs",children:"\u2713"})}),e.jsxs("span",{className:"text-sm text-gray-500 w-6",children:[f+1,"."]}),e.jsx("input",{type:"text",value:C.text,onChange:k=>w(f,"text",k.target.value),placeholder:`\uC120\uD0DD\uC9C0 ${f+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},C.id))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"\uC6D0\uD615 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC815\uB2F5\uC744 \uC120\uD0DD\uD558\uC138\uC694."})]}),z.type==="short_answer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsx("input",{type:"text",value:z.correctAnswer,onChange:C=>Y(f=>({...f,correctAnswer:C.target.value})),placeholder:"\uC815\uB2F5\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),z.type==="ox"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>Y(C=>({...C,correctAnswer:"O"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${z.correctAnswer==="O"?"border-green-500 bg-green-50 text-green-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"O"}),e.jsx("button",{type:"button",onClick:()=>Y(C=>({...C,correctAnswer:"X"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${z.correctAnswer==="X"?"border-red-500 bg-red-50 text-red-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"X"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:z.points,onChange:C=>Y(f=>({...f,points:parseInt(C.target.value)||0})),min:1,className:"w-32 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"\uC810"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:N,disabled:!z.title.trim()||v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[v?e.jsx(Yt,{className:"w-4 h-4 animate-spin"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const sg="/tutor_lms/api/statistics_proxy.jsp/statistics/dashboard.html";function rg({isOpen:r,onClose:n}){return o.useEffect(()=>{const c=d=>{d.key==="Escape"&&r&&n()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[r,n]),r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:c=>c.target===c.currentTarget&&n(),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-[720px] w-[90%] max-h-[85vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-6 py-5 flex items-center justify-between rounded-t-2xl",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0zm-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3h-7zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})}),"\uAE30\uC220\uC5C5\uC885"]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"\uC2E0\uAE30\uC220\uC744 \uAE30\uBC18\uC73C\uB85C \uC218\uC775\uC744 \uCC3D\uCD9C\uD558\uB294 \uAE30\uC220\uC9D1\uC57D\uC801 \uC5C5\uC885"})]}),e.jsx("button",{onClick:n,className:"bg-white/20 hover:bg-white/30 rounded-full w-9 h-9 flex items-center justify-center transition-colors","aria-label":"\uB2EB\uAE30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-base font-semibold text-gray-800 mb-2 pb-2 border-b-2 border-blue-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",className:"text-blue-600",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"})}),"\uAE30\uC220\uD601\uC2E0\uC815\uB3C4"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:"\uC5F0\uAD6C\uAC1C\uBC1C\uC9D1\uC57D\uB3C4\uC5D0 \uB530\uB77C \uC81C\uC870\uC5C5\uC744 \uCCA8\uB2E8\uAE30\uC220, \uACE0\uAE30\uC220, \uC911\uAE30\uC220, \uC800\uAE30\uC220 \uB4F1\uC73C\uB85C \uBD84\uB958\uD558\uB294 \uC0B0\uC5C5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F680} \uCCA8\uB2E8\uAE30\uC220\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uAE30\uC220\uC9D1\uC57D\uB3C4\uAC00 \uB192\uACE0 \uC81C\uD488\uC758 \uC218\uBA85\uC8FC\uAE30\uAC00 \uC9E7\uC73C\uBA70 \uACBD\uC81C\uC801 \uD30C\uAE09\uD6A8\uACFC\uAC00 \uD070 \uC0B0\uC5C5"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F527} \uACE0\uAE30\uC220\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uC9C4\uBCF4\uB418\uACE0 \uC815\uAD50\uD55C \uAE30\uC220\uC744 \uD3EC\uD568\uD558\uB294 \uC0B0\uC5C5"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F529} \uC911\uAE30\uC220\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uAE30\uC220\uC774\uC804\uC774 \uC6A9\uC774\uD55C \uC131\uC219\uAE30\uC220\uC744 \uD3EC\uD568\uD558\uB294 \uC0B0\uC5C5"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F528} \uC800\uAE30\uC220\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uC0AC\uD68C\uC758 \uB2E4\uC591\uD55C \uC138\uBD80 \uBD84\uC57C\uC5D0 \uCE68\uD22C\uB418\uC5B4 \uB0AE\uC740 \uC218\uC900\uC758 \uACF5\uC5C5\uAE30\uC220 \uC0B0\uC5C5"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-base font-semibold text-gray-800 mb-2 pb-2 border-b-2 border-blue-600",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",className:"text-blue-600",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"})}),"\uC9C0\uC2DD\uC9D1\uC57D\uC815\uB3C4"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:"\uAE30\uC220, \uC815\uBCF4, \uC9C0\uC2DD \uB4F1 \uBB34\uD615\uC790\uC0B0\uC758 \uD65C\uC6A9\uB3C4\uAC00 \uB192\uC740 \uC815\uBCF4 \uD1B5\uC2E0\uC5C5, \uAE08\uC735 \uBC0F \uBCF4\uD5D8\uC5C5, \uC0AC\uC5C5\uC11C\uBE44\uC2A4\uC5C5 \uB4F1\uC73C\uB85C \uBD84\uB958\uD558\uB294 \uC0B0\uC5C5"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F3A8} \uCC3D\uC758 \uBC0F \uB514\uC9C0\uD138 \uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uC778\uAC04\uC758 \uAC10\uC131, \uCC3D\uC758\uB825, \uC0C1\uC0C1\uB825\uC744 \uAE30\uBC18\uC73C\uB85C \uACBD\uC81C\uC801 \uAC00\uCE58\uB97C \uCC3D\uCD9C\uD558\uB294 \uC0B0\uC5C5"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F4BB} ICT\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uC815\uBCF4\uD1B5\uC2E0\uAE30\uC220\uC744 \uAE30\uBC18\uC73C\uB85C \uD558\uB294 \uC804\uAE30\uD1B5\uC2E0, \uCEF4\uD4E8\uD130 \uD504\uB85C\uADF8\uB7A8 \uB4F1\uC744 \uD3EC\uD568\uD558\uB294 \uC815\uBCF4\uC11C\uBE44\uC2A4 \uC0B0\uC5C5"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-600 mb-1 flex items-center gap-1",children:"\u{1F4BC} \uC804\uBB38\uC11C\uBE44\uC2A4\uC5C5\uC885"}),e.jsx("div",{className:"text-xs text-gray-600 leading-relaxed",children:"\uC804\uBB38\uC9C0\uC2DD\uC744 \uAC16\uCD98 \uC778\uB825\uC790\uC6D0\uC774 \uC8FC\uC694 \uC694\uC18C\uB85C \uD22C\uC785\uB418\uB294 \uC0B0\uC5C5"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-400 text-right",children:"\u2139\uFE0F \uCD9C\uCC98: SGIS \uD1B5\uACC4\uC9C0\uB9AC\uC815\uBCF4\uC11C\uBE44\uC2A4"})]})]})}):null}function ug(){const r=o.useRef(null),[n,c]=o.useState(800),[d,p]=o.useState(!1);return o.useEffect(()=>{const m=r.current;if(!m)return;const v=()=>{var D;try{const R=m.contentDocument||((D=m.contentWindow)==null?void 0:D.document);if(R&&R.body){const _=Math.max(R.documentElement.scrollHeight,R.body.scrollHeight);c(_)}}catch{c(1600)}};m.addEventListener("load",v);const I=setInterval(v,500);return()=>{m.removeEventListener("load",v),clearInterval(I)}},[]),o.useEffect(()=>{const m=v=>{v.data&&v.data.type==="openTechInfoModal"&&p(!0)};return window.addEventListener("message",m),()=>window.removeEventListener("message",m)},[]),e.jsxs("div",{className:"overflow-visible",children:[e.jsx("iframe",{ref:r,src:sg,title:"\uD1B5\uACC4 \uB300\uC2DC\uBCF4\uB4DC",className:"w-full border-0",style:{height:`${n}px`,minHeight:"600px"}}),e.jsx(rg,{isOpen:d,onClose:()=>p(!1)})]})}function ng({onOpenCourse:r}){const[n,c]=o.useState(""),[d,p]=o.useState(""),[m,v]=o.useState([]),[I,D]=o.useState(!1),[R,_]=o.useState(null),[L,j]=o.useState(1),[T,W]=o.useState(20),[G,B]=o.useState(0),[q,H]=o.useState("all"),[P,z]=o.useState(""),[Y,h]=o.useState(""),g=Math.max(1,Math.ceil(G/T)),F=o.useMemo(()=>{const w=Math.max(1,L-2),C=Math.min(g,L+2);return Array.from({length:C-w+1},(f,k)=>w+k)},[L,g]);o.useEffect(()=>{let w=!1;return(async()=>{D(!0),_(null);try{const f=await le.getHomeworkSubmissions({keyword:d||void 0,page:L,pageSize:T,startDate:P||void 0,endDate:Y||void 0,status:q==="all"?void 0:q});if(f.rst_code!=="0000")throw new Error(f.rst_message);if(w)return;v(f.rst_data??[]),B(Number(f.rst_total??f.rst_count??(f.rst_data??[]).length))}catch(f){w||_(f instanceof Error?f.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{w||D(!1)}})(),()=>{w=!0}},[L,T,d,P,Y,q]);const N=()=>{j(1),p(n.trim())},b=()=>{j(1)},K=w=>{r==null||r({courseId:w.course_id,courseName:w.course_nm,targetTab:"assignment-feedback",sourceType:w.source_type==="haksa"?"haksa":"prism"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"\uACFC\uC81C \uD1B5\uD569\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-600",children:"\uBAA8\uB4E0 \uACFC\uBAA9\uC758 \uACFC\uC81C \uC81C\uCD9C\uC744 \uD55C \uACF3\uC5D0\uC11C \uD655\uC778\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsx("input",{type:"text",value:n,onChange:w=>c(w.target.value),placeholder:"\uACFC\uC81C\uBA85/\uACFC\uBAA9\uBA85/\uD559\uC0DD\uBA85 \uAC80\uC0C9",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:w=>{w.key==="Enter"&&N()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:T,onChange:w=>{W(Number(w.target.value)),j(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:20,children:"20\uAC1C"}),e.jsx("option",{value:50,children:"50\uAC1C"}),e.jsx("option",{value:100,children:"100\uAC1C"})]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uAE30\uAC04"}),e.jsx("input",{type:"date",value:P,onChange:w=>{z(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"~"}),e.jsx("input",{type:"date",value:Y,onChange:w=>{h(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:q,onChange:w=>{H(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"\uC804\uCCB4"}),e.jsx("option",{value:"unconfirmed",children:"\uBBF8\uD655\uC778"}),e.jsx("option",{value:"confirmed",children:"\uD655\uC778\uC644\uB8CC"})]})]})]})]}),R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:R}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uC81C \uC81C\uCD9C \uBAA9\uB85D"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",G,"\uAC74"]})]}),I?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):m.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(w=>{const C=!!w.confirmed,f=`${w.user_nm||"-"} \xB7 ${w.course_nm}`,k=w.submitted_at||"-";return e.jsxs("button",{type:"button",onClick:()=>K(w),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:w.homework_nm}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:f})]}),C?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"\uD655\uC778\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uD655\uC778"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:k})]})]},`${w.homework_id}-${w.course_user_id}`)})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>j(w=>Math.max(1,w-1)),disabled:L<=1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uC774\uC804"}),F.map(w=>e.jsx("button",{onClick:()=>j(w),className:`px-3 py-2 border rounded-lg text-sm ${w===L?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:w},w)),e.jsx("button",{onClick:()=>j(w=>Math.min(g,w+1)),disabled:L>=g,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uB2E4\uC74C"})]})]})}function ag({onOpenCourse:r}){const[n,c]=o.useState(""),[d,p]=o.useState(""),[m,v]=o.useState([]),[I,D]=o.useState(!1),[R,_]=o.useState(null),[L,j]=o.useState(1),[T,W]=o.useState(20),[G,B]=o.useState(0),[q,H]=o.useState("all"),[P,z]=o.useState(""),[Y,h]=o.useState(""),g=Math.max(1,Math.ceil(G/T)),F=o.useMemo(()=>{const w=Math.max(1,L-2),C=Math.min(g,L+2);return Array.from({length:C-w+1},(f,k)=>w+k)},[L,g]);o.useEffect(()=>{let w=!1;return(async()=>{D(!0),_(null);try{const f=await le.getQnaManageList({keyword:d||void 0,page:L,pageSize:T,startDate:P||void 0,endDate:Y||void 0,status:q==="all"?void 0:q});if(f.rst_code!=="0000")throw new Error(f.rst_message);if(w)return;v(f.rst_data??[]),B(Number(f.rst_total??f.rst_count??(f.rst_data??[]).length))}catch(f){w||_(f instanceof Error?f.message:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{w||D(!1)}})(),()=>{w=!0}},[L,T,d,P,Y,q]);const N=()=>{j(1),p(n.trim())},b=()=>{j(1)},K=w=>{r==null||r({courseId:w.course_id,courseName:w.course_nm,targetTab:"qna",qnaPostId:w.post_id,sourceType:w.source_type==="haksa"?"haksa":"prism"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"Q&A \uD1B5\uD569\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-600",children:"\uBAA8\uB4E0 \uACFC\uBAA9\uC758 Q&A\uB97C \uD55C \uD654\uBA74\uC5D0\uC11C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsx("input",{type:"text",value:n,onChange:w=>c(w.target.value),placeholder:"\uC81C\uBAA9/\uACFC\uBAA9\uBA85/\uC791\uC131\uC790 \uAC80\uC0C9",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:w=>{w.key==="Enter"&&N()}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:T,onChange:w=>{W(Number(w.target.value)),j(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:20,children:"20\uAC1C"}),e.jsx("option",{value:50,children:"50\uAC1C"}),e.jsx("option",{value:100,children:"100\uAC1C"})]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uAE30\uAC04"}),e.jsx("input",{type:"date",value:P,onChange:w=>{z(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-sm text-gray-400",children:"~"}),e.jsx("input",{type:"date",value:Y,onChange:w=>{h(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:q,onChange:w=>{H(w.target.value),b()},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"\uC804\uCCB4"}),e.jsx("option",{value:"unanswered",children:"\uBBF8\uB2F5\uBCC0"}),e.jsx("option",{value:"answered",children:"\uB2F5\uBCC0\uC644\uB8CC"})]})]})]})]}),R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:R}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"Q&A \uBAA9\uB85D"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",G,"\uAC74"]})]}),I?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):m.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(w=>e.jsxs("button",{type:"button",onClick:()=>K(w),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:w.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[w.user_nm||"-"," \xB7 ",w.course_nm]})]}),w.answered?e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:"\uB2F5\uBCC0\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uB2F5\uBCC0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Lr,{className:"w-4 h-4"}),e.jsx("span",{children:w.reg_date_conv||"-"})]})]},w.post_id))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>j(w=>Math.max(1,w-1)),disabled:L<=1,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uC774\uC804"}),F.map(w=>e.jsx("button",{onClick:()=>j(w),className:`px-3 py-2 border rounded-lg text-sm ${w===L?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:w},w)),e.jsx("button",{onClick:()=>j(w=>Math.min(g,w+1)),disabled:L>=g,className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 disabled:opacity-50",children:"\uB2E4\uC74C"})]})]})}const lg=["dashboard","explore","courses","assignment-manage","qna-manage","create-course","content-all","content-favorites","exam-categories","exam-questions","exam-management","subject-create","statistics"],ig=new Set(lg),og=["basic","subjects"],cg=new Set(og),dg=["basic","learners","curriculum","confirm"],Cg=new Set(dg),mg=(r,n)=>{const c=Object.keys(r),d=Object.keys(n);if(c.length!==d.length)return!1;for(const p of c)if(r[p]!==n[p])return!1;return!0},xg=(r,n)=>r.menu===n.menu&&r.subPath===n.subPath&&mg(r.params,n.params),sd=r=>{const n=r.replace(/^#\/?/,"").trim();if(!n)return{menu:"dashboard",params:{},isFallback:!1};const[c,d]=n.split("?"),p=c.split("/").filter(Boolean),m=p[0]??"",v=ig.has(m),I={};return d&&new URLSearchParams(d).forEach((R,_)=>{R&&(I[_]=R)}),{menu:v?m:"dashboard",subPath:p.length>1?p.slice(1).join("/"):void 0,params:I,isFallback:!v}},gg=r=>{const n=[r.menu,r.subPath].filter(Boolean).join("/"),c=new URLSearchParams;Object.entries(r.params).forEach(([p,m])=>{m&&c.set(p,m)});const d=c.toString();return`#/${n}${d?`?${d}`:""}`};function pg(){const[r,n]=o.useState(()=>{const g=sd(window.location.hash);return{menu:g.menu,subPath:g.subPath,params:g.params}}),[c,d]=o.useState(!1),[p,m]=o.useState(!1),[v,I]=o.useState(0),D=r.menu,R=D==="content-all"||D==="content-favorites",_=D==="exam-categories"||D==="exam-questions"||D==="exam-management",L=o.useCallback((g,F=!1)=>{const N=gg(g);if(window.location.hash===N)return;const b=`${window.location.pathname}${window.location.search}${N}`;F?window.history.replaceState(null,"",b):window.location.hash=N},[]),j=o.useCallback((g,F)=>{n(N=>xg(N,g)?N:g),(g.menu==="content-all"||g.menu==="content-favorites")&&d(!0),(g.menu==="exam-categories"||g.menu==="exam-questions"||g.menu==="exam-management")&&m(!0),(F==null?void 0:F.syncHash)!==!1&&L(g,F==null?void 0:F.replaceHash)},[L]),T=o.useCallback(g=>{j({menu:g,params:{}})},[j]),W=o.useCallback(g=>{const F={courseId:String(g.courseId),cmTab:g.targetTab??"attendance",source:g.sourceType??"prism",direct:"1"};g.courseName&&(F.courseName=g.courseName),g.qnaPostId&&(F.qnaPostId=String(g.qnaPostId)),j({menu:"courses",subPath:"manage",params:F})},[j]),G=o.useCallback(g=>{j({menu:"courses",subPath:g.subPath,params:g.params})},[j]);o.useEffect(()=>{const g=()=>{const F=sd(window.location.hash);if(F.isFallback){j({menu:"dashboard",params:{}},{syncHash:!0,replaceHash:!0});return}j({menu:F.menu,subPath:F.subPath,params:F.params},{syncHash:!1})};return g(),window.addEventListener("hashchange",g),()=>window.removeEventListener("hashchange",g)},[j]);const B=()=>{c?d(!c):T("content-all")},q=()=>{p?m(!p):T("exam-categories")},H=()=>{I(g=>g+1)},P=r.menu==="create-course"&&cg.has(r.params.step??"")?r.params.step:void 0,z=r.menu==="subject-create"&&Cg.has(r.params.step??"")?r.params.step:void 0,Y=o.useCallback(g=>{j({menu:"create-course",params:g==="basic"?{}:{step:g}})},[j]),h=o.useCallback(g=>{j({menu:"subject-create",params:g==="basic"?{}:{step:g}})},[j]);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:e.jsx(kl,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",children:"\uAD50\uC218\uC790 LMS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learning Management System"})]})]}),e.jsx("button",{onClick:H,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uD604\uC7AC \uD654\uBA74 \uC0C8\uB85C\uACE0\uCE68",children:e.jsx(vm,{className:"w-5 h-5"})})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 fixed top-[73px] left-0 h-[calc(100vh-73px)] overflow-y-auto z-40",children:e.jsxs("nav",{className:"p-4 flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>T("dashboard"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="dashboard"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(kl,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB300\uC2DC\uBCF4\uB4DC"})]}),e.jsxs("button",{onClick:()=>T("explore"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="explore"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(q0,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uD0D0\uC0C9"})]}),e.jsxs("button",{onClick:()=>T("courses"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="courses"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2F4\uB2F9\uACFC\uBAA9"})]}),e.jsxs("button",{onClick:()=>T("assignment-manage"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="assignment-manage"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ps,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC81C \uD1B5\uD569\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>T("qna-manage"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="qna-manage"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ks,{className:"w-5 h-5"}),e.jsx("span",{children:"Q&A \uD1B5\uD569\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>T("create-course"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="create-course"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(sm,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uAC1C\uC124"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:B,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${R?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mm,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"})]}),c?e.jsx(dr,{className:"w-4 h-4"}):e.jsx(Jt,{className:"w-4 h-4"})]}),c&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>T("content-all"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${D==="content-all"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC804\uCCB4 \uCF58\uD150\uCE20"})]}),e.jsxs("button",{onClick:()=>T("content-favorites"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${D==="content-favorites"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uCC1C\uD55C \uCF58\uD150\uCE20"})]})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:q,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${_?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ir,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]}),p?e.jsx(dr,{className:"w-4 h-4"}):e.jsx(Jt,{className:"w-4 h-4"})]}),p&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>T("exam-categories"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${D==="exam-categories"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uCE74\uD14C\uACE0\uB9AC"})]}),e.jsxs("button",{onClick:()=>T("exam-questions"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${D==="exam-questions"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uC740\uD589"})]}),e.jsxs("button",{onClick:()=>T("exam-management"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${D==="exam-management"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]})]})]}),e.jsxs("button",{onClick:()=>T("subject-create"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="subject-create"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(S0,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uBAA9\uAC1C\uC124"})]}),e.jsxs("button",{onClick:()=>T("statistics"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${D==="statistics"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(P0,{className:"w-5 h-5"}),e.jsx("span",{children:"\uD1B5\uACC4"})]})]})}),e.jsx("div",{className:"w-64 flex-shrink-0"}),e.jsx("main",{className:"flex-1 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:D==="dashboard"?e.jsx(Vx,{onNavigate:g=>T(g),onOpenCourse:W},v):D==="explore"?e.jsx(Kx,{},v):D==="courses"?e.jsx(Hx,{routeSubPath:r.subPath,routeParams:r.params,onRouteChange:G},v):D==="assignment-manage"?e.jsx(ng,{onOpenCourse:W},v):D==="qna-manage"?e.jsx(ag,{onOpenCourse:W},v):D==="create-course"?e.jsx(kx,{initialStep:P,onStepChange:Y,onCreated:()=>T("explore")},v):D==="content-all"?e.jsx(Zc,{activeTab:"all"},v):D==="content-favorites"?e.jsx(Zc,{activeTab:"favorites"},`${v}-fav`):D==="exam-categories"?e.jsx(Jx,{},v):D==="exam-questions"?e.jsx(tg,{},v):D==="exam-management"?e.jsx(Qm,{},v):D==="subject-create"?e.jsx(hd,{initialStep:z,onStepChange:h},v):D==="statistics"?e.jsx(ug,{},v):e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(kl,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uCEE8\uD150\uCE20 \uC601\uC5ED"}),e.jsx("p",{className:"text-sm mt-2",children:"\uBA54\uB274\uB97C \uC120\uD0DD\uD558\uBA74 \uAD00\uB828 \uB0B4\uC6A9\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4"})]})})})})]})]})}v0.createRoot(document.getElementById("root")).render(e.jsx(Ue.StrictMode,{children:e.jsx(pg,{})}));
