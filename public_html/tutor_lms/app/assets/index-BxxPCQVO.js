(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))m(x);new MutationObserver(x=>{for(const p of x)if(p.type==="childList")for(const B of p.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&m(B)}).observe(document,{childList:!0,subtree:!0});function o(x){const p={};return x.integrity&&(p.integrity=x.integrity),x.referrerPolicy&&(p.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?p.credentials="include":x.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function m(x){if(x.ep)return;x.ep=!0;const p=o(x);fetch(x.href,p)}})();function Wc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kl={exports:{}},An={},_l={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc;function tC(){if(Bc)return ze;Bc=1;var n=Symbol.for("react.element"),u=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),B=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=T&&h[T]||h["@@iterator"],typeof h=="function"?h:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,J={};function y(h,W,oe){this.props=h,this.context=W,this.refs=J,this.updater=oe||R}y.prototype.isReactComponent={},y.prototype.setState=function(h,W){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,W,"setState")},y.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function q(){}q.prototype=y.prototype;function P(h,W,oe){this.props=h,this.context=W,this.refs=J,this.updater=oe||R}var L=P.prototype=new q;L.constructor=P,G(L,y.prototype),L.isPureReactComponent=!0;var D=Array.isArray,k=Object.prototype.hasOwnProperty,A={current:null},g={key:!0,ref:!0,__self:!0,__source:!0};function M(h,W,oe){var ie,pe={},be=null,ee=null;if(W!=null)for(ie in W.ref!==void 0&&(ee=W.ref),W.key!==void 0&&(be=""+W.key),W)k.call(W,ie)&&!g.hasOwnProperty(ie)&&(pe[ie]=W[ie]);var re=arguments.length-2;if(re===1)pe.children=oe;else if(1<re){for(var ce=Array(re),ue=0;ue<re;ue++)ce[ue]=arguments[ue+2];pe.children=ce}if(h&&h.defaultProps)for(ie in re=h.defaultProps,re)pe[ie]===void 0&&(pe[ie]=re[ie]);return{$$typeof:n,type:h,key:be,ref:ee,props:pe,_owner:A.current}}function _(h,W){return{$$typeof:n,type:h.type,key:W,ref:h.ref,props:h.props,_owner:h._owner}}function j(h){return typeof h=="object"&&h!==null&&h.$$typeof===n}function O(h){var W={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(oe){return W[oe]})}var $=/\/+/g;function d(h,W){return typeof h=="object"&&h!==null&&h.key!=null?O(""+h.key):W.toString(36)}function f(h,W,oe,ie,pe){var be=typeof h;(be==="undefined"||be==="boolean")&&(h=null);var ee=!1;if(h===null)ee=!0;else switch(be){case"string":case"number":ee=!0;break;case"object":switch(h.$$typeof){case n:case u:ee=!0}}if(ee)return ee=h,pe=pe(ee),h=ie===""?"."+d(ee,0):ie,D(pe)?(oe="",h!=null&&(oe=h.replace($,"$&/")+"/"),f(pe,W,oe,"",function(ue){return ue})):pe!=null&&(j(pe)&&(pe=_(pe,oe+(!pe.key||ee&&ee.key===pe.key?"":(""+pe.key).replace($,"$&/")+"/")+h)),W.push(pe)),1;if(ee=0,ie=ie===""?".":ie+":",D(h))for(var re=0;re<h.length;re++){be=h[re];var ce=ie+d(be,re);ee+=f(be,W,oe,ce,pe)}else if(ce=N(h),typeof ce=="function")for(h=ce.call(h),re=0;!(be=h.next()).done;)be=be.value,ce=ie+d(be,re++),ee+=f(be,W,oe,ce,pe);else if(be==="object")throw W=String(h),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ee}function U(h,W,oe){if(h==null)return h;var ie=[],pe=0;return f(h,ie,"","",function(be){return W.call(oe,be,pe++)}),ie}function I(h){if(h._status===-1){var W=h._result;W=W(),W.then(function(oe){(h._status===0||h._status===-1)&&(h._status=1,h._result=oe)},function(oe){(h._status===0||h._status===-1)&&(h._status=2,h._result=oe)}),h._status===-1&&(h._status=0,h._result=W)}if(h._status===1)return h._result.default;throw h._result}var Q={current:null},z={transition:null},w={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:z,ReactCurrentOwner:A};function b(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:U,forEach:function(h,W,oe){U(h,function(){W.apply(this,arguments)},oe)},count:function(h){var W=0;return U(h,function(){W++}),W},toArray:function(h){return U(h,function(W){return W})||[]},only:function(h){if(!j(h))throw Error("React.Children.only expected to receive a single React element child.");return h}},ze.Component=y,ze.Fragment=o,ze.Profiler=x,ze.PureComponent=P,ze.StrictMode=m,ze.Suspense=v,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w,ze.act=b,ze.cloneElement=function(h,W,oe){if(h==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+h+".");var ie=G({},h.props),pe=h.key,be=h.ref,ee=h._owner;if(W!=null){if(W.ref!==void 0&&(be=W.ref,ee=A.current),W.key!==void 0&&(pe=""+W.key),h.type&&h.type.defaultProps)var re=h.type.defaultProps;for(ce in W)k.call(W,ce)&&!g.hasOwnProperty(ce)&&(ie[ce]=W[ce]===void 0&&re!==void 0?re[ce]:W[ce])}var ce=arguments.length-2;if(ce===1)ie.children=oe;else if(1<ce){re=Array(ce);for(var ue=0;ue<ce;ue++)re[ue]=arguments[ue+2];ie.children=re}return{$$typeof:n,type:h.type,key:pe,ref:be,props:ie,_owner:ee}},ze.createContext=function(h){return h={$$typeof:B,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},h.Provider={$$typeof:p,_context:h},h.Consumer=h},ze.createElement=M,ze.createFactory=function(h){var W=M.bind(null,h);return W.type=h,W},ze.createRef=function(){return{current:null}},ze.forwardRef=function(h){return{$$typeof:F,render:h}},ze.isValidElement=j,ze.lazy=function(h){return{$$typeof:S,_payload:{_status:-1,_result:h},_init:I}},ze.memo=function(h,W){return{$$typeof:H,type:h,compare:W===void 0?null:W}},ze.startTransition=function(h){var W=z.transition;z.transition={};try{h()}finally{z.transition=W}},ze.unstable_act=b,ze.useCallback=function(h,W){return Q.current.useCallback(h,W)},ze.useContext=function(h){return Q.current.useContext(h)},ze.useDebugValue=function(){},ze.useDeferredValue=function(h){return Q.current.useDeferredValue(h)},ze.useEffect=function(h,W){return Q.current.useEffect(h,W)},ze.useId=function(){return Q.current.useId()},ze.useImperativeHandle=function(h,W,oe){return Q.current.useImperativeHandle(h,W,oe)},ze.useInsertionEffect=function(h,W){return Q.current.useInsertionEffect(h,W)},ze.useLayoutEffect=function(h,W){return Q.current.useLayoutEffect(h,W)},ze.useMemo=function(h,W){return Q.current.useMemo(h,W)},ze.useReducer=function(h,W,oe){return Q.current.useReducer(h,W,oe)},ze.useRef=function(h){return Q.current.useRef(h)},ze.useState=function(h){return Q.current.useState(h)},ze.useSyncExternalStore=function(h,W,oe){return Q.current.useSyncExternalStore(h,W,oe)},ze.useTransition=function(){return Q.current.useTransition()},ze.version="18.3.1",ze}var Nc;function zl(){return Nc||(Nc=1,_l.exports=tC()),_l.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc;function sC(){if(Dc)return An;Dc=1;var n=zl(),u=Symbol.for("react.element"),o=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function B(F,v,H){var S,T={},N=null,R=null;H!==void 0&&(N=""+H),v.key!==void 0&&(N=""+v.key),v.ref!==void 0&&(R=v.ref);for(S in v)m.call(v,S)&&!p.hasOwnProperty(S)&&(T[S]=v[S]);if(F&&F.defaultProps)for(S in v=F.defaultProps,v)T[S]===void 0&&(T[S]=v[S]);return{$$typeof:u,type:F,key:N,ref:R,props:T,_owner:x.current}}return An.Fragment=o,An.jsx=B,An.jsxs=B,An}var wc;function rC(){return wc||(wc=1,kl.exports=sC()),kl.exports}var e=rC(),c=zl();const Me=Wc(c);var Lu={},Sl={exports:{}},$t={},El={exports:{}},Fl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ac;function nC(){return Ac||(Ac=1,(function(n){function u(z,w){var b=z.length;z.push(w);e:for(;0<b;){var h=b-1>>>1,W=z[h];if(0<x(W,w))z[h]=w,z[b]=W,b=h;else break e}}function o(z){return z.length===0?null:z[0]}function m(z){if(z.length===0)return null;var w=z[0],b=z.pop();if(b!==w){z[0]=b;e:for(var h=0,W=z.length,oe=W>>>1;h<oe;){var ie=2*(h+1)-1,pe=z[ie],be=ie+1,ee=z[be];if(0>x(pe,b))be<W&&0>x(ee,pe)?(z[h]=ee,z[be]=b,h=be):(z[h]=pe,z[ie]=b,h=ie);else if(be<W&&0>x(ee,b))z[h]=ee,z[be]=b,h=be;else break e}}return w}function x(z,w){var b=z.sortIndex-w.sortIndex;return b!==0?b:z.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;n.unstable_now=function(){return p.now()}}else{var B=Date,F=B.now();n.unstable_now=function(){return B.now()-F}}var v=[],H=[],S=1,T=null,N=3,R=!1,G=!1,J=!1,y=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var w=o(H);w!==null;){if(w.callback===null)m(H);else if(w.startTime<=z)m(H),w.sortIndex=w.expirationTime,u(v,w);else break;w=o(H)}}function D(z){if(J=!1,L(z),!G)if(o(v)!==null)G=!0,I(k);else{var w=o(H);w!==null&&Q(D,w.startTime-z)}}function k(z,w){G=!1,J&&(J=!1,q(M),M=-1),R=!0;var b=N;try{for(L(w),T=o(v);T!==null&&(!(T.expirationTime>w)||z&&!O());){var h=T.callback;if(typeof h=="function"){T.callback=null,N=T.priorityLevel;var W=h(T.expirationTime<=w);w=n.unstable_now(),typeof W=="function"?T.callback=W:T===o(v)&&m(v),L(w)}else m(v);T=o(v)}if(T!==null)var oe=!0;else{var ie=o(H);ie!==null&&Q(D,ie.startTime-w),oe=!1}return oe}finally{T=null,N=b,R=!1}}var A=!1,g=null,M=-1,_=5,j=-1;function O(){return!(n.unstable_now()-j<_)}function $(){if(g!==null){var z=n.unstable_now();j=z;var w=!0;try{w=g(!0,z)}finally{w?d():(A=!1,g=null)}}else A=!1}var d;if(typeof P=="function")d=function(){P($)};else if(typeof MessageChannel<"u"){var f=new MessageChannel,U=f.port2;f.port1.onmessage=$,d=function(){U.postMessage(null)}}else d=function(){y($,0)};function I(z){g=z,A||(A=!0,d())}function Q(z,w){M=y(function(){z(n.unstable_now())},w)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){G||R||(G=!0,I(k))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return o(v)},n.unstable_next=function(z){switch(N){case 1:case 2:case 3:var w=3;break;default:w=N}var b=N;N=w;try{return z()}finally{N=b}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,w){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var b=N;N=z;try{return w()}finally{N=b}},n.unstable_scheduleCallback=function(z,w,b){var h=n.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?h+b:h):b=h,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=b+W,z={id:S++,callback:w,priorityLevel:z,startTime:b,expirationTime:W,sortIndex:-1},b>h?(z.sortIndex=b,u(H,z),o(v)===null&&z===o(H)&&(J?(q(M),M=-1):J=!0,Q(D,b-h))):(z.sortIndex=W,u(v,z),G||R||(G=!0,I(k))),z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(z){var w=N;return function(){var b=N;N=w;try{return z.apply(this,arguments)}finally{N=b}}}})(Fl)),Fl}var kc;function uC(){return kc||(kc=1,El.exports=nC()),El.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c;function aC(){if(_c)return $t;_c=1;var n=zl(),u=uC();function o(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m=new Set,x={};function p(t,s){B(t,s),B(t+"Capture",s)}function B(t,s){for(x[t]=s,t=0;t<s.length;t++)m.add(s[t])}var F=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},T={};function N(t){return v.call(T,t)?!0:v.call(S,t)?!1:H.test(t)?T[t]=!0:(S[t]=!0,!1)}function R(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,s,r,a){if(s===null||typeof s>"u"||R(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function J(t,s,r,a,l,i,C){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=C}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){y[t]=new J(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];y[s]=new J(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){y[t]=new J(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){y[t]=new J(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){y[t]=new J(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){y[t]=new J(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){y[t]=new J(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){y[t]=new J(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){y[t]=new J(t,5,!1,t.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function P(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(q,P);y[s]=new J(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(q,P);y[s]=new J(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(q,P);y[s]=new J(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){y[t]=new J(t,1,!1,t.toLowerCase(),null,!1,!1)}),y.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){y[t]=new J(t,1,!1,t.toLowerCase(),null,!0,!0)});function L(t,s,r,a){var l=y.hasOwnProperty(s)?y[s]:null;(l!==null?l.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(G(s,r,l,a)&&(r=null),a||l===null?N(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):l.mustUseProperty?t[l.propertyName]=r===null?l.type===3?!1:"":r:(s=l.attributeName,a=l.attributeNamespace,r===null?t.removeAttribute(s):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),A=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),z=Symbol.iterator;function w(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var b=Object.assign,h;function W(t){if(h===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);h=s&&s[1]||""}return`
`+h+t}var oe=!1;function ie(t,s){if(!t||oe)return"";oe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(se){var a=se}Reflect.construct(t,[],s)}else{try{s.call()}catch(se){a=se}t.call(s.prototype)}else{try{throw Error()}catch(se){a=se}t()}}catch(se){if(se&&a&&typeof se.stack=="string"){for(var l=se.stack.split(`
`),i=a.stack.split(`
`),C=l.length-1,E=i.length-1;1<=C&&0<=E&&l[C]!==i[E];)E--;for(;1<=C&&0<=E;C--,E--)if(l[C]!==i[E]){if(C!==1||E!==1)do if(C--,E--,0>E||l[C]!==i[E]){var Y=`
`+l[C].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=C&&0<=E);break}}}finally{oe=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?W(t):""}function pe(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=ie(t.type,!1),t;case 11:return t=ie(t.type.render,!1),t;case 1:return t=ie(t.type,!0),t;default:return""}}function be(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case g:return"Fragment";case A:return"Portal";case _:return"Profiler";case M:return"StrictMode";case d:return"Suspense";case f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case j:return(t._context.displayName||"Context")+".Provider";case $:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return s=t.displayName||null,s!==null?s:be(t.type)||"Memo";case I:s=t._payload,t=t._init;try{return be(t(s))}catch{}}return null}function ee(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(s);case 8:return s===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function re(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ce(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ue(t){var s=ce(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(C){a=""+C,i.call(this,C)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function de(t){t._valueTracker||(t._valueTracker=ue(t))}function Z(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=ce(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function ae(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xe(t,s){var r=s.checked;return b({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Te(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=re(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ne(t,s){s=s.checked,s!=null&&L(t,"checked",s,!1)}function ye(t,s){ne(t,s);var r=re(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Be(t,s.type,r):s.hasOwnProperty("defaultValue")&&Be(t,s.type,re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Fe(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Be(t,s,r){(s!=="number"||ae(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var we=Array.isArray;function Ye(t,s,r,a){if(t=t.options,s){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=!0;for(r=0;r<t.length;r++)l=s.hasOwnProperty("$"+t[r].value),t[r].selected!==l&&(t[r].selected=l),l&&a&&(t[r].defaultSelected=!0)}else{for(r=""+re(r),s=null,l=0;l<t.length;l++){if(t[l].value===r){t[l].selected=!0,a&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function ke(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(o(91));return b({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function je(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(o(92));if(we(r)){if(1<r.length)throw Error(o(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:re(r)}}function Xe(t,s){var r=re(s.value),a=re(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Ge(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function bt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dt(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?bt(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var It,at=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,l){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,l)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(It=It||document.createElement("div"),It.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=It.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Qt(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Zt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tr=["Webkit","ms","Moz","O"];Object.keys(Zt).forEach(function(t){tr.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Zt[s]=Zt[t]})});function es(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Zt.hasOwnProperty(t)&&Zt[t]?(""+s).trim():s+"px"}function mt(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,l=es(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,l):t[r]=l}}var Es=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(t,s){if(s){if(Es[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(o(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(o(61))}if(s.style!=null&&typeof s.style!="object")throw Error(o(62))}}function xt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cs=null;function K(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pe=null,Ee=null,Ue=null;function Qe(t){if(t=Cn(t)){if(typeof Pe!="function")throw Error(o(280));var s=t.stateNode;s&&(s=qn(s),Pe(t.stateNode,t.type,s))}}function Oe(t){Ee?Ue?Ue.push(t):Ue=[t]:Ee=t}function Ne(){if(Ee){var t=Ee,s=Ue;if(Ue=Ee=null,Qe(t),s)for(t=0;t<s.length;t++)Qe(s[t])}}function Je(t,s){return t(s)}function ct(){}var Vt=!1;function Fs(t,s,r){if(Vt)return t(s,r);Vt=!0;try{return Je(t,s,r)}finally{Vt=!1,(Ee!==null||Ue!==null)&&(ct(),Ne())}}function ts(t,s){var r=t.stateNode;if(r===null)return null;var a=qn(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var vs=!1;if(F)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){vs=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{vs=!1}function Yl(t,s,r,a,l,i,C,E,Y){var se=Array.prototype.slice.call(arguments,3);try{s.apply(r,se)}catch(me){this.onError(me)}}var Vr=!1,kn=null,_n=!1,Wu=null,id={onError:function(t){Vr=!0,kn=t}};function od(t,s,r,a,l,i,C,E,Y){Vr=!1,kn=null,Yl.apply(id,arguments)}function cd(t,s,r,a,l,i,C,E,Y){if(od.apply(this,arguments),Vr){if(Vr){var se=kn;Vr=!1,kn=null}else throw Error(o(198));_n||(_n=!0,Wu=se)}}function rr(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Ql(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Vl(t){if(rr(t)!==t)throw Error(o(188))}function dd(t){var s=t.alternate;if(!s){if(s=rr(t),s===null)throw Error(o(188));return s!==t?null:t}for(var r=t,a=s;;){var l=r.return;if(l===null)break;var i=l.alternate;if(i===null){if(a=l.return,a!==null){r=a;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===r)return Vl(l),t;if(i===a)return Vl(l),s;i=i.sibling}throw Error(o(188))}if(r.return!==a.return)r=l,a=i;else{for(var C=!1,E=l.child;E;){if(E===r){C=!0,r=l,a=i;break}if(E===a){C=!0,a=l,r=i;break}E=E.sibling}if(!C){for(E=i.child;E;){if(E===r){C=!0,r=i,a=l;break}if(E===a){C=!0,a=i,r=l;break}E=E.sibling}if(!C)throw Error(o(189))}}if(r.alternate!==a)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:s}function Wl(t){return t=dd(t),t!==null?Kl(t):null}function Kl(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Kl(t);if(s!==null)return s;t=t.sibling}return null}var Gl=u.unstable_scheduleCallback,ql=u.unstable_cancelCallback,Cd=u.unstable_shouldYield,md=u.unstable_requestPaint,lt=u.unstable_now,xd=u.unstable_getCurrentPriorityLevel,Ku=u.unstable_ImmediatePriority,Jl=u.unstable_UserBlockingPriority,Sn=u.unstable_NormalPriority,gd=u.unstable_LowPriority,Xl=u.unstable_IdlePriority,En=null,ms=null;function hd(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(En,t,void 0,(t.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:yd,pd=Math.log,fd=Math.LN2;function yd(t){return t>>>=0,t===0?32:31-(pd(t)/fd|0)|0}var Fn=64,Tn=4194304;function Wr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function In(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,l=t.suspendedLanes,i=t.pingedLanes,C=r&268435455;if(C!==0){var E=C&~l;E!==0?a=Wr(E):(i&=C,i!==0&&(a=Wr(i)))}else C=r&~l,C!==0?a=Wr(C):i!==0&&(a=Wr(i));if(a===0)return 0;if(s!==0&&s!==a&&(s&l)===0&&(l=a&-a,i=s&-s,l>=i||l===16&&(i&4194240)!==0))return s;if((a&4)!==0&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-ss(s),l=1<<r,a|=t[r],s&=~l;return a}function bd(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vd(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,l=t.expirationTimes,i=t.pendingLanes;0<i;){var C=31-ss(i),E=1<<C,Y=l[C];Y===-1?((E&r)===0||(E&a)!==0)&&(l[C]=bd(E,s)):Y<=s&&(t.expiredLanes|=E),i&=~E}}function Gu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zl(){var t=Fn;return Fn<<=1,(Fn&4194240)===0&&(Fn=64),t}function qu(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Kr(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ss(s),t[s]=r}function jd(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var l=31-ss(r),i=1<<l;s[l]=0,a[l]=-1,t[l]=-1,r&=~i}}function Ju(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-ss(r),l=1<<a;l&s|t[a]&s&&(t[a]|=s),r&=~l}}var qe=0;function ei(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ti,Xu,si,ri,ni,Zu=!1,Ln=[],Ts=null,Is=null,Ls=null,Gr=new Map,qr=new Map,Ms=[],Bd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ui(t,s){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Gr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(s.pointerId)}}function Jr(t,s,r,a,l,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[l]},s!==null&&(s=Cn(s),s!==null&&Xu(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function Nd(t,s,r,a,l){switch(s){case"focusin":return Ts=Jr(Ts,t,s,r,a,l),!0;case"dragenter":return Is=Jr(Is,t,s,r,a,l),!0;case"mouseover":return Ls=Jr(Ls,t,s,r,a,l),!0;case"pointerover":var i=l.pointerId;return Gr.set(i,Jr(Gr.get(i)||null,t,s,r,a,l)),!0;case"gotpointercapture":return i=l.pointerId,qr.set(i,Jr(qr.get(i)||null,t,s,r,a,l)),!0}return!1}function ai(t){var s=nr(t.target);if(s!==null){var r=rr(s);if(r!==null){if(s=r.tag,s===13){if(s=Ql(r),s!==null){t.blockedOn=s,ni(t.priority,function(){si(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mn(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=ta(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Cs=a,r.target.dispatchEvent(a),Cs=null}else return s=Cn(r),s!==null&&Xu(s),t.blockedOn=r,!1;s.shift()}return!0}function li(t,s,r){Mn(t)&&r.delete(s)}function Dd(){Zu=!1,Ts!==null&&Mn(Ts)&&(Ts=null),Is!==null&&Mn(Is)&&(Is=null),Ls!==null&&Mn(Ls)&&(Ls=null),Gr.forEach(li),qr.forEach(li)}function Xr(t,s){t.blockedOn===s&&(t.blockedOn=null,Zu||(Zu=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Dd)))}function Zr(t){function s(l){return Xr(l,t)}if(0<Ln.length){Xr(Ln[0],t);for(var r=1;r<Ln.length;r++){var a=Ln[r];a.blockedOn===t&&(a.blockedOn=null)}}for(Ts!==null&&Xr(Ts,t),Is!==null&&Xr(Is,t),Ls!==null&&Xr(Ls,t),Gr.forEach(s),qr.forEach(s),r=0;r<Ms.length;r++)a=Ms[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Ms.length&&(r=Ms[0],r.blockedOn===null);)ai(r),r.blockedOn===null&&Ms.shift()}var yr=D.ReactCurrentBatchConfig,Rn=!0;function wd(t,s,r,a){var l=qe,i=yr.transition;yr.transition=null;try{qe=1,ea(t,s,r,a)}finally{qe=l,yr.transition=i}}function Ad(t,s,r,a){var l=qe,i=yr.transition;yr.transition=null;try{qe=4,ea(t,s,r,a)}finally{qe=l,yr.transition=i}}function ea(t,s,r,a){if(Rn){var l=ta(t,s,r,a);if(l===null)fa(t,s,a,On,r),ui(t,a);else if(Nd(l,t,s,r,a))a.stopPropagation();else if(ui(t,a),s&4&&-1<Bd.indexOf(t)){for(;l!==null;){var i=Cn(l);if(i!==null&&ti(i),i=ta(t,s,r,a),i===null&&fa(t,s,a,On,r),i===l)break;l=i}l!==null&&a.stopPropagation()}else fa(t,s,a,null,r)}}var On=null;function ta(t,s,r,a){if(On=null,t=K(a),t=nr(t),t!==null)if(s=rr(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Ql(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return On=t,null}function ii(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xd()){case Ku:return 1;case Jl:return 4;case Sn:case gd:return 16;case Xl:return 536870912;default:return 16}default:return 16}}var Rs=null,sa=null,Pn=null;function oi(){if(Pn)return Pn;var t,s=sa,r=s.length,a,l="value"in Rs?Rs.value:Rs.textContent,i=l.length;for(t=0;t<r&&s[t]===l[t];t++);var C=r-t;for(a=1;a<=C&&s[r-a]===l[i-a];a++);return Pn=l.slice(t,1<a?1-a:void 0)}function $n(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function zn(){return!0}function ci(){return!1}function zt(t){function s(r,a,l,i,C){this._reactName=r,this._targetInst=l,this.type=a,this.nativeEvent=i,this.target=C,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(i):i[E]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zn:ci,this.isPropagationStopped=ci,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),s}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=zt(br),en=b({},br,{view:0,detail:0}),kd=zt(en),na,ua,tn,Un=b({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tn&&(tn&&t.type==="mousemove"?(na=t.screenX-tn.screenX,ua=t.screenY-tn.screenY):ua=na=0,tn=t),na)},movementY:function(t){return"movementY"in t?t.movementY:ua}}),di=zt(Un),_d=b({},Un,{dataTransfer:0}),Sd=zt(_d),Ed=b({},en,{relatedTarget:0}),aa=zt(Ed),Fd=b({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),Td=zt(Fd),Id=b({},br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ld=zt(Id),Md=b({},br,{data:0}),Ci=zt(Md),Rd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $d(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Pd[t])?!!s[t]:!1}function la(){return $d}var zd=b({},en,{key:function(t){if(t.key){var s=Rd[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=$n(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Od[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(t){return t.type==="keypress"?$n(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$n(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ud=zt(zd),Hd=b({},Un,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mi=zt(Hd),Yd=b({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),Qd=zt(Yd),Vd=b({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wd=zt(Vd),Kd=b({},Un,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gd=zt(Kd),qd=[9,13,27,32],ia=F&&"CompositionEvent"in window,sn=null;F&&"documentMode"in document&&(sn=document.documentMode);var Jd=F&&"TextEvent"in window&&!sn,xi=F&&(!ia||sn&&8<sn&&11>=sn),gi=" ",hi=!1;function pi(t,s){switch(t){case"keyup":return qd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fi(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function Xd(t,s){switch(t){case"compositionend":return fi(s);case"keypress":return s.which!==32?null:(hi=!0,gi);case"textInput":return t=s.data,t===gi&&hi?null:t;default:return null}}function Zd(t,s){if(vr)return t==="compositionend"||!ia&&pi(t,s)?(t=oi(),Pn=sa=Rs=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xi&&s.locale!=="ko"?null:s.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yi(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!e0[t.type]:s==="textarea"}function bi(t,s,r,a){Oe(a),s=Wn(s,"onChange"),0<s.length&&(r=new ra("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var rn=null,nn=null;function t0(t){Oi(t,0)}function Hn(t){var s=wr(t);if(Z(s))return t}function s0(t,s){if(t==="change")return s}var vi=!1;if(F){var oa;if(F){var ca="oninput"in document;if(!ca){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),ca=typeof ji.oninput=="function"}oa=ca}else oa=!1;vi=oa&&(!document.documentMode||9<document.documentMode)}function Bi(){rn&&(rn.detachEvent("onpropertychange",Ni),nn=rn=null)}function Ni(t){if(t.propertyName==="value"&&Hn(nn)){var s=[];bi(s,nn,t,K(t)),Fs(t0,s)}}function r0(t,s,r){t==="focusin"?(Bi(),rn=s,nn=r,rn.attachEvent("onpropertychange",Ni)):t==="focusout"&&Bi()}function n0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hn(nn)}function u0(t,s){if(t==="click")return Hn(s)}function a0(t,s){if(t==="input"||t==="change")return Hn(s)}function l0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var rs=typeof Object.is=="function"?Object.is:l0;function un(t,s){if(rs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var l=r[a];if(!v.call(s,l)||!rs(t[l],s[l]))return!1}return!0}function Di(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wi(t,s){var r=Di(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Di(r)}}function Ai(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ai(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ki(){for(var t=window,s=ae();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=ae(t.document)}return s}function da(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function i0(t){var s=ki(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&Ai(r.ownerDocument.documentElement,r)){if(a!==null&&da(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=r.textContent.length,i=Math.min(a.start,l);a=a.end===void 0?i:Math.min(a.end,l),!t.extend&&i>a&&(l=a,a=i,i=l),l=wi(r,i);var C=wi(r,a);l&&C&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),i>a?(t.addRange(s),t.extend(C.node,C.offset)):(s.setEnd(C.node,C.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var o0=F&&"documentMode"in document&&11>=document.documentMode,jr=null,Ca=null,an=null,ma=!1;function _i(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ma||jr==null||jr!==ae(a)||(a=jr,"selectionStart"in a&&da(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),an&&un(an,a)||(an=a,a=Wn(Ca,"onSelect"),0<a.length&&(s=new ra("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=jr)))}function Yn(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Br={animationend:Yn("Animation","AnimationEnd"),animationiteration:Yn("Animation","AnimationIteration"),animationstart:Yn("Animation","AnimationStart"),transitionend:Yn("Transition","TransitionEnd")},xa={},Si={};F&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function Qn(t){if(xa[t])return xa[t];if(!Br[t])return t;var s=Br[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Si)return xa[t]=s[r];return t}var Ei=Qn("animationend"),Fi=Qn("animationiteration"),Ti=Qn("animationstart"),Ii=Qn("transitionend"),Li=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,s){Li.set(t,s),p(s,[t])}for(var ga=0;ga<Mi.length;ga++){var ha=Mi[ga],c0=ha.toLowerCase(),d0=ha[0].toUpperCase()+ha.slice(1);Os(c0,"on"+d0)}Os(Ei,"onAnimationEnd"),Os(Fi,"onAnimationIteration"),Os(Ti,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Ii,"onTransitionEnd"),B("onMouseEnter",["mouseout","mouseover"]),B("onMouseLeave",["mouseout","mouseover"]),B("onPointerEnter",["pointerout","pointerover"]),B("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ln));function Ri(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,cd(a,s,void 0,t),t.currentTarget=null}function Oi(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],l=a.event;a=a.listeners;e:{var i=void 0;if(s)for(var C=a.length-1;0<=C;C--){var E=a[C],Y=E.instance,se=E.currentTarget;if(E=E.listener,Y!==i&&l.isPropagationStopped())break e;Ri(l,E,se),i=Y}else for(C=0;C<a.length;C++){if(E=a[C],Y=E.instance,se=E.currentTarget,E=E.listener,Y!==i&&l.isPropagationStopped())break e;Ri(l,E,se),i=Y}}}if(_n)throw t=Wu,_n=!1,Wu=null,t}function et(t,s){var r=s[Na];r===void 0&&(r=s[Na]=new Set);var a=t+"__bubble";r.has(a)||(Pi(s,t,2,!1),r.add(a))}function pa(t,s,r){var a=0;s&&(a|=4),Pi(r,t,a,s)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function on(t){if(!t[Vn]){t[Vn]=!0,m.forEach(function(r){r!=="selectionchange"&&(C0.has(r)||pa(r,!1,t),pa(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Vn]||(s[Vn]=!0,pa("selectionchange",!1,s))}}function Pi(t,s,r,a){switch(ii(s)){case 1:var l=wd;break;case 4:l=Ad;break;default:l=ea}r=l.bind(null,s,r,t),l=void 0,!vs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),a?l!==void 0?t.addEventListener(s,r,{capture:!0,passive:l}):t.addEventListener(s,r,!0):l!==void 0?t.addEventListener(s,r,{passive:l}):t.addEventListener(s,r,!1)}function fa(t,s,r,a,l){var i=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var C=a.tag;if(C===3||C===4){var E=a.stateNode.containerInfo;if(E===l||E.nodeType===8&&E.parentNode===l)break;if(C===4)for(C=a.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&(Y=C.stateNode.containerInfo,Y===l||Y.nodeType===8&&Y.parentNode===l))return;C=C.return}for(;E!==null;){if(C=nr(E),C===null)return;if(Y=C.tag,Y===5||Y===6){a=i=C;continue e}E=E.parentNode}}a=a.return}Fs(function(){var se=i,me=K(r),ge=[];e:{var Ce=Li.get(t);if(Ce!==void 0){var ve=ra,Ae=t;switch(t){case"keypress":if($n(r)===0)break e;case"keydown":case"keyup":ve=Ud;break;case"focusin":Ae="focus",ve=aa;break;case"focusout":Ae="blur",ve=aa;break;case"beforeblur":case"afterblur":ve=aa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Qd;break;case Ei:case Fi:case Ti:ve=Td;break;case Ii:ve=Wd;break;case"scroll":ve=kd;break;case"wheel":ve=Gd;break;case"copy":case"cut":case"paste":ve=Ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=mi}var _e=(s&4)!==0,it=!_e&&t==="scroll",X=_e?Ce!==null?Ce+"Capture":null:Ce;_e=[];for(var V=se,te;V!==null;){te=V;var fe=te.stateNode;if(te.tag===5&&fe!==null&&(te=fe,X!==null&&(fe=ts(V,X),fe!=null&&_e.push(cn(V,fe,te)))),it)break;V=V.return}0<_e.length&&(Ce=new ve(Ce,Ae,null,r,me),ge.push({event:Ce,listeners:_e}))}}if((s&7)===0){e:{if(Ce=t==="mouseover"||t==="pointerover",ve=t==="mouseout"||t==="pointerout",Ce&&r!==Cs&&(Ae=r.relatedTarget||r.fromElement)&&(nr(Ae)||Ae[js]))break e;if((ve||Ce)&&(Ce=me.window===me?me:(Ce=me.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,ve?(Ae=r.relatedTarget||r.toElement,ve=se,Ae=Ae?nr(Ae):null,Ae!==null&&(it=rr(Ae),Ae!==it||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(ve=null,Ae=se),ve!==Ae)){if(_e=di,fe="onMouseLeave",X="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(_e=mi,fe="onPointerLeave",X="onPointerEnter",V="pointer"),it=ve==null?Ce:wr(ve),te=Ae==null?Ce:wr(Ae),Ce=new _e(fe,V+"leave",ve,r,me),Ce.target=it,Ce.relatedTarget=te,fe=null,nr(me)===se&&(_e=new _e(X,V+"enter",Ae,r,me),_e.target=te,_e.relatedTarget=it,fe=_e),it=fe,ve&&Ae)t:{for(_e=ve,X=Ae,V=0,te=_e;te;te=Nr(te))V++;for(te=0,fe=X;fe;fe=Nr(fe))te++;for(;0<V-te;)_e=Nr(_e),V--;for(;0<te-V;)X=Nr(X),te--;for(;V--;){if(_e===X||X!==null&&_e===X.alternate)break t;_e=Nr(_e),X=Nr(X)}_e=null}else _e=null;ve!==null&&$i(ge,Ce,ve,_e,!1),Ae!==null&&it!==null&&$i(ge,it,Ae,_e,!0)}}e:{if(Ce=se?wr(se):window,ve=Ce.nodeName&&Ce.nodeName.toLowerCase(),ve==="select"||ve==="input"&&Ce.type==="file")var Se=s0;else if(yi(Ce))if(vi)Se=a0;else{Se=n0;var Ie=r0}else(ve=Ce.nodeName)&&ve.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(Se=u0);if(Se&&(Se=Se(t,se))){bi(ge,Se,r,me);break e}Ie&&Ie(t,Ce,se),t==="focusout"&&(Ie=Ce._wrapperState)&&Ie.controlled&&Ce.type==="number"&&Be(Ce,"number",Ce.value)}switch(Ie=se?wr(se):window,t){case"focusin":(yi(Ie)||Ie.contentEditable==="true")&&(jr=Ie,Ca=se,an=null);break;case"focusout":an=Ca=jr=null;break;case"mousedown":ma=!0;break;case"contextmenu":case"mouseup":case"dragend":ma=!1,_i(ge,r,me);break;case"selectionchange":if(o0)break;case"keydown":case"keyup":_i(ge,r,me)}var Le;if(ia)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else vr?pi(t,r)&&(Re="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(xi&&r.locale!=="ko"&&(vr||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&vr&&(Le=oi()):(Rs=me,sa="value"in Rs?Rs.value:Rs.textContent,vr=!0)),Ie=Wn(se,Re),0<Ie.length&&(Re=new Ci(Re,t,null,r,me),ge.push({event:Re,listeners:Ie}),Le?Re.data=Le:(Le=fi(r),Le!==null&&(Re.data=Le)))),(Le=Jd?Xd(t,r):Zd(t,r))&&(se=Wn(se,"onBeforeInput"),0<se.length&&(me=new Ci("onBeforeInput","beforeinput",null,r,me),ge.push({event:me,listeners:se}),me.data=Le))}Oi(ge,s)})}function cn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Wn(t,s){for(var r=s+"Capture",a=[];t!==null;){var l=t,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=ts(t,r),i!=null&&a.unshift(cn(t,i,l)),i=ts(t,s),i!=null&&a.push(cn(t,i,l))),t=t.return}return a}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $i(t,s,r,a,l){for(var i=s._reactName,C=[];r!==null&&r!==a;){var E=r,Y=E.alternate,se=E.stateNode;if(Y!==null&&Y===a)break;E.tag===5&&se!==null&&(E=se,l?(Y=ts(r,i),Y!=null&&C.unshift(cn(r,Y,E))):l||(Y=ts(r,i),Y!=null&&C.push(cn(r,Y,E)))),r=r.return}C.length!==0&&t.push({event:s,listeners:C})}var m0=/\r\n?/g,x0=/\u0000|\uFFFD/g;function zi(t){return(typeof t=="string"?t:""+t).replace(m0,`
`).replace(x0,"")}function Kn(t,s,r){if(s=zi(s),zi(t)!==s&&r)throw Error(o(425))}function Gn(){}var ya=null,ba=null;function va(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ja=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,Ui=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ui<"u"?function(t){return Ui.resolve(null).then(t).catch(p0)}:ja;function p0(t){setTimeout(function(){throw t})}function Ba(t,s){var r=s,a=0;do{var l=r.nextSibling;if(t.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(a===0){t.removeChild(l),Zr(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=l}while(r);Zr(s)}function Ps(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Hi(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),xs="__reactFiber$"+Dr,dn="__reactProps$"+Dr,js="__reactContainer$"+Dr,Na="__reactEvents$"+Dr,f0="__reactListeners$"+Dr,y0="__reactHandles$"+Dr;function nr(t){var s=t[xs];if(s)return s;for(var r=t.parentNode;r;){if(s=r[js]||r[xs]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Hi(t);t!==null;){if(r=t[xs])return r;t=Hi(t)}return s}t=r,r=t.parentNode}return null}function Cn(t){return t=t[xs]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function qn(t){return t[dn]||null}var Da=[],Ar=-1;function $s(t){return{current:t}}function tt(t){0>Ar||(t.current=Da[Ar],Da[Ar]=null,Ar--)}function Ze(t,s){Ar++,Da[Ar]=t.current,t.current=s}var zs={},wt=$s(zs),Lt=$s(!1),ur=zs;function kr(t,s){var r=t.type.contextTypes;if(!r)return zs;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in r)l[i]=s[i];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function Mt(t){return t=t.childContextTypes,t!=null}function Jn(){tt(Lt),tt(wt)}function Yi(t,s,r){if(wt.current!==zs)throw Error(o(168));Ze(wt,s),Ze(Lt,r)}function Qi(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var l in a)if(!(l in s))throw Error(o(108,ee(t)||"Unknown",l));return b({},r,a)}function Xn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zs,ur=wt.current,Ze(wt,t),Ze(Lt,Lt.current),!0}function Vi(t,s,r){var a=t.stateNode;if(!a)throw Error(o(169));r?(t=Qi(t,s,ur),a.__reactInternalMemoizedMergedChildContext=t,tt(Lt),tt(wt),Ze(wt,t)):tt(Lt),Ze(Lt,r)}var Bs=null,Zn=!1,wa=!1;function Wi(t){Bs===null?Bs=[t]:Bs.push(t)}function b0(t){Zn=!0,Wi(t)}function Us(){if(!wa&&Bs!==null){wa=!0;var t=0,s=qe;try{var r=Bs;for(qe=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}Bs=null,Zn=!1}catch(l){throw Bs!==null&&(Bs=Bs.slice(t+1)),Gl(Ku,Us),l}finally{qe=s,wa=!1}}return null}var _r=[],Sr=0,eu=null,tu=0,Wt=[],Kt=0,ar=null,Ns=1,Ds="";function lr(t,s){_r[Sr++]=tu,_r[Sr++]=eu,eu=t,tu=s}function Ki(t,s,r){Wt[Kt++]=Ns,Wt[Kt++]=Ds,Wt[Kt++]=ar,ar=t;var a=Ns;t=Ds;var l=32-ss(a)-1;a&=~(1<<l),r+=1;var i=32-ss(s)+l;if(30<i){var C=l-l%5;i=(a&(1<<C)-1).toString(32),a>>=C,l-=C,Ns=1<<32-ss(s)+l|r<<l|a,Ds=i+t}else Ns=1<<i|r<<l|a,Ds=t}function Aa(t){t.return!==null&&(lr(t,1),Ki(t,1,0))}function ka(t){for(;t===eu;)eu=_r[--Sr],_r[Sr]=null,tu=_r[--Sr],_r[Sr]=null;for(;t===ar;)ar=Wt[--Kt],Wt[Kt]=null,Ds=Wt[--Kt],Wt[Kt]=null,Ns=Wt[--Kt],Wt[Kt]=null}var Ut=null,Ht=null,st=!1,ns=null;function Gi(t,s){var r=Xt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function qi(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ut=t,Ht=Ps(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ut=t,Ht=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=ar!==null?{id:Ns,overflow:Ds}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Xt(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Ut=t,Ht=null,!0):!1;default:return!1}}function _a(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sa(t){if(st){var s=Ht;if(s){var r=s;if(!qi(t,s)){if(_a(t))throw Error(o(418));s=Ps(r.nextSibling);var a=Ut;s&&qi(t,s)?Gi(a,r):(t.flags=t.flags&-4097|2,st=!1,Ut=t)}}else{if(_a(t))throw Error(o(418));t.flags=t.flags&-4097|2,st=!1,Ut=t}}}function Ji(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function su(t){if(t!==Ut)return!1;if(!st)return Ji(t),st=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!va(t.type,t.memoizedProps)),s&&(s=Ht)){if(_a(t))throw Xi(),Error(o(418));for(;s;)Gi(t,s),s=Ps(s.nextSibling)}if(Ji(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Ht=Ps(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Ht=null}}else Ht=Ut?Ps(t.stateNode.nextSibling):null;return!0}function Xi(){for(var t=Ht;t;)t=Ps(t.nextSibling)}function Er(){Ht=Ut=null,st=!1}function Ea(t){ns===null?ns=[t]:ns.push(t)}var v0=D.ReactCurrentBatchConfig;function mn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(o(309));var a=r.stateNode}if(!a)throw Error(o(147,t));var l=a,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(C){var E=l.refs;C===null?delete E[i]:E[i]=C},s._stringRef=i,s)}if(typeof t!="string")throw Error(o(284));if(!r._owner)throw Error(o(290,t))}return t}function ru(t,s){throw t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Zi(t){var s=t._init;return s(t._payload)}function eo(t){function s(X,V){if(t){var te=X.deletions;te===null?(X.deletions=[V],X.flags|=16):te.push(V)}}function r(X,V){if(!t)return null;for(;V!==null;)s(X,V),V=V.sibling;return null}function a(X,V){for(X=new Map;V!==null;)V.key!==null?X.set(V.key,V):X.set(V.index,V),V=V.sibling;return X}function l(X,V){return X=qs(X,V),X.index=0,X.sibling=null,X}function i(X,V,te){return X.index=te,t?(te=X.alternate,te!==null?(te=te.index,te<V?(X.flags|=2,V):te):(X.flags|=2,V)):(X.flags|=1048576,V)}function C(X){return t&&X.alternate===null&&(X.flags|=2),X}function E(X,V,te,fe){return V===null||V.tag!==6?(V=jl(te,X.mode,fe),V.return=X,V):(V=l(V,te),V.return=X,V)}function Y(X,V,te,fe){var Se=te.type;return Se===g?me(X,V,te.props.children,fe,te.key):V!==null&&(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&Zi(Se)===V.type)?(fe=l(V,te.props),fe.ref=mn(X,V,te),fe.return=X,fe):(fe=Au(te.type,te.key,te.props,null,X.mode,fe),fe.ref=mn(X,V,te),fe.return=X,fe)}function se(X,V,te,fe){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Bl(te,X.mode,fe),V.return=X,V):(V=l(V,te.children||[]),V.return=X,V)}function me(X,V,te,fe,Se){return V===null||V.tag!==7?(V=gr(te,X.mode,fe,Se),V.return=X,V):(V=l(V,te),V.return=X,V)}function ge(X,V,te){if(typeof V=="string"&&V!==""||typeof V=="number")return V=jl(""+V,X.mode,te),V.return=X,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return te=Au(V.type,V.key,V.props,null,X.mode,te),te.ref=mn(X,null,V),te.return=X,te;case A:return V=Bl(V,X.mode,te),V.return=X,V;case I:var fe=V._init;return ge(X,fe(V._payload),te)}if(we(V)||w(V))return V=gr(V,X.mode,te,null),V.return=X,V;ru(X,V)}return null}function Ce(X,V,te,fe){var Se=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Se!==null?null:E(X,V,""+te,fe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case k:return te.key===Se?Y(X,V,te,fe):null;case A:return te.key===Se?se(X,V,te,fe):null;case I:return Se=te._init,Ce(X,V,Se(te._payload),fe)}if(we(te)||w(te))return Se!==null?null:me(X,V,te,fe,null);ru(X,te)}return null}function ve(X,V,te,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return X=X.get(te)||null,E(V,X,""+fe,Se);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case k:return X=X.get(fe.key===null?te:fe.key)||null,Y(V,X,fe,Se);case A:return X=X.get(fe.key===null?te:fe.key)||null,se(V,X,fe,Se);case I:var Ie=fe._init;return ve(X,V,te,Ie(fe._payload),Se)}if(we(fe)||w(fe))return X=X.get(te)||null,me(V,X,fe,Se,null);ru(V,fe)}return null}function Ae(X,V,te,fe){for(var Se=null,Ie=null,Le=V,Re=V=0,pt=null;Le!==null&&Re<te.length;Re++){Le.index>Re?(pt=Le,Le=null):pt=Le.sibling;var We=Ce(X,Le,te[Re],fe);if(We===null){Le===null&&(Le=pt);break}t&&Le&&We.alternate===null&&s(X,Le),V=i(We,V,Re),Ie===null?Se=We:Ie.sibling=We,Ie=We,Le=pt}if(Re===te.length)return r(X,Le),st&&lr(X,Re),Se;if(Le===null){for(;Re<te.length;Re++)Le=ge(X,te[Re],fe),Le!==null&&(V=i(Le,V,Re),Ie===null?Se=Le:Ie.sibling=Le,Ie=Le);return st&&lr(X,Re),Se}for(Le=a(X,Le);Re<te.length;Re++)pt=ve(Le,X,Re,te[Re],fe),pt!==null&&(t&&pt.alternate!==null&&Le.delete(pt.key===null?Re:pt.key),V=i(pt,V,Re),Ie===null?Se=pt:Ie.sibling=pt,Ie=pt);return t&&Le.forEach(function(Js){return s(X,Js)}),st&&lr(X,Re),Se}function _e(X,V,te,fe){var Se=w(te);if(typeof Se!="function")throw Error(o(150));if(te=Se.call(te),te==null)throw Error(o(151));for(var Ie=Se=null,Le=V,Re=V=0,pt=null,We=te.next();Le!==null&&!We.done;Re++,We=te.next()){Le.index>Re?(pt=Le,Le=null):pt=Le.sibling;var Js=Ce(X,Le,We.value,fe);if(Js===null){Le===null&&(Le=pt);break}t&&Le&&Js.alternate===null&&s(X,Le),V=i(Js,V,Re),Ie===null?Se=Js:Ie.sibling=Js,Ie=Js,Le=pt}if(We.done)return r(X,Le),st&&lr(X,Re),Se;if(Le===null){for(;!We.done;Re++,We=te.next())We=ge(X,We.value,fe),We!==null&&(V=i(We,V,Re),Ie===null?Se=We:Ie.sibling=We,Ie=We);return st&&lr(X,Re),Se}for(Le=a(X,Le);!We.done;Re++,We=te.next())We=ve(Le,X,Re,We.value,fe),We!==null&&(t&&We.alternate!==null&&Le.delete(We.key===null?Re:We.key),V=i(We,V,Re),Ie===null?Se=We:Ie.sibling=We,Ie=We);return t&&Le.forEach(function(eC){return s(X,eC)}),st&&lr(X,Re),Se}function it(X,V,te,fe){if(typeof te=="object"&&te!==null&&te.type===g&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case k:e:{for(var Se=te.key,Ie=V;Ie!==null;){if(Ie.key===Se){if(Se=te.type,Se===g){if(Ie.tag===7){r(X,Ie.sibling),V=l(Ie,te.props.children),V.return=X,X=V;break e}}else if(Ie.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===I&&Zi(Se)===Ie.type){r(X,Ie.sibling),V=l(Ie,te.props),V.ref=mn(X,Ie,te),V.return=X,X=V;break e}r(X,Ie);break}else s(X,Ie);Ie=Ie.sibling}te.type===g?(V=gr(te.props.children,X.mode,fe,te.key),V.return=X,X=V):(fe=Au(te.type,te.key,te.props,null,X.mode,fe),fe.ref=mn(X,V,te),fe.return=X,X=fe)}return C(X);case A:e:{for(Ie=te.key;V!==null;){if(V.key===Ie)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){r(X,V.sibling),V=l(V,te.children||[]),V.return=X,X=V;break e}else{r(X,V);break}else s(X,V);V=V.sibling}V=Bl(te,X.mode,fe),V.return=X,X=V}return C(X);case I:return Ie=te._init,it(X,V,Ie(te._payload),fe)}if(we(te))return Ae(X,V,te,fe);if(w(te))return _e(X,V,te,fe);ru(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,V!==null&&V.tag===6?(r(X,V.sibling),V=l(V,te),V.return=X,X=V):(r(X,V),V=jl(te,X.mode,fe),V.return=X,X=V),C(X)):r(X,V)}return it}var Fr=eo(!0),to=eo(!1),nu=$s(null),uu=null,Tr=null,Fa=null;function Ta(){Fa=Tr=uu=null}function Ia(t){var s=nu.current;tt(nu),t._currentValue=s}function La(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ir(t,s){uu=t,Fa=Tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Rt=!0),t.firstContext=null)}function Gt(t){var s=t._currentValue;if(Fa!==t)if(t={context:t,memoizedValue:s,next:null},Tr===null){if(uu===null)throw Error(o(308));Tr=t,uu.dependencies={lanes:0,firstContext:t}}else Tr=Tr.next=t;return s}var ir=null;function Ma(t){ir===null?ir=[t]:ir.push(t)}function so(t,s,r,a){var l=s.interleaved;return l===null?(r.next=r,Ma(s)):(r.next=l.next,l.next=r),s.interleaved=r,ws(t,a)}function ws(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Hs=!1;function Ra(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ro(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function As(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ve&2)!==0){var l=a.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s,ws(t,r)}return l=a.interleaved,l===null?(s.next=s,Ma(a)):(s.next=l.next,l.next=s),a.interleaved=s,ws(t,r)}function au(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Ju(t,r)}}function no(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var l=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var C={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?l=i=C:i=i.next=C,r=r.next}while(r!==null);i===null?l=i=s:i=i.next=s}else l=i=s;r={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function lu(t,s,r,a){var l=t.updateQueue;Hs=!1;var i=l.firstBaseUpdate,C=l.lastBaseUpdate,E=l.shared.pending;if(E!==null){l.shared.pending=null;var Y=E,se=Y.next;Y.next=null,C===null?i=se:C.next=se,C=Y;var me=t.alternate;me!==null&&(me=me.updateQueue,E=me.lastBaseUpdate,E!==C&&(E===null?me.firstBaseUpdate=se:E.next=se,me.lastBaseUpdate=Y))}if(i!==null){var ge=l.baseState;C=0,me=se=Y=null,E=i;do{var Ce=E.lane,ve=E.eventTime;if((a&Ce)===Ce){me!==null&&(me=me.next={eventTime:ve,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Ae=t,_e=E;switch(Ce=s,ve=r,_e.tag){case 1:if(Ae=_e.payload,typeof Ae=="function"){ge=Ae.call(ve,ge,Ce);break e}ge=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=_e.payload,Ce=typeof Ae=="function"?Ae.call(ve,ge,Ce):Ae,Ce==null)break e;ge=b({},ge,Ce);break e;case 2:Hs=!0}}E.callback!==null&&E.lane!==0&&(t.flags|=64,Ce=l.effects,Ce===null?l.effects=[E]:Ce.push(E))}else ve={eventTime:ve,lane:Ce,tag:E.tag,payload:E.payload,callback:E.callback,next:null},me===null?(se=me=ve,Y=ge):me=me.next=ve,C|=Ce;if(E=E.next,E===null){if(E=l.shared.pending,E===null)break;Ce=E,E=Ce.next,Ce.next=null,l.lastBaseUpdate=Ce,l.shared.pending=null}}while(!0);if(me===null&&(Y=ge),l.baseState=Y,l.firstBaseUpdate=se,l.lastBaseUpdate=me,s=l.shared.interleaved,s!==null){l=s;do C|=l.lane,l=l.next;while(l!==s)}else i===null&&(l.shared.lanes=0);dr|=C,t.lanes=C,t.memoizedState=ge}}function uo(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],l=a.callback;if(l!==null){if(a.callback=null,a=r,typeof l!="function")throw Error(o(191,l));l.call(a)}}}var xn={},gs=$s(xn),gn=$s(xn),hn=$s(xn);function or(t){if(t===xn)throw Error(o(174));return t}function Oa(t,s){switch(Ze(hn,s),Ze(gn,t),Ze(gs,xn),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Dt(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Dt(s,t)}tt(gs),Ze(gs,s)}function Lr(){tt(gs),tt(gn),tt(hn)}function ao(t){or(hn.current);var s=or(gs.current),r=Dt(s,t.type);s!==r&&(Ze(gn,t),Ze(gs,r))}function Pa(t){gn.current===t&&(tt(gs),tt(gn))}var rt=$s(0);function iu(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $a=[];function za(){for(var t=0;t<$a.length;t++)$a[t]._workInProgressVersionPrimary=null;$a.length=0}var ou=D.ReactCurrentDispatcher,Ua=D.ReactCurrentBatchConfig,cr=0,nt=null,dt=null,gt=null,cu=!1,pn=!1,fn=0,j0=0;function At(){throw Error(o(321))}function Ha(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!rs(t[r],s[r]))return!1;return!0}function Ya(t,s,r,a,l,i){if(cr=i,nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ou.current=t===null||t.memoizedState===null?w0:A0,t=r(a,l),pn){i=0;do{if(pn=!1,fn=0,25<=i)throw Error(o(301));i+=1,gt=dt=null,s.updateQueue=null,ou.current=k0,t=r(a,l)}while(pn)}if(ou.current=mu,s=dt!==null&&dt.next!==null,cr=0,gt=dt=nt=null,cu=!1,s)throw Error(o(300));return t}function Qa(){var t=fn!==0;return fn=0,t}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?nt.memoizedState=gt=t:gt=gt.next=t,gt}function qt(){if(dt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var s=gt===null?nt.memoizedState:gt.next;if(s!==null)gt=s,dt=t;else{if(t===null)throw Error(o(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?nt.memoizedState=gt=t:gt=gt.next=t}return gt}function yn(t,s){return typeof s=="function"?s(t):s}function Va(t){var s=qt(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var a=dt,l=a.baseQueue,i=r.pending;if(i!==null){if(l!==null){var C=l.next;l.next=i.next,i.next=C}a.baseQueue=l=i,r.pending=null}if(l!==null){i=l.next,a=a.baseState;var E=C=null,Y=null,se=i;do{var me=se.lane;if((cr&me)===me)Y!==null&&(Y=Y.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),a=se.hasEagerState?se.eagerState:t(a,se.action);else{var ge={lane:me,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};Y===null?(E=Y=ge,C=a):Y=Y.next=ge,nt.lanes|=me,dr|=me}se=se.next}while(se!==null&&se!==i);Y===null?C=a:Y.next=E,rs(a,s.memoizedState)||(Rt=!0),s.memoizedState=a,s.baseState=C,s.baseQueue=Y,r.lastRenderedState=a}if(t=r.interleaved,t!==null){l=t;do i=l.lane,nt.lanes|=i,dr|=i,l=l.next;while(l!==t)}else l===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Wa(t){var s=qt(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var a=r.dispatch,l=r.pending,i=s.memoizedState;if(l!==null){r.pending=null;var C=l=l.next;do i=t(i,C.action),C=C.next;while(C!==l);rs(i,s.memoizedState)||(Rt=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,a]}function lo(){}function io(t,s){var r=nt,a=qt(),l=s(),i=!rs(a.memoizedState,l);if(i&&(a.memoizedState=l,Rt=!0),a=a.queue,Ka(Co.bind(null,r,a,t),[t]),a.getSnapshot!==s||i||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,bn(9,co.bind(null,r,a,l,s),void 0,null),ht===null)throw Error(o(349));(cr&30)!==0||oo(r,s,l)}return l}function oo(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function co(t,s,r,a){s.value=r,s.getSnapshot=a,mo(s)&&xo(t)}function Co(t,s,r){return r(function(){mo(s)&&xo(t)})}function mo(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!rs(t,r)}catch{return!0}}function xo(t){var s=ws(t,1);s!==null&&is(s,t,1,-1)}function go(t){var s=hs();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:t},s.queue=t,t=t.dispatch=D0.bind(null,nt,t),[s.memoizedState,t]}function bn(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function ho(){return qt().memoizedState}function du(t,s,r,a){var l=hs();nt.flags|=t,l.memoizedState=bn(1|s,r,void 0,a===void 0?null:a)}function Cu(t,s,r,a){var l=qt();a=a===void 0?null:a;var i=void 0;if(dt!==null){var C=dt.memoizedState;if(i=C.destroy,a!==null&&Ha(a,C.deps)){l.memoizedState=bn(s,r,i,a);return}}nt.flags|=t,l.memoizedState=bn(1|s,r,i,a)}function po(t,s){return du(8390656,8,t,s)}function Ka(t,s){return Cu(2048,8,t,s)}function fo(t,s){return Cu(4,2,t,s)}function yo(t,s){return Cu(4,4,t,s)}function bo(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function vo(t,s,r){return r=r!=null?r.concat([t]):null,Cu(4,4,bo.bind(null,s,t),r)}function Ga(){}function jo(t,s){var r=qt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Ha(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Bo(t,s){var r=qt();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Ha(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function No(t,s,r){return(cr&21)===0?(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=r):(rs(r,s)||(r=Zl(),nt.lanes|=r,dr|=r,t.baseState=!0),s)}function B0(t,s){var r=qe;qe=r!==0&&4>r?r:4,t(!0);var a=Ua.transition;Ua.transition={};try{t(!1),s()}finally{qe=r,Ua.transition=a}}function Do(){return qt().memoizedState}function N0(t,s,r){var a=Ks(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},wo(t))Ao(s,r);else if(r=so(t,s,r,a),r!==null){var l=Et();is(r,t,a,l),ko(r,s,a)}}function D0(t,s,r){var a=Ks(t),l={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(wo(t))Ao(s,l);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var C=s.lastRenderedState,E=i(C,r);if(l.hasEagerState=!0,l.eagerState=E,rs(E,C)){var Y=s.interleaved;Y===null?(l.next=l,Ma(s)):(l.next=Y.next,Y.next=l),s.interleaved=l;return}}catch{}finally{}r=so(t,s,l,a),r!==null&&(l=Et(),is(r,t,a,l),ko(r,s,a))}}function wo(t){var s=t.alternate;return t===nt||s!==null&&s===nt}function Ao(t,s){pn=cu=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function ko(t,s,r){if((r&4194240)!==0){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,Ju(t,r)}}var mu={readContext:Gt,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},w0={readContext:Gt,useCallback:function(t,s){return hs().memoizedState=[t,s===void 0?null:s],t},useContext:Gt,useEffect:po,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,du(4194308,4,bo.bind(null,s,t),r)},useLayoutEffect:function(t,s){return du(4194308,4,t,s)},useInsertionEffect:function(t,s){return du(4,2,t,s)},useMemo:function(t,s){var r=hs();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=hs();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=N0.bind(null,nt,t),[a.memoizedState,t]},useRef:function(t){var s=hs();return t={current:t},s.memoizedState=t},useState:go,useDebugValue:Ga,useDeferredValue:function(t){return hs().memoizedState=t},useTransition:function(){var t=go(!1),s=t[0];return t=B0.bind(null,t[1]),hs().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=nt,l=hs();if(st){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),ht===null)throw Error(o(349));(cr&30)!==0||oo(a,s,r)}l.memoizedState=r;var i={value:r,getSnapshot:s};return l.queue=i,po(Co.bind(null,a,i,t),[t]),a.flags|=2048,bn(9,co.bind(null,a,i,r,s),void 0,null),r},useId:function(){var t=hs(),s=ht.identifierPrefix;if(st){var r=Ds,a=Ns;r=(a&~(1<<32-ss(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=fn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=j0++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},A0={readContext:Gt,useCallback:jo,useContext:Gt,useEffect:Ka,useImperativeHandle:vo,useInsertionEffect:fo,useLayoutEffect:yo,useMemo:Bo,useReducer:Va,useRef:ho,useState:function(){return Va(yn)},useDebugValue:Ga,useDeferredValue:function(t){var s=qt();return No(s,dt.memoizedState,t)},useTransition:function(){var t=Va(yn)[0],s=qt().memoizedState;return[t,s]},useMutableSource:lo,useSyncExternalStore:io,useId:Do,unstable_isNewReconciler:!1},k0={readContext:Gt,useCallback:jo,useContext:Gt,useEffect:Ka,useImperativeHandle:vo,useInsertionEffect:fo,useLayoutEffect:yo,useMemo:Bo,useReducer:Wa,useRef:ho,useState:function(){return Wa(yn)},useDebugValue:Ga,useDeferredValue:function(t){var s=qt();return dt===null?s.memoizedState=t:No(s,dt.memoizedState,t)},useTransition:function(){var t=Wa(yn)[0],s=qt().memoizedState;return[t,s]},useMutableSource:lo,useSyncExternalStore:io,useId:Do,unstable_isNewReconciler:!1};function us(t,s){if(t&&t.defaultProps){s=b({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function qa(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:b({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var xu={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Et(),l=Ks(t),i=As(a,l);i.payload=s,r!=null&&(i.callback=r),s=Ys(t,i,l),s!==null&&(is(s,t,l,a),au(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Et(),l=Ks(t),i=As(a,l);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Ys(t,i,l),s!==null&&(is(s,t,l,a),au(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Et(),a=Ks(t),l=As(r,a);l.tag=2,s!=null&&(l.callback=s),s=Ys(t,l,a),s!==null&&(is(s,t,a,r),au(s,t,a))}};function _o(t,s,r,a,l,i,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,i,C):s.prototype&&s.prototype.isPureReactComponent?!un(r,a)||!un(l,i):!0}function So(t,s,r){var a=!1,l=zs,i=s.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(l=Mt(s)?ur:wt.current,a=s.contextTypes,i=(a=a!=null)?kr(t,l):zs),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=xu,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=i),s}function Eo(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&xu.enqueueReplaceState(s,s.state,null)}function Ja(t,s,r,a){var l=t.stateNode;l.props=r,l.state=t.memoizedState,l.refs={},Ra(t);var i=s.contextType;typeof i=="object"&&i!==null?l.context=Gt(i):(i=Mt(s)?ur:wt.current,l.context=kr(t,i)),l.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(qa(t,s,i,r),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&xu.enqueueReplaceState(l,l.state,null),lu(t,r,l,a),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Mr(t,s){try{var r="",a=s;do r+=pe(a),a=a.return;while(a);var l=r}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:l,digest:null}}function Xa(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Za(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function Fo(t,s,r){r=As(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){vu||(vu=!0,xl=a),Za(t,s)},r}function To(t,s,r){r=As(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var l=s.value;r.payload=function(){return a(l)},r.callback=function(){Za(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Za(t,s),typeof a!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var C=s.stack;this.componentDidCatch(s.value,{componentStack:C!==null?C:""})}),r}function Io(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new _0;var l=new Set;a.set(s,l)}else l=a.get(s),l===void 0&&(l=new Set,a.set(s,l));l.has(r)||(l.add(r),t=H0.bind(null,t,s,r),s.then(t,t))}function Lo(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Mo(t,s,r,a,l){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=As(-1,1),s.tag=2,Ys(r,s,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=l,t)}var S0=D.ReactCurrentOwner,Rt=!1;function St(t,s,r,a){s.child=t===null?to(s,null,r,a):Fr(s,t.child,r,a)}function Ro(t,s,r,a,l){r=r.render;var i=s.ref;return Ir(s,l),a=Ya(t,s,r,a,i,l),r=Qa(),t!==null&&!Rt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,ks(t,s,l)):(st&&r&&Aa(s),s.flags|=1,St(t,s,a,l),s.child)}function Oo(t,s,r,a,l){if(t===null){var i=r.type;return typeof i=="function"&&!vl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Po(t,s,i,a,l)):(t=Au(r.type,null,a,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,(t.lanes&l)===0){var C=i.memoizedProps;if(r=r.compare,r=r!==null?r:un,r(C,a)&&t.ref===s.ref)return ks(t,s,l)}return s.flags|=1,t=qs(i,a),t.ref=s.ref,t.return=s,s.child=t}function Po(t,s,r,a,l){if(t!==null){var i=t.memoizedProps;if(un(i,a)&&t.ref===s.ref)if(Rt=!1,s.pendingProps=a=i,(t.lanes&l)!==0)(t.flags&131072)!==0&&(Rt=!0);else return s.lanes=t.lanes,ks(t,s,l)}return el(t,s,r,a,l)}function $o(t,s,r){var a=s.pendingProps,l=a.children,i=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Or,Yt),Yt|=r;else{if((r&1073741824)===0)return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ze(Or,Yt),Yt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,Ze(Or,Yt),Yt|=a}else i!==null?(a=i.baseLanes|r,s.memoizedState=null):a=r,Ze(Or,Yt),Yt|=a;return St(t,s,l,r),s.child}function zo(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function el(t,s,r,a,l){var i=Mt(r)?ur:wt.current;return i=kr(s,i),Ir(s,l),r=Ya(t,s,r,a,i,l),a=Qa(),t!==null&&!Rt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,ks(t,s,l)):(st&&a&&Aa(s),s.flags|=1,St(t,s,r,l),s.child)}function Uo(t,s,r,a,l){if(Mt(r)){var i=!0;Xn(s)}else i=!1;if(Ir(s,l),s.stateNode===null)hu(t,s),So(s,r,a),Ja(s,r,a,l),a=!0;else if(t===null){var C=s.stateNode,E=s.memoizedProps;C.props=E;var Y=C.context,se=r.contextType;typeof se=="object"&&se!==null?se=Gt(se):(se=Mt(r)?ur:wt.current,se=kr(s,se));var me=r.getDerivedStateFromProps,ge=typeof me=="function"||typeof C.getSnapshotBeforeUpdate=="function";ge||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==a||Y!==se)&&Eo(s,C,a,se),Hs=!1;var Ce=s.memoizedState;C.state=Ce,lu(s,a,C,l),Y=s.memoizedState,E!==a||Ce!==Y||Lt.current||Hs?(typeof me=="function"&&(qa(s,r,me,a),Y=s.memoizedState),(E=Hs||_o(s,r,E,a,Ce,Y,se))?(ge||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(s.flags|=4194308)):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=Y),C.props=a,C.state=Y,C.context=se,a=E):(typeof C.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{C=s.stateNode,ro(t,s),E=s.memoizedProps,se=s.type===s.elementType?E:us(s.type,E),C.props=se,ge=s.pendingProps,Ce=C.context,Y=r.contextType,typeof Y=="object"&&Y!==null?Y=Gt(Y):(Y=Mt(r)?ur:wt.current,Y=kr(s,Y));var ve=r.getDerivedStateFromProps;(me=typeof ve=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(E!==ge||Ce!==Y)&&Eo(s,C,a,Y),Hs=!1,Ce=s.memoizedState,C.state=Ce,lu(s,a,C,l);var Ae=s.memoizedState;E!==ge||Ce!==Ae||Lt.current||Hs?(typeof ve=="function"&&(qa(s,r,ve,a),Ae=s.memoizedState),(se=Hs||_o(s,r,se,a,Ce,Ae,Y)||!1)?(me||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(a,Ae,Y),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(a,Ae,Y)),typeof C.componentDidUpdate=="function"&&(s.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof C.componentDidUpdate!="function"||E===t.memoizedProps&&Ce===t.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&Ce===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=Ae),C.props=a,C.state=Ae,C.context=Y,a=se):(typeof C.componentDidUpdate!="function"||E===t.memoizedProps&&Ce===t.memoizedState||(s.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&Ce===t.memoizedState||(s.flags|=1024),a=!1)}return tl(t,s,r,a,i,l)}function tl(t,s,r,a,l,i){zo(t,s);var C=(s.flags&128)!==0;if(!a&&!C)return l&&Vi(s,r,!1),ks(t,s,i);a=s.stateNode,S0.current=s;var E=C&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&C?(s.child=Fr(s,t.child,null,i),s.child=Fr(s,null,E,i)):St(t,s,E,i),s.memoizedState=a.state,l&&Vi(s,r,!0),s.child}function Ho(t){var s=t.stateNode;s.pendingContext?Yi(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Yi(t,s.context,!1),Oa(t,s.containerInfo)}function Yo(t,s,r,a,l){return Er(),Ea(l),s.flags|=256,St(t,s,r,a),s.child}var sl={dehydrated:null,treeContext:null,retryLane:0};function rl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qo(t,s,r){var a=s.pendingProps,l=rt.current,i=!1,C=(s.flags&128)!==0,E;if((E=C)||(E=t!==null&&t.memoizedState===null?!1:(l&2)!==0),E?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Ze(rt,l&1),t===null)return Sa(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(C=a.children,t=a.fallback,i?(a=s.mode,i=s.child,C={mode:"hidden",children:C},(a&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=C):i=ku(C,a,0,null),t=gr(t,a,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=rl(r),s.memoizedState=sl,t):nl(s,C));if(l=t.memoizedState,l!==null&&(E=l.dehydrated,E!==null))return E0(t,s,C,a,E,l,r);if(i){i=a.fallback,C=s.mode,l=t.child,E=l.sibling;var Y={mode:"hidden",children:a.children};return(C&1)===0&&s.child!==l?(a=s.child,a.childLanes=0,a.pendingProps=Y,s.deletions=null):(a=qs(l,Y),a.subtreeFlags=l.subtreeFlags&14680064),E!==null?i=qs(E,i):(i=gr(i,C,r,null),i.flags|=2),i.return=s,a.return=s,a.sibling=i,s.child=a,a=i,i=s.child,C=t.child.memoizedState,C=C===null?rl(r):{baseLanes:C.baseLanes|r,cachePool:null,transitions:C.transitions},i.memoizedState=C,i.childLanes=t.childLanes&~r,s.memoizedState=sl,a}return i=t.child,t=i.sibling,a=qs(i,{mode:"visible",children:a.children}),(s.mode&1)===0&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function nl(t,s){return s=ku({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function gu(t,s,r,a){return a!==null&&Ea(a),Fr(s,t.child,null,r),t=nl(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function E0(t,s,r,a,l,i,C){if(r)return s.flags&256?(s.flags&=-257,a=Xa(Error(o(422))),gu(t,s,C,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=a.fallback,l=s.mode,a=ku({mode:"visible",children:a.children},l,0,null),i=gr(i,l,C,null),i.flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,(s.mode&1)!==0&&Fr(s,t.child,null,C),s.child.memoizedState=rl(C),s.memoizedState=sl,i);if((s.mode&1)===0)return gu(t,s,C,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var E=a.dgst;return a=E,i=Error(o(419)),a=Xa(i,a,void 0),gu(t,s,C,a)}if(E=(C&t.childLanes)!==0,Rt||E){if(a=ht,a!==null){switch(C&-C){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(a.suspendedLanes|C))!==0?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,ws(t,l),is(a,t,l,-1))}return bl(),a=Xa(Error(o(421))),gu(t,s,C,a)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=Y0.bind(null,t),l._reactRetry=s,null):(t=i.treeContext,Ht=Ps(l.nextSibling),Ut=s,st=!0,ns=null,t!==null&&(Wt[Kt++]=Ns,Wt[Kt++]=Ds,Wt[Kt++]=ar,Ns=t.id,Ds=t.overflow,ar=s),s=nl(s,a.children),s.flags|=4096,s)}function Vo(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),La(t.return,s,r)}function ul(t,s,r,a,l){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:l}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=l)}function Wo(t,s,r){var a=s.pendingProps,l=a.revealOrder,i=a.tail;if(St(t,s,a.children,r),a=rt.current,(a&2)!==0)a=a&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vo(t,r,s);else if(t.tag===19)Vo(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ze(rt,a),(s.mode&1)===0)s.memoizedState=null;else switch(l){case"forwards":for(r=s.child,l=null;r!==null;)t=r.alternate,t!==null&&iu(t)===null&&(l=r),r=r.sibling;r=l,r===null?(l=s.child,s.child=null):(l=r.sibling,r.sibling=null),ul(s,!1,l,r,i);break;case"backwards":for(r=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&iu(t)===null){s.child=l;break}t=l.sibling,l.sibling=r,r=l,l=t}ul(s,!0,r,null,i);break;case"together":ul(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function hu(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ks(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),dr|=s.lanes,(r&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,r=qs(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=qs(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function F0(t,s,r){switch(s.tag){case 3:Ho(s),Er();break;case 5:ao(s);break;case 1:Mt(s.type)&&Xn(s);break;case 4:Oa(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,l=s.memoizedProps.value;Ze(nu,a._currentValue),a._currentValue=l;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(Ze(rt,rt.current&1),s.flags|=128,null):(r&s.child.childLanes)!==0?Qo(t,s,r):(Ze(rt,rt.current&1),t=ks(t,s,r),t!==null?t.sibling:null);Ze(rt,rt.current&1);break;case 19:if(a=(r&s.childLanes)!==0,(t.flags&128)!==0){if(a)return Wo(t,s,r);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ze(rt,rt.current),a)break;return null;case 22:case 23:return s.lanes=0,$o(t,s,r)}return ks(t,s,r)}var Ko,al,Go,qo;Ko=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},al=function(){},Go=function(t,s,r,a){var l=t.memoizedProps;if(l!==a){t=s.stateNode,or(gs.current);var i=null;switch(r){case"input":l=xe(t,l),a=xe(t,a),i=[];break;case"select":l=b({},l,{value:void 0}),a=b({},a,{value:void 0}),i=[];break;case"textarea":l=ke(t,l),a=ke(t,a),i=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Gn)}sr(r,a);var C;r=null;for(se in l)if(!a.hasOwnProperty(se)&&l.hasOwnProperty(se)&&l[se]!=null)if(se==="style"){var E=l[se];for(C in E)E.hasOwnProperty(C)&&(r||(r={}),r[C]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(x.hasOwnProperty(se)?i||(i=[]):(i=i||[]).push(se,null));for(se in a){var Y=a[se];if(E=l!=null?l[se]:void 0,a.hasOwnProperty(se)&&Y!==E&&(Y!=null||E!=null))if(se==="style")if(E){for(C in E)!E.hasOwnProperty(C)||Y&&Y.hasOwnProperty(C)||(r||(r={}),r[C]="");for(C in Y)Y.hasOwnProperty(C)&&E[C]!==Y[C]&&(r||(r={}),r[C]=Y[C])}else r||(i||(i=[]),i.push(se,r)),r=Y;else se==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,E=E?E.__html:void 0,Y!=null&&E!==Y&&(i=i||[]).push(se,Y)):se==="children"?typeof Y!="string"&&typeof Y!="number"||(i=i||[]).push(se,""+Y):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(x.hasOwnProperty(se)?(Y!=null&&se==="onScroll"&&et("scroll",t),i||E===Y||(i=[])):(i=i||[]).push(se,Y))}r&&(i=i||[]).push("style",r);var se=i;(s.updateQueue=se)&&(s.flags|=4)}},qo=function(t,s,r,a){r!==a&&(s.flags|=4)};function vn(t,s){if(!st)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function kt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var l=t.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function T0(t,s,r){var a=s.pendingProps;switch(ka(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(s),null;case 1:return Mt(s.type)&&Jn(),kt(s),null;case 3:return a=s.stateNode,Lr(),tt(Lt),tt(wt),za(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(su(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ns!==null&&(pl(ns),ns=null))),al(t,s),kt(s),null;case 5:Pa(s);var l=or(hn.current);if(r=s.type,t!==null&&s.stateNode!=null)Go(t,s,r,a,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(o(166));return kt(s),null}if(t=or(gs.current),su(s)){a=s.stateNode,r=s.type;var i=s.memoizedProps;switch(a[xs]=s,a[dn]=i,t=(s.mode&1)!==0,r){case"dialog":et("cancel",a),et("close",a);break;case"iframe":case"object":case"embed":et("load",a);break;case"video":case"audio":for(l=0;l<ln.length;l++)et(ln[l],a);break;case"source":et("error",a);break;case"img":case"image":case"link":et("error",a),et("load",a);break;case"details":et("toggle",a);break;case"input":Te(a,i),et("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},et("invalid",a);break;case"textarea":je(a,i),et("invalid",a)}sr(r,i),l=null;for(var C in i)if(i.hasOwnProperty(C)){var E=i[C];C==="children"?typeof E=="string"?a.textContent!==E&&(i.suppressHydrationWarning!==!0&&Kn(a.textContent,E,t),l=["children",E]):typeof E=="number"&&a.textContent!==""+E&&(i.suppressHydrationWarning!==!0&&Kn(a.textContent,E,t),l=["children",""+E]):x.hasOwnProperty(C)&&E!=null&&C==="onScroll"&&et("scroll",a)}switch(r){case"input":de(a),Fe(a,i,!0);break;case"textarea":de(a),Ge(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Gn)}a=l,s.updateQueue=a,a!==null&&(s.flags|=4)}else{C=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bt(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=C.createElement(r,{is:a.is}):(t=C.createElement(r),r==="select"&&(C=t,a.multiple?C.multiple=!0:a.size&&(C.size=a.size))):t=C.createElementNS(t,r),t[xs]=s,t[dn]=a,Ko(t,s,!1,!1),s.stateNode=t;e:{switch(C=xt(r,a),r){case"dialog":et("cancel",t),et("close",t),l=a;break;case"iframe":case"object":case"embed":et("load",t),l=a;break;case"video":case"audio":for(l=0;l<ln.length;l++)et(ln[l],t);l=a;break;case"source":et("error",t),l=a;break;case"img":case"image":case"link":et("error",t),et("load",t),l=a;break;case"details":et("toggle",t),l=a;break;case"input":Te(t,a),l=xe(t,a),et("invalid",t);break;case"option":l=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},l=b({},a,{value:void 0}),et("invalid",t);break;case"textarea":je(t,a),l=ke(t,a),et("invalid",t);break;default:l=a}sr(r,l),E=l;for(i in E)if(E.hasOwnProperty(i)){var Y=E[i];i==="style"?mt(t,Y):i==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&at(t,Y)):i==="children"?typeof Y=="string"?(r!=="textarea"||Y!=="")&&Qt(t,Y):typeof Y=="number"&&Qt(t,""+Y):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(x.hasOwnProperty(i)?Y!=null&&i==="onScroll"&&et("scroll",t):Y!=null&&L(t,i,Y,C))}switch(r){case"input":de(t),Fe(t,a,!1);break;case"textarea":de(t),Ge(t);break;case"option":a.value!=null&&t.setAttribute("value",""+re(a.value));break;case"select":t.multiple=!!a.multiple,i=a.value,i!=null?Ye(t,!!a.multiple,i,!1):a.defaultValue!=null&&Ye(t,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=Gn)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return kt(s),null;case 6:if(t&&s.stateNode!=null)qo(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(o(166));if(r=or(hn.current),or(gs.current),su(s)){if(a=s.stateNode,r=s.memoizedProps,a[xs]=s,(i=a.nodeValue!==r)&&(t=Ut,t!==null))switch(t.tag){case 3:Kn(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kn(a.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[xs]=s,s.stateNode=a}return kt(s),null;case 13:if(tt(rt),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Ht!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Xi(),Er(),s.flags|=98560,i=!1;else if(i=su(s),a!==null&&a.dehydrated!==null){if(t===null){if(!i)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[xs]=s}else Er(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kt(s),i=!1}else ns!==null&&(pl(ns),ns=null),i=!0;if(!i)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(rt.current&1)!==0?Ct===0&&(Ct=3):bl())),s.updateQueue!==null&&(s.flags|=4),kt(s),null);case 4:return Lr(),al(t,s),t===null&&on(s.stateNode.containerInfo),kt(s),null;case 10:return Ia(s.type._context),kt(s),null;case 17:return Mt(s.type)&&Jn(),kt(s),null;case 19:if(tt(rt),i=s.memoizedState,i===null)return kt(s),null;if(a=(s.flags&128)!==0,C=i.rendering,C===null)if(a)vn(i,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(C=iu(t),C!==null){for(s.flags|=128,vn(i,!1),a=C.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)i=r,t=a,i.flags&=14680066,C=i.alternate,C===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=C.childLanes,i.lanes=C.lanes,i.child=C.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=C.memoizedProps,i.memoizedState=C.memoizedState,i.updateQueue=C.updateQueue,i.type=C.type,t=C.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ze(rt,rt.current&1|2),s.child}t=t.sibling}i.tail!==null&&lt()>Pr&&(s.flags|=128,a=!0,vn(i,!1),s.lanes=4194304)}else{if(!a)if(t=iu(C),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),vn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!C.alternate&&!st)return kt(s),null}else 2*lt()-i.renderingStartTime>Pr&&r!==1073741824&&(s.flags|=128,a=!0,vn(i,!1),s.lanes=4194304);i.isBackwards?(C.sibling=s.child,s.child=C):(r=i.last,r!==null?r.sibling=C:s.child=C,i.last=C)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=lt(),s.sibling=null,r=rt.current,Ze(rt,a?r&1|2:r&1),s):(kt(s),null);case 22:case 23:return yl(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&(s.mode&1)!==0?(Yt&1073741824)!==0&&(kt(s),s.subtreeFlags&6&&(s.flags|=8192)):kt(s),null;case 24:return null;case 25:return null}throw Error(o(156,s.tag))}function I0(t,s){switch(ka(s),s.tag){case 1:return Mt(s.type)&&Jn(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Lr(),tt(Lt),tt(wt),za(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Pa(s),null;case 13:if(tt(rt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Er()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return tt(rt),null;case 4:return Lr(),null;case 10:return Ia(s.type._context),null;case 22:case 23:return yl(),null;case 24:return null;default:return null}}var pu=!1,_t=!1,L0=typeof WeakSet=="function"?WeakSet:Set,De=null;function Rr(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){ut(t,s,a)}else r.current=null}function ll(t,s,r){try{r()}catch(a){ut(t,s,a)}}var Jo=!1;function M0(t,s){if(ya=Rn,t=ki(),da(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var l=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var C=0,E=-1,Y=-1,se=0,me=0,ge=t,Ce=null;t:for(;;){for(var ve;ge!==r||l!==0&&ge.nodeType!==3||(E=C+l),ge!==i||a!==0&&ge.nodeType!==3||(Y=C+a),ge.nodeType===3&&(C+=ge.nodeValue.length),(ve=ge.firstChild)!==null;)Ce=ge,ge=ve;for(;;){if(ge===t)break t;if(Ce===r&&++se===l&&(E=C),Ce===i&&++me===a&&(Y=C),(ve=ge.nextSibling)!==null)break;ge=Ce,Ce=ge.parentNode}ge=ve}r=E===-1||Y===-1?null:{start:E,end:Y}}else r=null}r=r||{start:0,end:0}}else r=null;for(ba={focusedElem:t,selectionRange:r},Rn=!1,De=s;De!==null;)if(s=De,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,De=t;else for(;De!==null;){s=De;try{var Ae=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var _e=Ae.memoizedProps,it=Ae.memoizedState,X=s.stateNode,V=X.getSnapshotBeforeUpdate(s.elementType===s.type?_e:us(s.type,_e),it);X.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var te=s.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){ut(s,s.return,fe)}if(t=s.sibling,t!==null){t.return=s.return,De=t;break}De=s.return}return Ae=Jo,Jo=!1,Ae}function jn(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&t)===t){var i=l.destroy;l.destroy=void 0,i!==void 0&&ll(s,r,i)}l=l.next}while(l!==a)}}function fu(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function il(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function Xo(t){var s=t.alternate;s!==null&&(t.alternate=null,Xo(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[xs],delete s[dn],delete s[Na],delete s[f0],delete s[y0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zo(t){return t.tag===5||t.tag===3||t.tag===4}function ec(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zo(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ol(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Gn));else if(a!==4&&(t=t.child,t!==null))for(ol(t,s,r),t=t.sibling;t!==null;)ol(t,s,r),t=t.sibling}function cl(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(cl(t,s,r),t=t.sibling;t!==null;)cl(t,s,r),t=t.sibling}var vt=null,as=!1;function Qs(t,s,r){for(r=r.child;r!==null;)tc(t,s,r),r=r.sibling}function tc(t,s,r){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(En,r)}catch{}switch(r.tag){case 5:_t||Rr(r,s);case 6:var a=vt,l=as;vt=null,Qs(t,s,r),vt=a,as=l,vt!==null&&(as?(t=vt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(as?(t=vt,r=r.stateNode,t.nodeType===8?Ba(t.parentNode,r):t.nodeType===1&&Ba(t,r),Zr(t)):Ba(vt,r.stateNode));break;case 4:a=vt,l=as,vt=r.stateNode.containerInfo,as=!0,Qs(t,s,r),vt=a,as=l;break;case 0:case 11:case 14:case 15:if(!_t&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var i=l,C=i.destroy;i=i.tag,C!==void 0&&((i&2)!==0||(i&4)!==0)&&ll(r,s,C),l=l.next}while(l!==a)}Qs(t,s,r);break;case 1:if(!_t&&(Rr(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(E){ut(r,s,E)}Qs(t,s,r);break;case 21:Qs(t,s,r);break;case 22:r.mode&1?(_t=(a=_t)||r.memoizedState!==null,Qs(t,s,r),_t=a):Qs(t,s,r);break;default:Qs(t,s,r)}}function sc(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new L0),s.forEach(function(a){var l=Q0.bind(null,t,a);r.has(a)||(r.add(a),a.then(l,l))})}}function ls(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];try{var i=t,C=s,E=C;e:for(;E!==null;){switch(E.tag){case 5:vt=E.stateNode,as=!1;break e;case 3:vt=E.stateNode.containerInfo,as=!0;break e;case 4:vt=E.stateNode.containerInfo,as=!0;break e}E=E.return}if(vt===null)throw Error(o(160));tc(i,C,l),vt=null,as=!1;var Y=l.alternate;Y!==null&&(Y.return=null),l.return=null}catch(se){ut(l,s,se)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)rc(s,t),s=s.sibling}function rc(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(s,t),ps(t),a&4){try{jn(3,t,t.return),fu(3,t)}catch(_e){ut(t,t.return,_e)}try{jn(5,t,t.return)}catch(_e){ut(t,t.return,_e)}}break;case 1:ls(s,t),ps(t),a&512&&r!==null&&Rr(r,r.return);break;case 5:if(ls(s,t),ps(t),a&512&&r!==null&&Rr(r,r.return),t.flags&32){var l=t.stateNode;try{Qt(l,"")}catch(_e){ut(t,t.return,_e)}}if(a&4&&(l=t.stateNode,l!=null)){var i=t.memoizedProps,C=r!==null?r.memoizedProps:i,E=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{E==="input"&&i.type==="radio"&&i.name!=null&&ne(l,i),xt(E,C);var se=xt(E,i);for(C=0;C<Y.length;C+=2){var me=Y[C],ge=Y[C+1];me==="style"?mt(l,ge):me==="dangerouslySetInnerHTML"?at(l,ge):me==="children"?Qt(l,ge):L(l,me,ge,se)}switch(E){case"input":ye(l,i);break;case"textarea":Xe(l,i);break;case"select":var Ce=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var ve=i.value;ve!=null?Ye(l,!!i.multiple,ve,!1):Ce!==!!i.multiple&&(i.defaultValue!=null?Ye(l,!!i.multiple,i.defaultValue,!0):Ye(l,!!i.multiple,i.multiple?[]:"",!1))}l[dn]=i}catch(_e){ut(t,t.return,_e)}}break;case 6:if(ls(s,t),ps(t),a&4){if(t.stateNode===null)throw Error(o(162));l=t.stateNode,i=t.memoizedProps;try{l.nodeValue=i}catch(_e){ut(t,t.return,_e)}}break;case 3:if(ls(s,t),ps(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Zr(s.containerInfo)}catch(_e){ut(t,t.return,_e)}break;case 4:ls(s,t),ps(t);break;case 13:ls(s,t),ps(t),l=t.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(ml=lt())),a&4&&sc(t);break;case 22:if(me=r!==null&&r.memoizedState!==null,t.mode&1?(_t=(se=_t)||me,ls(s,t),_t=se):ls(s,t),ps(t),a&8192){if(se=t.memoizedState!==null,(t.stateNode.isHidden=se)&&!me&&(t.mode&1)!==0)for(De=t,me=t.child;me!==null;){for(ge=De=me;De!==null;){switch(Ce=De,ve=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:jn(4,Ce,Ce.return);break;case 1:Rr(Ce,Ce.return);var Ae=Ce.stateNode;if(typeof Ae.componentWillUnmount=="function"){a=Ce,r=Ce.return;try{s=a,Ae.props=s.memoizedProps,Ae.state=s.memoizedState,Ae.componentWillUnmount()}catch(_e){ut(a,r,_e)}}break;case 5:Rr(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){ac(ge);continue}}ve!==null?(ve.return=Ce,De=ve):ac(ge)}me=me.sibling}e:for(me=null,ge=t;;){if(ge.tag===5){if(me===null){me=ge;try{l=ge.stateNode,se?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(E=ge.stateNode,Y=ge.memoizedProps.style,C=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,E.style.display=es("display",C))}catch(_e){ut(t,t.return,_e)}}}else if(ge.tag===6){if(me===null)try{ge.stateNode.nodeValue=se?"":ge.memoizedProps}catch(_e){ut(t,t.return,_e)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===t)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===t)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===t)break e;me===ge&&(me=null),ge=ge.return}me===ge&&(me=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:ls(s,t),ps(t),a&4&&sc(t);break;case 21:break;default:ls(s,t),ps(t)}}function ps(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(Zo(r)){var a=r;break e}r=r.return}throw Error(o(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(Qt(l,""),a.flags&=-33);var i=ec(t);cl(t,i,l);break;case 3:case 4:var C=a.stateNode.containerInfo,E=ec(t);ol(t,E,C);break;default:throw Error(o(161))}}catch(Y){ut(t,t.return,Y)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function R0(t,s,r){De=t,nc(t)}function nc(t,s,r){for(var a=(t.mode&1)!==0;De!==null;){var l=De,i=l.child;if(l.tag===22&&a){var C=l.memoizedState!==null||pu;if(!C){var E=l.alternate,Y=E!==null&&E.memoizedState!==null||_t;E=pu;var se=_t;if(pu=C,(_t=Y)&&!se)for(De=l;De!==null;)C=De,Y=C.child,C.tag===22&&C.memoizedState!==null?lc(l):Y!==null?(Y.return=C,De=Y):lc(l);for(;i!==null;)De=i,nc(i),i=i.sibling;De=l,pu=E,_t=se}uc(t)}else(l.subtreeFlags&8772)!==0&&i!==null?(i.return=l,De=i):uc(t)}}function uc(t){for(;De!==null;){var s=De;if((s.flags&8772)!==0){var r=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:_t||fu(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!_t)if(r===null)a.componentDidMount();else{var l=s.elementType===s.type?r.memoizedProps:us(s.type,r.memoizedProps);a.componentDidUpdate(l,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&uo(s,i,a);break;case 3:var C=s.updateQueue;if(C!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}uo(s,C,r)}break;case 5:var E=s.stateNode;if(r===null&&s.flags&4){r=E;var Y=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&r.focus();break;case"img":Y.src&&(r.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var se=s.alternate;if(se!==null){var me=se.memoizedState;if(me!==null){var ge=me.dehydrated;ge!==null&&Zr(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}_t||s.flags&512&&il(s)}catch(Ce){ut(s,s.return,Ce)}}if(s===t){De=null;break}if(r=s.sibling,r!==null){r.return=s.return,De=r;break}De=s.return}}function ac(t){for(;De!==null;){var s=De;if(s===t){De=null;break}var r=s.sibling;if(r!==null){r.return=s.return,De=r;break}De=s.return}}function lc(t){for(;De!==null;){var s=De;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{fu(4,s)}catch(Y){ut(s,r,Y)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var l=s.return;try{a.componentDidMount()}catch(Y){ut(s,l,Y)}}var i=s.return;try{il(s)}catch(Y){ut(s,i,Y)}break;case 5:var C=s.return;try{il(s)}catch(Y){ut(s,C,Y)}}}catch(Y){ut(s,s.return,Y)}if(s===t){De=null;break}var E=s.sibling;if(E!==null){E.return=s.return,De=E;break}De=s.return}}var O0=Math.ceil,yu=D.ReactCurrentDispatcher,dl=D.ReactCurrentOwner,Jt=D.ReactCurrentBatchConfig,Ve=0,ht=null,ot=null,jt=0,Yt=0,Or=$s(0),Ct=0,Bn=null,dr=0,bu=0,Cl=0,Nn=null,Ot=null,ml=0,Pr=1/0,_s=null,vu=!1,xl=null,Vs=null,ju=!1,Ws=null,Bu=0,Dn=0,gl=null,Nu=-1,Du=0;function Et(){return(Ve&6)!==0?lt():Nu!==-1?Nu:Nu=lt()}function Ks(t){return(t.mode&1)===0?1:(Ve&2)!==0&&jt!==0?jt&-jt:v0.transition!==null?(Du===0&&(Du=Zl()),Du):(t=qe,t!==0||(t=window.event,t=t===void 0?16:ii(t.type)),t)}function is(t,s,r,a){if(50<Dn)throw Dn=0,gl=null,Error(o(185));Kr(t,r,a),((Ve&2)===0||t!==ht)&&(t===ht&&((Ve&2)===0&&(bu|=r),Ct===4&&Gs(t,jt)),Pt(t,a),r===1&&Ve===0&&(s.mode&1)===0&&(Pr=lt()+500,Zn&&Us()))}function Pt(t,s){var r=t.callbackNode;vd(t,s);var a=In(t,t===ht?jt:0);if(a===0)r!==null&&ql(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&ql(r),s===1)t.tag===0?b0(oc.bind(null,t)):Wi(oc.bind(null,t)),h0(function(){(Ve&6)===0&&Us()}),r=null;else{switch(ei(a)){case 1:r=Ku;break;case 4:r=Jl;break;case 16:r=Sn;break;case 536870912:r=Xl;break;default:r=Sn}r=pc(r,ic.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function ic(t,s){if(Nu=-1,Du=0,(Ve&6)!==0)throw Error(o(327));var r=t.callbackNode;if($r()&&t.callbackNode!==r)return null;var a=In(t,t===ht?jt:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||s)s=wu(t,a);else{s=a;var l=Ve;Ve|=2;var i=dc();(ht!==t||jt!==s)&&(_s=null,Pr=lt()+500,mr(t,s));do try{z0();break}catch(E){cc(t,E)}while(!0);Ta(),yu.current=i,Ve=l,ot!==null?s=0:(ht=null,jt=0,s=Ct)}if(s!==0){if(s===2&&(l=Gu(t),l!==0&&(a=l,s=hl(t,l))),s===1)throw r=Bn,mr(t,0),Gs(t,a),Pt(t,lt()),r;if(s===6)Gs(t,a);else{if(l=t.current.alternate,(a&30)===0&&!P0(l)&&(s=wu(t,a),s===2&&(i=Gu(t),i!==0&&(a=i,s=hl(t,i))),s===1))throw r=Bn,mr(t,0),Gs(t,a),Pt(t,lt()),r;switch(t.finishedWork=l,t.finishedLanes=a,s){case 0:case 1:throw Error(o(345));case 2:xr(t,Ot,_s);break;case 3:if(Gs(t,a),(a&130023424)===a&&(s=ml+500-lt(),10<s)){if(In(t,0)!==0)break;if(l=t.suspendedLanes,(l&a)!==a){Et(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=ja(xr.bind(null,t,Ot,_s),s);break}xr(t,Ot,_s);break;case 4:if(Gs(t,a),(a&4194240)===a)break;for(s=t.eventTimes,l=-1;0<a;){var C=31-ss(a);i=1<<C,C=s[C],C>l&&(l=C),a&=~i}if(a=l,a=lt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*O0(a/1960))-a,10<a){t.timeoutHandle=ja(xr.bind(null,t,Ot,_s),a);break}xr(t,Ot,_s);break;case 5:xr(t,Ot,_s);break;default:throw Error(o(329))}}}return Pt(t,lt()),t.callbackNode===r?ic.bind(null,t):null}function hl(t,s){var r=Nn;return t.current.memoizedState.isDehydrated&&(mr(t,s).flags|=256),t=wu(t,s),t!==2&&(s=Ot,Ot=r,s!==null&&pl(s)),t}function pl(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function P0(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var l=r[a],i=l.getSnapshot;l=l.value;try{if(!rs(i(),l))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gs(t,s){for(s&=~Cl,s&=~bu,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ss(s),a=1<<r;t[r]=-1,s&=~a}}function oc(t){if((Ve&6)!==0)throw Error(o(327));$r();var s=In(t,0);if((s&1)===0)return Pt(t,lt()),null;var r=wu(t,s);if(t.tag!==0&&r===2){var a=Gu(t);a!==0&&(s=a,r=hl(t,a))}if(r===1)throw r=Bn,mr(t,0),Gs(t,s),Pt(t,lt()),r;if(r===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,xr(t,Ot,_s),Pt(t,lt()),null}function fl(t,s){var r=Ve;Ve|=1;try{return t(s)}finally{Ve=r,Ve===0&&(Pr=lt()+500,Zn&&Us())}}function Cr(t){Ws!==null&&Ws.tag===0&&(Ve&6)===0&&$r();var s=Ve;Ve|=1;var r=Jt.transition,a=qe;try{if(Jt.transition=null,qe=1,t)return t()}finally{qe=a,Jt.transition=r,Ve=s,(Ve&6)===0&&Us()}}function yl(){Yt=Or.current,tt(Or)}function mr(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,g0(r)),ot!==null)for(r=ot.return;r!==null;){var a=r;switch(ka(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Jn();break;case 3:Lr(),tt(Lt),tt(wt),za();break;case 5:Pa(a);break;case 4:Lr();break;case 13:tt(rt);break;case 19:tt(rt);break;case 10:Ia(a.type._context);break;case 22:case 23:yl()}r=r.return}if(ht=t,ot=t=qs(t.current,null),jt=Yt=s,Ct=0,Bn=null,Cl=bu=dr=0,Ot=Nn=null,ir!==null){for(s=0;s<ir.length;s++)if(r=ir[s],a=r.interleaved,a!==null){r.interleaved=null;var l=a.next,i=r.pending;if(i!==null){var C=i.next;i.next=l,a.next=C}r.pending=a}ir=null}return t}function cc(t,s){do{var r=ot;try{if(Ta(),ou.current=mu,cu){for(var a=nt.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}cu=!1}if(cr=0,gt=dt=nt=null,pn=!1,fn=0,dl.current=null,r===null||r.return===null){Ct=1,Bn=s,ot=null;break}e:{var i=t,C=r.return,E=r,Y=s;if(s=jt,E.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var se=Y,me=E,ge=me.tag;if((me.mode&1)===0&&(ge===0||ge===11||ge===15)){var Ce=me.alternate;Ce?(me.updateQueue=Ce.updateQueue,me.memoizedState=Ce.memoizedState,me.lanes=Ce.lanes):(me.updateQueue=null,me.memoizedState=null)}var ve=Lo(C);if(ve!==null){ve.flags&=-257,Mo(ve,C,E,i,s),ve.mode&1&&Io(i,se,s),s=ve,Y=se;var Ae=s.updateQueue;if(Ae===null){var _e=new Set;_e.add(Y),s.updateQueue=_e}else Ae.add(Y);break e}else{if((s&1)===0){Io(i,se,s),bl();break e}Y=Error(o(426))}}else if(st&&E.mode&1){var it=Lo(C);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Mo(it,C,E,i,s),Ea(Mr(Y,E));break e}}i=Y=Mr(Y,E),Ct!==4&&(Ct=2),Nn===null?Nn=[i]:Nn.push(i),i=C;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var X=Fo(i,Y,s);no(i,X);break e;case 1:E=Y;var V=i.type,te=i.stateNode;if((i.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Vs===null||!Vs.has(te)))){i.flags|=65536,s&=-s,i.lanes|=s;var fe=To(i,E,s);no(i,fe);break e}}i=i.return}while(i!==null)}mc(r)}catch(Se){s=Se,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function dc(){var t=yu.current;return yu.current=mu,t===null?mu:t}function bl(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),ht===null||(dr&268435455)===0&&(bu&268435455)===0||Gs(ht,jt)}function wu(t,s){var r=Ve;Ve|=2;var a=dc();(ht!==t||jt!==s)&&(_s=null,mr(t,s));do try{$0();break}catch(l){cc(t,l)}while(!0);if(Ta(),Ve=r,yu.current=a,ot!==null)throw Error(o(261));return ht=null,jt=0,Ct}function $0(){for(;ot!==null;)Cc(ot)}function z0(){for(;ot!==null&&!Cd();)Cc(ot)}function Cc(t){var s=hc(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,s===null?mc(t):ot=s,dl.current=null}function mc(t){var s=t;do{var r=s.alternate;if(t=s.return,(s.flags&32768)===0){if(r=T0(r,s,Yt),r!==null){ot=r;return}}else{if(r=I0(r,s),r!==null){r.flags&=32767,ot=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ct=6,ot=null;return}}if(s=s.sibling,s!==null){ot=s;return}ot=s=t}while(s!==null);Ct===0&&(Ct=5)}function xr(t,s,r){var a=qe,l=Jt.transition;try{Jt.transition=null,qe=1,U0(t,s,r,a)}finally{Jt.transition=l,qe=a}return null}function U0(t,s,r,a){do $r();while(Ws!==null);if((Ve&6)!==0)throw Error(o(327));r=t.finishedWork;var l=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(jd(t,i),t===ht&&(ot=ht=null,jt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||ju||(ju=!0,pc(Sn,function(){return $r(),null})),i=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||i){i=Jt.transition,Jt.transition=null;var C=qe;qe=1;var E=Ve;Ve|=4,dl.current=null,M0(t,r),rc(r,t),i0(ba),Rn=!!ya,ba=ya=null,t.current=r,R0(r),md(),Ve=E,qe=C,Jt.transition=i}else t.current=r;if(ju&&(ju=!1,Ws=t,Bu=l),i=t.pendingLanes,i===0&&(Vs=null),hd(r.stateNode),Pt(t,lt()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)l=s[r],a(l.value,{componentStack:l.stack,digest:l.digest});if(vu)throw vu=!1,t=xl,xl=null,t;return(Bu&1)!==0&&t.tag!==0&&$r(),i=t.pendingLanes,(i&1)!==0?t===gl?Dn++:(Dn=0,gl=t):Dn=0,Us(),null}function $r(){if(Ws!==null){var t=ei(Bu),s=Jt.transition,r=qe;try{if(Jt.transition=null,qe=16>t?16:t,Ws===null)var a=!1;else{if(t=Ws,Ws=null,Bu=0,(Ve&6)!==0)throw Error(o(331));var l=Ve;for(Ve|=4,De=t.current;De!==null;){var i=De,C=i.child;if((De.flags&16)!==0){var E=i.deletions;if(E!==null){for(var Y=0;Y<E.length;Y++){var se=E[Y];for(De=se;De!==null;){var me=De;switch(me.tag){case 0:case 11:case 15:jn(8,me,i)}var ge=me.child;if(ge!==null)ge.return=me,De=ge;else for(;De!==null;){me=De;var Ce=me.sibling,ve=me.return;if(Xo(me),me===se){De=null;break}if(Ce!==null){Ce.return=ve,De=Ce;break}De=ve}}}var Ae=i.alternate;if(Ae!==null){var _e=Ae.child;if(_e!==null){Ae.child=null;do{var it=_e.sibling;_e.sibling=null,_e=it}while(_e!==null)}}De=i}}if((i.subtreeFlags&2064)!==0&&C!==null)C.return=i,De=C;else e:for(;De!==null;){if(i=De,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:jn(9,i,i.return)}var X=i.sibling;if(X!==null){X.return=i.return,De=X;break e}De=i.return}}var V=t.current;for(De=V;De!==null;){C=De;var te=C.child;if((C.subtreeFlags&2064)!==0&&te!==null)te.return=C,De=te;else e:for(C=V;De!==null;){if(E=De,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:fu(9,E)}}catch(Se){ut(E,E.return,Se)}if(E===C){De=null;break e}var fe=E.sibling;if(fe!==null){fe.return=E.return,De=fe;break e}De=E.return}}if(Ve=l,Us(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(En,t)}catch{}a=!0}return a}finally{qe=r,Jt.transition=s}}return!1}function xc(t,s,r){s=Mr(r,s),s=Fo(t,s,1),t=Ys(t,s,1),s=Et(),t!==null&&(Kr(t,1,s),Pt(t,s))}function ut(t,s,r){if(t.tag===3)xc(t,t,r);else for(;s!==null;){if(s.tag===3){xc(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Vs===null||!Vs.has(a))){t=Mr(r,t),t=To(s,t,1),s=Ys(s,t,1),t=Et(),s!==null&&(Kr(s,1,t),Pt(s,t));break}}s=s.return}}function H0(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Et(),t.pingedLanes|=t.suspendedLanes&r,ht===t&&(jt&r)===r&&(Ct===4||Ct===3&&(jt&130023424)===jt&&500>lt()-ml?mr(t,0):Cl|=r),Pt(t,s)}function gc(t,s){s===0&&((t.mode&1)===0?s=1:(s=Tn,Tn<<=1,(Tn&130023424)===0&&(Tn=4194304)));var r=Et();t=ws(t,s),t!==null&&(Kr(t,s,r),Pt(t,r))}function Y0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),gc(t,r)}function Q0(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,l=t.memoizedState;l!==null&&(r=l.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(o(314))}a!==null&&a.delete(s),gc(t,r)}var hc;hc=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Lt.current)Rt=!0;else{if((t.lanes&r)===0&&(s.flags&128)===0)return Rt=!1,F0(t,s,r);Rt=(t.flags&131072)!==0}else Rt=!1,st&&(s.flags&1048576)!==0&&Ki(s,tu,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;hu(t,s),t=s.pendingProps;var l=kr(s,wt.current);Ir(s,r),l=Ya(null,s,a,t,l,r);var i=Qa();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Mt(a)?(i=!0,Xn(s)):i=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ra(s),l.updater=xu,s.stateNode=l,l._reactInternals=s,Ja(s,a,t,r),s=tl(null,s,a,!0,i,r)):(s.tag=0,st&&i&&Aa(s),St(null,s,l,r),s=s.child),s;case 16:a=s.elementType;e:{switch(hu(t,s),t=s.pendingProps,l=a._init,a=l(a._payload),s.type=a,l=s.tag=W0(a),t=us(a,t),l){case 0:s=el(null,s,a,t,r);break e;case 1:s=Uo(null,s,a,t,r);break e;case 11:s=Ro(null,s,a,t,r);break e;case 14:s=Oo(null,s,a,us(a.type,t),r);break e}throw Error(o(306,a,""))}return s;case 0:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:us(a,l),el(t,s,a,l,r);case 1:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:us(a,l),Uo(t,s,a,l,r);case 3:e:{if(Ho(s),t===null)throw Error(o(387));a=s.pendingProps,i=s.memoizedState,l=i.element,ro(t,s),lu(s,a,null,r);var C=s.memoizedState;if(a=C.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){l=Mr(Error(o(423)),s),s=Yo(t,s,a,r,l);break e}else if(a!==l){l=Mr(Error(o(424)),s),s=Yo(t,s,a,r,l);break e}else for(Ht=Ps(s.stateNode.containerInfo.firstChild),Ut=s,st=!0,ns=null,r=to(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Er(),a===l){s=ks(t,s,r);break e}St(t,s,a,r)}s=s.child}return s;case 5:return ao(s),t===null&&Sa(s),a=s.type,l=s.pendingProps,i=t!==null?t.memoizedProps:null,C=l.children,va(a,l)?C=null:i!==null&&va(a,i)&&(s.flags|=32),zo(t,s),St(t,s,C,r),s.child;case 6:return t===null&&Sa(s),null;case 13:return Qo(t,s,r);case 4:return Oa(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Fr(s,null,a,r):St(t,s,a,r),s.child;case 11:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:us(a,l),Ro(t,s,a,l,r);case 7:return St(t,s,s.pendingProps,r),s.child;case 8:return St(t,s,s.pendingProps.children,r),s.child;case 12:return St(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,l=s.pendingProps,i=s.memoizedProps,C=l.value,Ze(nu,a._currentValue),a._currentValue=C,i!==null)if(rs(i.value,C)){if(i.children===l.children&&!Lt.current){s=ks(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var E=i.dependencies;if(E!==null){C=i.child;for(var Y=E.firstContext;Y!==null;){if(Y.context===a){if(i.tag===1){Y=As(-1,r&-r),Y.tag=2;var se=i.updateQueue;if(se!==null){se=se.shared;var me=se.pending;me===null?Y.next=Y:(Y.next=me.next,me.next=Y),se.pending=Y}}i.lanes|=r,Y=i.alternate,Y!==null&&(Y.lanes|=r),La(i.return,r,s),E.lanes|=r;break}Y=Y.next}}else if(i.tag===10)C=i.type===s.type?null:i.child;else if(i.tag===18){if(C=i.return,C===null)throw Error(o(341));C.lanes|=r,E=C.alternate,E!==null&&(E.lanes|=r),La(C,r,s),C=i.sibling}else C=i.child;if(C!==null)C.return=i;else for(C=i;C!==null;){if(C===s){C=null;break}if(i=C.sibling,i!==null){i.return=C.return,C=i;break}C=C.return}i=C}St(t,s,l.children,r),s=s.child}return s;case 9:return l=s.type,a=s.pendingProps.children,Ir(s,r),l=Gt(l),a=a(l),s.flags|=1,St(t,s,a,r),s.child;case 14:return a=s.type,l=us(a,s.pendingProps),l=us(a.type,l),Oo(t,s,a,l,r);case 15:return Po(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,l=s.pendingProps,l=s.elementType===a?l:us(a,l),hu(t,s),s.tag=1,Mt(a)?(t=!0,Xn(s)):t=!1,Ir(s,r),So(s,a,l),Ja(s,a,l,r),tl(null,s,a,!0,t,r);case 19:return Wo(t,s,r);case 22:return $o(t,s,r)}throw Error(o(156,s.tag))};function pc(t,s){return Gl(t,s)}function V0(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,s,r,a){return new V0(t,s,r,a)}function vl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W0(t){if(typeof t=="function")return vl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$)return 11;if(t===U)return 14}return 2}function qs(t,s){var r=t.alternate;return r===null?(r=Xt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Au(t,s,r,a,l,i){var C=2;if(a=t,typeof t=="function")vl(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case g:return gr(r.children,l,i,s);case M:C=8,l|=8;break;case _:return t=Xt(12,r,s,l|2),t.elementType=_,t.lanes=i,t;case d:return t=Xt(13,r,s,l),t.elementType=d,t.lanes=i,t;case f:return t=Xt(19,r,s,l),t.elementType=f,t.lanes=i,t;case Q:return ku(r,l,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:C=10;break e;case O:C=9;break e;case $:C=11;break e;case U:C=14;break e;case I:C=16,a=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return s=Xt(C,r,s,l),s.elementType=t,s.type=a,s.lanes=i,s}function gr(t,s,r,a){return t=Xt(7,t,a,s),t.lanes=r,t}function ku(t,s,r,a){return t=Xt(22,t,a,s),t.elementType=Q,t.lanes=r,t.stateNode={isHidden:!1},t}function jl(t,s,r){return t=Xt(6,t,null,s),t.lanes=r,t}function Bl(t,s,r){return s=Xt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function K0(t,s,r,a,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Nl(t,s,r,a,l,i,C,E,Y){return t=new K0(t,s,r,E,Y),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Xt(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(i),t}function G0(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function fc(t){if(!t)return zs;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(o(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Mt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(o(171))}if(t.tag===1){var r=t.type;if(Mt(r))return Qi(t,r,s)}return s}function yc(t,s,r,a,l,i,C,E,Y){return t=Nl(r,a,!0,t,l,i,C,E,Y),t.context=fc(null),r=t.current,a=Et(),l=Ks(r),i=As(a,l),i.callback=s??null,Ys(r,i,l),t.current.lanes=l,Kr(t,l,a),Pt(t,a),t}function _u(t,s,r,a){var l=s.current,i=Et(),C=Ks(l);return r=fc(r),s.context===null?s.context=r:s.pendingContext=r,s=As(i,C),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Ys(l,s,C),t!==null&&(is(t,l,C,i),au(t,l,C)),C}function Su(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bc(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Dl(t,s){bc(t,s),(t=t.alternate)&&bc(t,s)}function q0(){return null}var vc=typeof reportError=="function"?reportError:function(t){console.error(t)};function wl(t){this._internalRoot=t}Eu.prototype.render=wl.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));_u(t,s,null,null)},Eu.prototype.unmount=wl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Cr(function(){_u(null,t,null,null)}),s[js]=null}};function Eu(t){this._internalRoot=t}Eu.prototype.unstable_scheduleHydration=function(t){if(t){var s=ri();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Ms.length&&s!==0&&s<Ms[r].priority;r++);Ms.splice(r,0,t),r===0&&ai(t)}};function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jc(){}function J0(t,s,r,a,l){if(l){if(typeof a=="function"){var i=a;a=function(){var se=Su(C);i.call(se)}}var C=yc(s,a,t,0,null,!1,!1,"",jc);return t._reactRootContainer=C,t[js]=C.current,on(t.nodeType===8?t.parentNode:t),Cr(),C}for(;l=t.lastChild;)t.removeChild(l);if(typeof a=="function"){var E=a;a=function(){var se=Su(Y);E.call(se)}}var Y=Nl(t,0,!1,null,null,!1,!1,"",jc);return t._reactRootContainer=Y,t[js]=Y.current,on(t.nodeType===8?t.parentNode:t),Cr(function(){_u(s,Y,r,a)}),Y}function Tu(t,s,r,a,l){var i=r._reactRootContainer;if(i){var C=i;if(typeof l=="function"){var E=l;l=function(){var Y=Su(C);E.call(Y)}}_u(s,C,t,l)}else C=J0(r,s,t,l,a);return Su(C)}ti=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Wr(s.pendingLanes);r!==0&&(Ju(s,r|1),Pt(s,lt()),(Ve&6)===0&&(Pr=lt()+500,Us()))}break;case 13:Cr(function(){var a=ws(t,1);if(a!==null){var l=Et();is(a,t,1,l)}}),Dl(t,1)}},Xu=function(t){if(t.tag===13){var s=ws(t,134217728);if(s!==null){var r=Et();is(s,t,134217728,r)}Dl(t,134217728)}},si=function(t){if(t.tag===13){var s=Ks(t),r=ws(t,s);if(r!==null){var a=Et();is(r,t,s,a)}Dl(t,s)}},ri=function(){return qe},ni=function(t,s){var r=qe;try{return qe=t,s()}finally{qe=r}},Pe=function(t,s,r){switch(s){case"input":if(ye(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var l=qn(a);if(!l)throw Error(o(90));Z(a),ye(a,l)}}}break;case"textarea":Xe(t,r);break;case"select":s=r.value,s!=null&&Ye(t,!!r.multiple,s,!1)}},Je=fl,ct=Cr;var X0={usingClientEntryPoint:!1,Events:[Cn,wr,qn,Oe,Ne,fl]},wn={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z0={bundleType:wn.bundleType,version:wn.version,rendererPackageName:wn.rendererPackageName,rendererConfig:wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wl(t),t===null?null:t.stateNode},findFiberByHostInstance:wn.findFiberByHostInstance||q0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{En=Iu.inject(Z0),ms=Iu}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X0,$t.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Al(s))throw Error(o(200));return G0(t,s,null,r)},$t.createRoot=function(t,s){if(!Al(t))throw Error(o(299));var r=!1,a="",l=vc;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=Nl(t,1,!1,null,null,r,!1,a,l),t[js]=s.current,on(t.nodeType===8?t.parentNode:t),new wl(s)},$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Wl(s),t=t===null?null:t.stateNode,t},$t.flushSync=function(t){return Cr(t)},$t.hydrate=function(t,s,r){if(!Fu(s))throw Error(o(200));return Tu(null,t,s,!0,r)},$t.hydrateRoot=function(t,s,r){if(!Al(t))throw Error(o(405));var a=r!=null&&r.hydratedSources||null,l=!1,i="",C=vc;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),s=yc(s,null,t,1,r??null,l,!1,i,C),t[js]=s.current,on(t),a)for(t=0;t<a.length;t++)r=a[t],l=r._getVersion,l=l(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,l]:s.mutableSourceEagerHydrationData.push(r,l);return new Eu(s)},$t.render=function(t,s,r){if(!Fu(s))throw Error(o(200));return Tu(null,t,s,!1,r)},$t.unmountComponentAtNode=function(t){if(!Fu(t))throw Error(o(40));return t._reactRootContainer?(Cr(function(){Tu(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1},$t.unstable_batchedUpdates=fl,$t.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Fu(r))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return Tu(t,s,r,!1,a)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var Sc;function lC(){if(Sc)return Sl.exports;Sc=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(u){console.error(u)}}return n(),Sl.exports=aC(),Sl.exports}var Ec;function iC(){if(Ec)return Lu;Ec=1;var n=lC();return Lu.createRoot=n.createRoot,Lu.hydrateRoot=n.hydrateRoot,Lu}var oC=iC();const cC=Wc(oC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,o,m)=>m?m.toUpperCase():o.toLowerCase()),Fc=n=>{const u=CC(n);return u.charAt(0).toUpperCase()+u.slice(1)},Kc=(...n)=>n.filter((u,o,m)=>!!u&&u.trim()!==""&&m.indexOf(u)===o).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=c.forwardRef(({color:n="currentColor",size:u=24,strokeWidth:o=2,absoluteStrokeWidth:m,className:x="",children:p,iconNode:B,...F},v)=>c.createElement("svg",{ref:v,...mC,width:u,height:u,stroke:n,strokeWidth:m?Number(o)*24/Number(u):o,className:Kc("lucide",x),...F},[...B.map(([H,S])=>c.createElement(H,S)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(n,u)=>{const o=c.forwardRef(({className:m,...x},p)=>c.createElement(xC,{ref:p,iconNode:u,className:Kc(`lucide-${dC(Fc(n))}`,`lucide-${n}`,m),...x}));return o.displayName=Fc(n),o};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Hu=$e("arrow-left",gC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Tc=$e("award",hC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Bt=$e("book-open",pC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],yC=$e("book-plus",fC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Pu=$e("briefcase",bC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pl=$e("check",vC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hr=$e("chevron-down",jC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bs=$e("chevron-right",BC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],DC=$e("chevron-up",NC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ys=$e("circle-check-big",wC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Zs=$e("clipboard-check",AC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],zr=$e("clipboard-list",kC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$u=$e("clock",_C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EC=$e("compass",SC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ur=$e("download",FC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Ru=$e("file-question",TC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pr=$e("file-text",IC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Yu=$e("folder-open",LC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],RC=$e("folder-plus",MC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Ic=$e("folder-tree",OC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$C=$e("funnel",PC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Tl=$e("graduation-cap",zC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],HC=$e("heart",UC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Hr=$e("info",YC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],VC=$e("layers",QC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],KC=$e("library",WC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Gc=$e("list",GC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],os=$e("loader-circle",qC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Yr=$e("message-square",JC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],qc=$e("play",XC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ft=$e("plus",ZC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tm=$e("refresh-cw",em);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cs=$e("save",sm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Tt=$e("search",rm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jc=$e("settings",nm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ds=$e("square-pen",um);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Nt=$e("trash-2",am);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],$l=$e("upload",lm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],om=$e("user",im);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Qu=$e("users",cm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Qr=$e("video",dm);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yt=$e("x",Cm);function He(n){const u=new URLSearchParams;Object.entries(n).forEach(([m,x])=>{x==null||x===""||u.set(m,String(x))});const o=u.toString();return o?`?${o}`:""}async function he(n,u){const o=await fetch(n,u),m=o.headers.get("content-type")||"",x=await o.text();let p=null;const B=x.trim();if(m.includes("application/json")||B.startsWith("{")||B.startsWith("["))try{p=JSON.parse(x)}catch{p=null}if(!p||typeof p.rst_code!="string"){const v=o.ok?"\uC11C\uBC84 \uC751\uB2F5\uC774 JSON\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.":`\uC11C\uBC84 \uC751\uB2F5 \uC624\uB958(${o.status}). \uB85C\uADF8\uC778 \uC0C1\uD0DC/\uAD8C\uD55C \uB610\uB294 API \uACBD\uB85C\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.`;throw new Error(v)}return p}const le={async getDashboard(){return he("/tutor_lms/api/dashboard.jsp")},async getPrograms(n={}){const u=`/tutor_lms/api/program_list.jsp${He({s_keyword:n.keyword})}`;return he(u)},async getProgram(n){const u=`/tutor_lms/api/program_view.jsp${He({id:n})}`;return he(u)},async createProgram(n){const u=new URLSearchParams;return u.set("course_nm",n.courseName),u.set("start_date",n.startDate),u.set("end_date",n.endDate),u.set("plan_json",n.planJson),he("/tutor_lms/api/program_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getProgramCourses(n){const u=`/tutor_lms/api/program_course_list.jsp${He({program_id:n.programId})}`;return he(u)},async modifyProgram(n){const u=new URLSearchParams;return u.set("id",String(n.id)),u.set("course_nm",n.courseName),n.startDate!==void 0&&u.set("start_date",n.startDate),n.endDate!==void 0&&u.set("end_date",n.endDate),n.planJson!==void 0&&u.set("plan_json",n.planJson),he("/tutor_lms/api/program_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteProgram(n){const u=new URLSearchParams;return u.set("id",String(n.id)),he("/tutor_lms/api/program_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseYears(n={}){const u=`/tutor_lms/api/course_years.jsp${He({tutor_id:n.tutorId})}`;return he(u)},async getMyCourses(n={}){const u=`/tutor_lms/api/course_list.jsp${He({year:n.year,s_keyword:n.keyword})}`;return he(u)},async getPolyCourses(n={}){const u=`/tutor_lms/api/course_list_poly.jsp${He({year:n.year})}`;return he(u)},async getMyCoursesCombined(n={tab:"prism"}){const u=`/tutor_lms/api/course_list_combined.jsp${He({tab:n.tab,year:n.year,s_keyword:n.keyword,page:n.page,page_size:n.pageSize,haksa_category:n.haksaCategory,haksa_grad:n.haksaGrad,haksa_curriculum:n.haksaCurriculum,sort_order:n.sortOrder})}`;return he(u)},async getTutors(){return he("/tutor_lms/api/tutor_list.jsp")},async copyCourse(n){const u=new URLSearchParams;return u.set("source_course_id",String(n.sourceCourseId)),u.set("course_nm",n.courseName),u.set("tutor_id",String(n.tutorId)),he("/tutor_lms/api/course_copy.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async setCourseProgram(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("program_id",String(n.programId)),he("/tutor_lms/api/course_set_program.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseInfo(n){const u=`/tutor_lms/api/course_info_get.jsp${He({course_id:n.courseId,_t:Date.now()})}`;return he(u)},async updateCourseInfo(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("content1",n.content1),u.set("content2",n.content2),he("/tutor_lms/api/course_info_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCourseEvaluation(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("assign_progress",String(n.assignProgress)),u.set("assign_exam",String(n.assignExam)),u.set("assign_homework",String(n.assignHomework)),u.set("assign_forum",String(n.assignForum)),u.set("assign_etc",String(n.assignEtc)),u.set("assign_survey_yn",n.assignSurveyYn),u.set("push_survey_yn",n.pushSurveyYn),u.set("pass_yn",n.passYn),u.set("limit_total_score",String(n.limitTotalScore)),u.set("limit_progress",String(n.limitProgress)),u.set("complete_limit_progress",String(n.completeLimitProgress)),u.set("complete_limit_total_score",String(n.completeLimitTotalScore)),he("/tutor_lms/api/course_evaluation_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCourseCertificateSettings(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("cert_complete_yn",n.certCompleteYn),u.set("cert_template_id",String(n.certTemplateId)),u.set("pass_cert_template_id",String(n.passCertTemplateId)),u.set("complete_no_yn",n.completeNoYn),u.set("complete_prefix",n.completePrefix),u.set("postfix_cnt",String(n.postfixCnt)),u.set("postfix_type",n.postfixType),u.set("postfix_ord",n.postfixOrd),he("/tutor_lms/api/course_certificate_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async createCourse(n){const u=new URLSearchParams;return u.set("course_nm",n.courseName),u.set("year",n.year),u.set("study_sdate",n.studyStartDate),u.set("study_edate",n.studyEndDate),n.programId&&u.set("program_id",String(n.programId)),n.categoryId&&u.set("category_id",String(n.categoryId)),n.semester&&u.set("semester",n.semester),n.credit!==void 0&&n.credit!==null&&String(n.credit)!==""&&u.set("credit",String(n.credit)),n.lessonTime!==void 0&&n.lessonTime!==null&&String(n.lessonTime)!==""&&u.set("lesson_time",String(n.lessonTime)),n.content1&&u.set("content1",n.content1),n.content2&&u.set("content2",n.content2),n.courseFile&&u.set("course_file",n.courseFile),he("/tutor_lms/api/course_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseCategories(){return he("/tutor_lms/api/course_categories.jsp")},async getLearners(n={}){const u=`/tutor_lms/api/learner_list.jsp${He({s_keyword:n.keyword,dept_id:n.deptId,s_dept:n.deptKeyword,page:n.page,limit:n.limit})}`;return he(u)},async uploadCourseImage(n){const u=new FormData;return u.set("course_file",n.file),n.courseId&&u.set("course_id",String(n.courseId)),he("/tutor_lms/api/course_image_upload.jsp",{method:"POST",body:u})},async getKollusList(n={}){const u=`/tutor_lms/api/kollus_list.jsp${He({s_keyword:n.keyword,s_channel:n.channelKey,s_category:n.categoryKey,page:n.page,limit:n.limit,version:n.version})}`;return he(u)},async getContentRecommendations(n){const u=new URLSearchParams;return n.courseName&&u.set("course_name",n.courseName),n.courseIntro&&u.set("course_intro",n.courseIntro),n.courseDetail&&u.set("course_detail",n.courseDetail),n.lessonTitle&&u.set("lesson_title",n.lessonTitle),n.lessonDescription&&u.set("lesson_description",n.lessonDescription),n.keywords&&u.set("keywords",n.keywords),n.topK!==void 0&&u.set("top_k",String(n.topK)),n.similarityThreshold!==void 0&&u.set("similarity_threshold",String(n.similarityThreshold)),he("/tutor_lms/api/content_recommend.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getKollusWishlistList(n={}){const u=`/tutor_lms/api/kollus_wishlist_list.jsp${He({s_keyword:n.keyword,page:n.page,limit:n.limit})}`;return he(u)},async toggleKollusWishlist(n){const u=new URLSearchParams;return u.set("media_content_key",n.mediaContentKey),n.title&&u.set("title",n.title),n.snapshotUrl&&u.set("snapshot_url",n.snapshotUrl),n.categoryKey&&u.set("category_key",n.categoryKey),n.categoryName&&u.set("category_nm",n.categoryName),n.originalFileName&&u.set("original_file_name",n.originalFileName),n.totalTime!==void 0&&u.set("total_time",String(n.totalTime)),n.contentWidth!==void 0&&u.set("content_width",String(n.contentWidth)),n.contentHeight!==void 0&&u.set("content_height",String(n.contentHeight)),he("/tutor_lms/api/kollus_wishlist_toggle.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async upsertKollusLesson(n){const u=new URLSearchParams;return u.set("media_content_key",n.mediaContentKey),n.title&&u.set("title",n.title),n.totalTime!==void 0&&u.set("total_time",String(n.totalTime)),n.contentWidth!==void 0&&u.set("content_width",String(n.contentWidth)),n.contentHeight!==void 0&&u.set("content_height",String(n.contentHeight)),he("/tutor_lms/api/kollus_lesson_upsert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCurriculum(n){const u=`/tutor_lms/api/curriculum_list.jsp${He({course_id:n.courseId})}`;return he(u)},async insertCurriculumSection(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("section_nm",n.sectionName),he("/tutor_lms/api/curriculum_section_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async modifyCurriculumSection(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("section_id",String(n.sectionId)),u.set("section_nm",n.sectionName),he("/tutor_lms/api/curriculum_section_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteCurriculumSection(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("section_id",String(n.sectionId)),he("/tutor_lms/api/curriculum_section_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async addCurriculumLesson(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("section_id",String(n.sectionId)),n.lessonId&&u.set("lesson_id",String(n.lessonId)),n.url&&u.set("url",n.url),n.title&&u.set("title",n.title),he("/tutor_lms/api/curriculum_lesson_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteCurriculumLesson(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("lesson_id",String(n.lessonId)),he("/tutor_lms/api/curriculum_lesson_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateCurriculumLesson(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("lesson_id",String(n.lessonId)),n.chapter!==void 0&&u.set("chapter",String(n.chapter)),n.sectionId!==void 0&&u.set("section_id",String(n.sectionId)),n.completeTime!==void 0&&u.set("complete_time",String(n.completeTime)),n.tutorId!==void 0&&u.set("tutor_id",String(n.tutorId)),n.startDate!==void 0&&u.set("start_date",n.startDate),n.endDate!==void 0&&u.set("end_date",n.endDate),he("/tutor_lms/api/curriculum_lesson_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCourseStudents(n){const u=`/tutor_lms/api/course_students_list.jsp${He({course_id:n.courseId,s_keyword:n.keyword})}`;return he(u)},async getHaksaCourseStudents(n){const u=`/tutor_lms/api/haksa_students_list.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode,s_keyword:n.keyword})}`;return he(u)},async getHaksaCourseEval(n){const u=`/tutor_lms/api/haksa_course_eval_get.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode})}`;return he(u)},async updateHaksaCourseEval(n){const u=new URLSearchParams;return u.set("course_code",n.courseCode),u.set("open_year",n.openYear),u.set("open_term",n.openTerm),u.set("bunban_code",n.bunbanCode),u.set("group_code",n.groupCode),u.set("eval_json",n.evalJson),he("/tutor_lms/api/haksa_course_eval_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaCurriculum(n){const u=`/tutor_lms/api/haksa_curriculum_get.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode})}`;return he(u)},async updateHaksaCurriculum(n){const u=new URLSearchParams;return u.set("course_code",n.courseCode),u.set("open_year",n.openYear),u.set("open_term",n.openTerm),u.set("bunban_code",n.bunbanCode),u.set("group_code",n.groupCode),u.set("curriculum_json",n.curriculumJson),he("/tutor_lms/api/haksa_curriculum_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaExams(n){const u=`/tutor_lms/api/haksa_exam_get.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode})}`;return he(u)},async updateHaksaExams(n){const u=new URLSearchParams;return u.set("course_code",n.courseCode),u.set("open_year",n.openYear),u.set("open_term",n.openTerm),u.set("bunban_code",n.bunbanCode),u.set("group_code",n.groupCode),u.set("exams_json",n.examsJson),he("/tutor_lms/api/haksa_exam_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHaksaGrades(n){const u=`/tutor_lms/api/haksa_grade_list.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode})}`;return he(u)},async resolveHaksaCourse(n){const u=`/tutor_lms/api/haksa_resolve.jsp${He({course_code:n.courseCode,open_year:n.openYear,open_term:n.openTerm,bunban_code:n.bunbanCode,group_code:n.groupCode})}`;return he(u)},async updateHaksaGrades(n){const u=new URLSearchParams;return u.set("course_code",n.courseCode),u.set("open_year",n.openYear),u.set("open_term",n.openTerm),u.set("bunban_code",n.bunbanCode),u.set("group_code",n.groupCode),u.set("grades_json",n.gradesJson),he("/tutor_lms/api/haksa_grade_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async addCourseStudents(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("user_ids",n.userIds.join(",")),he("/tutor_lms/api/course_students_add.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async removeCourseStudent(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("user_id",String(n.userId)),he("/tutor_lms/api/course_students_remove.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getProgressSummary(n){const u=`/tutor_lms/api/progress_summary.jsp${He({course_id:n.courseId})}`;return he(u)},async getProgressStudents(n){const u=`/tutor_lms/api/progress_students.jsp${He({course_id:n.courseId,lesson_id:n.lessonId})}`;return he(u)},async getProgressDetail(n){const u=`/tutor_lms/api/progress_detail.jsp${He({course_id:n.courseId,course_user_id:n.courseUserId,lesson_id:n.lessonId})}`;return he(u)},async getExams(n){const u=`/tutor_lms/api/exam_list.jsp${He({course_id:n.courseId})}`;return he(u)},async createExam(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("title",n.title),u.set("description",n.description??""),u.set("examDate",n.examDate),u.set("examTime",n.examTime),n.examEndDate&&u.set("examEndDate",n.examEndDate),n.examEndTime&&u.set("examEndTime",n.examEndTime),u.set("duration",String(n.duration)),u.set("questionCount",String(n.questionCount??0)),u.set("totalScore",String(n.totalScore??100)),u.set("allowRetake",String(!!n.allowRetake)),u.set("showResults",String(n.showResults??!0)),u.set("onoff_type",n.onoffType??"F"),he("/tutor_lms/api/exam_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateExam(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("exam_id",String(n.examId)),u.set("title",n.title),u.set("description",n.description??""),u.set("examDate",n.examDate),u.set("examTime",n.examTime),n.examEndDate&&u.set("examEndDate",n.examEndDate),n.examEndTime&&u.set("examEndTime",n.examEndTime),u.set("duration",String(n.duration)),u.set("questionCount",String(n.questionCount??0)),u.set("totalScore",String(n.totalScore??100)),u.set("allowRetake",String(!!n.allowRetake)),u.set("showResults",String(n.showResults??!0)),u.set("onoff_type",n.onoffType??"F"),he("/tutor_lms/api/exam_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async linkExam(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("exam_id",String(n.examId)),n.startDate&&u.set("start_date",n.startDate),n.endDate&&u.set("end_date",n.endDate),n.assignScore!==void 0&&u.set("assign_score",String(n.assignScore)),n.allowRetake!==void 0&&u.set("retry_yn",n.allowRetake?"Y":"N"),n.showResults!==void 0&&u.set("result_yn",n.showResults?"Y":"N"),he("/tutor_lms/api/exam_link.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteExam(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("exam_id",String(n.examId)),he("/tutor_lms/api/exam_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getExamUsers(n){const u=`/tutor_lms/api/exam_users.jsp${He({course_id:n.courseId,exam_id:n.examId})}`;return he(u)},async updateExamScore(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("exam_id",String(n.examId)),u.set("course_user_id",String(n.courseUserId)),u.set("marking_score",String(n.markingScore)),he("/tutor_lms/api/exam_score_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async cancelExamSubmit(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("exam_id",String(n.examId)),u.set("course_user_id",String(n.courseUserId)),he("/tutor_lms/api/exam_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworks(n){const u=`/tutor_lms/api/homework_list.jsp${He({course_id:n.courseId})}`;return he(u)},async createHomework(n){const u=new FormData;return u.set("course_id",String(n.courseId)),u.set("title",n.title),u.set("description",n.description),u.set("dueDate",n.dueDate),u.set("dueTime",n.dueTime),u.set("totalScore",String(n.totalScore)),u.set("onoff_type",n.onoffType??"N"),n.file&&u.set("homework_file",n.file),he("/tutor_lms/api/homework_insert.jsp",{method:"POST",body:u})},async updateHomework(n){const u=new FormData;return u.set("course_id",String(n.courseId)),u.set("homework_id",String(n.homeworkId)),u.set("title",n.title),u.set("description",n.description),u.set("dueDate",n.dueDate),u.set("dueTime",n.dueTime),u.set("totalScore",String(n.totalScore)),u.set("onoff_type",n.onoffType??"N"),n.file&&u.set("homework_file",n.file),he("/tutor_lms/api/homework_modify.jsp",{method:"POST",body:u})},async deleteHomework(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("homework_id",String(n.homeworkId)),he("/tutor_lms/api/homework_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworkUsers(n){const u=`/tutor_lms/api/homework_users.jsp${He({course_id:n.courseId,homework_id:n.homeworkId})}`;return he(u)},async updateHomeworkFeedback(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("homework_id",String(n.homeworkId)),u.set("course_user_id",String(n.courseUserId)),u.set("marking_score",String(n.markingScore)),u.set("feedback",n.feedback),he("/tutor_lms/api/homework_feedback_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async cancelHomeworkSubmit(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("homework_id",String(n.homeworkId)),u.set("course_user_id",String(n.courseUserId)),he("/tutor_lms/api/homework_submit_cancel.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async appendHomeworkTask(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("homework_id",String(n.homeworkId)),u.set("course_user_id",String(n.courseUserId)),u.set("task",n.task),he("/tutor_lms/api/homework_task_append.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async confirmHomeworkTask(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("task_id",String(n.taskId)),u.set("feedback",n.feedback),he("/tutor_lms/api/homework_task_confirm.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getHomeworkTasks(n){const u=`/tutor_lms/api/homework_task_list.jsp${He({course_id:n.courseId,homework_id:n.homeworkId,course_user_id:n.courseUserId})}`;return he(u)},async getMaterials(n){const u=`/tutor_lms/api/materials_list.jsp${He({course_id:n.courseId})}`;return he(u)},async uploadMaterial(n){const u=new FormData;u.set("course_id",String(n.courseId)),u.set("title",n.title),u.set("content",n.content??""),u.set("library_link",n.link??""),n.file&&u.set("library_file",n.file);const o=`/tutor_lms/api/materials_upload.jsp${He({course_id:n.courseId})}`;return he(o,{method:"POST",body:u})},async deleteMaterial(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("library_id",String(n.libraryId)),he("/tutor_lms/api/materials_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getQnas(n){const u=`/tutor_lms/api/qna_list.jsp${He({course_id:n.courseId,s_keyword:n.keyword})}`;return he(u)},async getQnaDetail(n){const u=`/tutor_lms/api/qna_view.jsp${He({course_id:n.courseId,post_id:n.postId})}`;return he(u)},async answerQna(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("post_id",String(n.postId)),u.set("content",n.content),he("/tutor_lms/api/qna_answer.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getGrades(n){const u=`/tutor_lms/api/grades_list.jsp${He({course_id:n.courseId})}`;return he(u)},async recalcGrades(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),n.courseUserId&&u.set("course_user_id",String(n.courseUserId)),he("/tutor_lms/api/grades_recalc.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCompletions(n){const u=`/tutor_lms/api/completion_list.jsp${He({course_id:n.courseId})}`;return he(u)},async updateCompletion(n){const u=new URLSearchParams;return u.set("course_id",String(n.courseId)),u.set("action",n.action),u.set("course_user_ids",n.courseUserIds.join(",")),he("/tutor_lms/api/completion_update.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getCertificateTemplates(n={}){const u=`/tutor_lms/api/certificate_templates.jsp${He({template_type:n.templateType})}`;return he(u)},async issueCertificate(n){const u=`/tutor_lms/api/certificate_issue.jsp${He({course_user_id:n.courseUserId,type:n.type})}`;return he(u)},async getQuestionCategories(){return he("/tutor_lms/api/question_category_list.jsp")},async createQuestionCategory(n){const u=new URLSearchParams;return u.set("category_nm",n.categoryName),n.parentId!==void 0&&u.set("parent_id",String(n.parentId)),he("/tutor_lms/api/question_category_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateQuestionCategory(n){const u=new URLSearchParams;return u.set("id",String(n.id)),u.set("category_nm",n.categoryName),n.parentId!==void 0&&u.set("parent_id",String(n.parentId)),he("/tutor_lms/api/question_category_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteQuestionCategory(n){const u=new URLSearchParams;return u.set("id",String(n.id)),he("/tutor_lms/api/question_category_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getQuestionBankList(n={}){const u=`/tutor_lms/api/question_bank_list.jsp${He({category_id:n.categoryId,question_type:n.questionType,s_keyword:n.keyword,page:n.page,limit:n.limit})}`;return he(u)},async createQuestion(n){const u=new URLSearchParams;return n.categoryId&&u.set("category_id",String(n.categoryId)),u.set("question_type",String(n.questionType)),u.set("question",n.question),n.questionText&&u.set("question_text",n.questionText),n.grade&&u.set("grade",String(n.grade)),u.set("answer",n.answer),n.description&&u.set("description",n.description),n.points&&u.set("points",String(n.points)),n.items&&n.items.forEach((o,m)=>{u.set(`item${m+1}`,o)}),he("/tutor_lms/api/question_bank_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateQuestion(n){const u=new URLSearchParams;return u.set("id",String(n.id)),n.categoryId!==void 0&&u.set("category_id",String(n.categoryId)),n.questionType!==void 0&&u.set("question_type",String(n.questionType)),n.question!==void 0&&u.set("question",n.question),n.questionText!==void 0&&u.set("question_text",n.questionText),n.grade!==void 0&&u.set("grade",String(n.grade)),n.answer!==void 0&&u.set("answer",n.answer),n.description!==void 0&&u.set("description",n.description),n.points!==void 0&&u.set("points",String(n.points)),n.items&&n.items.forEach((o,m)=>{u.set(`item${m+1}`,o)}),he("/tutor_lms/api/question_bank_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteQuestion(n){const u=new URLSearchParams;return u.set("id",String(n.id)),he("/tutor_lms/api/question_bank_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async getExamTemplates(n={}){const u=`/tutor_lms/api/exam_template_list.jsp${He({page:n.page,limit:n.limit})}`;return he(u)},async createExamTemplate(n){const u=new URLSearchParams;return u.set("exam_nm",n.examName),n.examTime&&u.set("exam_time",String(n.examTime)),n.questionCnt!==void 0&&u.set("question_cnt",String(n.questionCnt)),n.shuffleYn!==void 0&&u.set("shuffle_yn",n.shuffleYn?"Y":"N"),n.showResultYn!==void 0&&u.set("show_result_yn",n.showResultYn?"Y":"N"),n.passingScore!==void 0&&u.set("passing_score",String(n.passingScore)),n.questionIds&&u.set("question_ids",n.questionIds.join(",")),n.content&&u.set("content",n.content),he("/tutor_lms/api/exam_template_insert.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async updateExamTemplate(n){const u=new URLSearchParams;return u.set("id",String(n.id)),n.examName&&u.set("exam_nm",n.examName),n.examTime&&u.set("exam_time",String(n.examTime)),n.questionCnt!==void 0&&u.set("question_cnt",String(n.questionCnt)),n.shuffleYn!==void 0&&u.set("shuffle_yn",n.shuffleYn?"Y":"N"),n.showResultYn!==void 0&&u.set("show_result_yn",n.showResultYn?"Y":"N"),n.passingScore!==void 0&&u.set("passing_score",String(n.passingScore)),n.questionIds&&u.set("question_ids",n.questionIds.join(",")),n.content!==void 0&&u.set("content",n.content),he("/tutor_lms/api/exam_template_modify.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})},async deleteExamTemplate(n){const u=new URLSearchParams;return u.set("id",String(n.id)),he("/tutor_lms/api/exam_template_delete.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})}};function mm(n){if(!n)return null;try{const u=JSON.parse(n);return!u||typeof u!="object"?null:u}catch{return null}}function Xc({isOpen:n,onClose:u,onSelect:o,selectedCourse:m}){const[x,p]=c.useState(""),[B,F]=c.useState("\uC804\uCCB4"),[v,H]=c.useState(m),[S,T]=c.useState([]),[N,R]=c.useState(!1),[G,J]=c.useState(null);c.useEffect(()=>{if(!n)return;let L=!1;return H(m),p(""),F("\uC804\uCCB4"),(async()=>{R(!0),J(null);try{const k=await le.getPrograms();if(k.rst_code!=="0000")throw new Error(k.rst_message);const g=(k.rst_data??[]).map(M=>{var j,O,$,d,f,U,I,Q;const _=mm(M.plan_json);return{id:String(M.id),classification:((O=(j=_==null?void 0:_.basic)==null?void 0:j.classification)==null?void 0:O.label)||((d=($=_==null?void 0:_.basic)==null?void 0:$.classification)==null?void 0:d.value)||"\uBBF8\uBD84\uB958",name:M.course_nm||((f=_==null?void 0:_.basic)==null?void 0:f.courseName)||`\uACFC\uC815 ${M.id}`,department:((U=_==null?void 0:_.basic)==null?void 0:U.department)||"",major:((I=_==null?void 0:_.basic)==null?void 0:I.major)||"",departmentName:((Q=_==null?void 0:_.basic)==null?void 0:Q.departmentName)||""}});L||T(g)}catch(k){L||J(k instanceof Error?k.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{L||R(!1)}})(),()=>{L=!0}},[n,m]);const y=c.useMemo(()=>{const L=x.trim().toLowerCase();return S.filter(D=>{const k=[D.name,D.department,D.major,D.departmentName].map(M=>String(M||"").toLowerCase()).filter(Boolean),A=L===""||k.some(M=>M.includes(L)),g=B==="\uC804\uCCB4"||D.classification===B;return A&&g})},[S,x,B]),q=()=>{o(v),u()},P=()=>{H(m),u()};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:"\uC18C\uC18D \uACFC\uC815 \uC120\uD0DD"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"\uAC1C\uC124\uB41C \uACFC\uC815 \uC911 \uD558\uB098\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uBBF8\uC120\uD0DD\uC73C\uB85C \uB458 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(yt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:x,onChange:L=>p(L.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:B,onChange:L=>F(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{onClick:()=>H(null),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${v===null?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:"\uBBF8\uC120\uD0DD"}),e.jsx("p",{className:"text-gray-700",children:"\uC18C\uC18D \uACFC\uC815 \uC5C6\uC74C"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD2B9\uC815 \uACFC\uC815\uC5D0 \uC18C\uC18D\uB418\uC9C0 \uC54A\uC740 \uB3C5\uB9BD \uACFC\uBAA9\uC73C\uB85C \uAC1C\uC124\uB429\uB2C8\uB2E4."})]}),v===null&&e.jsx(ys,{className:"w-6 h-6 text-blue-600"})]})}),G?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:G})}):N?e.jsx("div",{className:"py-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):y.length===0?e.jsxs("div",{className:"py-16 text-center text-gray-500",children:[e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]}):y.map(L=>e.jsx("div",{onClick:()=>H(L),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${(v==null?void 0:v.id)===L.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:L.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:L.id})]}),e.jsx("h4",{className:"text-gray-900 mb-1",children:L.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{children:[L.department,L.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:L.departmentName||"-"})]})]}),(v==null?void 0:v.id)===L.id&&e.jsx(ys,{className:"w-6 h-6 text-blue-600 ml-4"})]})},L.id))]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:v===null?e.jsx("span",{children:"\uBBF8\uC120\uD0DD \uC0C1\uD0DC\uC785\uB2C8\uB2E4"}):e.jsxs("span",{children:["\uC120\uD0DD\uB41C \uACFC\uC815: ",e.jsx("span",{className:"text-blue-600",children:v.name})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:P,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})}):null}function er(n){if(!n)return null;const u=(n.haksaCourseCode||"").trim(),o=(n.haksaOpenYear||"").trim(),m=(n.haksaOpenTerm||"").trim(),x=(n.haksaBunbanCode||"").trim(),p=(n.haksaGroupCode||"").trim();return!u||!o||!m||!x||!p?null:{courseCode:u,openYear:o,openTerm:m,bunbanCode:x,groupCode:p}}function Ke(n,u=0){const o=Number(n);return Number.isFinite(o)?Math.trunc(o):u}function xm(n,u="N"){return n==="Y"?"Y":n==="N"?"N":u}function Ss(n){return Number.isFinite(n)?Math.min(100,Math.max(0,n)):0}function Ul(n,u){const o=Array.isArray(n)?n[0]:n;if(!o||typeof o!="object")return;const m=o;return m[u]??m[u.toUpperCase()]}function fs(n,u,o=""){const m=Ul(n,u);return m==null?o:String(m)}function Ft(n,u,o=0){return Ke(Ul(n,u),o)}function Xs(n,u,o="N"){return xm(Ul(n,u),o)}function Mu({course:n,onCourseUpdated:u,initialSubTab:o="basic"}){const m=(n==null?void 0:n.sourceType)==="haksa"||!!(n!=null&&n.haksaCourseCode||n!=null&&n.haksaOpenYear||n!=null&&n.haksaOpenTerm||n!=null&&n.haksaBunbanCode||n!=null&&n.haksaGroupCode)||String((n==null?void 0:n.courseType)||"").includes("\uD559\uC0AC"),x=Ke((n==null?void 0:n.mappedCourseId)??(n==null?void 0:n.id),0),[p,B]=c.useState(o),[F,v]=c.useState(null),[H,S]=c.useState(!1),[T,N]=c.useState(null),R=Xs(F,"pass_yn","N")==="Y",G=async()=>{if(m){v(null),S(!1);return}if(x<=0){v(null),N("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}S(!0),N(null);try{const J=await le.getCourseInfo({courseId:x});if(J.rst_code!=="0000")throw new Error(J.rst_message);v(J.rst_data??null)}catch(J){v(null),N(J instanceof Error?J.message:"\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{S(!1)}};return c.useEffect(()=>{G()},[x,p]),c.useEffect(()=>{p==="certificate"&&!R&&B("evaluation")},[R,p]),c.useEffect(()=>{B(o)},[o]),e.jsxs("div",{className:"space-y-6",children:[H&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!H&&T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:T}),!H&&!T&&p==="basic"&&e.jsx(gm,{course:n,courseId:x,detail:F,onReload:G,onCourseUpdated:u,isHaksa:m}),!H&&!T&&p==="evaluation"&&(m?e.jsx(ym,{course:n}):e.jsx(hm,{courseId:x,detail:F,onReload:G})),!H&&!T&&!m&&p==="completion"&&e.jsx(pm,{courseId:x,detail:F,onReload:G}),!H&&!T&&!m&&p==="certificate"&&R&&e.jsx(fm,{courseId:x,detail:F,onReload:G})]})}function gm({course:n,courseId:u,detail:o,onReload:m,onCourseUpdated:x,isHaksa:p=!1}){const[B,F]=c.useState(!1),[v,H]=c.useState(!1),[S,T]=c.useState(null),[N,R]=c.useState(""),[G,J]=c.useState(""),[y,q]=c.useState(!1),[P,L]=c.useState({courseName:"",courseType:"",programId:0,programName:""});c.useEffect(()=>{R(fs(o,"content1","")),J(fs(o,"content2",""))},[o]);const D=()=>{L({courseName:(n==null?void 0:n.subjectName)??fs(o,"course_nm",""),courseType:(n==null?void 0:n.courseType)??"",programId:Ke((n==null?void 0:n.programId)??0,0),programName:(n==null?void 0:n.programName)??fs(o,"program_nm","-")}),q(!0)},k=()=>{q(!1),T(null)},A=y&&P.programId>0?{id:String(P.programId),classification:"\uACFC\uC815",name:P.programName,department:"-",major:"-",departmentName:"-"}:n&&0<Ke(n.programId,0)?{id:String(n.programId),classification:"\uACFC\uC815",name:n.programName,department:"-",major:"-",departmentName:"-"}:null,g=async U=>{if(y){L(Q=>({...Q,programId:U?Ke(U.id,0):0,programName:U?U.name:"-"})),F(!1);return}if(!u){T("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}const I=U?Ke(U.id,0):0;if(U&&!I){T("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}H(!0),T(null);try{const Q=await le.setCourseProgram({courseId:u,programId:I});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);x==null||x({...n,programId:I,programName:U?U.name:"-"}),await m()}catch(Q){T(Q instanceof Error?Q.message:"\uC18C\uC18D \uACFC\uC815 \uBCC0\uACBD \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1),F(!1)}},M=async()=>{if(!u){T("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}H(!0),T(null);try{const U=Ke((n==null?void 0:n.programId)??0,0);if(P.programId!==U){const I=await le.setCourseProgram({courseId:u,programId:P.programId});if(I.rst_code!=="0000")throw new Error(I.rst_message)}x==null||x({...n,programId:P.programId,programName:P.programName}),await m(),q(!1)}catch(U){T(U instanceof Error?U.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}},_=async()=>{if(!u){T("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}H(!0),T(null);try{const U=await le.updateCourseInfo({courseId:u,content1:N,content2:G});if(U.rst_code!=="0000")throw new Error(U.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await m()}catch(U){T(U instanceof Error?U.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}},j=(n==null?void 0:n.subjectName)??(o==null?void 0:o.course_nm)??"-",O=(n==null?void 0:n.courseId)??(o==null?void 0:o.course_id_conv)??(o==null?void 0:o.course_cd)??(o!=null&&o.id?String(o.id):u?String(u):"-"),$=(n==null?void 0:n.programName)??(o==null?void 0:o.program_nm)??"-",d=(n==null?void 0:n.period)??(o==null?void 0:o.period_conv)??"-",f=Ke((n==null?void 0:n.students)??(o==null?void 0:o.student_cnt),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAE30\uBCF8 \uC815\uBCF4"}),!p&&!y&&e.jsxs("button",{onClick:D,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]}),!p&&y&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:k,disabled:v,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-60",children:e.jsx("span",{children:"\uCDE8\uC18C"})}),e.jsxs("button",{onClick:()=>void M(),disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:v?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),p&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB41C \uB370\uC774\uD130\uC785\uB2C8\uB2E4. \uAE30\uBCF8 \uC815\uBCF4\uB294 \uC77D\uAE30 \uC804\uC6A9\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),S&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:S}),p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4DA} \uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uD55C\uAE00)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaCourseName)||j||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uBA85(\uC601\uBB38)"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaCourseEname)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaCourseCode)||O||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uBD84\uBC18\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaBunbanCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uD615\uD0DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaCategory)||(n==null?void 0:n.courseType)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD3D0\uAC15\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(n==null?void 0:n.haksaVisible)==="Y"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(n==null?void 0:n.haksaVisible)==="Y"?"\uC815\uC0C1":(n==null?void 0:n.haksaVisible)==="N"?"\uD3D0\uAC15":(n==null?void 0:n.haksaVisible)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4C5} \uAC1C\uC124 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uC5F0\uB3C4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaOpenYear)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC1C\uC124\uD559\uAE30"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaOpenTerm)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC8FC\uCC28"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaWeek)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC2DC\uC791\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaStartdate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC88C\uC885\uB8CC\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaEnddate)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB300\uC0C1\uD559\uB144"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:n!=null&&n.haksaGrade?`${n.haksaGrade}\uD559\uB144`:"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F3EB} \uD559\uACFC/\uACFC\uC815 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaDeptName)||$||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uACFC/\uC804\uACF5\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaDeptCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaGradName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uB2E8\uACFC\uB300\uD559\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaGradCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uBA85"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaCurriculumName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uACFC\uBAA9\uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaCurriculumCode)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uD559\uBD80/\uB300\uD559\uC6D0 \uAD6C\uBD84\uCF54\uB4DC"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm font-mono",children:(n==null?void 0:n.haksaGroupCode)||"-"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F393} \uAC15\uC758 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC694\uC77C"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaDayCd)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2DC\uAC04"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaHour1)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uC2E4"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaClassroom)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uC601\uBB38\uAC15\uC88C\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(n==null?void 0:n.haksaEnglish)==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:(n==null?void 0:n.haksaEnglish)==="Y"?"\uC601\uBB38\uAC15\uC88C":(n==null?void 0:n.haksaEnglish)==="N"?"\uAD6D\uBB38\uAC15\uC88C":(n==null?void 0:n.haksaEnglish)||"-"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[e.jsx("h4",{className:"text-gray-900 font-medium mb-4 pb-2 border-b border-gray-100",children:"\u{1F4CB} \uAE30\uD0C0 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-gray-900 text-sm",children:(n==null?void 0:n.haksaTypeSyllabus)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"\uAC15\uC758\uACC4\uD68D\uC11C \uC874\uC7AC\uC5EC\uBD80"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-50 rounded-lg text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium ${(n==null?void 0:n.haksaIsSyllabus)==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(n==null?void 0:n.haksaIsSyllabus)==="Y"?"\uC788\uC74C":(n==null?void 0:n.haksaIsSyllabus)==="N"?"\uC5C6\uC74C":(n==null?void 0:n.haksaIsSyllabus)||"-"})})]})]})]})]}):y?e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:j}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uACFC\uBAA9\uBA85\uC740 \uC218\uC815\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:O})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:(n==null?void 0:n.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsxs("button",{type:"button",onClick:()=>F(!0),className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-gray-900 text-left hover:border-blue-500 hover:ring-1 hover:ring-blue-500 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:P.programName}),e.jsx(ds,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"\uD074\uB9AD\uD558\uC5EC \uC18C\uC18D \uACFC\uC815\uC744 \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-100 rounded-lg text-gray-500",children:[f,"\uBA85"]})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:j})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815ID"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:O})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uAD6C\uBD84"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:(n==null?void 0:n.courseType)??"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:$})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAD50\uC721\uAE30\uAC04"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uAC15\uC778\uC6D0"}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-gray-900",children:[f,"\uBA85"]})]})]}),e.jsx(Xc,{isOpen:B,onClose:()=>F(!1),onSelect:U=>{g(U)},selectedCourse:A}),!p&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:N,onChange:U=>R(U.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uBAA9 \uC18C\uAC1C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uC2B5 \uBAA9\uD45C"}),e.jsx("textarea",{value:G,onChange:U=>J(U.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uC2B5 \uBAA9\uD45C\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void _(),disabled:v,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:v?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})]})}function hm({courseId:n,detail:u,onReload:o}){const[m,x]=c.useState(!1),[p,B]=c.useState(null),[F,v]=c.useState({assignProgress:100,assignExam:0,assignHomework:0,assignForum:0,assignEtc:0,limitTotalScore:60,limitProgress:60,completeLimitProgress:60,completeLimitTotalScore:60,assignSurveyYn:"N",pushSurveyYn:"N",passYn:"N"});c.useEffect(()=>{u&&v({assignProgress:Ft(u,"assign_progress",100),assignExam:Ft(u,"assign_exam",0),assignHomework:Ft(u,"assign_homework",0),assignForum:Ft(u,"assign_forum",0),assignEtc:Ft(u,"assign_etc",0),limitTotalScore:Ft(u,"limit_total_score",60),limitProgress:Ft(u,"limit_progress",60),completeLimitProgress:Ft(u,"complete_limit_progress",60),completeLimitTotalScore:Ft(u,"complete_limit_total_score",60),assignSurveyYn:Xs(u,"assign_survey_yn","N"),pushSurveyYn:Xs(u,"push_survey_yn","N"),passYn:Xs(u,"pass_yn","N")})},[u]);const H=c.useMemo(()=>F.assignProgress+F.assignExam+F.assignHomework+F.assignForum+F.assignEtc,[F.assignEtc,F.assignExam,F.assignForum,F.assignHomework,F.assignProgress]),S=F.passYn==="Y",T=async()=>{if(!n){B("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}x(!0),B(null);try{const R=await le.updateCourseEvaluation({courseId:n,assignProgress:Ss(F.assignProgress),assignExam:Ss(F.assignExam),assignHomework:Ss(F.assignHomework),assignForum:Ss(F.assignForum),assignEtc:Ss(F.assignEtc),assignSurveyYn:F.assignSurveyYn,pushSurveyYn:F.pushSurveyYn,passYn:F.passYn,limitTotalScore:Ss(F.limitTotalScore),limitProgress:Ss(F.limitProgress),completeLimitProgress:Ss(F.completeLimitProgress),completeLimitTotalScore:Ss(F.completeLimitTotalScore)});if(R.rst_code!=="0000")throw new Error(R.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await o()}catch(R){B(R instanceof Error?R.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{x(!1)}},N="w-full px-3 py-2 border border-gray-300 rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uAD8C\uC7A5: \uD569\uACC4 100)"})]}),e.jsxs("div",{className:`text-sm ${H===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",H]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D(\uC9C4\uB3C4)"}),e.jsx("input",{type:"number",value:F.assignProgress,onChange:R=>v(G=>({...G,assignProgress:Ke(R.target.value,0)})),className:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:F.assignExam,onChange:R=>v(G=>({...G,assignExam:Ke(R.target.value,0)})),className:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:F.assignHomework,onChange:R=>v(G=>({...G,assignHomework:Ke(R.target.value,0)})),className:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD1A0\uB860"}),e.jsx("input",{type:"number",value:F.assignForum,onChange:R=>v(G=>({...G,assignForum:Ke(R.target.value,0)})),className:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:F.assignEtc,onChange:R=>v(G=>({...G,assignEtc:Ke(R.target.value,0)})),className:N})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uD569\uACA9) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC544\uB798 \uAE30\uC900\uC740 \uC218\uB8CC/\uD569\uACA9 \uD310\uC815 \uBC0F \uC131\uC801 \uC0C1\uD0DC \uD45C\uC2DC(\uBBF8\uB2EC/\uC218\uB8CC/\uD569\uACA9)\uC5D0 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."}),!S&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 text-orange-800 px-4 py-3 rounded-lg text-sm",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9\uC774 \uAEBC\uC838 \uC788\uC5B4\uC694. \uADF8\uB798\uC11C \uC9C0\uAE08\uC740 \u201C\uD569\uACA9 \uAE30\uC900\u201D \uC785\uB825\uCE78\uC744 \uC7A0\uAC00\uB450\uC5C8\uC2B5\uB2C8\uB2E4. (\uC218\uB8CC \uAE30\uC900\uB9CC \uC0AC\uC6A9\uB429\uB2C8\uB2E4)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:F.limitTotalScore,onChange:R=>v(G=>({...G,limitTotalScore:Ke(R.target.value,0)})),className:`${N}${S?"":" bg-gray-100 text-gray-500"}`,disabled:!S})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:F.limitProgress,onChange:R=>v(G=>({...G,limitProgress:Ke(R.target.value,0)})),className:`${N}${S?"":" bg-gray-100 text-gray-500"}`,disabled:!S})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC218\uB8CC(\uC644\uB8CC) \uAE30\uC900"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uC9C0 \uC54A\uB294 \uD658\uACBD\uC5D0\uC11C\uB294 \u201C\uC218\uB8CC(\uC644\uB8CC)\u201D\uAC00 \uCD5C\uC885 \uC0C1\uD0DC\uAC00 \uB429\uB2C8\uB2E4."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD1D\uC810 \uAE30\uC900"}),e.jsx("input",{type:"number",value:F.completeLimitTotalScore,onChange:R=>v(G=>({...G,completeLimitTotalScore:Ke(R.target.value,0)})),className:N})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C4\uB3C4 \uAE30\uC900(%)"}),e.jsx("input",{type:"number",value:F.completeLimitProgress,onChange:R=>v(G=>({...G,completeLimitProgress:Ke(R.target.value,0)})),className:N})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uC635\uC158"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38\uCC38\uC5EC \uD3EC\uD568"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uC870\uAC74\uC5D0 \uC124\uBB38\uCC38\uC5EC \uC5EC\uBD80\uB97C \uD3EC\uD568\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.assignSurveyYn==="Y",onChange:R=>v(G=>({...G,assignSurveyYn:R.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uC124\uBB38 \uB3C5\uB824"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uC124\uBB38 \uB3C5\uB824 \uBA54\uC2DC\uC9C0/\uD45C\uC2DC \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.pushSurveyYn==="Y",onChange:R=>v(G=>({...G,pushSurveyYn:R.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:"\uD569\uACA9 \uC0C1\uD0DC \uC0AC\uC6A9"}),e.jsx("div",{className:"text-sm text-gray-600",children:"\uD569\uACA9 \uC0C1\uD0DC\uB97C \uC0AC\uC6A9\uD558\uBA74 \u201C\uD569\uACA9\uC99D\u201D \uBC1C\uAE09\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F.passYn==="Y",onChange:R=>v(G=>({...G,passYn:R.target.checked?"Y":"N"})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void T(),disabled:m,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:m?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function Zc(n){const u=(n.template_nm||"").trim(),o=(n.template_cd||"").trim();return u&&o?`${u} (${o})`:u||o||`\uD15C\uD50C\uB9BF #${n.id}`}function pm({courseId:n,detail:u,onReload:o}){const[m,x]=c.useState([]),[p,B]=c.useState(!1),[F,v]=c.useState(!1),[H,S]=c.useState(null),[T,N]=c.useState("Y"),[R,G]=c.useState(0),[J,y]=c.useState("N"),[q,P]=c.useState(""),[L,D]=c.useState(0),[k,A]=c.useState("R"),[g,M]=c.useState("A");c.useEffect(()=>{let j=!1;return(async()=>{B(!0);try{const $=await le.getCertificateTemplates({templateType:"C"});if($.rst_code!=="0000")throw new Error($.rst_message);j||x($.rst_data??[])}catch{j||x([])}finally{j||B(!1)}})(),()=>{j=!0}},[]),c.useEffect(()=>{u&&(N(Xs(u,"cert_complete_yn","Y")),G(Ft(u,"cert_template_id",0)),y(Xs(u,"complete_no_yn","N")),P(fs(u,"complete_prefix","")),D(Ft(u,"postfix_cnt",0)),A(fs(u,"postfix_type","R")==="C"?"C":"R"),M(fs(u,"postfix_ord","A")==="D"?"D":"A"))},[u]);const _=async()=>{if(!n){S("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!u){S("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}v(!0),S(null);try{const j=await le.updateCourseCertificateSettings({courseId:n,certCompleteYn:T,certTemplateId:R,passCertTemplateId:Ft(u,"pass_cert_template_id",0),completeNoYn:J,completePrefix:q,postfixCnt:Math.max(0,Ke(L,0)),postfixType:k,postfixOrd:g});if(j.rst_code!=="0000")throw new Error(j.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await o()}catch(j){S(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}};return e.jsxs("div",{className:"space-y-6",children:[H&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:H}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uC99D \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC\uC99D \uCD9C\uB825 \uBC84\uD2BC\uC744 \uC0AC\uC6A9\uD560\uC9C0 \uC5EC\uBD80\uB97C \uC124\uC815\uD569\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T==="Y",onChange:j=>N(j.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uC99D \uD15C\uD50C\uB9BF"}),e.jsxs("select",{value:R,onChange:j=>G(Ke(j.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:p,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),m.map(j=>e.jsx("option",{value:j.id,children:Zc(j)},j.id))]}),p&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC218\uB8CC\uBC88\uD638 \uC0AC\uC6A9"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC218\uB8CC \uCC98\uB9AC \uC2DC \uC218\uB8CC\uBC88\uD638\uB97C \uC0DD\uC131/\uBD80\uC5EC\uD558\uB294 \uADDC\uCE59\uC785\uB2C8\uB2E4."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:J==="Y",onChange:j=>y(j.target.checked?"Y":"N"),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uC55E\uC790\uB9AC(\uC811\uB450)"}),e.jsx("input",{type:"text",value:q,onChange:j=>P(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"\uC608: 2025-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uB8CC\uBC88\uD638 \uB4B7\uC790\uB9AC\uC218"}),e.jsx("input",{type:"number",value:L,onChange:j=>D(Ke(j.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-right",min:0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB4B7\uC790\uB9AC \uBC29\uC2DD"}),e.jsxs("select",{value:k,onChange:j=>A(j.target.value==="C"?"C":"R"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"R",children:"\uC218\uAC15\uC21C\uBC88"}),e.jsx("option",{value:"C",children:"\uC218\uAC15\uC0DD\uC544\uC774\uB514"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C \uBC29\uC2DD"}),e.jsxs("select",{value:g,onChange:j=>M(j.target.value==="D"?"D":"A"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"A",children:"\uC624\uB984\uCC28\uC21C"}),e.jsx("option",{value:"D",children:"\uB0B4\uB9BC\uCC28\uC21C"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void _(),disabled:F,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:F?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function fm({courseId:n,detail:u,onReload:o}){const[m,x]=c.useState([]),[p,B]=c.useState(!1),[F,v]=c.useState(!1),[H,S]=c.useState(null),[T,N]=c.useState(0);c.useEffect(()=>{let G=!1;return(async()=>{B(!0);try{const y=await le.getCertificateTemplates({templateType:"P"});if(y.rst_code!=="0000")throw new Error(y.rst_message);G||x(y.rst_data??[])}catch{G||x([])}finally{G||B(!1)}})(),()=>{G=!0}},[]),c.useEffect(()=>{u&&N(Ft(u,"pass_cert_template_id",0))},[u]);const R=async()=>{if(!n){S("\uACFC\uBAA9 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}if(!u){S("\uACFC\uBAA9 \uC815\uBCF4\uB97C \uBA3C\uC800 \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}v(!0),S(null);try{const G=await le.updateCourseCertificateSettings({courseId:n,certCompleteYn:Xs(u,"cert_complete_yn","Y"),certTemplateId:Ft(u,"cert_template_id",0),passCertTemplateId:T,completeNoYn:Xs(u,"complete_no_yn","N"),completePrefix:fs(u,"complete_prefix",""),postfixCnt:Ft(u,"postfix_cnt",0),postfixType:fs(u,"postfix_type","R")==="C"?"C":"R",postfixOrd:fs(u,"postfix_ord","A")==="D"?"D":"A"});if(G.rst_code!=="0000")throw new Error(G.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await o()}catch(G){S(G instanceof Error?G.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}};return e.jsxs("div",{className:"space-y-6",children:[H&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:H}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD569\uACA9\uC99D \uD15C\uD50C\uB9BF"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uD569\uACA9\uC99D \uCD9C\uB825 \uC2DC \uC0AC\uC6A9\uD560 \uD15C\uD50C\uB9BF\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4. (\uBBF8\uC9C0\uC815\uC774\uBA74 \uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF\uC744 \uC0AC\uC6A9\uD569\uB2C8\uB2E4)"}),e.jsxs("select",{value:T,onChange:G=>N(Ke(G.target.value,0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",disabled:p,children:[e.jsx("option",{value:0,children:"\uBBF8\uC9C0\uC815(\uC0AC\uC774\uD2B8 \uAE30\uBCF8 \uD15C\uD50C\uB9BF \uC0AC\uC6A9)"}),m.map(G=>e.jsx("option",{value:G.id,children:Zc(G)},G.id))]}),p&&e.jsx("p",{className:"text-sm text-gray-500",children:"\uD15C\uD50C\uB9BF \uBD88\uB7EC\uC624\uB294 \uC911..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>void R(),disabled:F,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:F?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function ym({course:n}){const u=c.useMemo(()=>er({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),o=n==null?void 0:n.id,[m,x]=c.useState({attendance:20,exam:40,assignment:30,etc:10}),[p,B]=c.useState({A:90,B:80,C:70,D:60,F:0}),[F,v]=c.useState(!1),[H,S]=c.useState(!1),[T,N]=c.useState(null);c.useEffect(()=>{if(!u)return;let y=!1;return(async()=>{var P,L;S(!0),N(null);try{const D=await le.getHaksaCourseEval(u);if(D.rst_code!=="0000")throw new Error(D.rst_message);const k=Array.isArray(D.rst_data)?D.rst_data[0]:D.rst_data,A=(k==null?void 0:k.eval_json)||"";if(A)try{const g=JSON.parse(A);y||(x(g.weights),B({...g.cutoffs,F:Math.max(0,Ke(((P=g.cutoffs)==null?void 0:P.D)??60,60)-1)}));return}catch{}if(o)try{const g=localStorage.getItem(`haksa_eval_weights_${o}`),M=localStorage.getItem(`haksa_eval_cutoffs_${o}`);if(g&&M){const _={weights:JSON.parse(g),cutoffs:JSON.parse(M)};y||(x(_.weights),B({..._.cutoffs,F:Math.max(0,Ke(((L=_.cutoffs)==null?void 0:L.D)??60,60)-1)})),await le.updateHaksaCourseEval({...u,evalJson:JSON.stringify(_)})}}catch{}}catch(D){y||N(D instanceof Error?D.message:"\uD3C9\uAC00 \uAE30\uC900\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{y||S(!1)}})(),()=>{y=!0}},[u,o]);const R=m.attendance+m.exam+m.assignment+m.etc,G=()=>{if(!u){N("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");return}v(!0),N(null),(async()=>{try{const y={weights:m,cutoffs:{...p,F:Math.max(0,Ke(p.D,60)-1)}},q=await le.updateHaksaCourseEval({...u,evalJson:JSON.stringify(y)});if(q.rst_code!=="0000")throw new Error(q.rst_message);alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(y){N(y instanceof Error?y.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}})()},J="w-full px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500";return e.jsxs("div",{className:"space-y-6",children:[T&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:T}),H&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm",children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC544\uB798 \uC124\uC815\uC740 \uC774 \uACFC\uBAA9\uC758 \uC131\uC801 \uD310\uC815 \uAE30\uC900\uC73C\uB85C \uC0AC\uC6A9\uB429\uB2C8\uB2E4."]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uCD1D\uC810 100\uC810 \uAE30\uC900\uC73C\uB85C \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{className:`text-sm font-medium ${R===100?"text-green-700":"text-orange-700"}`,children:["\uD569\uACC4: ",R]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD9C\uC11D"}),e.jsx("input",{type:"number",value:m.attendance,onChange:y=>x(q=>({...q,attendance:Ke(y.target.value,0)})),className:J,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uD5D8"}),e.jsx("input",{type:"number",value:m.exam,onChange:y=>x(q=>({...q,exam:Ke(y.target.value,0)})),className:J,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C"}),e.jsx("input",{type:"number",value:m.assignment,onChange:y=>x(q=>({...q,assignment:Ke(y.target.value,0)})),className:J,min:0,max:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAE30\uD0C0"}),e.jsx("input",{type:"number",value:m.etc,onChange:y=>x(q=>({...q,etc:Ke(y.target.value,0)})),className:J,min:0,max:100})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:"\uC131\uC801 \uB4F1\uAE09 \uAE30\uC900 (A~D)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uAC01 \uB4F1\uAE09\uC758 \uCD5C\uC18C \uC810\uC218\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694. (\uD574\uB2F9 \uC810\uC218 \uC774\uC0C1\uC774\uBA74 \uD574\uB2F9 \uB4F1\uAE09)"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-700 mb-2 text-center",children:"A \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p.A,onChange:y=>B(q=>({...q,A:Ke(y.target.value,90)})),className:`${J} bg-blue-50 border-blue-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"\uC810 \uC774\uC0C1"})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-1",children:"~100\uC810"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 mb-2 text-center",children:"B \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p.B,onChange:y=>B(q=>({...q,B:Ke(y.target.value,80)})),className:`${J} bg-green-50 border-green-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",p.A-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-yellow-700 mb-2 text-center",children:"C \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p.C,onChange:y=>B(q=>({...q,C:Ke(y.target.value,70)})),className:`${J} bg-yellow-50 border-yellow-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",p.B-1,"\uC810"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-700 mb-2 text-center",children:"D \uB4F1\uAE09"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p.D,onChange:y=>B(q=>({...q,D:Ke(y.target.value,60)})),className:`${J} bg-orange-50 border-orange-200`,min:0,max:100}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"\uC810 \uC774\uC0C1"})]}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:["~",p.C-1,"\uC810"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\uB4F1\uAE09 \uC694\uC57D"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:["A: ",p.A,"~100\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full",children:["B: ",p.B,"~",p.A-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:["C: ",p.C,"~",p.B-1,"\uC810"]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full",children:["D: ",p.D,"~",p.C-1,"\uC810"]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:G,disabled:F,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:F?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})})]})}function Lc({isOpen:n,onClose:u,onSave:o,mode:m="create",showWeekSession:x=!1,weekCount:p=15,initialData:B}){const[v,H]=c.useState({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null});if(c.useEffect(()=>{n&&m==="edit"&&B?H({title:B.title||"",description:B.description||"",dueDate:B.dueDate||"",dueTime:B.dueTime||"",totalScore:B.totalScore??100,submissionType:B.submissionType||"file",fileTypes:B.fileTypes||"",maxFileSize:B.maxFileSize??10,allowLateSubmission:B.allowLateSubmission??!1,latePenalty:B.latePenalty??0,weekNumber:B.weekNumber??1,sessionNumber:B.sessionNumber??1,file:null}):n&&m==="create"&&H({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,weekNumber:1,sessionNumber:1,file:null})},[n,m,B]),!n)return null;const S=N=>{N.preventDefault(),o(v),u()},T=m==="edit";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:T?"\uACFC\uC81C \uC218\uC815":"\uACFC\uC81C \uB4F1\uB85D"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.title,onChange:N=>H({...v,title:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),x&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:v.weekNumber,onChange:N=>H({...v,weekNumber:parseInt(N.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:p},(N,R)=>R+1).map(N=>e.jsxs("option",{value:N,children:[N,"\uC8FC\uCC28"]},N))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:v.sessionNumber,onChange:N=>H({...v,sessionNumber:parseInt(N.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(N,R)=>R+1).map(N=>e.jsxs("option",{value:N,children:[N,"\uCC28\uC2DC"]},N))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:v.description,onChange:N=>H({...v,description:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:v.dueDate,onChange:N=>H({...v,dueDate:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:v.dueTime,onChange:N=>H({...v,dueTime:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:v.totalScore,onChange:N=>H({...v,totalScore:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:v.submissionType,onChange:N=>H({...v,submissionType:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(v.submissionType==="file"||v.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:N=>{const R=N.target.files&&N.target.files[0]?N.target.files[0]:null;H({...v,file:R})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),v.file&&e.jsx("button",{type:"button",onClick:()=>H({...v,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),v.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",v.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:v.fileTypes,onChange:N=>H({...v,fileTypes:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:v.maxFileSize,onChange:N=>H({...v,maxFileSize:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v.allowLateSubmission,onChange:N=>H({...v,allowLateSubmission:N.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),v.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:v.latePenalty,onChange:N=>H({...v,latePenalty:parseInt(N.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:T?"\uC218\uC815":"\uB4F1\uB85D"})]})]})]})})}function bm({isOpen:n,onClose:u,courseId:o,task:m,onRefresh:x}){const[p,B]=c.useState((m==null?void 0:m.feedback)||""),[F,v]=c.useState(!1);if(!n||!m)return null;const H=async()=>{v(!0);try{const S=await le.confirmHomeworkTask({courseId:o,taskId:m.id,feedback:p});if(S.rst_code!=="0000")throw new Error(S.rst_message);alert("\uD3C9\uAC00\uC644\uB8CC \uCC98\uB9AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),x(),u()}catch(S){alert(S instanceof Error?S.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCD94\uAC00 \uACFC\uC81C \uC0C1\uC138 \uD655\uC778"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(Yr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uC9C0\uC2DC \uB0B4\uC6A9"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 text-gray-800 text-sm whitespace-pre-wrap",children:m.task}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 mt-1",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($u,{className:"w-3 h-3"}),"\uBD80\uC5EC: ",m.reg_date_conv]})})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(om,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD559\uC0DD \uC81C\uCD9C \uB0B4\uC6A9"})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${m.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:m.submit_yn_label})]}),m.submit_yn==="Y"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[m.subject&&e.jsx("div",{className:"font-semibold text-gray-900 mb-2 border-b border-gray-200 pb-2",children:m.subject}),e.jsx("div",{className:"text-gray-800 text-sm whitespace-pre-wrap min-h-[100px]",children:m.content||"\uB0B4\uC6A9 \uC5C6\uC74C"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uC81C\uCD9C: ",m.submit_date_conv]})]}):e.jsx("div",{className:"py-10 text-center text-gray-400 border border-dashed border-gray-200 rounded-lg",children:"\uC544\uC9C1 \uC81C\uCD9C\uB41C \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]}),e.jsx("hr",{className:"border-gray-100"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD50\uC218\uC790 \uD53C\uB4DC\uBC31 \uBC0F \uD3C9\uAC00"})]}),e.jsx("textarea",{value:p,onChange:S=>B(S.target.value),placeholder:"\uCD94\uAC00 \uACFC\uC81C\uC5D0 \uB300\uD55C \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none min-h-[120px]"})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 font-semibold",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uB2EB\uAE30"}),m.submit_yn==="Y"&&e.jsx("button",{onClick:H,disabled:F,className:"px-6 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:F?e.jsx("span",{children:"\uCC98\uB9AC \uC911..."}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{children:"\uD3C9\uAC00\uC644\uB8CC(\uD655\uC778)"})]})})]})]})]})}function Vu({isOpen:n,onClose:u,onSelect:o,multiSelect:m=!0,onMultiSelect:x,recommendContext:p,excludeLessonIds:B}){const[F,v]=c.useState(""),[H,S]=c.useState(""),[T,N]=c.useState("all"),[R,G]=c.useState([]),[J,y]=c.useState([]),[q,P]=c.useState(0),[L,D]=c.useState(1),[k,A]=c.useState(!1),[g,M]=c.useState(!1),[_,j]=c.useState(!1),[O,$]=c.useState(null),[d,f]=c.useState([]),[U,I]=c.useState([]),[Q,z]=c.useState(!1),[w,b]=c.useState(""),[h,W]=c.useState(new Set),oe=20;Me.useEffect(()=>{n&&(v(""),S(""),N("all"),D(1),G([]),P(0),I([]),f([]),b(""),W(new Set))},[n]),Me.useEffect(()=>{n&&(D(1),G([]),P(0),W(new Set),$(null))},[n,T]),Me.useEffect(()=>{n&&T==="all"&&(D(1),G([]),P(0),W(new Set))},[n,T,F,H]),Me.useEffect(()=>{n||W(new Set)},[n]),Me.useEffect(()=>{if(!n||T!=="all")return;let ue=!1;const de=setTimeout(()=>{(async()=>{const ae=L===1;A(ae),M(!ae),$(null);try{const xe=await le.getKollusList({keyword:F,categoryKey:H||void 0,page:L,limit:oe});if(xe.rst_code!=="0000")throw new Error(xe.rst_message);const ne=(xe.rst_data??[]).map(Fe=>({id:String(Fe.id||Fe.media_content_key),mediaKey:Fe.media_content_key,title:Fe.title,description:Fe.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${Fe.original_file_name}`:"",category:Fe.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:Fe.thumbnail||Fe.snapshot_url||"",duration:Fe.duration||"-",totalTime:Number(Fe.total_time??0),contentWidth:Number(Fe.content_width??0),contentHeight:Number(Fe.content_height??0),originalFileName:Fe.original_file_name||""})),ye=Array.isArray(xe.rst_categories)?xe.rst_categories:[];ue||(G(Fe=>ae?ne:[...Fe,...ne]),P(Number(xe.rst_total??ne.length)),ye.length>0&&y(ye))}catch(xe){ue||$(xe instanceof Error?xe.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ue||(A(!1),M(!1))}})()},250);return()=>{ue=!0,clearTimeout(de)}},[n,T,F,H,L]),Me.useEffect(()=>{if(!n||T!=="recommend")return;let ue=!1;const de=setTimeout(()=>{(async()=>{const ae=JSON.stringify({courseName:(p==null?void 0:p.courseName)??"",courseIntro:(p==null?void 0:p.courseIntro)??"",courseDetail:(p==null?void 0:p.courseDetail)??"",lessonTitle:(p==null?void 0:p.lessonTitle)??"",lessonDescription:(p==null?void 0:p.lessonDescription)??"",keywords:F??"",topK:120,similarityThreshold:.2});if(!(d.length>0&&w===ae)){z(!0),$(null);try{const xe=await le.getContentRecommendations({courseName:p==null?void 0:p.courseName,courseIntro:p==null?void 0:p.courseIntro,courseDetail:p==null?void 0:p.courseDetail,lessonTitle:p==null?void 0:p.lessonTitle,lessonDescription:p==null?void 0:p.lessonDescription,keywords:F,topK:120,similarityThreshold:.2});if(xe.rst_code!=="0000")throw new Error(xe.rst_message);const ne=(xe.rst_data??[]).map(ye=>({id:String(ye.lesson_id??ye.id??ye.media_content_key),mediaKey:ye.media_content_key,title:ye.title,description:"",category:ye.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",thumbnail:ye.thumbnail||ye.snapshot_url||"",duration:ye.duration||"-",totalTime:Number(ye.total_time??0),contentWidth:Number(ye.content_width??0),contentHeight:Number(ye.content_height??0),lessonId:ye.lesson_id?Number(ye.lesson_id):void 0,originalFileName:ye.original_file_name||"",score:ye.score?Number(ye.score):void 0}));ue||(f(ne),b(ae))}catch(xe){ue||$(xe instanceof Error?xe.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{ue||z(!1)}}})()},250);return()=>{ue=!0,clearTimeout(de)}},[n,T,F,d.length,w,p==null?void 0:p.courseName,p==null?void 0:p.courseIntro,p==null?void 0:p.courseDetail,p==null?void 0:p.lessonTitle,p==null?void 0:p.lessonDescription]),Me.useEffect(()=>{if(!n||T!=="recommend")return;const ue=new Set;(B??[]).forEach(ae=>{const xe=typeof ae=="number"?ae:Number(String(ae).replace(/[^0-9]/g,""));Number.isFinite(xe)&&xe>0&&ue.add(xe)});const de=new Set,Z=d.filter(ae=>!ae.lessonId||ue.has(ae.lessonId)||de.has(ae.lessonId)?!1:(de.add(ae.lessonId),!0)).slice(0,50);I(Z)},[n,T,B,d]);const ie=T==="recommend"?U:R,pe=T==="recommend"?U.length:q,be=ue=>{if(m){W(de=>{const Z=new Set(de);return Z.has(ue.id)?Z.delete(ue.id):Z.add(ue.id),Z});return}ee(ue)},ee=async ue=>{try{if(j(!0),ue.lessonId&&ue.lessonId>0){const xe={...ue,id:String(ue.lessonId)};o(xe),u();return}const de=await le.upsertKollusLesson({mediaContentKey:ue.mediaKey,title:ue.title,totalTime:ue.totalTime,contentWidth:ue.contentWidth,contentHeight:ue.contentHeight});if(de.rst_code!=="0000")throw new Error(de.rst_message);const Z=Number(de.rst_data??0),ae={...ue,lessonId:Z,id:String(Z)};o(ae),u()}catch(de){$(de instanceof Error?de.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{j(!1)}},re=async()=>{const ue=ie.filter(de=>h.has(de.id));if(ue.length!==0)try{j(!0);const de=await Promise.all(ue.map(async Z=>{if(Z.lessonId&&Z.lessonId>0)return{...Z,id:String(Z.lessonId)};const ae=await le.upsertKollusLesson({mediaContentKey:Z.mediaKey,title:Z.title,totalTime:Z.totalTime,contentWidth:Z.contentWidth,contentHeight:Z.contentHeight});if(ae.rst_code!=="0000")throw new Error(ae.rst_message);const xe=Number(ae.rst_data??0);return{...Z,lessonId:xe,id:String(xe)}}));x?x(de):de.forEach(Z=>o(Z)),u()}catch(de){$(de instanceof Error?de.message:"\uB808\uC2A8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{j(!1)}},ce=()=>{const ue=ie.map(Z=>Z.id),de=ue.length>0&&ue.every(Z=>h.has(Z));W(Z=>{const ae=new Set(Z);return de?ue.forEach(xe=>ae.delete(xe)):ue.forEach(xe=>ae.add(xe)),ae})};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-gray-900",children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(yt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!1,e.jsx("button",{type:"button",onClick:()=>N("all"),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${T==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"\uC804\uCCB4"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",pe,"\uAC74"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:F,onChange:ue=>v(ue.target.value),placeholder:T==="recommend"?"\uCD94\uCC9C \uD0A4\uC6CC\uB4DC \uCD94\uAC00...":"\uC81C\uBAA9\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),T==="all"&&e.jsxs("select",{value:H,onChange:ue=>S(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),J.map(ue=>e.jsx("option",{value:ue.key,children:ue.name},ue.key))]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D: ",e.jsx("span",{className:"text-blue-600 font-medium",children:q}),"\uAC74"]}),m&&e.jsxs("button",{onClick:re,disabled:h.size===0||_,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${h.size>0&&!_?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(Pl,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC120\uD0DD\uCD94\uAC00 (",h.size,"\uAC74)"]})]})]}),O&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:O}),(k||Q)&&e.jsx("div",{className:"py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!k&&!Q&&e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[m&&e.jsx("th",{className:"px-3 py-2 w-10",children:e.jsx("input",{type:"checkbox",checked:ie.length>0&&ie.every(ue=>h.has(ue.id)),onChange:ce,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"No"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uAC15\uC758\uBA85"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-600",children:"\uC2DC\uAC04"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-600",children:"\uC6D0\uBCF8\uD30C\uC77C"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ie.map((ue,de)=>e.jsxs("tr",{className:`hover:bg-blue-50 cursor-pointer transition-colors ${h.has(ue.id)?"bg-blue-50":""}`,onClick:()=>be(ue),children:[m&&e.jsx("td",{className:"px-3 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:h.has(ue.id),onChange:()=>{},className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:de+1}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:ue.category})}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-900 max-w-xs truncate",children:ue.title}),e.jsx("td",{className:"px-3 py-2 text-center text-sm text-gray-600",children:ue.totalTime?`${ue.totalTime}\uBD84`:ue.duration}),e.jsx("td",{className:"px-3 py-2 text-sm text-gray-500 max-w-xs truncate",children:ue.originalFileName||"-"})]},ue.id))})]}),ie.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:T==="recommend"?"\uCD94\uCC9C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]}),!k&&!Q&&T==="all"&&R.length<q&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{type:"button",onClick:()=>D(ue=>ue+1),disabled:g,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:g?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})})]})]})}):null}const ed=({courseId:n,courseName:u,onClose:o,onSaveComplete:m,embedded:x=!1})=>{const[p,B]=Me.useState([]),[F,v]=Me.useState([]),[H,S]=Me.useState(!1),[T,N]=Me.useState(!1),[R,G]=Me.useState(null),[J,y]=Me.useState(!1),[q,P]=Me.useState(null),L=Me.useCallback(async()=>{if(n){S(!0),G(null);try{const z=await le.getCurriculum({courseId:n});if(z.rst_code!=="0000")throw new Error(z.rst_message);const w=z.rst_data??[],b=new Map;w.forEach(W=>{const oe=W.section_id||0;b.has(oe)||b.set(oe,{sectionId:oe,sectionName:W.section_nm||`${W.chapter}\uCC28\uC2DC`,lessons:[]}),b.get(oe).lessons.push({lessonId:W.lesson_id,lessonName:W.lesson_nm||"",lessonType:W.lesson_type||"",lessonTypeConv:W.lesson_type_conv||"",onoffType:W.onoff_type||"",onoffTypeConv:W.onoff_type_conv||"",totalTime:W.total_time_min||0,completeTime:W.complete_time_min||0,duration:W.duration_conv||"",chapter:W.chapter})});const h=Array.from(b.values());B(h),v(JSON.parse(JSON.stringify(h)))}catch(z){G(z instanceof Error?z.message:"\uCC28\uC2DC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{S(!1)}}},[n]);Me.useEffect(()=>{L()},[L]);const D=()=>{const z=Date.now();B([...p,{sectionId:z,sectionName:`${p.length+1}\uCC28\uC2DC`,lessons:[],isNew:!0}])},k=(z,w)=>{B(p.map(b=>b.sectionId===z?{...b,sectionName:w}:b))},A=z=>{B(p.filter(w=>w.sectionId!==z))},g=z=>{P(z),y(!0)},M=z=>{q!==null&&z.forEach(w=>_(q,w)),y(!1),P(null)},_=(z,w)=>{B(b=>b.map(h=>{if(h.sectionId===z){const W=w.lessonId??w.id;if(h.lessons.find(ie=>String(ie.lessonId)===String(W)))return h;const oe={lessonId:W,lessonName:w.title,lessonType:w.lessonType||w.lesson_type||"05",lessonTypeConv:w.category||"",totalTime:w.totalTime||0,completeTime:w.totalTime||0,duration:w.duration||"",isNew:!0};return{...h,lessons:[...h.lessons,oe]}}return h}))},j=(z,w)=>{B(p.map(b=>b.sectionId===z?{...b,lessons:b.lessons.filter(h=>h.lessonId!==w)}:b))},O=(z,w,b)=>{B(p.map(h=>h.sectionId===z?{...h,lessons:h.lessons.map(W=>W.lessonId===w?{...W,completeTime:b}:W)}:h))},$=(z,w)=>{w!==0&&B(p.map(b=>{if(b.sectionId===z){const h=[...b.lessons];return[h[w-1],h[w]]=[h[w],h[w-1]],{...b,lessons:h}}return b}))},d=(z,w)=>{B(p.map(b=>{if(b.sectionId===z){if(w>=b.lessons.length-1)return b;const h=[...b.lessons];return[h[w],h[w+1]]=[h[w+1],h[w]],{...b,lessons:h}}return b}))},f=async()=>{N(!0),G(null);try{const z=new Set;F.forEach(oe=>{oe.lessons.forEach(ie=>{ie.isNew||z.add(Number(ie.lessonId))})});const w=new Set;p.forEach(oe=>{oe.lessons.forEach(ie=>{ie.isNew||w.add(Number(ie.lessonId))})});for(const oe of z)if(!w.has(oe)){const ie=await le.deleteCurriculumLesson({courseId:n,lessonId:oe});if(ie.rst_code!=="0000")throw new Error(ie.rst_message)}const b=new Set(F.map(oe=>oe.sectionId)),h=new Set(p.filter(oe=>!oe.isNew).map(oe=>oe.sectionId));for(const oe of b)!h.has(oe)&&oe!==0&&await le.deleteCurriculumSection({courseId:n,sectionId:oe});for(const oe of p)if(oe.isNew){const ie=await le.insertCurriculumSection({courseId:n,sectionName:oe.sectionName});if(ie.rst_code!=="0000")throw new Error(ie.rst_message);oe.sectionId=ie.rst_data||oe.sectionId,oe.isNew=!1}for(const oe of p)for(const ie of oe.lessons)if(ie.isNew){const pe=await le.addCurriculumLesson({courseId:n,sectionId:oe.sectionId,lessonId:Number(ie.lessonId)});if(pe.rst_code!=="0000")throw new Error(pe.rst_message);ie.isNew=!1}let W=0;for(const oe of p)for(const ie of oe.lessons)W++,ie.isNew||await le.updateCurriculumLesson({courseId:n,lessonId:Number(ie.lessonId),chapter:W,sectionId:oe.sectionId,completeTime:ie.completeTime});alert("\uCC28\uC2DC\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),await L(),m==null||m()}catch(z){const w=z instanceof Error?z.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";G(w),alert("\uC800\uC7A5 \uC2E4\uD328: "+w)}finally{N(!1)}},U=p.reduce((z,w)=>z+w.lessons.length,0),I=x?"bg-white":"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",Q=x?"":"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col";return e.jsxs("div",{className:I,children:[e.jsxs("div",{className:Q,children:[!x&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uCC28\uC2DC \uD3B8\uC9D1"}),u&&e.jsx("p",{className:"text-sm text-gray-600",children:u})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:x?"":"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCC28\uC2DC ",p.length,"\uAC1C \xB7 \uB808\uC2A8 ",U,"\uAC1C"]}),e.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),H&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),R&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:R}),!H&&p.map((z,w)=>e.jsxs("div",{className:"mb-4 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[w+1,"\uCC28\uC2DC"]}),e.jsx("input",{type:"text",value:z.sectionName,onChange:b=>k(z.sectionId,b.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),z.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC2E0\uADDC"})]}),e.jsx("button",{type:"button",onClick:()=>A(z.sectionId),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Nt,{className:"w-5 h-5"})})]}),e.jsxs("button",{type:"button",onClick:()=>g(z.sectionId),className:"flex items-center gap-2 px-3 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors mb-3",children:[e.jsx(Qr,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC601\uC0C1 \uCD94\uAC00"})]}),z.lessons.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uAD6C\uBD84"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uAC15\uC758\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC778\uC815\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC0AD\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uC21C\uC11C"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.lessons.map((b,h)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 font-medium",children:h+1}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.onoffType==="N"?"bg-green-100 text-green-700":b.onoffType==="F"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700"}`,children:b.onoffTypeConv||(b.onoffType==="N"?"\uC628\uB77C\uC778":b.onoffType==="F"?"\uC624\uD504\uB77C\uC778":"\uBE14\uB80C\uB514\uB4DC")})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900",children:b.lessonName}),b.isNew&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"\uC2E0\uADDC"})]})}),e.jsxs("td",{className:"px-4 py-3 text-center text-sm text-gray-600",children:[b.totalTime||b.duration||"-","\uBD84"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"number",min:"0",value:b.completeTime||"",onChange:W=>O(z.sectionId,b.lessonId,Number(W.target.value)),className:"w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uBD84"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>j(z.sectionId,b.lessonId),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>$(z.sectionId,h),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:h===0,children:e.jsx(DC,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>d(z.sectionId,h),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:h===z.lessons.length-1,children:e.jsx(hr,{className:"w-4 h-4"})})]})})]},b.lessonId))})]})})]},z.sectionId))]}),e.jsxs("div",{className:`flex items-center justify-end gap-3 p-4 ${x?"mt-4":"border-t border-gray-200"}`,children:[!x&&o&&e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:f,disabled:T,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:T?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]}),e.jsx(Vu,{isOpen:J,onClose:()=>{y(!1),P(null)},onSelect:()=>{},onMultiSelect:M,multiSelect:!0})]})},td=n=>({id:String(n.id),title:n.exam_nm,description:n.content||"",questionIds:n.range_idx?n.range_idx.split(",").filter(Boolean):[],duration:n.exam_time||60,totalPoints:n.total_points||0,passingScore:n.assign1||60,shuffleQuestions:n.shuffle_yn==="Y",showResults:!0,createdAt:n.reg_date||new Date().toISOString()}),vm=n=>{let u="multiple_choice";return(n.question_type===3||n.question_type===4)&&(u="short_answer"),{id:String(n.id),type:u,title:n.question,content:n.question_text,points:n.score||5,categoryId:n.category_id?String(n.category_id):void 0}},jm=async()=>{try{const n=await le.getExamTemplates();return n.rst_code==="0000"?(n.rst_data??[]).map(td):[]}catch{return[]}};function Bm(){const[n,u]=c.useState([]),[o,m]=c.useState([]),[x,p]=c.useState([]),[B,F]=c.useState(!0),[v,H]=c.useState(!1),[S,T]=c.useState(null),[N,R]=c.useState(""),[G,J]=c.useState(!1),[y,q]=c.useState(null),[P,L]=c.useState(!1),[D,k]=c.useState(new Set),[A,g]=c.useState(""),[M,_]=c.useState(!1),[j,O]=c.useState({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),$=async()=>{try{F(!0),T(null);const ee=await le.getExamTemplates();if(ee.rst_code!=="0000")throw new Error(ee.rst_message);const re=(ee.rst_data??[]).map(td);u(re)}catch(ee){T(ee instanceof Error?ee.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}};c.useEffect(()=>{$()},[]);const d=async()=>{try{const ee=await le.getQuestionCategories();ee.rst_code==="0000"&&p(ee.rst_data??[])}catch(ee){console.error("\uCE74\uD14C\uACE0\uB9AC \uB85C\uB4DC \uC2E4\uD328:",ee)}},f=async ee=>{try{_(!0);const re=await le.getQuestionBankList({categoryId:ee?Number(ee):void 0,limit:200});if(re.rst_code!=="0000")throw new Error(re.rst_message);const ce=(re.rst_data??[]).map(vm);m(ce)}catch(re){T(re instanceof Error?re.message:"\uBB38\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(!1)}},U=n.filter(ee=>!N||ee.title.toLowerCase().includes(N.toLowerCase())),I=o.filter(ee=>!A||ee.categoryId===A),Q=()=>{q(null),O({title:"",description:"",questionIds:[],duration:60,passingScore:60,shuffleQuestions:!1,showResults:!0}),J(!0)},z=ee=>{q(ee),O({title:ee.title,description:ee.description,questionIds:ee.questionIds,duration:ee.duration,passingScore:ee.passingScore,shuffleQuestions:ee.shuffleQuestions,showResults:ee.showResults}),J(!0)},w=async()=>{if(j.title.trim())try{if(H(!0),T(null),y){const ee=await le.updateExamTemplate({id:Number(y.id),examName:j.title.trim(),examTime:j.duration,questionCnt:j.questionIds.length,shuffleYn:j.shuffleQuestions,passingScore:j.passingScore,questionIds:j.questionIds,content:j.description.trim()});if(ee.rst_code!=="0000")throw new Error(ee.rst_message)}else{const ee=await le.createExamTemplate({examName:j.title.trim(),examTime:j.duration,questionCnt:j.questionIds.length,shuffleYn:j.shuffleQuestions,passingScore:j.passingScore,questionIds:j.questionIds,content:j.description.trim()});if(ee.rst_code!=="0000")throw new Error(ee.rst_message)}await $(),J(!1)}catch(ee){T(ee instanceof Error?ee.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}},b=async ee=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{H(!0);const re=await le.deleteExamTemplate({id:Number(ee)});if(re.rst_code!=="0000")throw new Error(re.rst_message);await $()}catch(re){T(re instanceof Error?re.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}},h=async()=>{k(new Set(j.questionIds)),L(!0),await Promise.all([d(),f()])},W=async ee=>{g(ee),await f(ee||void 0)},oe=ee=>{k(re=>{const ce=new Set(re);return ce.has(ee)?ce.delete(ee):ce.add(ee),ce})},ie=()=>{O(ee=>({...ee,questionIds:Array.from(D)})),L(!1)},be=(()=>{const ee=j.questionIds.map(ce=>o.find(ue=>ue.id===ce)).filter(Boolean),re=ee.reduce((ce,ue)=>ce+ue.points,0);return{count:ee.length,totalPoints:re}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uC2DC\uD5D8\uAD00\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC744 \uC0DD\uC131\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:Q,disabled:v,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(ft,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uC0DD\uC131"})]})]}),S&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[S,e.jsx("button",{onClick:()=>T(null),className:"ml-2 underline",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:N,onChange:ee=>R(ee.target.value),placeholder:"\uC2DC\uD5D8 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),B?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm flex items-center justify-center py-16 text-gray-400",children:[e.jsx(os,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):e.jsx("div",{className:"grid gap-4",children:U.length>0?U.map(ee=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ee.title}),ee.description&&e.jsx("p",{className:"text-gray-500 mt-1",children:ee.description}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ru,{className:"w-4 h-4 text-indigo-500"}),e.jsxs("span",{children:[ee.questionIds.length,"\uBB38\uC81C"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($u,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{children:[ee.duration,"\uBD84"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"\uD569\uACA9:"}),e.jsxs("span",{className:"font-medium",children:[ee.passingScore,"\uC810"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>z(ee),disabled:v,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(ds,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>b(ee.id),disabled:v,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-5 h-5"})})]})]})},ee.id)):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm text-center py-16 text-gray-400",children:[e.jsx(zr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:Q,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uC2DC\uD5D8 \uC0DD\uC131\uD558\uAE30"})]})}),G&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>J(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y?"\uC2DC\uD5D8 \uC218\uC815":"\uC2DC\uD5D8 \uC0DD\uC131"}),e.jsx("button",{onClick:()=>J(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:j.title,onChange:ee=>O(re=>({...re,title:ee.target.value})),placeholder:"\uC608: \uC911\uAC04\uACE0\uC0AC",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:j.description,onChange:ee=>O(re=>({...re,description:ee.target.value})),placeholder:"\uC2DC\uD5D8\uC5D0 \uB300\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCD9C\uC81C \uBB38\uC81C"}),e.jsxs("button",{type:"button",onClick:h,className:"w-full flex items-center justify-between px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-400 hover:text-indigo-600 transition-colors",children:[e.jsx("span",{children:j.questionIds.length>0?`${be.count}\uBB38\uC81C \uC120\uD0DD\uB428 (\uCD1D ${be.totalPoints}\uC810)`:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBB38\uC81C \uC120\uD0DD"}),e.jsx(Ru,{className:"w-5 h-5"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC2DC\uAC04 (\uBD84)"}),e.jsx("input",{type:"number",value:j.duration,onChange:ee=>O(re=>({...re,duration:parseInt(ee.target.value)||0})),min:1,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD569\uACA9 \uC810\uC218"}),e.jsx("input",{type:"number",value:j.passingScore,onChange:ee=>O(re=>({...re,passingScore:parseInt(ee.target.value)||0})),min:0,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.shuffleQuestions,onChange:ee=>O(re=>({...re,shuffleQuestions:ee.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uBB38\uC81C \uC21C\uC11C \uB79C\uB364 \uBC30\uCE58"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showResults,onChange:ee=>O(re=>({...re,showResults:ee.target.checked})),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC2DC\uD5D8 \uC885\uB8CC \uD6C4 \uACB0\uACFC \uACF5\uAC1C"})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:w,disabled:!j.title.trim()||v,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[v?e.jsx(os,{className:"w-4 h-4 animate-spin"}):e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]}),P&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>L(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["\uBB38\uC81C \uC120\uD0DD (",D.size,"\uAC1C \uC120\uD0DD\uB428)"]}),e.jsx("button",{onClick:()=>L(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-shrink-0 px-6 py-3 border-b border-gray-100 bg-gray-50",children:e.jsxs("select",{value:A,onChange:ee=>W(ee.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),x.map(ee=>e.jsx("option",{value:ee.id,children:ee.category_nm},ee.id))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:M?e.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-400",children:[e.jsx(os,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"\uBB38\uC81C \uBD88\uB7EC\uC624\uB294 \uC911..."})]}):I.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:I.map(ee=>e.jsx("div",{className:`px-6 py-4 cursor-pointer transition-colors ${D.has(ee.id)?"bg-indigo-50":"hover:bg-gray-50"}`,onClick:()=>oe(ee.id),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center mt-0.5 ${D.has(ee.id)?"border-indigo-500 bg-indigo-500 text-white":"border-gray-300"}`,children:D.has(ee.id)&&e.jsx(Pl,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ee.title}),ee.content&&e.jsx("div",{className:"text-sm text-gray-500 mt-1 truncate",children:ee.content}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full ${ee.type==="multiple_choice"?"bg-blue-100 text-blue-700":ee.type==="short_answer"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:ee.type==="multiple_choice"?"\uAC1D\uAD00\uC2DD":ee.type==="short_answer"?"\uC8FC\uAD00\uC2DD":"OX\uD615"}),e.jsxs("span",{children:[ee.points,"\uC810"]})]})]})]})},ee.id))}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Ru,{className:"w-10 h-10 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:"\uBB38\uC81C\uC740\uD589\uC5D0\uC11C \uBA3C\uC800 \uBB38\uC81C\uB97C \uCD94\uAC00\uD574\uC8FC\uC138\uC694."})]})}),e.jsxs("div",{className:"flex-shrink-0 border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:ie,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(Pl,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC120\uD0DD \uC644\uB8CC"})]})]})]})]})]})}const Il=()=>{const n=new Date().toISOString().split("T")[0],u=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0];return{startDate:n,startTime:"09:00",endDate:u,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}},Ll=()=>({title:"",description:"",dueDate:"",dueTime:"",totalScore:100,submissionType:"file",fileTypes:"",maxFileSize:10,allowLateSubmission:!1,latePenalty:0,file:null}),Ml=()=>({title:"",description:"",link:"",file:null});function Nm({isOpen:n,onClose:u,weekNumber:o,onAdd:m}){const[x,p]=c.useState(null),[B,F]=c.useState(""),[v,H]=c.useState(""),[S,T]=c.useState(Ll()),[N,R]=c.useState(Ml()),[G,J]=c.useState(!1),[y,q]=c.useState(null),[P,L]=c.useState([]),[D,k]=c.useState(""),[A,g]=c.useState(Il());c.useEffect(()=>{if(!n||x!=="exam")return;let w=!1;return(async()=>{try{const h=await jm();w||L(h)}catch{w||L([])}})(),()=>{w=!0}},[n,x]);const M=P.find(w=>w.id===D);if(c.useEffect(()=>{M&&g(w=>({...w,points:M.totalPoints}))},[M]),!n)return null;const _=w=>{var b;if(w.preventDefault(),!!x){if(x==="video"){if(!y)return;m({weekNumber:o,type:x,title:B.trim()||y.title,description:v.trim()||void 0,duration:y.duration,mediaKey:y.mediaKey,lessonId:y.lessonId,originalVideoTitle:y.title})}else if(x==="exam"){if(!D)return;m({weekNumber:o,type:x,title:(M==null?void 0:M.title)||"\uC2DC\uD5D8",description:((b=M==null?void 0:M.description)==null?void 0:b.trim())||void 0,examId:D,examSettings:{startDate:A.startDate,startTime:A.startTime,endDate:A.endDate,endTime:A.endTime,points:A.points,allowRetake:A.allowRetake,retakeScore:A.retakeScore,retakeCount:A.retakeCount,showResults:A.showResults}})}else if(x==="assignment"){if(!S.title.trim()||!S.description.trim()||!S.dueDate||!S.dueTime)return;m({weekNumber:o,type:x,title:S.title.trim(),description:S.description.trim(),assignmentSettings:{dueDate:S.dueDate,dueTime:S.dueTime,totalScore:Number(S.totalScore||0),submissionType:S.submissionType,fileTypes:S.fileTypes.trim()||void 0,maxFileSize:Number(S.maxFileSize||0),allowLateSubmission:S.allowLateSubmission,latePenalty:Number(S.latePenalty||0),fileName:S.file?S.file.name:void 0}})}else if(x==="document"){if(!N.title.trim())return;const h=N.link.trim(),W=N.file?N.file.name:"";if(!h&&!W)return;m({weekNumber:o,type:x,title:N.title.trim(),description:N.description.trim()||void 0,documentSettings:{link:h||void 0,fileName:W||void 0}})}j(),u()}},j=()=>{p(null),F(""),H(""),q(null),k(""),g(Il()),T(Ll()),R(Ml())},O=w=>{q({mediaKey:w.mediaKey,lessonId:w.lessonId,title:w.title,duration:w.duration||(w.totalTime?`${w.totalTime}\uBD84`:void 0)}),J(!1)},$=[{type:"video",icon:Qr,label:"\uB3D9\uC601\uC0C1",color:"blue",desc:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC120\uD0DD"},{type:"exam",icon:zr,label:"\uC2DC\uD5D8",color:"red",desc:"\uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uC2DC\uD5D8\uC744 \uC120\uD0DD\uD569\uB2C8\uB2E4"},{type:"assignment",icon:Bt,label:"\uACFC\uC81C",color:"purple",desc:"\uD574\uB2F9 \uC8FC\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD569\uB2C8\uB2E4"},{type:"document",icon:pr,label:"\uD559\uC2B5\uC790\uB8CC",color:"green",desc:"PDF, \uBB38\uC11C \uB4F1 \uD559\uC2B5\uC790\uB8CC\uB97C \uCD94\uAC00\uD569\uB2C8\uB2E4"}],d=(w,b)=>{if(b)switch(w){case"blue":return"border-blue-500 bg-blue-50 text-blue-700";case"red":return"border-red-500 bg-red-50 text-red-700";case"purple":return"border-purple-500 bg-purple-50 text-purple-700";case"green":return"border-green-500 bg-green-50 text-green-700";default:return"border-gray-500 bg-gray-50 text-gray-700"}return"border-gray-200 hover:border-gray-300 hover:bg-gray-50"},f=w=>{switch(w){case"blue":return"text-blue-600";case"red":return"text-red-600";case"purple":return"text-purple-600";case"green":return"text-green-600";default:return"text-gray-600"}},U=x==="assignment"&&(!S.title.trim()||!S.description.trim()||!S.dueDate||!S.dueTime),I=x==="document"&&(!N.title.trim()||!N.link.trim()&&!N.file),Q=!x||x==="video"&&!y||x==="exam"&&!D||U||I,z=x==="exam"?"\uC2DC\uD5D8\uCD94\uAC00":x==="assignment"?"\uB4F1\uB85D":x==="document"?"\uC5C5\uB85C\uB4DC":"\uCD94\uAC00\uD558\uAE30";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[o,"\uC8FC\uCC28 \uCF58\uD150\uCE20 \uCD94\uAC00"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"\uCD94\uAC00\uD560 \uCF58\uD150\uCE20 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694"})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\uCF58\uD150\uCE20 \uC720\uD615"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:$.map(({type:w,icon:b,label:h,color:W,desc:oe})=>e.jsxs("button",{type:"button",onClick:()=>{p(w),q(null),k(""),F(""),H(""),T(Ll()),R(Ml()),g(Il())},className:`flex flex-col items-start p-4 border-2 rounded-lg transition-all ${d(W,x===w)}`,children:[e.jsx(b,{className:`w-6 h-6 mb-2 ${x===w?"":f(W)}`}),e.jsx("span",{className:"font-medium",children:h}),e.jsx("span",{className:`text-xs mt-1 ${x===w?"opacity-80":"text-gray-500"}`,children:oe})]},w))})]}),x&&e.jsxs(e.Fragment,{children:[x==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),y?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:y.title}),y.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",y.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>J(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>J(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx(Yu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),y&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:B,onChange:w=>F(w.target.value),placeholder:y.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:v,onChange:w=>H(w.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),x==="exam"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),P.length>0?e.jsxs("select",{value:D,onChange:w=>k(w.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),P.map(w=>e.jsxs("option",{value:w.id,children:[w.title," (",w.questionIds.length,"\uBB38\uC81C, ",w.totalPoints,"\uC810)"]},w.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx(zr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC2DC\uD5D8\uAD00\uB9AC \uBA54\uB274\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),D&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:A.startDate,onChange:w=>g(b=>({...b,startDate:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:A.startTime,onChange:w=>g(b=>({...b,startTime:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:A.endDate,onChange:w=>g(b=>({...b,endDate:w.target.value})),min:A.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:A.endTime,onChange:w=>g(b=>({...b,endTime:w.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:A.points,onChange:w=>g(b=>({...b,points:parseInt(w.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A.allowRetake,onChange:w=>g(b=>({...b,allowRetake:w.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),A.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:A.retakeScore,onChange:w=>g(b=>({...b,retakeScore:parseInt(w.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:A.retakeCount,onChange:w=>g(b=>({...b,retakeCount:parseInt(w.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A.showResults,onChange:w=>g(b=>({...b,showResults:w.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),x==="assignment"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:S.title,onChange:w=>T({...S,title:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: HTML \uD3EC\uD2B8\uD3F4\uB9AC\uC624 \uD398\uC774\uC9C0 \uC81C\uC791",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC81C \uC124\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:S.description,onChange:w=>T({...S,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"\uACFC\uC81C \uB0B4\uC6A9 \uBC0F \uC694\uAD6C\uC0AC\uD56D\uC744 \uC785\uB825\uD558\uC138\uC694",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uB0A0\uC9DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:S.dueDate,onChange:w=>T({...S,dueDate:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uB9C8\uAC10 \uC2DC\uAC04 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:S.dueTime,onChange:w=>T({...S,dueTime:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uBC30\uC810 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:S.totalScore,onChange:w=>T({...S,totalScore:parseInt(w.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC81C\uCD9C \uBC29\uC2DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:S.submissionType,onChange:w=>T({...S,submissionType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"file",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx("option",{value:"text",children:"\uD14D\uC2A4\uD2B8 \uC785\uB825"}),e.jsx("option",{value:"both",children:"\uD30C\uC77C + \uD14D\uC2A4\uD2B8"})]})]}),(S.submissionType==="file"||S.submissionType==="both")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC81C \uCCA8\uBD80\uD30C\uC77C (\uC120\uD0DD)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",onChange:w=>{const b=w.target.files&&w.target.files[0]?w.target.files[0]:null;T({...S,file:b})},className:"flex-1 text-sm text-gray-700 file:mr-3 file:px-4 file:py-2 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),S.file&&e.jsx("button",{type:"button",onClick:()=>T({...S,file:null}),className:"px-3 py-2 text-sm border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50",children:"\uCCA8\uBD80 \uD574\uC81C"})]}),S.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",S.file.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD5C8\uC6A9 \uD30C\uC77C \uD615\uC2DD"}),e.jsx("input",{type:"text",value:S.fileTypes,onChange:w=>T({...S,fileTypes:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: .pdf, .docx, .zip"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCD5C\uB300 \uD30C\uC77C \uD06C\uAE30 (MB)"}),e.jsx("input",{type:"number",value:S.maxFileSize,onChange:w=>T({...S,maxFileSize:parseInt(w.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:S.allowLateSubmission,onChange:w=>T({...S,allowLateSubmission:w.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"\uC9C0\uAC01 \uC81C\uCD9C \uD5C8\uC6A9"})]}),S.allowLateSubmission&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC9C0\uAC01 \uC81C\uCD9C \uAC10\uC810 (%)"}),e.jsx("input",{type:"number",value:S.latePenalty,onChange:w=>T({...S,latePenalty:parseInt(w.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: 10",min:"0",max:"100"})]})]})]}),x==="document"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.title,onChange:w=>R({...N,title:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:N.description,onChange:w=>R({...N,description:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:N.link,onChange:w=>R({...N,link:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:w=>{var b;return R({...N,file:((b=w.target.files)==null?void 0:b[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."}),N.file&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC120\uD0DD\uB428: ",N.file.name]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:Q,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z})]})]})]})]}),e.jsx(Vu,{isOpen:G,onClose:()=>J(!1),onSelect:O,multiSelect:!1,recommendContext:{lessonTitle:B,lessonDescription:v}})]})}function Dm({isOpen:n,onClose:u,content:o,onSave:m}){const[x,p]=c.useState(""),[B,F]=c.useState(""),[v,H]=c.useState(""),[S,T]=c.useState(!1),[N,R]=c.useState(null);if(c.useEffect(()=>{if(o){const P=o.originalVideoTitle||o.title,L=o.title!==P;p(L?o.title:""),F(o.description||""),H(o.duration||""),o.type==="video"&&o.mediaKey?R({mediaKey:o.mediaKey,lessonId:o.lessonId,title:o.originalVideoTitle||o.title,duration:o.duration}):R(null)}},[o]),!n||!o)return null;const G=P=>{if(P.preventDefault(),o.type==="video"){if(!N)return;m({...o,title:x.trim()||N.title,description:B.trim()||void 0,duration:N.duration,mediaKey:N.mediaKey,lessonId:N.lessonId,originalVideoTitle:N.title})}else{if(!x.trim())return;m({...o,title:x.trim(),description:B.trim()||void 0})}},J=P=>{R({mediaKey:P.mediaKey,lessonId:P.lessonId,title:P.title,duration:P.duration||(P.totalTime?`${P.totalTime}\uBD84`:void 0)}),T(!1)},y=P=>{switch(P){case"video":return"\uB3D9\uC601\uC0C1";case"exam":return"\uC2DC\uD5D8";case"assignment":return"\uACFC\uC81C";case"document":return"\uD559\uC2B5\uC790\uB8CC"}},q=P=>{switch(P){case"video":return e.jsx(Qr,{className:"w-5 h-5 text-blue-600"});case"exam":return e.jsx(zr,{className:"w-5 h-5 text-red-600"});case"assignment":return e.jsx(Bt,{className:"w-5 h-5 text-purple-600"});case"document":return e.jsx(pr,{className:"w-5 h-5 text-green-600"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[q(o.type),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[y(o.type)," \uD3B8\uC9D1"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[o.weekNumber,"\uC8FC\uCC28"]})]})]}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:G,className:"p-6 space-y-6",children:[o.type==="video"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC120\uD0DD\uD55C \uB3D9\uC601\uC0C1 ",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),N?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qr,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:N.title}),N.duration&&e.jsxs("p",{className:"text-sm text-blue-600",children:["\uC7AC\uC0DD\uC2DC\uAC04: ",N.duration]})]})]}),e.jsx("button",{type:"button",onClick:()=>T(!0),className:"px-3 py-1.5 text-sm text-blue-600 bg-white border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"\uBCC0\uACBD"})]}):e.jsxs("button",{type:"button",onClick:()=>T(!0),className:"w-full flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-blue-400 hover:text-blue-600 transition-colors",children:[e.jsx(Yu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uC5D0\uC11C \uC601\uC0C1 \uC120\uD0DD"})]})]}),N&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCF58\uD150\uCE20 \uC81C\uBAA9 (\uC120\uD0DD)"}),e.jsx("input",{type:"text",value:x,onChange:P=>p(P.target.value),placeholder:N.title,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"\uBE44\uC6CC\uB450\uBA74 \uB3D9\uC601\uC0C1 \uC81C\uBAA9\uC774 \uC0AC\uC6A9\uB429\uB2C8\uB2E4."})]})]}),o.type!=="video"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[y(o.type)," \uC81C\uBAA9",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",value:x,onChange:P=>p(P.target.value),placeholder:"\uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC124\uBA85 (\uC120\uD0DD)"}),e.jsx("textarea",{value:B,onChange:P=>F(P.target.value),placeholder:"\uCF58\uD150\uCE20\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",disabled:o.type==="video"&&!N||o.type!=="video"&&!x.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\uC800\uC7A5"})]})]})]})]}),e.jsx(Vu,{isOpen:S,onClose:()=>T(!1),onSelect:J,multiSelect:!1,recommendContext:{lessonTitle:x||(N==null?void 0:N.title)||"",lessonDescription:B}})]})}const wm=n=>`haksa_curriculum_v2_${n}`,Am=n=>{const u=`haksa_curriculum_${n}`;try{const o=localStorage.getItem(u);if(!o)return null;const m=JSON.parse(o);if(!m.length)return null;const x=new Map;m.forEach(B=>{const F=B.weekNumber||1;x.has(F)||x.set(F,[]),x.get(F).push(B)});const p=[];return x.forEach((B,F)=>{p.push({weekNumber:F,sessions:[{sessionId:`session_migrated_${F}_${Date.now()}`,sessionName:"1\uCC28\uC2DC",contents:B,isExpanded:!0}]})}),localStorage.removeItem(u),p.length>0?p:null}catch{return null}},km=n=>Array.from({length:n},(u,o)=>({weekNumber:o+1,title:`${o+1}\uC8FC\uCC28`,isExpanded:o===0,sessions:[]})),Rl=(n,u)=>Array.from({length:u},(o,m)=>n.find(p=>p.weekNumber===m+1)||{weekNumber:m+1,title:`${m+1}\uC8FC\uCC28`,isExpanded:m===0,sessions:[]});function _m({courseId:n,course:u}){const o=(u==null?void 0:u.sourceType)==="haksa",m=c.useMemo(()=>er({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),x=(()=>{if(u!=null&&u.haksaWeek){const re=parseInt(u.haksaWeek,10);if(!isNaN(re)&&re>0)return re}return 15})(),[p,B]=c.useState(()=>km(x)),[F,v]=c.useState(!1),[H,S]=c.useState(null),[T,N]=c.useState(!1),R=c.useRef(!0),G=c.useRef([]),J=c.useRef(m),y=c.useMemo(()=>Rl(p,x),[x,p]);c.useEffect(()=>{G.current=y},[y]),c.useEffect(()=>{J.current=m},[m]),c.useEffect(()=>()=>{R.current=!1},[]),c.useEffect(()=>{o&&!m&&S("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[o,m]),c.useEffect(()=>{if(!o||!m)return;let re=!1;return(async()=>{v(!0),S(null);try{const ue=await le.getHaksaCurriculum(m);if(ue.rst_code!=="0000")throw new Error(ue.rst_message);const de=Array.isArray(ue.rst_data)?ue.rst_data[0]:ue.rst_data,Z=(de==null?void 0:de.curriculum_json)||"";if(Z){const ae=JSON.parse(Z);re||B(Rl(ae,x))}else if(u!=null&&u.id){let ae=null;try{const xe=localStorage.getItem(wm(u.id));xe&&(ae=JSON.parse(xe))}catch{}if(ae||(ae=Am(u.id)),ae&&!re){const xe=Rl(ae,x);B(xe),await le.updateHaksaCurriculum({...m,curriculumJson:JSON.stringify(xe)})}}}catch(ue){re||S(ue instanceof Error?ue.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{re||(v(!1),N(!0))}})(),()=>{re=!0}},[o,m,u==null?void 0:u.id,x]),c.useEffect(()=>{if(!o||!m||!T)return;const re=setTimeout(()=>{(async()=>{try{const ce=await le.updateHaksaCurriculum({...m,curriculumJson:JSON.stringify(y)});if(ce.rst_code!=="0000")throw new Error(ce.rst_message)}catch(ce){R.current&&S(ce instanceof Error?ce.message:"\uAC15\uC758\uBAA9\uCC28 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},400);return()=>clearTimeout(re)},[o,m,T,y]),c.useEffect(()=>()=>{!o||!J.current||!T||le.updateHaksaCurriculum({...J.current,curriculumJson:JSON.stringify(G.current)})},[o,T]);const[q,P]=c.useState(!1),[L,D]=c.useState(1),[k,A]=c.useState(null),[g,M]=c.useState(!1),[_,j]=c.useState(null),[O,$]=c.useState(null),d=re=>{B(ce=>ce.map(ue=>ue.weekNumber===re?{...ue,isExpanded:!ue.isExpanded}:ue))},f=(re,ce)=>{B(ue=>ue.map(de=>de.weekNumber===re?{...de,sessions:de.sessions.map(Z=>Z.sessionId===ce?{...Z,isExpanded:!Z.isExpanded}:Z)}:de))},U=re=>{B(ce=>ce.map(ue=>{if(ue.weekNumber===re){const de=ue.sessions.length+1,Z={sessionId:`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionName:`${de}\uCC28\uC2DC`,contents:[],isExpanded:!0};return{...ue,sessions:[...ue.sessions,Z]}}return ue}))},I=(re,ce,ue)=>{B(de=>de.map(Z=>Z.weekNumber===re?{...Z,sessions:Z.sessions.map(ae=>ae.sessionId===ce?{...ae,sessionName:ue}:ae)}:Z))},Q=(re,ce)=>{confirm("\uC774 \uCC28\uC2DC\uC640 \uD3EC\uD568\uB41C \uBAA8\uB4E0 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&B(ue=>ue.map(de=>de.weekNumber===re?{...de,sessions:de.sessions.filter(Z=>Z.sessionId!==ce)}:de))},z=(re,ce)=>{D(re),A(ce),P(!0)},w=(re,ce)=>{j(re),$(ce),M(!0)},b=re=>{if(!k)return;const ce={...re,id:`content_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()};B(ue=>ue.map(de=>de.weekNumber===L?{...de,sessions:de.sessions.map(Z=>Z.sessionId===k?{...Z,contents:[...Z.contents,ce]}:Z)}:de))},h=(re,ce,ue)=>{confirm("\uC774 \uCF58\uD150\uCE20\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&B(de=>de.map(Z=>Z.weekNumber===re?{...Z,sessions:Z.sessions.map(ae=>ae.sessionId===ce?{...ae,contents:ae.contents.filter(xe=>xe.id!==ue)}:ae)}:Z))},W=re=>{O&&(B(ce=>ce.map(ue=>({...ue,sessions:ue.sessions.map(de=>de.sessionId===O?{...de,contents:de.contents.map(Z=>Z.id===re.id?re:Z)}:de)}))),M(!1),j(null),$(null))},oe=re=>{switch(re){case"video":return e.jsx(Qr,{className:"w-4 h-4 text-blue-600"});case"exam":return e.jsx(zr,{className:"w-4 h-4 text-red-600"});case"assignment":return e.jsx(Bt,{className:"w-4 h-4 text-purple-600"});case"document":return e.jsx(pr,{className:"w-4 h-4 text-green-600"})}},ie=re=>{switch(re){case"video":return e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"\uB3D9\uC601\uC0C1"});case"exam":return e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"\uC2DC\uD5D8"});case"assignment":return e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"\uACFC\uC81C"});case"document":return e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"\uC790\uB8CC"})}},pe=y.flatMap(re=>re.sessions.flatMap(ce=>ce.contents)),ee={sessions:y.reduce((re,ce)=>re+ce.sessions.length,0),total:pe.length,videos:pe.filter(re=>re.type==="video").length,exams:pe.filter(re=>re.type==="exam").length,assignments:pe.filter(re=>re.type==="assignment").length,documents:pe.filter(re=>re.type==="document").length};return o?e.jsxs("div",{className:"space-y-4",children:[H&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:H}),F&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uC8FC\uCC28\uBCC4 \uAC15\uC758\uBAA9\uCC28"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:["\uCD1D ",x,"\uC8FC\uCC28"]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:(u==null?void 0:u.haksaCourseName)||(u==null?void 0:u.subjectName)||"\uAC15\uC88C\uBA85 \uC5C6\uC74C"})]}),(ee.sessions>0||ee.total>0)&&e.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[e.jsxs("div",{className:"px-4 py-3 bg-indigo-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-indigo-600",children:ee.sessions}),e.jsx("div",{className:"text-xs text-indigo-600",children:"\uCC28\uC2DC"})]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:ee.total}),e.jsx("div",{className:"text-xs text-gray-500",children:"\uC804\uCCB4"})]}),e.jsxs("div",{className:"px-4 py-3 bg-blue-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-blue-600",children:ee.videos}),e.jsx("div",{className:"text-xs text-blue-600",children:"\uB3D9\uC601\uC0C1"})]}),e.jsxs("div",{className:"px-4 py-3 bg-red-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-red-600",children:ee.exams}),e.jsx("div",{className:"text-xs text-red-600",children:"\uC2DC\uD5D8"})]}),e.jsxs("div",{className:"px-4 py-3 bg-purple-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-purple-600",children:ee.assignments}),e.jsx("div",{className:"text-xs text-purple-600",children:"\uACFC\uC81C"})]}),e.jsxs("div",{className:"px-4 py-3 bg-green-50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-green-600",children:ee.documents}),e.jsx("div",{className:"text-xs text-green-600",children:"\uC790\uB8CC"})]})]}),e.jsx("div",{className:"space-y-2",children:y.map(re=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>d(re.weekNumber),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[re.isExpanded?e.jsx(hr,{className:"w-5 h-5 text-gray-500"}):e.jsx(bs,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:re.title}),re.sessions.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[re.sessions.length,"\uAC1C \uCC28\uC2DC"]})]}),e.jsxs("button",{onClick:ce=>{ce.stopPropagation(),U(re.weekNumber)},className:"flex items-center gap-1 px-3 py-1.5 text-sm text-indigo-600 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCC28\uC2DC \uCD94\uAC00"})]})]}),re.isExpanded&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-white space-y-3",children:re.sessions.length>0?re.sessions.map((ce,ue)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 bg-indigo-50/50 cursor-pointer hover:bg-indigo-50 transition-colors",onClick:()=>f(re.weekNumber,ce.sessionId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ce.isExpanded?e.jsx(hr,{className:"w-4 h-4 text-indigo-500"}):e.jsx(bs,{className:"w-4 h-4 text-indigo-500"}),e.jsx("input",{type:"text",value:ce.sessionName,onChange:de=>I(re.weekNumber,ce.sessionId,de.target.value),onClick:de=>de.stopPropagation(),className:"px-2 py-1 bg-white border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),ce.contents.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-200 text-gray-600 text-xs rounded",children:[ce.contents.length,"\uAC1C \uCF58\uD150\uCE20"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:de=>{de.stopPropagation(),z(re.weekNumber,ce.sessionId)},className:"flex items-center gap-1 px-2.5 py-1 text-xs text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[e.jsx(ft,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{onClick:de=>{de.stopPropagation(),Q(re.weekNumber,ce.sessionId)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"\uCC28\uC2DC \uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]}),ce.isExpanded&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-white",children:ce.contents.length>0?e.jsx("div",{className:"space-y-2",children:ce.contents.map(de=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-lg group hover:bg-gray-100 transition-colors",children:[oe(de.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800 truncate",children:de.title}),ie(de.type)]}),de.description&&e.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:de.description})]}),de.duration&&e.jsx("span",{className:"text-sm text-gray-500 flex-shrink-0",children:de.duration}),e.jsx("button",{onClick:()=>w(de,ce.sessionId),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uD3B8\uC9D1",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(re.weekNumber,ce.sessionId,de.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded opacity-0 group-hover:opacity-100 transition-all",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]},de.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>z(re.weekNumber,ce.sessionId),className:"mt-2 text-sm text-blue-600 hover:underline",children:"+ \uCF58\uD150\uCE20 \uCD94\uAC00\uD558\uAE30"})]})})]},ce.sessionId)):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>U(re.weekNumber),className:"mt-2 text-sm text-indigo-600 hover:underline",children:"+ \uCC28\uC2DC \uCD94\uAC00\uD558\uAE30"})]})})]},re.weekNumber))}),e.jsx(Nm,{isOpen:q,onClose:()=>P(!1),weekNumber:L,onAdd:b}),e.jsx(Dm,{isOpen:g,onClose:()=>{M(!1),j(null),$(null)},content:_,onSave:W})]}):e.jsx(ed,{courseId:n,embedded:!0})}function Mc(n){if(n==null)return"";const u=String(n),o=/[",\r\n]/.test(u),m=u.replace(/"/g,'""');return o?`"${m}"`:m}function Sm(n,u){const o=[];return o.push(n.map(Mc).join(",")),u.forEach(m=>{o.push(m.map(Mc).join(","))}),o.join(`\r
`)}function zu(n,u,o){const m=`\uFEFF${Sm(u,o)}`,x=new Blob([m],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(x),B=document.createElement("a");B.href=p,B.download=n,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(p)}function Em(n){return n.split(",").map(u=>u.trim()).filter(u=>/^\d+$/.test(u)).map(u=>Number(u)).filter(u=>u>0)}function Fm({courseId:n,course:u}){const o=Number((u==null?void 0:u.mappedCourseId)??n),m=(u==null?void 0:u.sourceType)==="haksa",[x,p]=c.useState([]),[B,F]=c.useState([]),[v,H]=c.useState(!1),[S,T]=c.useState(null),[N,R]=c.useState(""),G=async k=>{H(!0),T(null);try{const A=await le.getCourseStudents({courseId:o,keyword:k??N});if(A.rst_code!=="0000")throw new Error(A.rst_message);p(A.rst_data??[])}catch(A){T(A instanceof Error?A.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}};c.useEffect(()=>{if(m)return;let k=!1;return(async()=>{H(!0),T(null);try{const g=await le.getCourseStudents({courseId:o});if(g.rst_code!=="0000")throw new Error(g.rst_message);k||p(g.rst_data??[])}catch(g){k||T(g instanceof Error?g.message:"\uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{k||H(!1)}})(),()=>{k=!0}},[o,m]);const J=async k=>{if(!(u!=null&&u.haksaCourseCode)){T("\uD559\uC0AC \uACFC\uBAA9 \uCF54\uB4DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}H(!0),T(null);try{const A=await le.getHaksaCourseStudents({courseCode:u.haksaCourseCode,openYear:u.haksaOpenYear,openTerm:u.haksaOpenTerm,bunbanCode:u.haksaBunbanCode,groupCode:u.haksaGroupCode,keyword:k});if(A.rst_code!=="0000")throw new Error(A.rst_message);F(A.rst_data??[])}catch(A){T(A instanceof Error?A.message:"\uD559\uC0AC \uC218\uAC15\uC0DD\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}};c.useEffect(()=>{m&&J("")},[m,u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]);const y=x.length,q=async()=>{const k=window.prompt(`\uCD94\uAC00\uD560 \uC218\uAC15\uC0DD user_id\uB97C \uCF64\uB9C8(,)\uB85C \uAD6C\uBD84\uD574 \uC785\uB825\uD574\uC8FC\uC138\uC694.
\uC608) 12,34,56`);if(k===null)return;const A=Em(k);if(A.length===0){alert("\uC785\uB825\uAC12\uC5D0\uC11C user_id(\uC22B\uC790)\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");return}try{const g=await le.addCourseStudents({courseId:o,userIds:A});if(g.rst_code!=="0000")throw new Error(g.rst_message);const M=Number(g.rst_data??0),_=Number(g.rst_skipped??0);alert(`\uCD94\uAC00 \uC644\uB8CC: ${M}\uBA85${_>0?` (\uC911\uBCF5 ${_}\uBA85 \uC81C\uC678)`:""}`),await G()}catch(g){alert(g instanceof Error?g.message:"\uC218\uAC15\uC0DD \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},P=async(k,A)=>{if(window.confirm(`${A||"\uD574\uB2F9 \uC218\uAC15\uC0DD"}\uC744(\uB97C) \uACFC\uBAA9\uC5D0\uC11C \uC81C\uC678\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const M=await le.removeCourseStudent({courseId:o,userId:k});if(M.rst_code!=="0000")throw new Error(M.rst_message);await G()}catch(M){alert(M instanceof Error?M.message:"\uC218\uAC15\uC0DD \uC81C\uC678 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},L=c.useMemo(()=>[...x].sort((k,A)=>String(k.name||"").localeCompare(String(A.name||""))),[x]),D=()=>{const k=new Date().toISOString().slice(0,10).replace(/-/g,""),A=`course_${o}_students_${k}.csv`,g=["No","course_user_id","user_id","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uC9C4\uB3C4\uC728(%)"],M=L.map((_,j)=>{const O=Number(_.progress??_.progress_ratio??0);return[j+1,_.course_user_id,_.user_id,_.student_id??"",_.name??"",_.email??"",Math.round(O)]});zu(A,g,M)};if(m){const k=B.length,A=[...B].sort((M,_)=>String(M.name||"").localeCompare(String(_.name||""))),g=()=>{const M=new Date().toISOString().slice(0,10).replace(/-/g,""),_=`haksa_course_${(u==null?void 0:u.haksaCourseCode)||"unknown"}_students_${M}.csv`,j=["No","\uD559\uBC88","\uC774\uB984","\uC774\uBA54\uC77C","\uD734\uB300\uD3F0","\uC0C1\uD0DC"],O=A.map(($,d)=>[d+1,$.student_id??"",$.name??"",$.email??"",$.mobile??"",$.visible==="Y"?"\uC815\uC0C1":$.visible==="N"?"\uD3D0\uAC15":$.visible??""]);zu(_,j,O)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(Hr,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"\uD559\uC0AC \uC5F0\uB3D9 \uACFC\uBAA9"}),": \uC774 \uACFC\uBAA9\uC740 \uD559\uC0AC \uC2DC\uC2A4\uD15C(e-poly)\uC5D0\uC11C \uC5F0\uB3D9\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC218\uAC15\uC0DD \uBAA9\uB85D\uC740 \uD559\uC0AC View\uB97C \uC77D\uC5B4\uC624\uB294 \uBC29\uC2DD\uC73C\uB85C \uC81C\uACF5\uB429\uB2C8\uB2E4(\uC77D\uAE30 \uC804\uC6A9)."]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",k,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:N,onChange:M=>R(M.target.value),placeholder:"\uD559\uBC88/\uC774\uB984/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>J(N),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),v&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),S&&e.jsx("div",{className:"text-sm text-red-600",children:S}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD734\uB300\uD3F0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[A.map((M,_)=>{const j=M.visible==="Y"?"\uC815\uC0C1":M.visible==="N"?"\uD3D0\uAC15":M.visible||"-";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:_+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:M.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:M.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:M.email||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:M.mobile||"-"}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:j})]},`${M.student_id}-${_}`)}),!v&&!S&&A.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",y,"\uBA85"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:N,onChange:k=>R(k.target.value),placeholder:"\uC774\uB984/\uC544\uC774\uB514/\uC774\uBA54\uC77C \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>G(N),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uAC80\uC0C9"}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uAC15\uC0DD \uCD94\uAC00"})]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),v&&e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),S&&e.jsx("div",{className:"text-sm text-red-600",children:S}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uBA54\uC77C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[L.map((k,A)=>{const g=Number(k.progress??k.progress_ratio??0);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:A+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:k.student_id||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:k.name||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:k.email||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${Math.max(0,Math.min(100,g))}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(g),"%"]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("button",{onClick:()=>P(Number(k.user_id),k.name),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(Nt,{className:"w-4 h-4"}),"\uC81C\uC678"]})})]},k.course_user_id||`${k.user_id}-${A}`)}),!v&&!S&&L.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function Rc({isOpen:n,onClose:u,detail:o}){return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-200",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uB3C4 \uC0C1\uC138"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsx("div",{className:"p-5 space-y-3",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"text-gray-900",children:o.name||"-"})," (",o.student_id||"-",")"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uCC28\uC2DC: ",o.chapter?`${o.chapter}\uCC28\uC2DC`:"-"," \xB7 ",o.lesson_nm||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC9C4\uB3C4\uC728: ",Math.round(Number(o.ratio??0)),"%"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uD559\uC2B5\uC2DC\uAC04: ",o.study_time_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uB9C8\uC9C0\uB9C9 \uD559\uC2B5: ",o.last_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC5EC\uBD80: ",o.complete_yn==="Y"?"\uC644\uB8CC":"\uBBF8\uC644\uB8CC"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uC644\uB8CC\uC77C\uC2DC: ",o.complete_date_conv||"-"]}),e.jsxs("div",{className:"text-sm text-gray-700",children:["\uBCF4\uAE30\uD69F\uC218: ",Number(o.view_cnt??0),"\uD68C"]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),e.jsx("div",{className:"flex justify-end p-5 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uD655\uC778"})})]})}):null}function Tm({courseId:n,course:u}){const o=(u==null?void 0:u.sourceType)==="haksa",m=o?Number((u==null?void 0:u.mappedCourseId)??0):n,[x,p]=c.useState(null),B=x&&x>0?x:m,F=c.useMemo(()=>er({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[v,H]=c.useState([]),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState(!1),[y,q]=c.useState([]),[P,L]=c.useState(!1),[D,k]=c.useState(null),[A,g]=c.useState(null),[M,_]=c.useState(null),[j,O]=c.useState([]),[$,d]=c.useState(!1),[f,U]=c.useState(null),[I,Q]=c.useState(""),[z,w]=c.useState(!1),[b,h]=c.useState(null);c.useEffect(()=>{g(null),_(null),O([]),Q("")},[n,u==null?void 0:u.mappedCourseId,u==null?void 0:u.sourceType]),c.useEffect(()=>{if(!o){p(null);return}if(m>0){p(null);return}if(!F){R("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let Z=!1;return(async()=>{J(!0),R(null);try{const xe=await le.resolveHaksaCourse(F);if(xe.rst_code!=="0000")throw new Error(xe.rst_message);const Te=Array.isArray(xe.rst_data)?xe.rst_data[0]:xe.rst_data,ne=Number((Te==null?void 0:Te.mapped_course_id)??0);if(!ne||Number.isNaN(ne))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");Z||p(ne)}catch(xe){Z||(p(null),R(xe instanceof Error?xe.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{Z||J(!1)}})(),()=>{Z=!0}},[o,m,F]),c.useEffect(()=>{if(!o||!F){H([]);return}let Z=!1;return(async()=>{T(!0),R(null);try{const xe=await le.getHaksaCurriculum(F);if(xe.rst_code!=="0000")throw new Error(xe.rst_message);const Te=Array.isArray(xe.rst_data)?xe.rst_data[0]:xe.rst_data,ne=(Te==null?void 0:Te.curriculum_json)||"",ye=ne?JSON.parse(ne):[];Z||H(Array.isArray(ye)?ye:[])}catch(xe){Z||(H([]),R(xe instanceof Error?xe.message:"\uAC15\uC758\uBAA9\uCC28\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{Z||T(!1)}})(),()=>{Z=!0}},[o,F]),c.useEffect(()=>{if(!B)return;let Z=!1;return(async()=>{L(!0),k(null);try{const xe=await le.getProgressSummary({courseId:B});if(xe.rst_code!=="0000")throw new Error(xe.rst_message);const Te=xe.rst_data??[];if(Z)return;q(Te),!o&&!A&&Te.length>0&&g(Number(Te[0].lesson_id))}catch(xe){Z||k(xe instanceof Error?xe.message:"\uC9C4\uB3C4 \uC694\uC57D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{Z||L(!1)}})(),()=>{Z=!0}},[B,o]);const W=c.useMemo(()=>{const Z=new Map;return y.forEach(ae=>{Z.set(Number(ae.lesson_id),ae)}),Z},[y]),oe=c.useMemo(()=>o?[...v].sort((ae,xe)=>{const Te=Number(ae.weekNumber??0),ne=Number(xe.weekNumber??0);return Te-ne}).map((ae,xe)=>{const Te=Number(ae.weekNumber??0),ne=Number.isFinite(Te)&&Te>0?Te:xe+1,ye=ae.title||`${ne}\uC8FC\uCC28`,Be=(Array.isArray(ae.sessions)?ae.sessions:[]).map((we,Ye)=>{const je=(Array.isArray(we.contents)?we.contents:[]).filter(Ge=>String(Ge.type||"").toLowerCase()==="video"),Xe=je.map(Ge=>({lessonId:Number(Ge.lessonId??0),title:Ge.title||Ge.originalVideoTitle||"\uB3D9\uC601\uC0C1"})).filter(Ge=>Ge.lessonId>0);return{sessionId:String(we.sessionId||`${ne}-${Ye+1}`),sessionName:we.sessionName||`${Ye+1}\uCC28\uC2DC`,weekNumber:ne,weekTitle:ye,videoLessons:Xe,videoCount:je.length}});return{weekNumber:ne,weekTitle:ye,sessions:Be}}):[],[v,o]),ie=c.useMemo(()=>oe.flatMap(Z=>Z.sessions),[oe]);c.useEffect(()=>{if(!o)return;if(ie.length===0){_(null),g(null);return}if(M&&ie.some(Te=>Te.sessionId===M))return;const ae=ie.find(Te=>Te.videoLessons.length>0),xe=ie[0];_((ae??xe).sessionId)},[o,ie,M]),c.useEffect(()=>{var xe;if(!o)return;const Z=ie.find(Te=>Te.sessionId===M),ae=((xe=Z==null?void 0:Z.videoLessons[0])==null?void 0:xe.lessonId)??null;g(ae)},[o,M,ie]);const pe=c.useMemo(()=>y.find(Z=>Number(Z.lesson_id)===Number(A)),[y,A]),be=c.useMemo(()=>ie.find(Z=>Z.sessionId===M)??null,[ie,M]),ee=c.useMemo(()=>!be||!A?null:be.videoLessons.find(Z=>Z.lessonId===A)??null,[be,A]),re=Z=>{if(Z.videoLessons.length===0)return null;const ae=Z.videoLessons.map(ne=>W.get(ne.lessonId)).filter(ne=>!!ne);if(ae.length===0)return null;const xe=ae.reduce((ne,ye)=>ne+Number(ye.complete_rate??0),0)/ae.length,Te=ae.reduce((ne,ye)=>ne+Number(ye.avg_ratio??0),0)/ae.length;return{completeRate:xe,avgRatio:Te}},ce=async Z=>{if(B){d(!0),U(null);try{const ae=await le.getProgressStudents({courseId:B,lessonId:Z});if(ae.rst_code!=="0000")throw new Error(ae.rst_message);O(ae.rst_data??[])}catch(ae){U(ae instanceof Error?ae.message:"\uC9C4\uB3C4 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{d(!1)}}};c.useEffect(()=>{!A||!B||ce(A)},[A,B]);const ue=c.useMemo(()=>{const Z=I.trim().toLowerCase();return Z?j.filter(ae=>{const xe=String(ae.name||"").toLowerCase(),Te=String(ae.student_id||"").toLowerCase(),ne=String(ae.email||"").toLowerCase();return xe.includes(Z)||Te.includes(Z)||ne.includes(Z)}):j},[j,I]),de=async Z=>{if(!(!A||!B)){w(!0),h(null);try{const ae=await le.getProgressDetail({courseId:B,courseUserId:Number(Z.course_user_id),lessonId:Number(A)});if(ae.rst_code!=="0000")throw new Error(ae.rst_message);h(ae.rst_data??null)}catch(ae){alert(ae instanceof Error?ae.message:"\uC9C4\uB3C4 \uC0C1\uC138 \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),w(!1)}}};return o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[e.jsx(Hr,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:["\uD559\uC0AC \uACFC\uBAA9\uC740 ",e.jsx("strong",{children:"\uC8FC\uCC28/\uCC28\uC2DC \uAE30\uC900"}),"\uC73C\uB85C \uC9C4\uB3C4\uB97C \uBCF4\uC5EC\uC90D\uB2C8\uB2E4. \uB3D9\uC601\uC0C1 \uCF58\uD150\uCE20\uAC00 \uC788\uB294 \uCC28\uC2DC\uB9CC \uC9C4\uB3C4 \uB370\uC774\uD130\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4."]})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:N}),G&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg text-sm",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700",children:"\uC8FC\uCC28\uBCC4 \uCC28\uC2DC \uBAA9\uB85D"}),S&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),D&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:D}),!S&&oe.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uB4F1\uB85D\uB41C \uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("div",{className:"divide-y divide-gray-200",children:oe.map(Z=>e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-xs text-gray-500 bg-gray-50 border-b border-gray-200",children:[Z.weekTitle,Z.sessions.length>0?` \xB7 ${Z.sessions.length}\uAC1C \uCC28\uC2DC`:""]}),e.jsx("div",{className:"divide-y divide-gray-200",children:Z.sessions.map(ae=>{const xe=ae.sessionId===M,Te=re(ae),ne=ae.videoCount>0?`\uB3D9\uC601\uC0C1 ${ae.videoCount}\uAC1C`:"\uB3D9\uC601\uC0C1 \uC5C6\uC74C";return e.jsx("button",{onClick:()=>_(ae.sessionId),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${xe?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:ae.sessionName}),e.jsxs("div",{className:"text-xs text-gray-600",children:[ne,Te?` \xB7 \uC644\uB8CC ${Math.round(Te.completeRate)}% \xB7 \uD3C9\uADE0 ${Math.round(Te.avgRatio)}%`:""]})]}),e.jsx(bs,{className:`w-4 h-4 text-gray-400 ${xe?"text-blue-600":""}`})]})},ae.sessionId)})})]},`week-${Z.weekNumber}`))})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:be?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[be.weekTitle," \xB7 ",be.sessionName]}),ee&&e.jsxs("span",{className:"text-gray-600",children:[" \xB7 ",ee.title]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"flex items-center gap-2",children:[be&&be.videoLessons.length>1&&e.jsx("select",{value:A??"",onChange:Z=>g(Number(Z.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:be.videoLessons.map(Z=>e.jsx("option",{value:Z.lessonId,children:Z.title},Z.lessonId))}),e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:I,onChange:Z=>Q(Z.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),be&&be.videoLessons.length===0&&e.jsx("div",{className:"p-6 text-sm text-gray-500",children:"\uC120\uD0DD\uD55C \uCC28\uC2DC\uC5D0\uB294 \uB3D9\uC601\uC0C1 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),$&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),A&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[ue.map(Z=>{const ae=Math.max(0,Math.min(100,Number(Z.ratio??0))),xe=Z.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Z.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Z.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Z.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${xe?"bg-green-600":"bg-blue-600"}`,style:{width:`${ae}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(ae),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Z.last_date_conv||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>de(Z),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uBCF4\uAE30"})})]},Z.course_user_id)}),!$&&!f&&ue.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]}),e.jsx(Rc,{isOpen:z,onClose:()=>w(!1),detail:b})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm text-gray-700",children:"\uCC28\uC2DC \uBAA9\uB85D"}),P&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),D&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:D}),!P&&!D&&y.length===0&&e.jsx("div",{className:"p-4 text-sm text-gray-600",children:"\uCC28\uC2DC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.map(Z=>{const ae=Number(Z.lesson_id)===Number(A),xe=Number(Z.complete_rate??0);return e.jsx("button",{onClick:()=>g(Number(Z.lesson_id)),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${ae?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm text-gray-900 truncate",children:[Z.chapter,". ",Z.lesson_nm||"-"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["\uC644\uB8CC ",Math.round(xe),"% \xB7 \uD3C9\uADE0 ",Math.round(Number(Z.avg_ratio??0)),"%"]})]}),e.jsx(bs,{className:`w-4 h-4 text-gray-400 ${ae?"text-blue-600":""}`})]})},`${Z.lesson_id}-${Z.chapter}`)})})]}),e.jsxs("div",{className:"col-span-8 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-700",children:pe?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-900",children:[pe.chapter,"\uCC28\uC2DC"]}),e.jsxs("span",{className:"text-gray-600",children:[" \xB7 ",pe.lesson_nm]})]}):"\uCC28\uC2DC\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{value:I,onChange:Z=>Q(Z.target.value),placeholder:"\uC218\uAC15\uC0DD \uAC80\uC0C9",className:"pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),$&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(os,{className:"w-4 h-4 animate-spin"}),"\uBD88\uB7EC\uC624\uB294 \uC911..."]}),f&&e.jsx("div",{className:"p-4 text-sm text-red-600",children:f}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uC2B5\uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uB9C8\uC9C0\uB9C9 \uD559\uC2B5"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uC138"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[ue.map(Z=>{const ae=Math.max(0,Math.min(100,Number(Z.ratio??0))),xe=Z.complete_yn==="Y";return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Z.student_id||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:Z.name||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Z.study_time_conv||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${xe?"bg-green-600":"bg-blue-600"}`,style:{width:`${ae}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900",children:[Math.round(ae),"%"]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Z.last_date_conv||"-"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>de(Z),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:"\uBCF4\uAE30"})})]},Z.course_user_id)}),!$&&!f&&ue.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-gray-500",children:"\uD45C\uC2DC\uD560 \uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})]}),e.jsx(Rc,{isOpen:z,onClose:()=>w(!1),detail:b})]})}const Uu=n=>{if(n!=null&&n.haksaWeek){const u=parseInt(n.haksaWeek,10);if(!Number.isNaN(u)&&u>0)return u}return 15},Im=n=>`${n}\uCC28\uC2DC`,Hl=async({haksaKey:n,weekNumber:u,sessionNumber:o,content:m})=>{if(!n)throw new Error("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uAC15\uC758\uBAA9\uCC28\uC5D0 \uC800\uC7A5\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");const x=await le.getHaksaCurriculum(n);if(x.rst_code!=="0000")throw new Error(x.rst_message);const p=Array.isArray(x.rst_data)?x.rst_data[0]:x.rst_data,B=(p==null?void 0:p.curriculum_json)||"";let F=[];if(B)try{const G=JSON.parse(B);F=Array.isArray(G)?G:[]}catch{F=[]}const v=Number(u||1),H=Number(o||1),S=Im(H);let T=F.find(G=>G.weekNumber===v);T||(T={weekNumber:v,title:`${v}\uC8FC\uCC28`,isExpanded:!0,sessions:[]},F.push(T)),Array.isArray(T.sessions)||(T.sessions=[]);let N=T.sessions.find(G=>G.sessionName===S);N||(N={sessionId:`session_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,sessionName:S,isExpanded:!0,contents:[]},T.sessions.push(N)),Array.isArray(N.contents)||(N.contents=[]),N.contents.push({...m,id:`content_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,createdAt:new Date().toISOString(),weekNumber:v});const R=await le.updateHaksaCurriculum({...n,curriculumJson:JSON.stringify(F)});if(R.rst_code!=="0000")throw new Error(R.rst_message)},Oc=["info-basic","info-evaluation","info-completion"],Pc=["assignment-management","assignment-feedback"];function sd({course:n,onBack:u,initialTab:o,onTabChange:m}){const[x,p]=c.useState(n),B=M=>!M||M==="info"?"info-basic":M==="assignment"?"assignment-management":M,F=B(o),[v,H]=c.useState(F),[S,T]=c.useState(()=>Oc.includes(F)),[N,R]=c.useState(()=>Pc.includes(F));c.useEffect(()=>{if(!o)return;const M=B(o);H(M),T(Oc.includes(M)),R(Pc.includes(M))},[o]),c.useEffect(()=>{m==null||m(v)},[v,m]),c.useEffect(()=>{window.scrollTo(0,0)},[]),c.useEffect(()=>{p(n)},[n]);const G=[{id:"info",label:"\uACFC\uBAA9\uC815\uBCF4",icon:Hr,isSubTab:!1,hasSubTabs:!0},{id:"curriculum",label:"\uAC15\uC758\uBAA9\uCC28",icon:Gc,isSubTab:!1},{id:"students",label:"\uC218\uAC15\uC0DD",icon:Qu,isSubTab:!1},{id:"attendance",label:"\uC9C4\uB3C4/\uCD9C\uC11D",icon:Zs,isSubTab:!1},{id:"exam",label:"\uC2DC\uD5D8",icon:pr,isSubTab:!1},{id:"assignment",label:"\uACFC\uC81C",icon:Pu,isSubTab:!1,hasSubTabs:!0},{id:"materials",label:"\uC790\uB8CC",icon:Yu,isSubTab:!1},{id:"qna",label:"Q&A",icon:Yr,isSubTab:!1},{id:"grades",label:"\uC131\uC801\uAD00\uB9AC",icon:Tc,isSubTab:!1},{id:"completion",label:"\uC218\uB8CC\uAD00\uB9AC",icon:ys,isSubTab:!1}],J=[{id:"info-basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Hr},{id:"info-evaluation",label:"\uD3C9\uAC00/\uC218\uB8CC \uAE30\uC900",icon:Zs},{id:"info-completion",label:"\uC218\uB8CC\uC99D",icon:Tc}],y=[{id:"assignment-management",label:"\uACFC\uC81C \uAD00\uB9AC",icon:Pu},{id:"assignment-feedback",label:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC",icon:Yr}],q=M=>{M==="info"?(T(!S),S||H("info-basic")):M==="assignment"?(R(!N),N||H("assignment-management")):(H(M),A.map(_=>_.id).includes(M)||T(!1),["assignment-management","assignment-feedback"].includes(M)||R(!1))},P=Number((x==null?void 0:x.mappedCourseId)??x.id),L=(x==null?void 0:x.sourceType)==="haksa"&&(!(x!=null&&x.mappedCourseId)||Number.isNaN(P)||P<=0),D=(x==null?void 0:x.sourceType)==="haksa"||!!(x!=null&&x.haksaCourseCode||x!=null&&x.haksaOpenYear||x!=null&&x.haksaOpenTerm||x!=null&&x.haksaBunbanCode||x!=null&&x.haksaGroupCode)||String((x==null?void 0:x.courseType)||"").includes("\uD559\uC0AC"),k=D?G.filter(M=>M.id!=="completion"):G,A=D?J.filter(M=>M.id!=="info-completion"):J;c.useEffect(()=>{D&&(v==="completion"||v==="info-completion")&&H("info-basic")},[v,D]);const g=()=>{switch(v){case"info":case"info-basic":return e.jsx(Mu,{course:x,onCourseUpdated:p,initialSubTab:"basic"});case"info-evaluation":return e.jsx(Mu,{course:x,onCourseUpdated:p,initialSubTab:"evaluation"});case"info-completion":return D?e.jsx(Mu,{course:x,onCourseUpdated:p,initialSubTab:"basic"}):e.jsx(Mu,{course:x,onCourseUpdated:p,initialSubTab:"completion"});case"curriculum":return e.jsx(_m,{courseId:P,course:x});case"students":return e.jsx(Fm,{courseId:P,course:x});case"attendance":return e.jsx(Tm,{courseId:P,course:x});case"exam":return L?e.jsx(Lm,{course:x}):e.jsx(Mm,{courseId:P,course:x});case"assignment":return e.jsx(Om,{courseId:P,course:x});case"assignment-management":return e.jsx(rd,{courseId:P,course:x});case"assignment-feedback":return e.jsx(nd,{courseId:P});case"materials":return e.jsx(Pm,{courseId:P,showWeekSession:(x==null?void 0:x.sourceType)==="haksa",weekCount:Uu(x),course:x});case"qna":return e.jsx($m,{courseId:P});case"grades":return(x==null?void 0:x.sourceType)==="haksa"?e.jsx(ud,{course:x}):e.jsx(zm,{courseId:P});case"completion":return D?null:e.jsx(Um,{courseId:P,course:x});default:return null}};return e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"fixed w-64",style:{maxHeight:"calc(100vh - 40px)",overflowY:"auto"},children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Hu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("nav",{className:"flex flex-col",children:k.map(M=>{const _=M.icon,j=M.id==="info",O=M.id==="assignment",$=v===M.id||j&&A.map(d=>d.id).includes(v)||O&&(v==="assignment-management"||v==="assignment-feedback");return e.jsxs(Me.Fragment,{children:[e.jsxs("button",{onClick:()=>q(M.id),className:`flex items-center justify-between px-4 py-3 border-l-4 transition-colors text-left ${$?"border-blue-600 bg-blue-50 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{children:M.label})]}),(j||O)&&((j?S:N)?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(bs,{className:"w-4 h-4"}))]}),j&&S&&e.jsx("div",{className:"bg-gray-50",children:A.map(d=>{const f=d.icon;return e.jsxs("button",{onClick:()=>{H(d.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${v===d.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:d.label})]},d.id)})}),O&&N&&e.jsx("div",{className:"bg-gray-50",children:y.map(d=>{const f=d.icon;return e.jsxs("button",{onClick:()=>{H(d.id)},className:`w-full flex items-center gap-3 pl-12 pr-4 py-2.5 border-l-4 transition-colors text-left text-sm ${v===d.id?"border-blue-600 bg-blue-100 text-blue-700":"border-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:d.label})]},d.id)})})]},M.id)})})})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:x.subjectName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["\uACFC\uC815ID: ",x.courseId]}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:x.courseType}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsx("span",{children:x.period}),e.jsx("span",{className:"text-gray-300",children:"\xB7"}),e.jsxs("span",{children:["\uC218\uAC15\uC0DD: ",x.students,"\uBA85"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:g()})]})]})})}function Lm({course:n}){const u=c.useMemo(()=>er({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),[o,m]=c.useState([]),[x,p]=c.useState(!1),[B,F]=c.useState(null);return c.useEffect(()=>{if(!u){F("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8\uC744 \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),m([]);return}let v=!1;return(async()=>{p(!0),F(null);try{const S=await le.getHaksaCurriculum(u);if(S.rst_code!=="0000")throw new Error(S.rst_message);const T=Array.isArray(S.rst_data)?S.rst_data[0]:S.rst_data,N=(T==null?void 0:T.curriculum_json)||"";if(!N){v||m([]);return}const R=JSON.parse(N),J=(Array.isArray(R)?R.flatMap(y=>(y.sessions||[]).flatMap(q=>q.contents||[])):[]).filter(y=>String(y.type||"").toLowerCase()==="exam");v||m(J)}catch(S){v||(m([]),F(S instanceof Error?S.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{v||p(!1)}})(),()=>{v=!0}},[u]),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-800 rounded-lg text-sm",children:["\uD559\uC0AC \uACFC\uBAA9\uC758 \uC2DC\uD5D8\uC740 ",e.jsx("b",{children:"\uAC15\uC758\uBAA9\uCC28"}),"\uC5D0\uC11C \uC8FC\uCC28/\uCC28\uC2DC\uC5D0 \uB4F1\uB85D\uD55C \uD56D\uBAA9\uC744 \uAE30\uC900\uC73C\uB85C \uD45C\uC2DC\uB429\uB2C8\uB2E4."]}),B&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:B}),x&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!x&&o.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-700 text-sm rounded-full",children:["\uCD1D ",o.length,"\uAC1C"]})]}),o.map(v=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pr,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:v.title||"\uC2DC\uD5D8"}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[v.weekNumber||1,"\uC8FC\uCC28"]})]}),v.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:v.description}),v.examSettings&&e.jsxs("div",{className:"mt-2 ml-7 text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:["\uBC30\uC810: ",v.examSettings.points??0,"\uC810"]}),e.jsxs("div",{children:["\uC7AC\uC751\uC2DC:"," ",v.examSettings.allowRetake?`\uAC00\uB2A5 (${v.examSettings.retakeScore??0}\uC810 \uBBF8\uB9CC, ${v.examSettings.retakeCount??0}\uD68C)`:"\uBD88\uAC00"]}),e.jsxs("div",{children:["\uACB0\uACFC\uB178\uCD9C: ",v.examSettings.showResults===!1?"\uBE44\uB178\uCD9C":"\uB178\uCD9C"]})]})]}),v.createdAt&&e.jsx("div",{className:"text-sm text-gray-400 flex-shrink-0",children:new Date(v.createdAt).toLocaleDateString("ko-KR")})]})},v.id))]}):!x&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(pr,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uC2DC\uD5D8\uC744 \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})}function Mm({courseId:n,course:u}){const o=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(n)||n<=0),m=c.useMemo(()=>er({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[x,p]=c.useState(null),[B,F]=c.useState(!1),[v,H]=c.useState([]),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState([]),[y,q]=c.useState(!1),P=c.useRef([]),L=c.useRef(m),[D,k]=c.useState(null),[A,g]=c.useState({}),M=new Date().toISOString().split("T")[0],_=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[j,O]=c.useState({startDate:M,startTime:"09:00",endDate:_,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});c.useEffect(()=>{if(!o||!m)return;let I=!1;return(async()=>{q(!1),R(null);try{const z=await le.getHaksaExams(m);if(z.rst_code!=="0000")throw new Error(z.rst_message);const w=Array.isArray(z.rst_data)?z.rst_data[0]:z.rst_data,b=(w==null?void 0:w.exams_json)||"";if(b){const h=JSON.parse(b);I||J(Array.isArray(h)?h:[]);return}if(u!=null&&u.id)try{const h=localStorage.getItem(`haksa_exams_${u.id}`);if(h){const W=JSON.parse(h);I||J(Array.isArray(W)?W:[]),await le.updateHaksaExams({...m,examsJson:h})}}catch{I||J([])}}catch(z){I||R(z instanceof Error?z.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I||q(!0)}})(),()=>{I=!0}},[o,m,u==null?void 0:u.id]),c.useEffect(()=>{o&&!m&&R("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uC2DC\uD5D8 \uC800\uC7A5/\uC870\uD68C\uAC00 \uBD88\uAC00\uB2A5\uD569\uB2C8\uB2E4.")},[o,m]),c.useEffect(()=>{P.current=G},[G]),c.useEffect(()=>{L.current=m},[m]),c.useEffect(()=>()=>{!o||!L.current||!y||le.updateHaksaExams({...L.current,examsJson:JSON.stringify(P.current)})},[o,y]),c.useEffect(()=>{if(n&&!o)try{const I=localStorage.getItem(`prism_exam_settings_${n}`);I&&g(JSON.parse(I))}catch{g({})}},[n,o]);const $=async()=>{if(!(!n||o)){T(!0),R(null);try{const I=await le.getExams({courseId:n});if(I.rst_code!=="0000")throw new Error(I.rst_message);const z=(I.rst_data??[]).map(w=>({id:Number(w.exam_id),title:w.exam_nm,date:w.start_date_conv||w.start_date||"-",duration:w.exam_time?`${w.exam_time}\uBD84`:"-",submitted:Number(w.submitted_cnt??0),total:Number(w.total_cnt??0)}));H(z)}catch(I){R(I instanceof Error?I.message:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{T(!1)}}};c.useEffect(()=>{o||$()},[n,o]);const d=I=>{const Q=A[I.id]||{};k(I),O({startDate:Q.startDate||M,startTime:Q.startTime||"09:00",endDate:Q.endDate||_,endTime:Q.endTime||"18:00",points:Q.points||0,allowRetake:Q.allowRetake||!1,retakeScore:Q.retakeScore||0,retakeCount:Q.retakeCount||0,showResults:Q.showResults!==!1})},f=()=>{if(!D)return;const I={...A,[D.id]:{...j}};if(g(I),n)try{localStorage.setItem(`prism_exam_settings_${n}`,JSON.stringify(I))}catch{}k(null)},U=async I=>{if(confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const Q=await le.deleteExam({courseId:n,examId:I});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);const z={...A};if(delete z[I],g(z),n)try{localStorage.setItem(`prism_exam_settings_${n}`,JSON.stringify(z))}catch{}await $(),alert("\uC2DC\uD5D8\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Q){alert(Q instanceof Error?Q.message:"\uC2DC\uD5D8 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};if(o)return e.jsx(Hm,{haksaKey:m,haksaExams:G,setHaksaExams:J,weekCount:Uu(u)});if(x!==null){const I=v.find(Q=>Q.id===x);return e.jsx(Rm,{courseId:n,examId:x,exam:I,onBack:()=>p(null),onRefresh:()=>void $()})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),N&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:N}),S&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC2DC\uD5D8 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!S&&v.length>0&&e.jsx("div",{className:"space-y-3",children:v.map(I=>{const Q=A[I.id]||{};return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>p(I.id),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Zs,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:I.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[I.submitted,"/",I.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[Q.startDate||I.date||"-"," ",Q.startTime||""," ~ ",Q.endDate||"-"," ",Q.endTime||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uC2DC\uAC04"}),e.jsx("span",{className:"text-gray-900",children:I.duration})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[Q.points||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:Q.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",Q.retakeScore,"\uC810 \uBBF8\uB9CC, ",Q.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:Q.showResults!==!1?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:z=>{z.stopPropagation(),d(I)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:z=>{z.stopPropagation(),U(I.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]})},I.id)})}),!S&&v.length===0&&e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(Zs,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]})]}),e.jsx(Ym,{isOpen:B,onClose:()=>F(!1),weekCount:Uu(u),showWeekSession:(u==null?void 0:u.sourceType)==="haksa",onSave:async I=>{try{const Q=(I.startDate||new Date().toISOString().split("T")[0]).replace(/-/g,"")+"090000",z=(I.endDate||new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]).replace(/-/g,"")+"180000",w=await le.linkExam({courseId:n,examId:I.examId,startDate:Q,endDate:z,assignScore:I.points||100,allowRetake:I.allowRetake||!1,showResults:I.showResults!==!1});if(w.rst_code!=="0000")throw new Error(w.rst_message);if((u==null?void 0:u.sourceType)==="haksa")try{await Hl({haksaKey:m,weekNumber:I.weekNumber,sessionNumber:I.sessionNumber,content:{type:"exam",title:I.title,description:I.description||"",examId:String(I.examId),examSettings:{points:I.points,allowRetake:I.allowRetake,retakeScore:I.retakeScore,retakeCount:I.retakeCount,showResults:I.showResults,startDate:I.startDate,endDate:I.endDate}}})}catch(h){alert(h instanceof Error?h.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}const b={...A,[I.examId]:{startDate:I.startDate,startTime:"09:00",endDate:I.endDate,endTime:"18:00",points:I.points,allowRetake:I.allowRetake,retakeScore:I.retakeScore,retakeCount:I.retakeCount,showResults:I.showResults,weekNumber:I.weekNumber,sessionNumber:I.sessionNumber}};g(b);try{localStorage.setItem(`prism_exam_settings_${n}`,JSON.stringify(b))}catch{}await $(),alert("\uC2DC\uD5D8\uC774 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Q){alert(Q instanceof Error?Q.message:"\uC2DC\uD5D8 \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}}),D&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>k(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:D.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:j.startDate,onChange:I=>O(Q=>({...Q,startDate:I.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:j.startTime,onChange:I=>O(Q=>({...Q,startTime:I.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:j.endDate,onChange:I=>O(Q=>({...Q,endDate:I.target.value})),min:j.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:j.endTime,onChange:I=>O(Q=>({...Q,endTime:I.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:j.points,onChange:I=>O(Q=>({...Q,points:parseInt(I.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.allowRetake,onChange:I=>O(Q=>({...Q,allowRetake:I.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),j.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:j.retakeScore,onChange:I=>O(Q=>({...Q,retakeScore:parseInt(I.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:j.retakeCount,onChange:I=>O(Q=>({...Q,retakeCount:parseInt(I.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showResults,onChange:I=>O(Q=>({...Q,showResults:I.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>k(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:f,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function Rm({courseId:n,examId:u,exam:o,onBack:m,onRefresh:x}){const[p,B]=c.useState(null),[F,v]=c.useState(""),[H,S]=c.useState([]),[T,N]=c.useState(!1),[R,G]=c.useState(null),J=(o==null?void 0:o.title)??"\uC2DC\uD5D8",y=(o==null?void 0:o.date)??"-",q=(o==null?void 0:o.duration)??"-",P=async()=>{if(!(!n||!u)){N(!0),G(null);try{const $=await le.getExamUsers({courseId:n,examId:u});if($.rst_code!=="0000")throw new Error($.rst_message);const f=($.rst_data??[]).map(U=>({courseUserId:Number(U.course_user_id),studentId:U.login_id,name:U.user_nm,score:Number(U.marking_score??0),submitted:!!U.submitted,submittedAt:U.submitted_at??"-"}));S(f)}catch($){G($ instanceof Error?$.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}}};c.useEffect(()=>{P()},[n,u]);const L=H.filter($=>$.submitted),D={average:L.length>0?Math.round(L.reduce(($,d)=>$+d.score,0)/L.length*10)/10:0,highest:L.length>0?Math.max(...L.map($=>$.score)):0,lowest:L.length>0?Math.min(...L.map($=>$.score)):0,submitted:L.length,total:H.length},A=(()=>{const $=[{range:"90-100",min:90,max:100,count:0},{range:"80-89",min:80,max:89,count:0},{range:"70-79",min:70,max:79,count:0},{range:"60-69",min:60,max:69,count:0},{range:"0-59",min:0,max:59,count:0}];return L.forEach(d=>{const f=$.find(U=>d.score>=U.min&&d.score<=U.max);f&&f.count++}),$})(),g=()=>{const $=new Date().toISOString().slice(0,10).replace(/-/g,""),d=`course_${n}_exam_${u}_${$}.csv`,f=["No","\uD559\uBC88","\uC774\uB984","\uC81C\uCD9C\uC5EC\uBD80","\uC81C\uCD9C\uC2DC\uAC04","\uC810\uC218"],U=H.map((I,Q)=>[Q+1,I.studentId??"",I.name??"",I.submitted?"Y":"N",I.submittedAt??"",I.submitted?Number(I.score??0):""]);zu(d,f,U)},M=($,d)=>{B($),v(d.toString())},_=async $=>{const d=parseInt(F,10);if(isNaN(d)||d<0||d>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}try{const f=await le.updateExamScore({courseId:n,examId:u,courseUserId:$,markingScore:d});if(f.rst_code!=="0000")throw new Error(f.rst_message);await P(),x(),B(null),v("")}catch(f){alert(f instanceof Error?f.message:"\uC810\uC218 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},j=()=>{B(null),v("")},O=async $=>{if(confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uC2DC\uD5D8 \uC751\uC2DC\uB97C \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const d=await le.cancelExamSubmit({courseId:n,examId:u,courseUserId:$});if(d.rst_code!=="0000")throw new Error(d.rst_message);await P(),x(),alert("\uC751\uC2DC\uAC00 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(d){alert(d instanceof Error?d.message:"\uC751\uC2DC \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Hu,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:J}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC2DC\uD5D8\uC77C: ",y," \xB7 \uC2DC\uD5D8\uC2DC\uAC04: ",q]})]})]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC5D1\uC140 \uB2E4\uC6B4\uB85C\uB4DC"})]})]}),R&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:R}),T&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-700 mb-1",children:"\uD3C9\uADE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-blue-900",children:[D.average,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1",children:"\uCD5C\uACE0 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[D.highest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-red-700 mb-1",children:"\uCD5C\uC800 \uC810\uC218"}),e.jsxs("div",{className:"text-2xl text-red-900",children:[D.lowest,"\uC810"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-1",children:"\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-purple-900",children:[D.submitted,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-700 mb-1",children:"\uBBF8\uC81C\uCD9C \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[D.total-D.submitted,"\uBA85"]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:"\uC810\uC218 \uBD84\uD3EC"}),e.jsx("div",{className:"space-y-3",children:A.map($=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[$.range,"\uC810"]}),e.jsxs("span",{className:"text-sm text-gray-900",children:[$.count,"\uBA85"]})]}),e.jsx("div",{className:"w-full h-8 bg-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 flex items-center justify-end px-2",style:{width:D.submitted>0?`${$.count/D.submitted*100}%`:"0%"},children:$.count>0&&e.jsxs("span",{className:"text-xs text-white",children:[Math.round($.count/D.submitted*100),"%"]})})})]},$.range))})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h4",{className:"text-gray-900",children:"\uD559\uC0DD\uBCC4 \uC810\uC218"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC810\uC218\uB97C \uD074\uB9AD\uD558\uC5EC \uC218\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC81C\uCD9C \uC2DC\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCC44\uC810"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.map(($,d)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:d+1}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:$.studentId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:$.name}),e.jsx("td",{className:"px-4 py-4 text-center",children:$.submitted?p===$.courseUserId?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:F,onChange:f=>v(f.target.value),onKeyDown:f=>{f.key==="Enter"?_($.courseUserId):f.key==="Escape"&&j()},className:"w-16 px-2 py-1 border border-blue-500 rounded text-center focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:()=>_($.courseUserId),className:"p-1 text-green-600 hover:bg-green-100 rounded transition-colors",title:"\uC800\uC7A5",children:e.jsx(ys,{className:"w-4 h-4"})}),e.jsx("button",{onClick:j,className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uCDE8\uC18C",children:e.jsx(Nt,{className:"w-4 h-4"})})]}):e.jsxs("button",{onClick:()=>M($.courseUserId,$.score),className:`inline-flex items-center justify-center px-3 py-1 rounded-lg hover:opacity-80 transition-opacity ${$.score>=90?"bg-green-100 text-green-700":$.score>=80?"bg-blue-100 text-blue-700":$.score>=70?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[$.score,"\uC810"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:$.submitted?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:[e.jsx(ys,{className:"w-3 h-3"}),"\uC81C\uCD9C \uC644\uB8CC"]}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-700 rounded text-xs",children:"\uBBF8\uC81C\uCD9C"})}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:$.submittedAt}),e.jsx("td",{className:"px-4 py-4 text-center",children:$.submitted&&p!==$.courseUserId&&e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>M($.courseUserId,$.score),className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"\uC810\uC218 \uC218\uC815",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O($.courseUserId),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\uC751\uC2DC \uCDE8\uC18C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},$.courseUserId))})]})})]})]})}function Om({courseId:n,course:u}){const[o,m]=c.useState("management");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>m("management"),className:`px-4 py-2 transition-colors ${o==="management"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uACFC\uC81C \uAD00\uB9AC"}),e.jsx("button",{onClick:()=>m("feedback"),className:`px-4 py-2 transition-colors ${o==="feedback"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"\uD53C\uB4DC\uBC31 \uAD00\uB9AC"})]}),o==="management"&&e.jsx(rd,{courseId:n,course:u}),o==="feedback"&&e.jsx(nd,{courseId:n})]})}function rd({courseId:n,course:u}){const[o,m]=c.useState(!1),[x,p]=c.useState(!1),[B,F]=c.useState(null),v=Number((u==null?void 0:u.mappedCourseId)??n),H=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(v)||v<=0),S=Uu(u),T=(u==null?void 0:u.sourceType)==="haksa",N=c.useMemo(()=>er({haksaCourseCode:u==null?void 0:u.haksaCourseCode,haksaOpenYear:u==null?void 0:u.haksaOpenYear,haksaOpenTerm:u==null?void 0:u.haksaOpenTerm,haksaBunbanCode:u==null?void 0:u.haksaBunbanCode,haksaGroupCode:u==null?void 0:u.haksaGroupCode}),[u==null?void 0:u.haksaCourseCode,u==null?void 0:u.haksaOpenYear,u==null?void 0:u.haksaOpenTerm,u==null?void 0:u.haksaBunbanCode,u==null?void 0:u.haksaGroupCode]),[R,G]=c.useState([]),[J,y]=c.useState(!1),[q,P]=c.useState(null),[L,D]=c.useState([]),[k,A]=c.useState(!1);c.useEffect(()=>{if(!H||!N)return;let O=!1;return(async()=>{A(!0),P(null);try{const d=await le.getHaksaCurriculum(N);if(d.rst_code!=="0000")throw new Error(d.rst_message);const f=Array.isArray(d.rst_data)?d.rst_data[0]:d.rst_data,U=(f==null?void 0:f.curriculum_json)||"";if(!U){O||D([]);return}const I=JSON.parse(U),z=(Array.isArray(I)?I.flatMap(w=>(w.sessions||[]).flatMap(b=>b.contents||[])):[]).filter(w=>{const b=String(w.type||"").toLowerCase();return b==="assignment"||b==="homework"});O||D(z)}catch(d){O||(D([]),P(d instanceof Error?d.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{O||A(!1)}})(),()=>{O=!0}},[H,N]);const g=async()=>{if(!(!n||H)){y(!0),P(null);try{const O=await le.getHomeworks({courseId:n});if(O.rst_code!=="0000")throw new Error(O.rst_message);const d=(O.rst_data??[]).map(f=>({id:Number(f.homework_id),title:f.homework_nm||f.module_nm||"\uACFC\uC81C",description:f.content||"",dueDate:f.end_date_conv||f.end_date||"-",totalScore:Number(f.assign_score??100),submitted:Number(f.submitted_cnt??0),total:Number(f.total_cnt??0)}));G(d)}catch(O){P(O instanceof Error?O.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{y(!1)}}};if(c.useEffect(()=>{H||g()},[n,H]),H)return e.jsxs("div",{className:"space-y-4",children:[q&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:q}),k&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),L.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C"}),e.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:["\uCD1D ",L.length,"\uAC1C"]})]}),L.map(O=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:O.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[O.weekNumber,"\uC8FC\uCC28"]})]}),O.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-7",children:O.description})]}),e.jsx("div",{className:"text-sm text-gray-400",children:new Date(O.createdAt).toLocaleDateString("ko-KR")})]})},O.id))]}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(Bt,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uAC15\uC758\uBAA9\uCC28\uC5D0\uC11C \uC8FC\uCC28\uBCC4\uB85C \uACFC\uC81C\uB97C \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]});const M=O=>{let $="",d="";if(O.dueDate){const f=O.dueDate.replace(/-/g,"");f.length>=8&&($=`${f.slice(0,4)}-${f.slice(4,6)}-${f.slice(6,8)}`),f.length>=12&&(d=`${f.slice(8,10)}:${f.slice(10,12)}`)}F({id:O.id,title:O.title||"",description:O.description||"",dueDate:$,dueTime:d||"23:59",totalScore:O.totalScore||100}),p(!0)},_=async O=>{if(B)try{const $=await le.updateHomework({courseId:n,homeworkId:B.id,title:O.title,description:O.description,dueDate:O.dueDate,dueTime:O.dueTime,totalScore:Number(O.totalScore||0),file:O.file});if($.rst_code!=="0000")throw new Error($.rst_message);await g(),alert("\uACFC\uC81C\uAC00 \uC218\uC815\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),p(!1),F(null)}catch($){alert($ instanceof Error?$.message:"\uACFC\uC81C \uC218\uC815 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},j=(O,$)=>{(async()=>{if(confirm(`\uACFC\uC81C "${$}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC774\uBBF8 \uC81C\uCD9C \uB0B4\uC5ED\uC774 \uC788\uB294 \uACBD\uC6B0, \uC11C\uBC84\uC5D0\uC11C \uC0AD\uC81C\uAC00 \uCC28\uB2E8\uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`))try{const f=await le.deleteHomework({courseId:n,homeworkId:O});if(f.rst_code!=="0000")throw new Error(f.rst_message);await g(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(f){alert(f instanceof Error?f.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Pu,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uC81C \uB4F1\uB85D"})]})}),q&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:q}),J&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!J&&R.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694."}),!J&&R.length>0&&e.jsx("div",{className:"space-y-3",children:R.map(O=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Pu,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:O.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:[O.submitted,"/",O.total,"\uBA85 \uC81C\uCD9C"]})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uB9C8\uAC10\uC77C"}),e.jsx("span",{className:"text-gray-900",children:O.dueDate||"-"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[O.totalScore||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC81C\uCD9C \uD604\uD669"}),e.jsxs("span",{className:"text-gray-900",children:[O.submitted," / ",O.total,"\uBA85"]})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:()=>M(O),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(O.id,O.title),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]})},O.id))})]}),e.jsx(Lc,{isOpen:o,onClose:()=>m(!1),showWeekSession:T,weekCount:S,onSave:O=>{(async()=>{try{const $=await le.createHomework({courseId:n,title:O.title,description:O.description,dueDate:O.dueDate,dueTime:O.dueTime,totalScore:Number(O.totalScore||0),onoffType:"N",file:O.file});if($.rst_code!=="0000")throw new Error($.rst_message);if((u==null?void 0:u.sourceType)==="haksa")try{await Hl({haksaKey:N,weekNumber:Number(O.weekNumber||1),sessionNumber:Number(O.sessionNumber||1),content:{type:"assignment",title:O.title,description:O.description,dueDate:O.dueDate,dueTime:O.dueTime,totalScore:Number(O.totalScore||0)}})}catch(d){alert(d instanceof Error?d.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await g(),alert("\uACFC\uC81C\uAC00 \uB4F1\uB85D\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch($){alert($ instanceof Error?$.message:"\uACFC\uC81C \uB4F1\uB85D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()}}),e.jsx(Lc,{isOpen:x,onClose:()=>{p(!1),F(null)},onSave:_,mode:"edit",showWeekSession:T,weekCount:S,initialData:B||void 0})]})}function nd({courseId:n}){const[u,o]=c.useState([]),[m,x]=c.useState(null),[p,B]=c.useState([]),[F,v]=c.useState(null),[H,S]=c.useState("0"),[T,N]=c.useState(""),[R,G]=c.useState(!1),[J,y]=c.useState(!1),[q,P]=c.useState(null),L=b=>b===!0||b===1||b==="1"||b==="Y"||b==="true",D=async()=>{var b;if(n){G(!0),P(null);try{const h=await le.getHomeworks({courseId:n});if(h.rst_code!=="0000")throw new Error(h.rst_message);const oe=(h.rst_data??[]).map(pe=>({id:Number(pe.homework_id),title:pe.homework_nm||pe.module_nm||"\uACFC\uC81C"}));o(oe);const ie=((b=oe[0])==null?void 0:b.id)??null;x(pe=>pe&&oe.some(be=>be.id===pe)?pe:ie),ie||(B([]),v(null),S("0"),N(""))}catch(h){P(h instanceof Error?h.message:"\uACFC\uC81C \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{G(!1)}}},k=async b=>{if(!(!n||!b)){y(!0),P(null);try{const h=await le.getHomeworkUsers({courseId:n,homeworkId:b});if(h.rst_code!=="0000")throw new Error(h.rst_message);const oe=(h.rst_data??[]).map(ie=>({courseUserId:Number(ie.course_user_id),studentId:ie.login_id,name:ie.user_nm,submitted:L(ie.submitted),submittedAt:ie.submitted_at??"-",confirm:L(ie.confirm),markingScore:Number(ie.marking_score??0),scoreConv:ie.score_conv??"",feedback:ie.feedback??"",taskCnt:Number(ie.task_cnt??0)}));B(oe),v(ie=>ie&&oe.some(pe=>pe.courseUserId===ie)?ie:null)}catch(h){P(h instanceof Error?h.message:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{y(!1)}}};c.useEffect(()=>{D()},[n]),c.useEffect(()=>{m&&k(m)},[n,m]);const A=p.find(b=>b.courseUserId===F)??null,g=b=>{v(b);const h=p.find(W=>W.courseUserId===b);S(String((h==null?void 0:h.markingScore)??0)),N(String((h==null?void 0:h.feedback)??""))},M=()=>{if(!m||!F)return;const b=parseInt(H,10);if(isNaN(b)||b<0||b>100){alert("\uC810\uC218\uB294 0~100 \uC0AC\uC774\uC758 \uC22B\uC790\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}(async()=>{try{const h=await le.updateHomeworkFeedback({courseId:n,homeworkId:m,courseUserId:F,markingScore:b,feedback:T});if(h.rst_code!=="0000")throw new Error(h.rst_message);await k(m),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(h){alert(h instanceof Error?h.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},_=()=>{!m||!F||confirm("\uD574\uB2F9 \uD559\uC0DD\uC758 \uACFC\uC81C \uC81C\uCD9C\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&(async()=>{try{const b=await le.cancelHomeworkSubmit({courseId:n,homeworkId:m,courseUserId:F});if(b.rst_code!=="0000")throw new Error(b.rst_message);await k(m),v(null),S("0"),N(""),alert("\uC81C\uCD9C\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(b){alert(b instanceof Error?b.message:"\uC81C\uCD9C \uCDE8\uC18C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},j=()=>{if(!m||!F)return;const b=prompt("\uCD94\uAC00\uACFC\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");!b||!b.trim()||(async()=>{try{const h=await le.appendHomeworkTask({courseId:n,homeworkId:m,courseUserId:F,task:b.trim()});if(h.rst_code!=="0000")throw new Error(h.rst_message);await k(m),alert("\uCD94\uAC00\uACFC\uC81C\uAC00 \uBD80\uC5EC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(h){alert(h instanceof Error?h.message:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},[O,$]=c.useState([]),[d,f]=c.useState(!1),[U,I]=c.useState(null),Q=async(b,h)=>{f(!0);try{const W=await le.getHomeworkTasks({courseId:n,homeworkId:b,courseUserId:h});if(W.rst_code!=="0000")throw new Error(W.rst_message);$(W.rst_data??[])}catch{$([])}finally{f(!1)}},z=b=>{g(b),m&&Q(m,b)},w={total:p.length,needFeedback:p.filter(b=>b.submitted&&!b.confirm).length,doneFeedback:p.filter(b=>b.confirm).length};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-gray-700",children:"\uACFC\uC81C \uC120\uD0DD:"}),e.jsxs("select",{value:m??"",onChange:b=>{const h=b.target.value?Number(b.target.value):null;x(h),v(null),S("0"),N("")},disabled:R||u.length===0,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[u.length===0&&e.jsx("option",{value:"",children:"\uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),u.map(b=>e.jsx("option",{value:b.id,children:b.title},b.id))]})]}),q&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:q}),J&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC81C\uCD9C \uD604\uD669\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),u.length===0&&!R?e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uBA3C\uC800 \uACFC\uC81C\uB97C \uB4F1\uB85D\uD574 \uC8FC\uC138\uC694. (\uACFC\uC81C \uAD00\uB9AC \uD0ED\uC5D0\uC11C \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.)"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 rounded-t-lg border border-b-0 border-gray-200",children:e.jsxs("h4",{className:"text-gray-900",children:["\uC218\uAC15\uC0DD \uBAA9\uB85D (",p.length,"\uBA85)"]})}),e.jsxs("div",{className:"border border-gray-200 rounded-b-lg divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:[p.map(b=>{const h=F===b.courseUserId,W=b.submitted?b.confirm?{label:"\uD53C\uB4DC\uBC31 \uC644\uB8CC",className:"bg-green-100 text-green-700"}:{label:"\uD53C\uB4DC\uBC31 \uD544\uC694",className:"bg-orange-100 text-orange-700"}:{label:"\uBBF8\uC81C\uCD9C",className:"bg-red-100 text-red-700"};return e.jsxs("button",{onClick:()=>z(b.courseUserId),className:`w-full p-4 text-left transition-colors ${h?"bg-blue-50 border-l-4 border-blue-600":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 mb-1",children:b.name}),e.jsx("div",{className:"text-sm text-gray-600",children:b.studentId})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${W.className}`,children:W.label})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["\uC81C\uCD9C: ",b.submittedAt]}),e.jsxs("span",{children:["\uC810\uC218: ",b.markingScore,"\uC810",b.scoreConv?` (${b.scoreConv})`:""]})]}),0<b.taskCnt&&e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:["\uCD94\uAC00\uACFC\uC81C ",b.taskCnt,"\uAC74"]})]},b.courseUserId)}),p.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"\uC218\uAC15\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})]})]}),e.jsx("div",{children:A?e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsxs("h4",{className:"text-gray-900",children:[A.name," (",A.studentId,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["\uC81C\uCD9C\uC2DC\uAC04: ",A.submittedAt]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC810\uC218(0~100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:H,onChange:b=>S(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 border border-blue-200 text-blue-700 rounded-lg hover:bg-blue-50 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00\uACFC\uC81C \uBD80\uC5EC"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD53C\uB4DC\uBC31"}),e.jsx("textarea",{value:T,onChange:b=>N(b.target.value),placeholder:"\uD559\uC0DD\uC5D0\uAC8C \uC804\uB2EC\uD560 \uD53C\uB4DC\uBC31\uC744 \uC785\uB825\uD558\uC138\uC694...",rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{S(String(A.markingScore??0)),N(String(A.feedback??""))},className:"px-4 py-2 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),A.submitted&&e.jsx("button",{onClick:_,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"\uC81C\uCD9C \uCDE8\uC18C"}),e.jsx("button",{onClick:M,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC800\uC7A5"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 mb-2",children:"\uD53C\uB4DC\uBC31 \uC548\uB0B4"}),e.jsxs("div",{className:"text-sm text-blue-700",children:["- \uC800\uC7A5\uC744 \uB204\uB974\uBA74 \uC810\uC218/\uD53C\uB4DC\uBC31\uC774 DB\uC5D0 \uC800\uC7A5\uB418\uACE0, \uC131\uC801(\uACFC\uC81C \uC810\uC218)\uC5D0 \uC989\uC2DC \uBC18\uC601\uB429\uB2C8\uB2E4.",e.jsx("br",{}),"- \uC624\uD504\uB77C\uC778 \uACFC\uC81C\uCC98\uB7FC \uC81C\uCD9C \uAE30\uB85D\uC774 \uC5C6\uC5B4\uB3C4, \uD544\uC694\uD558\uBA74 \uC810\uC218 \uC785\uB825\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4."]})]}),O.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D (",O.length,"\uAC74)"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg divide-y divide-gray-200 max-h-[300px] overflow-y-auto",children:O.map(b=>e.jsxs("button",{onClick:()=>I(b),className:"w-full text-left p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium group-hover:text-blue-600",children:b.task_preview}),e.jsx("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:b.need_review?e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded border border-orange-200",children:"\uC7AC\uD3C9\uAC00 \uD544\uC694"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${b.submit_yn==="Y"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:b.submit_yn_label}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${b.confirm_yn==="Y"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:b.confirm_yn_label})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["\uBD80\uC5EC: ",b.reg_date_conv,b.submit_yn==="Y"&&e.jsxs("span",{className:"ml-3",children:["\uC81C\uCD9C: ",b.submit_date_conv]})]}),b.subject&&e.jsxs("div",{className:"mt-1 text-xs text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"\uC81C\uCD9C \uC81C\uBAA9:"})," ",b.subject]})]},b.id))}),e.jsx("div",{className:"mt-2 text-[11px] text-gray-400",children:"* \uAC01 \uD56D\uBAA9\uC744 \uD074\uB9AD\uD558\uBA74 \uC81C\uCD9C \uC0C1\uC138 \uB0B4\uC6A9 \uD655\uC778 \uBC0F \uD3C9\uAC00\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]}),d&&e.jsx("div",{className:"text-center text-gray-500 text-sm py-2",children:"\uCD94\uAC00 \uACFC\uC81C \uBAA9\uB85D \uBD88\uB7EC\uC624\uB294 \uC911..."})]})]}):e.jsx("div",{className:"border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Yr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{children:"\uD559\uC0DD\uC744 \uC120\uD0DD\uD558\uC5EC"}),e.jsx("p",{children:"\uC810\uC218\uC640 \uD53C\uB4DC\uBC31\uC744 \uC800\uC7A5\uD558\uC138\uC694"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"\uCD1D \uC778\uC6D0"}),e.jsxs("div",{className:"text-2xl text-gray-900",children:[w.total,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-orange-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uD544\uC694"}),e.jsxs("div",{className:"text-2xl text-orange-900",children:[w.needFeedback,"\uBA85"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"\uD53C\uB4DC\uBC31 \uC644\uB8CC"}),e.jsxs("div",{className:"text-2xl text-green-900",children:[w.doneFeedback,"\uBA85"]})]})]})]}),e.jsx(bm,{isOpen:!!U,onClose:()=>I(null),courseId:n,task:U,onRefresh:()=>{m&&F&&(Q(m,F),k(m))}})]})}function Pm({courseId:n,showWeekSession:u=!1,weekCount:o=15,course:m}){const[x,p]=c.useState(!1),[B,F]=c.useState([]),[v,H]=c.useState(!1),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState(!1),[y,q]=c.useState(null),P=(m==null?void 0:m.sourceType)==="haksa",L=P?Number((m==null?void 0:m.mappedCourseId)??0):Number.isFinite(n)?n:0,D=y&&y>0?y:L,[k,A]=c.useState({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1}),g=c.useMemo(()=>er({haksaCourseCode:m==null?void 0:m.haksaCourseCode,haksaOpenYear:m==null?void 0:m.haksaOpenYear,haksaOpenTerm:m==null?void 0:m.haksaOpenTerm,haksaBunbanCode:m==null?void 0:m.haksaBunbanCode,haksaGroupCode:m==null?void 0:m.haksaGroupCode}),[m==null?void 0:m.haksaCourseCode,m==null?void 0:m.haksaOpenYear,m==null?void 0:m.haksaOpenTerm,m==null?void 0:m.haksaBunbanCode,m==null?void 0:m.haksaGroupCode]),M=()=>{A({title:"",content:"",link:"",file:null,weekNumber:1,sessionNumber:1})};c.useEffect(()=>{if(!P){q(null);return}if(L>0){q(null);return}if(!g){R("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let d=!1;return(async()=>{J(!0),R(null);try{const U=await le.resolveHaksaCourse(g);if(U.rst_code!=="0000")throw new Error(U.rst_message);const I=Array.isArray(U.rst_data)?U.rst_data[0]:U.rst_data,Q=Number((I==null?void 0:I.mapped_course_id)??0);if(!Q||Number.isNaN(Q))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");d||q(Q)}catch(U){d||(q(null),R(U instanceof Error?U.message:"\uACFC\uC815 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}finally{d||J(!1)}})(),()=>{d=!0}},[P,L,g]);const _=async()=>{if(D){H(!0),R(null);try{const d=await le.getMaterials({courseId:D});if(d.rst_code!=="0000")throw new Error(d.rst_message);const U=(d.rst_data??[]).map(I=>({id:Number(I.library_id),title:I.library_nm,uploadDate:I.upload_date_conv||"-",size:I.file_size_conv||"-",downloadUrl:I.file_url||I.library_link||"",hasFile:!!I.file_url,hasLink:!!I.library_link}));F(U)}catch(d){R(d instanceof Error?d.message:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{H(!1)}}};c.useEffect(()=>{_()},[D]);const j=d=>{const f=d.downloadUrl;if(!f){alert("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uD30C\uC77C/\uB9C1\uD06C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}window.open(f,"_blank","noopener,noreferrer")},O=(d,f)=>{(async()=>{if(!D){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(confirm(`\uC790\uB8CC "${f}"\uC744(\uB97C) \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{const I=await le.deleteMaterial({courseId:D,libraryId:d});if(I.rst_code!=="0000")throw new Error(I.rst_message);await _(),alert("\uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(I){alert(I instanceof Error?I.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},$=()=>{(async()=>{var I;const d=k.title.trim(),f=!!k.file,U=!!k.link.trim();if(!d){alert("\uC790\uB8CC\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!D){alert("\uACFC\uC815 ID\uAC00 \uC5C6\uC5B4 \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uACFC\uC815 \uB9E4\uD551 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}if(!f&&!U){alert("\uC790\uB8CC \uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC694\uD569\uB2C8\uB2E4.");return}T(!0);try{const Q=await le.uploadMaterial({courseId:D,title:d,content:k.content,link:k.link,file:k.file});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);if((m==null?void 0:m.sourceType)==="haksa")try{await Hl({haksaKey:g,weekNumber:Number(k.weekNumber||1),sessionNumber:Number(k.sessionNumber||1),content:{type:"document",title:k.title,description:k.content,link:k.link,fileName:((I=k.file)==null?void 0:I.name)||""}})}catch(z){alert(z instanceof Error?z.message:"\uAC15\uC758\uBAA9\uCC28\uC5D0 \uC790\uB8CC\uB97C \uB4F1\uB85D\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}await _(),p(!1),M(),alert("\uC5C5\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Q){alert(Q instanceof Error?Q.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{T(!1)}})()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx($l,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"})]})}),N&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:N}),G&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 text-blue-700 rounded-lg",children:"\uACFC\uC815 \uB9E4\uD551 \uC911\uC785\uB2C8\uB2E4. \uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824 \uC8FC\uC138\uC694."}),v&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC790\uB8CC \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!v&&B.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"\uB4F1\uB85D\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC6B0\uCE21 \uC0C1\uB2E8\uC5D0\uC11C \uC790\uB8CC\uB97C \uC5C5\uB85C\uB4DC\uD574 \uC8FC\uC138\uC694."}),e.jsx("div",{className:"space-y-2",children:B.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yu,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:d.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.uploadDate," \xB7 ",d.size,d.hasLink&&!d.hasFile&&e.jsx("span",{className:"ml-2",children:"(\uB9C1\uD06C)"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(d),className:"px-3 py-1.5 text-sm text-blue-700 hover:bg-blue-50 rounded transition-colors",children:"\uB2E4\uC6B4\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>O(d.id,d.title),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]},d.id))})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-gray-900",children:"\uC790\uB8CC \uC5C5\uB85C\uB4DC"}),e.jsx("button",{onClick:()=>{p(!1),M()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\uB2EB\uAE30"})]}),e.jsxs("form",{onSubmit:d=>{d.preventDefault(),$()},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC790\uB8CC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:k.title,onChange:d=>A({...k,title:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uC608: \uAC15\uC758\uC790\uB8CC.pdf",required:!0})]}),u&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:k.weekNumber,onChange:d=>A({...k,weekNumber:parseInt(d.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:o},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uC8FC\uCC28"]},d))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:k.sessionNumber,onChange:d=>A({...k,sessionNumber:parseInt(d.target.value,10)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:Array.from({length:10},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uCC28\uC2DC"]},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC124\uBA85"}),e.jsx("textarea",{value:k.content,onChange:d=>A({...k,content:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"\uC790\uB8CC\uC5D0 \uB300\uD55C \uAC04\uB2E8\uD55C \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB9C1\uD06C(\uC120\uD0DD)"}),e.jsx("input",{type:"url",value:k.link,onChange:d=>A({...k,link:d.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uC5C5\uB85C\uB4DC \uB300\uC2E0 \uB9C1\uD06C\uB9CC \uB4F1\uB85D\uD560 \uC218\uB3C4 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD30C\uC77C(\uC120\uD0DD)"}),e.jsx("input",{type:"file",onChange:d=>{var f;return A({...k,file:((f=d.target.files)==null?void 0:f[0])??null})},className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"\uD30C\uC77C \uB610\uB294 \uB9C1\uD06C \uC911 \uD558\uB098\uB294 \uD544\uC218\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),M()},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:S,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:S,children:S?"\uC5C5\uB85C\uB4DC \uC911...":"\uC5C5\uB85C\uB4DC"})]})]})]})})]})}function $m({courseId:n}){const[u,o]=c.useState(""),[m,x]=c.useState([]),[p,B]=c.useState(!1),[F,v]=c.useState(null),[H,S]=c.useState(null),[T,N]=c.useState(null),[R,G]=c.useState(!1),[J,y]=c.useState(""),q=k=>k===!0||k===1||k==="1"||k==="Y"||k==="true",P=async k=>{if(n){B(!0),v(null);try{const A=await le.getQnas({courseId:n,keyword:k==null?void 0:k.keyword});if(A.rst_code!=="0000")throw new Error(A.rst_message);const M=(A.rst_data??[]).map(_=>({id:Number(_.id),subject:_.subject,student:_.user_nm||_.login_id||"-",date:_.reg_date_conv||"-",answered:q(_.answered)||Number(_.proc_status??0)===1}));x(M)}catch(A){v(A instanceof Error?A.message:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B(!1)}}},L=async k=>{if(!(!n||!k)){G(!0),v(null);try{const A=await le.getQnaDetail({courseId:n,postId:k});if(A.rst_code!=="0000")throw new Error(A.rst_message);const g=Array.isArray(A.rst_data)?A.rst_data[0]:A.rst_data;N(g??null),y(String((g==null?void 0:g.answer_content)??""))}catch(A){v(A instanceof Error?A.message:"Q&A \uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{G(!1)}}};c.useEffect(()=>{P({keyword:u.trim()?u.trim():void 0})},[n]),c.useEffect(()=>{H&&L(H)},[n,H]);const D=()=>{if(!H)return;const k=J.trim();if(!k){alert("\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const A=await le.answerQna({courseId:n,postId:H,content:k});if(A.rst_code!=="0000")throw new Error(A.rst_message);await L(H),await P({keyword:u.trim()?u.trim():void 0}),alert("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(A){alert(A instanceof Error?A.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()};if(H){const k=T?q(T.answered):!1;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{S(null),N(null),y("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Hu,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl text-gray-900",children:"Q&A"}),e.jsx("p",{className:"text-sm text-gray-600",children:"\uC9C8\uBB38 \uC0C1\uC138 \uBC0F \uB2F5\uBCC0"})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${k?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:k?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"})]}),F&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:F}),R&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC0C1\uC138\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:T.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[T.question_user_nm," \xB7 ",T.question_reg_date_conv||"-"]})]}),e.jsx("div",{className:"p-4 text-sm text-gray-800 prose max-w-none",dangerouslySetInnerHTML:{__html:T.question_content||""}})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-900",children:"\uB2F5\uBCC0"}),e.jsx("div",{className:"text-xs text-gray-500",children:T.answer_reg_date_conv?`\uCD5C\uADFC \uC800\uC7A5: ${T.answer_reg_date_conv}`:""})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("textarea",{value:J,onChange:A=>y(A.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"\uB2F5\uBCC0 \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694..."}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:D,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:k?"\uB2F5\uBCC0 \uC218\uC815":"\uB2F5\uBCC0 \uB4F1\uB85D"})})]})]})]})]})}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:k=>o(k.target.value),placeholder:"\uAC80\uC0C9\uC5B4(\uC81C\uBAA9)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:k=>{k.key==="Enter"&&P({keyword:u.trim()?u.trim():void 0})}}),e.jsx("button",{onClick:()=>void P({keyword:u.trim()?u.trim():void 0}),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:"\uAC80\uC0C9"})]}),F&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:F}),p&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Q&A \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!p&&m.length===0&&e.jsx("div",{className:"p-10 text-center text-gray-500 border border-dashed border-gray-200 rounded-lg",children:"Q&A \uAE00\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("div",{className:"space-y-4",children:m.map(k=>e.jsx("button",{onClick:()=>S(k.id),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-gray-900 mb-1",children:k.subject}),e.jsxs("div",{className:"text-sm text-gray-600",children:[k.student," \xB7 ",k.date]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs rounded-full ${k.answered?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:k.answered?"\uB2F5\uBCC0\uC644\uB8CC":"\uB300\uAE30\uC911"}),e.jsx(bs,{className:"w-5 h-5 text-gray-400"})]})]})},k.id))})]})}function zm({courseId:n}){const[u,o]=c.useState([]),[m,x]=c.useState(null),[p,B]=c.useState(!1),[F,v]=c.useState(!1),[H,S]=c.useState(null),T=(A,g=0)=>{const M=Number(A);return Number.isFinite(M)?M:g},N=A=>{if(!m)return;const g=Array.isArray(m)?m[0]:m;if(!(!g||typeof g!="object"))return g[A]??g[A.toUpperCase()]},R=async()=>{if(n){B(!0),S(null);try{const A=await le.getGrades({courseId:n});if(A.rst_code!=="0000")throw new Error(A.rst_message);const M=(A.rst_data??[]).map(_=>({courseUserId:Number(_.course_user_id),studentId:_.login_id,name:_.user_nm,progressRatio:T(_.progress_ratio,0),examScore:T(_.exam_score,0),homeworkScore:T(_.homework_score,0),etcScore:T(_.etc_score,0),totalScore:T(_.total_score,0),statusLabel:_.status_label||""}));o(M),x(A.rst_course??null)}catch(A){S(A instanceof Error?A.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{B(!1)}}};c.useEffect(()=>{R()},[n]);const G=A=>A==="\uD569\uACA9"?"bg-green-100 text-green-700":A==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700",J={progressRate:T(N("complete_limit_progress"),0),totalScore:T(N("complete_limit_total_score"),0)},y=String(N("pass_yn")||"")==="Y",q={progressRate:T(N("limit_progress"),0),totalScore:T(N("limit_total_score"),0)},P={progress:T(N("assign_progress"),0),exam:T(N("assign_exam"),0),homework:T(N("assign_homework"),0),forum:T(N("assign_forum"),0),etc:T(N("assign_etc"),0)},L=P.progress+P.exam+P.homework+P.forum+P.etc,D=()=>{(async()=>{if(confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uC2DC\uD5D8/\uACFC\uC81C \uC810\uC218, \uC9C4\uB3C4\uC728 \uB4F1\uC744 \uAE30\uC900\uC73C\uB85C \uCD1D\uC810\uC774 \uB2E4\uC2DC \uACC4\uC0B0\uB429\uB2C8\uB2E4.)`)){v(!0);try{const g=await le.recalcGrades({courseId:n});if(g.rst_code!=="0000")throw new Error(g.rst_message);await R(),alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(g){alert(g instanceof Error?g.message:"\uC7AC\uACC4\uC0B0 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}}})()},k=()=>{const A=new Date().toISOString().slice(0,10).replace(/-/g,""),g=`course_${n}_grades_${A}.csv`,M=["No","course_user_id","\uD559\uBC88","\uC774\uB984","\uC9C4\uB3C4\uC728(%)","\uC2DC\uD5D8","\uACFC\uC81C","\uAE30\uD0C0","\uCD1D\uC810","\uC0C1\uD0DC"],_=u.map((j,O)=>[O+1,j.courseUserId??"",j.studentId??"",j.name??"",Math.round(T(j.progressRatio,0)),T(j.examScore,0),T(j.homeworkScore,0),T(j.etcScore,0),T(j.totalScore,0),j.statusLabel??""]);zu(g,M,_)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"\uC131\uC801 \uC870\uD68C \uBC0F \uAD00\uB9AC"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:D,disabled:F,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",children:[e.jsx(qc,{className:"w-4 h-4"}),e.jsx("span",{children:F?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC131\uC801\uD45C \uB2E4\uC6B4\uB85C\uB4DC(CSV)"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"mb-3 text-sm",children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uBC30\uC810 \uBE44\uC728"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4 ",P.progress," / \uC2DC\uD5D8 ",P.exam," / \uACFC\uC81C ",P.homework,P.forum>0?` / \uD1A0\uB860 ${P.forum}`:""," / \uAE30\uD0C0 ",P.etc,L>0?` (\uD569\uACC4 ${L})`:""]})]}),e.jsxs("div",{className:`grid gap-4 text-sm ${y?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",J.progressRate,"% \uC774\uC0C1",J.totalScore>0?`, \uCD1D\uC810 ${J.totalScore}\uC810 \uC774\uC0C1`:""]})]}),y&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",q.progressRate,"% \uC774\uC0C1",q.totalScore>0?`, \uCD1D\uC810 ${q.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})]}),H&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:H}),p&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),!p&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC2DC\uD5D8"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACFC\uC81C"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAE30\uD0C0"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uACB0\uACFC"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[u.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:A.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:A.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(A.progressRatio*10)/10,"%"]}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:A.examScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:A.homeworkScore}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:A.etcScore}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"inline-flex px-3 py-1 bg-blue-100 text-blue-700 rounded-full",children:Math.round(A.totalScore*100)/100})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full ${G(A.statusLabel)}`,children:A.statusLabel||"\uBBF8\uB2EC"})})]},A.courseUserId)),u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC131\uC801 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function Um({courseId:n,course:u}){const o=(u==null?void 0:u.sourceType)==="haksa"&&(!(u!=null&&u.mappedCourseId)||Number.isNaN(n)||n<=0),[m,x]=c.useState([]),[p,B]=c.useState([]),[F,v]=c.useState(null),[H,S]=c.useState(!1),[T,N]=c.useState(!1),[R,G]=c.useState(null),J=(f,U=0)=>{const I=Number(f);return Number.isFinite(I)?I:U},y=f=>{if(!F)return;const U=Array.isArray(F)?F[0]:F;if(!(!U||typeof U!="object"))return U[f]??U[f.toUpperCase()]},q=async()=>{if(n){S(!0),G(null);try{const f=await le.getCompletions({courseId:n});if(f.rst_code!=="0000")throw new Error(f.rst_message);const I=(f.rst_data??[]).map(Q=>({courseUserId:Number(Q.course_user_id),studentId:Q.login_id,name:Q.user_nm,progressRatio:J(Q.progress_ratio,0),totalScore:J(Q.total_score,0),completeStatus:String(Q.complete_status||""),completeYn:String(Q.complete_yn||""),completeDate:Q.complete_date_conv||"-",closeYn:String(Q.close_yn||""),closeDate:Q.close_date_conv||"-",statusLabel:Q.status_label||""}));B(I),v(f.rst_course??null),x(Q=>Q.filter(z=>I.some(w=>w.courseUserId===z)))}catch(f){G(f instanceof Error?f.message:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{S(!1)}}};c.useEffect(()=>{q()},[n]);const P={progressRate:J(y("complete_limit_progress"),0),totalScore:J(y("complete_limit_total_score"),0)},L=String(y("pass_yn")||"")==="Y",D={progressRate:J(y("limit_progress"),0),totalScore:J(y("limit_total_score"),0)},k=f=>f.completeStatus==="C"||f.completeStatus==="P",A=f=>f.completeStatus==="P",g=f=>f==="\uD569\uACA9"?"bg-green-100 text-green-700":f==="\uC218\uB8CC"?"bg-blue-100 text-blue-700":f==="\uC885\uB8CC"?"bg-gray-100 text-gray-700":f==="\uBBF8\uC218\uB8CC"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-800",M=f=>{f.target.checked?x(p.map(U=>U.courseUserId)):x([])},_=f=>{x(U=>U.includes(f)?U.filter(I=>I!==f):[...U,f])},j=(f,U)=>{if(m.length===0){alert("\uCC98\uB9AC\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}(async()=>{if(confirm(`${U}\uC744(\uB97C) \uC2E4\uD589\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

\uC120\uD0DD \uC778\uC6D0: ${m.length}\uBA85`)){N(!0);try{const Q=await le.updateCompletion({courseId:n,action:f,courseUserIds:m});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);await q(),alert("\uCC98\uB9AC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(Q){alert(Q instanceof Error?Q.message:"\uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{N(!1)}}})()},O=(f,U)=>{const I=window.open("","_blank");if(!I){alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{try{const Q=await le.issueCertificate({courseUserId:f,type:U});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);const z=Q.rst_data;if(!z)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");I.location.href=z}catch(Q){try{I.close()}catch{}alert(Q instanceof Error?Q.message:"\uC99D\uBA85\uC11C \uCD9C\uB825 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})()},$=f=>{if(m.length===0){alert("\uCD9C\uB825\uD560 \uD559\uC0DD\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}const I=p.filter(z=>m.includes(z.courseUserId)).filter(z=>f==="P"?A(z):k(z));if(I.length===0){alert(f==="P"?"\uD569\uACA9\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uC218\uB8CC\uC99D\uC744 \uCD9C\uB825\uD560 \uB300\uC0C1\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(I.length>20){alert("\uD55C \uBC88\uC5D0 \uB108\uBB34 \uB9CE\uC774 \uCD9C\uB825\uD558\uBA74 \uD31D\uC5C5 \uCC28\uB2E8\uC774 \uB420 \uC218 \uC788\uC2B5\uB2C8\uB2E4. 20\uBA85 \uC774\uD558\uB85C \uB098\uB220\uC11C \uCD9C\uB825\uD574 \uC8FC\uC138\uC694.");return}const Q=I.map(z=>({row:z,win:window.open("","_blank")}));if(Q.some(z=>!z.win)){Q.forEach(z=>{var w;try{(w=z.win)==null||w.close()}catch{}}),alert("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.");return}(async()=>{var w;const z=[];for(const b of Q)try{const h=await le.issueCertificate({courseUserId:b.row.courseUserId,type:f});if(h.rst_code!=="0000")throw new Error(h.rst_message);const W=h.rst_data;if(!W)throw new Error("\uC778\uC1C4 URL\uC744 \uBC1B\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");b.win.location.href=W}catch(h){try{(w=b.win)==null||w.close()}catch{}z.push(`${b.row.name}: ${h instanceof Error?h.message:"\uC624\uB958"}`)}z.length>0&&alert(`\uC77C\uBD80 \uCD9C\uB825\uC774 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.

${z.join(`
`)}`)})()},d=p.filter(f=>m.includes(f.courseUserId)&&A(f)).length;return o?e.jsx(ud,{course:u}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:`grid gap-4 text-sm ${L?"grid-cols-2":"grid-cols-1"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uC218\uB8CC \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",P.progressRate,"% \uC774\uC0C1",P.totalScore>0?`, \uCD1D\uC810 ${P.totalScore}\uC810 \uC774\uC0C1`:""]})]}),L&&e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-700 mb-1",children:"\uD569\uACA9 \uAE30\uC900"}),e.jsxs("div",{className:"text-gray-600",children:["\uC9C4\uB3C4\uC728 ",D.progressRate,"% \uC774\uC0C1",D.totalScore>0?`, \uCD1D\uC810 ${D.totalScore}\uC810 \uC774\uC0C1`:""]})]})]})}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 justify-end",children:[e.jsx("button",{onClick:()=>void q(),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:H||T,children:"\uC0C8\uB85C\uACE0\uCE68"}),e.jsx("button",{onClick:()=>j("complete_y",L?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300",disabled:T,children:L?"\uC218\uB8CC/\uD569\uACA9 \uCC98\uB9AC":"\uC218\uB8CC \uCC98\uB9AC"}),e.jsx("button",{onClick:()=>j("complete_n","\uD310\uC815 \uCD08\uAE30\uD654"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:bg-gray-200",disabled:T,children:"\uD310\uC815 \uCD08\uAE30\uD654"}),e.jsx("button",{onClick:()=>j("close_y","\uC885\uB8CC(\uB9C8\uAC10) \uCC98\uB9AC"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-300",disabled:T,children:"\uC885\uB8CC(\uB9C8\uAC10)"}),e.jsx("button",{onClick:()=>j("close_n","\uC885\uB8CC \uD574\uC81C"),className:"px-4 py-2 border border-purple-200 text-purple-700 rounded-lg hover:bg-purple-50 transition-colors disabled:bg-gray-200",disabled:T,children:"\uC885\uB8CC \uD574\uC81C"})]}),e.jsxs("div",{className:"mb-4 flex gap-2 justify-end",children:[e.jsxs("button",{onClick:()=>$("C"),disabled:m.length===0,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uC218\uB8CC\uC99D \uC77C\uAD04\uCD9C\uB825 (",m.length,")"]})]}),L&&e.jsxs("button",{onClick:()=>$("P"),disabled:m.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx(Ur,{className:"w-4 h-4"}),e.jsxs("span",{children:["\uD569\uACA9\uC99D \uC77C\uAD04\uCD9C\uB825 (",d,")"]})]})]}),R&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:R}),H&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"\uC218\uB8CC \uC815\uBCF4\uB97C \uBD88\uB7EC\uC624\uB294 \uC911..."}),!H&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsx("input",{type:"checkbox",onChange:M,checked:p.length>0&&m.length===p.length,className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC9C4\uB3C4\uC728"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uCD1D\uC810"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uD310\uC815/\uC885\uB8CC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC99D\uBA85\uC11C \uCD9C\uB825"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[p.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:m.includes(f.courseUserId),onChange:()=>_(f.courseUserId),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:f.name}),e.jsx("td",{className:"px-4 py-4 text-center text-sm text-gray-600",children:f.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.progressRatio*10)/10,"%"]}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-900",children:[Math.round(f.totalScore*100)/100,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${g(f.statusLabel)}`,children:f.statusLabel||"\uBBF8\uD310\uC815"})}),e.jsxs("td",{className:"px-4 py-4 text-center text-xs text-gray-600",children:[e.jsxs("div",{children:["\uD310\uC815: ",f.completeStatus||"-"]}),e.jsxs("div",{children:["\uC885\uB8CC: ",f.closeYn||"-"]})]}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>O(f.courseUserId,"C"),disabled:!k(f),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uC218\uB8CC\uC99D"}),L&&e.jsx("button",{onClick:()=>O(f.courseUserId,"P"),disabled:!A(f),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"\uD569\uACA9\uC99D"})]})})]},f.courseUserId)),p.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10 text-center text-gray-500",children:"\uC218\uB8CC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})})]})}function Hm({haksaKey:n,haksaExams:u,setHaksaExams:o,weekCount:m}){const[x,p]=c.useState(!1),[B,F]=c.useState(null),[v,H]=c.useState([]),[S,T]=c.useState(""),[N,R]=c.useState(null),[G,J]=c.useState(1),[y,q]=c.useState(1),P=new Date().toISOString().split("T")[0],L=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[D,k]=c.useState({startDate:P,startTime:"09:00",endDate:L,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});c.useEffect(()=>{if(!x)return;let d=!1;return(async()=>{R(null);try{const U=await le.getExamTemplates({limit:200});if(U.rst_code!=="0000")throw new Error(U.rst_message);const Q=(U.rst_data??[]).map(z=>({id:String(z.id),title:z.exam_nm||"\uC2DC\uD5D8",description:z.content||"",questionCount:Number(z.question_cnt??0),totalPoints:Number(z.total_points??0)}));d||H(Q)}catch(U){d||(H([]),R(U instanceof Error?U.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{d=!0}},[x]);const A=v.find(d=>d.id===S);c.useEffect(()=>{A&&k(d=>({...d,points:A.totalPoints||0}))},[A]);const g=()=>{T(""),J(1),q(1),k({startDate:P,startTime:"09:00",endDate:L,endTime:"18:00",points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0})},M=async d=>{if(o(d),!!n)try{const f=await le.updateHaksaExams({...n,examsJson:JSON.stringify(d)});if(f.rst_code!=="0000")throw new Error(f.rst_message)}catch(f){R(f instanceof Error?f.message:"\uC2DC\uD5D8 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},_=()=>{if(!S||!A)return;const d={id:`exam_${Date.now()}`,examId:S,title:A.title,description:A.description,questionCount:A.questionCount||0,totalPoints:A.totalPoints,type:"exam",weekNumber:G,sessionNumber:y,sessionName:`${y}\uCC28\uC2DC`,createdAt:new Date().toISOString(),settings:{...D}},f=[...u,d];M(f),p(!1),g()},j=d=>{var f,U,I,Q,z,w,b,h,W;F(d),T(d.examId),J(d.weekNumber||1),q(d.sessionNumber||1),k({startDate:((f=d.settings)==null?void 0:f.startDate)||P,startTime:((U=d.settings)==null?void 0:U.startTime)||"09:00",endDate:((I=d.settings)==null?void 0:I.endDate)||L,endTime:((Q=d.settings)==null?void 0:Q.endTime)||"18:00",points:((z=d.settings)==null?void 0:z.points)||d.totalPoints||0,allowRetake:((w=d.settings)==null?void 0:w.allowRetake)||!1,retakeScore:((b=d.settings)==null?void 0:b.retakeScore)||0,retakeCount:((h=d.settings)==null?void 0:h.retakeCount)||0,showResults:((W=d.settings)==null?void 0:W.showResults)!==!1})},O=()=>{if(!B)return;const d=u.map(f=>f.id===B.id?{...f,weekNumber:G,sessionNumber:y,sessionName:`${y}\uCC28\uC2DC`,settings:{...D}}:f);M(d),F(null),g()},$=d=>{if(!confirm("\uC774 \uC2DC\uD5D8\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))return;const f=u.filter(U=>U.id!==d);M(f)};return e.jsxs("div",{className:"space-y-4",children:[N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:N}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8"}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC2DC\uD5D8 \uCD94\uAC00"})]})]}),u.length>0?e.jsx("div",{className:"space-y-3",children:u.map(d=>{var f,U,I,Q,z,w,b;return e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-white hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Zs,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:d.title}),e.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:[d.questionCount||0,"\uBB38\uC81C"]}),e.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded",children:[d.weekNumber||1,"\uC8FC\uCC28"]}),e.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 text-xs rounded",children:d.sessionName||`${d.sessionNumber||1}\uCC28\uC2DC`})]}),e.jsxs("div",{className:"ml-7 text-sm space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC751\uC2DC\uAE30\uAC04"}),e.jsxs("span",{className:"text-gray-900",children:[((f=d.settings)==null?void 0:f.startDate)||"-"," ",((U=d.settings)==null?void 0:U.startTime)||""," ~ ",((I=d.settings)==null?void 0:I.endDate)||"-"," ",((Q=d.settings)==null?void 0:Q.endTime)||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uBC30\uC810"}),e.jsxs("span",{className:"text-gray-900",children:[((z=d.settings)==null?void 0:z.points)||d.totalPoints||0,"\uC810"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"}),e.jsx("span",{className:"text-gray-900",children:(w=d.settings)!=null&&w.allowRetake?e.jsxs(e.Fragment,{children:["\uAC00\uB2A5 (",d.settings.retakeScore,"\uC810 \uBBF8\uB9CC, ",d.settings.retakeCount,"\uD68C)"]}):"\uBD88\uAC00"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-24 text-gray-500",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsx("span",{className:"text-gray-900",children:(b=d.settings)!=null&&b.showResults?"\uB178\uCD9C":"\uBE44\uB178\uCD9C"})]})]})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:()=>j(d),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uC218\uC815",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(d.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"\uC0AD\uC81C",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]})},d.id)})}):e.jsxs("div",{className:"text-center text-gray-500 py-12 border border-dashed border-gray-300 rounded-lg",children:[e.jsx(Zs,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"mb-2",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm text-gray-400",children:"\uC2DC\uD5D8 \uCD94\uAC00 \uBC84\uD2BC\uC744 \uB20C\uB7EC \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uB9CC\uB4E0 \uC2DC\uD5D8\uC744 \uB4F1\uB85D\uD558\uC138\uC694."})]}),x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>p(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:G,onChange:d=>J(parseInt(d.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:m},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uC8FC\uCC28"]},d))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:y,onChange:d=>q(parseInt(d.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uCC28\uC2DC"]},d))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),v.length>0?e.jsxs("select",{value:S,onChange:d=>T(d.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),v.map(d=>e.jsxs("option",{value:d.id,children:[d.title," (",d.questionCount||0,"\uBB38\uC81C, ",d.totalPoints,"\uC810)"]},d.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),S&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:D.startDate,onChange:d=>k(f=>({...f,startDate:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:D.startTime,onChange:d=>k(f=>({...f,startTime:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:D.endDate,onChange:d=>k(f=>({...f,endDate:d.target.value})),min:D.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:D.endTime,onChange:d=>k(f=>({...f,endTime:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:D.points,onChange:d=>k(f=>({...f,points:parseInt(d.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.allowRetake,onChange:d=>k(f=>({...f,allowRetake:d.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),D.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:D.retakeScore,onChange:d=>k(f=>({...f,retakeScore:parseInt(d.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:D.retakeCount,onChange:d=>k(f=>({...f,retakeCount:parseInt(d.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.showResults,onChange:d=>k(f=>({...f,showResults:d.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:_,disabled:!S,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"\uC2DC\uD5D8\uCD94\uAC00"})]})]})]}),B&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>F(null)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uC218\uC815"}),e.jsx("button",{onClick:()=>F(null),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:G,onChange:d=>J(parseInt(d.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:m},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uC8FC\uCC28"]},d))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:y,onChange:d=>q(parseInt(d.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(d,f)=>f+1).map(d=>e.jsxs("option",{value:d,children:[d,"\uCC28\uC2DC"]},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC2DC\uD5D8 \uC120\uD0DD"}),e.jsx("div",{className:"px-4 py-2.5 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:B.title})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("input",{type:"date",value:D.startDate,onChange:d=>k(f=>({...f,startDate:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:D.startTime,onChange:d=>k(f=>({...f,startTime:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uBD80\uD130"}),e.jsx("input",{type:"date",value:D.endDate,onChange:d=>k(f=>({...f,endDate:d.target.value})),min:D.startDate,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"time",value:D.endTime,onChange:d=>k(f=>({...f,endTime:d.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"\uAE4C\uC9C0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:D.points,onChange:d=>k(f=>({...f,points:parseInt(d.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.allowRetake,onChange:d=>k(f=>({...f,allowRetake:d.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC7AC\uC751\uC2DC\uB97C \uC9C0\uC815\uD558\uBA74 \uAE30\uC900\uC810\uC218 \uBBF8\uB9CC\uC77C \uACBD\uC6B0 \uD69F\uC218\uC81C\uD55C \uBC94\uC704\uC548\uC5D0\uC11C \uC7AC\uC751\uC2DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),D.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:D.retakeScore,onChange:d=>k(f=>({...f,retakeScore:parseInt(d.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 100\uC810 \uB9CC\uC810 \uAE30\uC900\uC785\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:D.retakeCount,onChange:d=>k(f=>({...f,retakeCount:parseInt(d.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C\uAE4C\uC9C0 \uC7AC\uC751\uC2DC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4."})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:D.showResults,onChange:d=>k(f=>({...f,showResults:d.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>F(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:O,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC2DC\uD5D8\uC218\uC815"})]})]})]})]})}function Ym({isOpen:n,onClose:u,onSave:o,showWeekSession:m=!1,weekCount:x=15}){const[p,B]=c.useState([]),[F,v]=c.useState(""),[H,S]=c.useState(!1),[T,N]=c.useState(null),[R,G]=c.useState(1),[J,y]=c.useState(1),q=new Date().toISOString().split("T")[0],P=new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],[L,D]=c.useState({startDate:q,endDate:P,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0});c.useEffect(()=>{if(!n)return;let g=!1;return(async()=>{N(null);try{const _=await le.getExamTemplates({limit:200});if(_.rst_code!=="0000")throw new Error(_.rst_message);const O=(_.rst_data??[]).map($=>({id:String($.id),title:$.exam_nm||"\uC2DC\uD5D8",description:$.content||"",duration:Number($.exam_time??60),questionCount:Number($.question_cnt??0),totalPoints:Number($.total_points??0)}));g||B(O)}catch(_){g||(B([]),N(_ instanceof Error?_.message:"\uC2DC\uD5D8 \uD15C\uD50C\uB9BF\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."))}})(),()=>{g=!0}},[n]);const k=p.find(g=>g.id===F);c.useEffect(()=>{k&&D(g=>({...g,points:k.totalPoints||0}))},[k]);const A=()=>{!F||!k||(o({examId:parseInt(F,10),title:k.title,description:k.description,duration:k.duration||60,questionCount:k.questionCount||0,points:L.points,allowRetake:L.allowRetake,retakeScore:L.retakeScore,retakeCount:L.retakeCount,showResults:L.showResults,startDate:L.startDate,endDate:L.endDate,weekNumber:R,sessionNumber:J}),v(""),D({startDate:q,endDate:P,points:0,allowRetake:!1,retakeScore:0,retakeCount:0,showResults:!0}),u())};return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:u}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC2DC\uD5D8 \uCD94\uAC00"}),e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:"\xD7"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[m&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC8FC\uCC28 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:R,onChange:g=>G(parseInt(g.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:x},(g,M)=>M+1).map(g=>e.jsxs("option",{value:g,children:[g,"\uC8FC\uCC28"]},g))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCC28\uC2DC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:J,onChange:g=>y(parseInt(g.target.value,10)||1),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:10},(g,M)=>M+1).map(g=>e.jsxs("option",{value:g,children:[g,"\uCC28\uC2DC"]},g))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uC2DC\uD5D8 \uC120\uD0DD ",e.jsx("span",{className:"text-red-500",children:"*"})]}),p.length>0?e.jsxs("select",{value:F,onChange:g=>v(g.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC2DC\uD5D8\uC744 \uC120\uD0DD\uD558\uC138\uC694"}),p.map(g=>e.jsxs("option",{value:g.id,children:[g.title," (",g.questionCount||0,"\uBB38\uC81C, ",g.totalPoints,"\uC810)"]},g.id))]}):e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-center text-gray-500",children:[e.jsx("p",{className:"text-sm",children:"\uB4F1\uB85D\uB41C \uC2DC\uD5D8\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-xs mt-1",children:"\uC88C\uCE21 \uBA54\uB274\uC758 \uC2DC\uD5D8\uAD00\uB9AC\uC5D0\uC11C \uBA3C\uC800 \uC2DC\uD5D8\uC744 \uC0DD\uC131\uD574\uC8FC\uC138\uC694."})]})]}),F&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC751\uC2DC \uAC00\uB2A5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:L.startDate,onChange:g=>D(M=>({...M,startDate:g.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:L.endDate,onChange:g=>D(M=>({...M,endDate:g.target.value})),min:L.startDate,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:L.points,onChange:g=>D(M=>({...M,points:parseInt(g.target.value)||0})),min:0,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5\uC5EC\uBD80"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L.allowRetake,onChange:g=>D(M=>({...M,allowRetake:g.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5"})]})]}),L.allowRetake&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAE30\uC900 \uC810\uC218"}),e.jsx("input",{type:"number",value:L.retakeScore,onChange:g=>D(M=>({...M,retakeScore:parseInt(g.target.value)||0})),min:0,max:100,className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uC810 \uBBF8\uB9CC\uC77C\uB54C \uC7AC\uC751\uC2DC \uAC00\uB2A5"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC7AC\uC751\uC2DC \uAC00\uB2A5 \uD69F\uC218"}),e.jsx("input",{type:"number",value:L.retakeCount,onChange:g=>D(M=>({...M,retakeCount:parseInt(g.target.value)||0})),min:0,className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uD68C"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"w-28 text-sm font-medium text-gray-700 flex-shrink-0",children:"\uC2DC\uD5D8\uACB0\uACFC\uB178\uCD9C"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L.showResults,onChange:g=>D(M=>({...M,showResults:g.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"\uB178\uCD9C"})]}),e.jsx("span",{className:"text-xs text-gray-400",children:"\u25B6 \uC751\uC2DC \uD6C4 \uC218\uAC15\uC0DD\uC774 \uC815\uB2F5\uC744 \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]})]})]}),T&&e.jsx("div",{className:"px-6 pb-2 text-sm text-red-600",children:T}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsx("button",{onClick:A,disabled:!F,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"})]})]})]}):null}function ud({course:n}){const u=c.useMemo(()=>er({haksaCourseCode:n==null?void 0:n.haksaCourseCode,haksaOpenYear:n==null?void 0:n.haksaOpenYear,haksaOpenTerm:n==null?void 0:n.haksaOpenTerm,haksaBunbanCode:n==null?void 0:n.haksaBunbanCode,haksaGroupCode:n==null?void 0:n.haksaGroupCode}),[n==null?void 0:n.haksaCourseCode,n==null?void 0:n.haksaOpenYear,n==null?void 0:n.haksaOpenTerm,n==null?void 0:n.haksaBunbanCode,n==null?void 0:n.haksaGroupCode]),o=n==null?void 0:n.id,[m,x]=c.useState([]),[p,B]=c.useState([]),[F,v]=c.useState(""),[H,S]=c.useState(!1),[T,N]=c.useState(!1),[R,G]=c.useState(null),J=[{value:"A",label:"A (90-100)",min:90,color:"bg-blue-100 text-blue-700"},{value:"B",label:"B (80-89)",min:80,color:"bg-green-100 text-green-700"},{value:"C",label:"C (70-79)",min:70,color:"bg-yellow-100 text-yellow-700"},{value:"D",label:"D (60-69)",min:60,color:"bg-orange-100 text-orange-700"},{value:"F",label:"F (0-59)",min:0,color:"bg-red-100 text-red-700"}],y=_=>_>=90?"A":_>=80?"B":_>=70?"C":_>=60?"D":"F";c.useEffect(()=>{if(!u)return;let _=!1;(async()=>{S(!0),G(null);try{const[O,$]=await Promise.all([le.getHaksaCourseStudents({courseCode:u.courseCode,openYear:u.openYear,openTerm:u.openTerm,bunbanCode:u.bunbanCode,groupCode:u.groupCode}),le.getHaksaGrades(u)]);if(O.rst_code!=="0000")throw new Error(O.rst_message);if($.rst_code!=="0000")throw new Error($.rst_message);const d=new Map;($.rst_data??[]).forEach(U=>{U.student_id&&d.set(String(U.student_id),{grade:U.grade||"",score:Number(U.score??0)})});const f=(O.rst_data??[]).map(U=>{const I=String(U.student_id||""),Q=d.get(I);return{id:I,name:U.name||"-",studentId:I||"-",score:(Q==null?void 0:Q.score)??0,grade:(Q==null?void 0:Q.grade)??""}});if(o&&f.length>0&&d.size===0)try{const U=localStorage.getItem(`haksa_grades_${o}`);if(U){const I=JSON.parse(U),Q=f.map(z=>{const w=I.find(b=>String(b.id)===z.id);return{...z,grade:(w==null?void 0:w.grade)||z.grade,score:Number((w==null?void 0:w.score)??z.score??0)}});await le.updateHaksaGrades({...u,gradesJson:JSON.stringify(Q.map(z=>({student_id:z.id,grade:z.grade,score:z.score??0})))}),_||x(Q);return}}catch{}_||x(f)}catch(O){x([]),G(O instanceof Error?O.message:"\uC131\uC801\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{S(!1)}})()},[u,o]);const q=async _=>{if(!u)return!1;try{const j=_.map($=>({student_id:$.id,grade:$.grade,score:Number($.score??0)})),O=await le.updateHaksaGrades({...u,gradesJson:JSON.stringify(j)});if(O.rst_code!=="0000")throw new Error(O.rst_message);return!0}catch(j){return G(j instanceof Error?j.message:"\uC131\uC801 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),!1}},P=_=>{x(_),q(_)},L=(_,j)=>{const O=m.map($=>$.id===_?{...$,grade:j}:$);P(O)},D=()=>{(async()=>{if(!confirm(`\uC131\uC801\uC744 \uC7AC\uACC4\uC0B0\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?

(\uD604\uC7AC \uC810\uC218\uB97C \uAE30\uC900\uC73C\uB85C A/B/C/D/F\uAC00 \uB2E4\uC2DC \uD310\uC815\uB429\uB2C8\uB2E4.)`))return;N(!0);const j=m.map($=>({...$,grade:y($.score)}));x(j),await q(j)&&alert("\uC7AC\uACC4\uC0B0\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),N(!1)})()},k=()=>{if(!F||p.length===0)return;const _=m.map(j=>p.includes(j.id)?{...j,grade:F}:j);P(_),B([]),v("")},A=_=>{B(_?m.map(j=>j.id):[])},g=_=>{B(j=>j.includes(_)?j.filter(O=>O!==_):[...j,_])},M=_=>{const j=J.find(O=>O.value===_);return(j==null?void 0:j.color)||"bg-gray-100 text-gray-700"};return e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:R}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD559\uC0AC \uACFC\uBAA9 \uC131\uC801 \uAE30\uC900"}),e.jsx("div",{className:"flex flex-wrap gap-3 text-sm",children:J.map(_=>e.jsx("span",{className:`px-3 py-1 rounded-full ${_.color}`,children:_.label},_.value))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:D,disabled:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:T?"\uC7AC\uACC4\uC0B0 \uC911...":"\uC131\uC801 \uC7AC\uACC4\uC0B0"}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:F,onChange:_=>v(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC131\uC801 \uC120\uD0DD"}),J.map(_=>e.jsx("option",{value:_.value,children:_.value},_.value))]}),e.jsxs("button",{onClick:k,disabled:!F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:["\uC120\uD0DD \uD559\uC0DD \uC77C\uAD04 \uC801\uC6A9 (",p.length,"\uBA85)"]})]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center w-12",children:e.jsx("input",{type:"checkbox",checked:p.length===m.length&&m.length>0,onChange:_=>A(_.target.checked),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-gray-700",children:"\uC774\uB984"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uD559\uBC88"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC810\uC218"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801"}),e.jsx("th",{className:"px-4 py-3 text-center text-gray-700",children:"\uC131\uC801 \uBCC0\uACBD"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[H&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!H&&m.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("input",{type:"checkbox",checked:p.includes(_.id),onChange:()=>g(_.id),className:"w-4 h-4 text-blue-600 rounded"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900",children:_.name}),e.jsx("td",{className:"px-4 py-4 text-center text-gray-600",children:_.studentId}),e.jsxs("td",{className:"px-4 py-4 text-center text-gray-900 font-medium",children:[_.score,"\uC810"]}),e.jsx("td",{className:"px-4 py-4 text-center",children:_.grade?e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${M(_.grade)}`,children:_.grade}):e.jsx("span",{className:"text-gray-400",children:"\uBBF8\uD310\uC815"})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("select",{value:_.grade||"",onChange:j=>L(_.id,j.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD"}),J.map(j=>e.jsx("option",{value:j.value,children:j.value},j.value))]})})]},_.id)),!H&&m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-gray-500",children:"\uB4F1\uB85D\uB41C \uD559\uC0DD\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."})})]})]})}),m.length>0&&e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"\uC131\uC801 \uBD84\uD3EC"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[J.map(_=>{const j=m.filter(O=>O.grade===_.value).length;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${_.color}`,children:_.value}),e.jsxs("span",{className:"text-gray-600",children:[j,"\uBA85"]})]},_.value)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:"\uBBF8\uD310\uC815"}),e.jsxs("span",{className:"text-gray-600",children:[m.filter(_=>!_.grade).length,"\uBA85"]})]})]})]})]})}const $c=[{value:"regular",label:"\uC815\uADDC\uACFC\uC815"},{value:"non-regular",label:"\uBE44\uC815\uADDC\uACFC\uC815"}],zc=[{value:"degree",label:"\uD559\uC704"},{value:"professional",label:"\uC804\uBB38\uAE30\uC220"},{value:"master",label:"\uAE30\uB2A5\uC7A5"},{value:"senior",label:"\uC2E0\uC911\uB144"},{value:"hightech",label:"\uD558\uC774\uD14C\uD06C"}];function Ol(n){if(!n)return null;try{const u=JSON.parse(n);return!u||typeof u!="object"?null:u}catch{return null}}function Qm(n,u){return{id:String(n.id),sourceType:"prism",courseId:n.course_id_conv||n.course_cd||String(n.id),courseType:[n.course_type_conv,n.onoff_type_conv].filter(Boolean).join(" / ")||"\uBBF8\uC9C0\uC815",subjectName:n.course_nm_conv||n.course_nm||"-",programId:n.program_id||0,programName:u,period:n.period_conv||"-",students:n.student_cnt||0,status:n.status_label||"\uB300\uAE30"}}function ad({course:n,onBack:u}){var ce,ue,de,Z,ae,xe,Te;const[o,m]=c.useState(!1),[x,p]=c.useState(null),[B,F]=c.useState(null),[v,H]=c.useState([]),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState(!1),[y,q]=c.useState([]),[P,L]=c.useState(""),[D,k]=c.useState(!1),[A,g]=c.useState(null),[M,_]=c.useState(null),[j,O]=c.useState(!1),[$,d]=c.useState(!1),[f,U]=c.useState(!1),[I,Q]=c.useState({courseName:"",courseCategory:"",classification:"",departmentName:"",major:"",courseDescription:""}),z=async()=>{if(!(!B||!window.confirm(`\uC815\uB9D0\uB85C \uC774 \uACFC\uC815\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?
\uC0AD\uC81C\uB41C \uACFC\uC815\uC740 \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`))){U(!0);try{const ye=await le.deleteProgram({id:Number(n.id)});if(ye.rst_code!=="0000")throw new Error(ye.rst_message);alert("\uACFC\uC815\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),u()}catch(ye){alert(ye instanceof Error?ye.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{U(!1)}}},w=async()=>{m(!0),p(null);try{const ne=Number(n.id);if(!Number.isFinite(ne)||ne<=0)throw new Error("\uACFC\uC815 ID\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const[ye,Fe]=await Promise.all([le.getProgram(ne),le.getProgramCourses({programId:ne})]);if(ye.rst_code!=="0000")throw new Error(ye.rst_message);const Be=ye.rst_data,we=Array.isArray(Be)?Be[0]:Be;F(we??null),Fe.rst_code==="0000"&&H(Fe.rst_data??[])}catch(ne){p(ne instanceof Error?ne.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{m(!1),T(!1)}};c.useEffect(()=>{w()},[n.id]);const b=c.useMemo(()=>Ol(B==null?void 0:B.plan_json),[B==null?void 0:B.plan_json]),h=(B==null?void 0:B.course_nm)??n.name,W=()=>{var ye,Fe,Be,we,Ye,ke,je;const ne=Ol(B==null?void 0:B.plan_json);Q({courseName:(B==null?void 0:B.course_nm)??n.name??"",courseCategory:((Fe=(ye=ne==null?void 0:ne.basic)==null?void 0:ye.courseCategory)==null?void 0:Fe.value)??"",classification:((we=(Be=ne==null?void 0:ne.basic)==null?void 0:Be.classification)==null?void 0:we.value)??"",departmentName:((Ye=ne==null?void 0:ne.basic)==null?void 0:Ye.departmentName)??"",major:((ke=ne==null?void 0:ne.basic)==null?void 0:ke.major)??"",courseDescription:((je=ne==null?void 0:ne.basic)==null?void 0:je.courseDescription)??""}),O(!0)},oe=()=>{O(!1)},ie=async()=>{var ne,ye;if(B){d(!0);try{const Fe=Ol(B==null?void 0:B.plan_json),Be={...Fe,version:1,basic:{...Fe==null?void 0:Fe.basic,courseCategory:{value:I.courseCategory,label:((ne=$c.find(Ye=>Ye.value===I.courseCategory))==null?void 0:ne.label)??I.courseCategory},classification:{value:I.classification,label:((ye=zc.find(Ye=>Ye.value===I.classification))==null?void 0:ye.label)??I.classification},departmentName:I.departmentName,major:I.major,courseDescription:I.courseDescription}},we=await le.modifyProgram({id:Number(n.id),courseName:I.courseName.trim(),planJson:JSON.stringify(Be)});if(we.rst_code!=="0000")throw new Error(we.rst_message);await w(),O(!1)}catch(Fe){alert(Fe instanceof Error?Fe.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{d(!1)}}},pe=async()=>{J(!0),L(""),k(!0);try{const ne=await le.getMyCourses({});if(ne.rst_code==="0000"){const ye=new Set(v.map(Be=>Be.id)),Fe=(ne.rst_data??[]).filter(Be=>!ye.has(Be.id));q(Fe)}}catch(ne){console.error("\uACFC\uBAA9 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",ne)}finally{k(!1)}},be=async ne=>{g(ne);try{const ye=Number(n.id),Fe=await le.setCourseProgram({courseId:ne,programId:ye});if(Fe.rst_code!=="0000")throw new Error(Fe.rst_message);await w(),q(Be=>Be.filter(we=>we.id!==ne))}catch(ye){alert(ye instanceof Error?ye.message:"\uACFC\uBAA9 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{g(null)}},ee=async ne=>{if(window.confirm("\uC774 \uACFC\uBAA9\uC744 \uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){_(ne);try{const Fe=await le.setCourseProgram({courseId:ne,programId:0});if(Fe.rst_code!=="0000")throw new Error(Fe.rst_message);await w()}catch(Fe){alert(Fe instanceof Error?Fe.message:"\uACFC\uBAA9 \uBD84\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{_(null)}}},re=c.useMemo(()=>{if(!P.trim())return y;const ne=P.toLowerCase();return y.filter(ye=>{var Fe,Be,we;return((Fe=ye.course_nm)==null?void 0:Fe.toLowerCase().includes(ne))||((Be=ye.course_id_conv)==null?void 0:Be.toLowerCase().includes(ne))||((we=ye.course_cd)==null?void 0:we.toLowerCase().includes(ne))})},[y,P]);return N?e.jsx(sd,{course:N,onBack:()=>R(null)}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Hu,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBAA9\uB85D\uC73C\uB85C"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-gray-900",children:"\uACFC\uC815 \uC0C1\uC138"}),j?e.jsx("input",{type:"text",value:I.courseName,onChange:ne=>Q({...I,courseName:ne.target.value}),className:"mt-1 px-3 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",placeholder:"\uACFC\uC815\uBA85 \uC785\uB825"}):e.jsx("p",{className:"text-sm text-gray-600",children:h})]})]}),!o&&!x&&B&&!j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:z,disabled:f,className:"flex items-center gap-2 px-4 py-2 text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:f?"\uC0AD\uC81C \uC911...":"\uC0AD\uC81C"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC218\uC815"})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:oe,disabled:$,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(yt,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCDE8\uC18C"})]}),e.jsxs("button",{onClick:ie,disabled:$,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:$?"\uC800\uC7A5 \uC911...":"\uC800\uC7A5"})]})]})]}),o&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}),!o&&x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:x}),!o&&!x&&!B&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-10 text-center text-gray-600",children:"\uACFC\uC815 \uC815\uBCF4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."}),!o&&!x&&B&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4"})]})}),e.jsx("div",{className:"p-6",children:j?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC720\uD615"}),e.jsxs("select",{value:I.courseCategory,onChange:ne=>Q({...I,courseCategory:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),$c.map(ne=>e.jsx("option",{value:ne.value,children:ne.label},ne.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsxs("select",{value:I.classification,onChange:ne=>Q({...I,classification:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),zc.map(ne=>e.jsx("option",{value:ne.value,children:ne.label},ne.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:I.departmentName,onChange:ne=>Q({...I,departmentName:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85 \uC785\uB825"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:I.major,onChange:ne=>Q({...I,major:ne.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885 \uC785\uB825"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((ue=(ce=b==null?void 0:b.basic)==null?void 0:ce.courseCategory)==null?void 0:ue.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((Z=(de=b==null?void 0:b.basic)==null?void 0:de.classification)==null?void 0:Z.label)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uD559\uACFC\uBA85"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((ae=b==null?void 0:b.basic)==null?void 0:ae.departmentName)??"-"})]}),e.jsxs("div",{className:"flex border-b border-gray-100 py-3",children:[e.jsx("span",{className:"w-28 text-gray-600 text-sm",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("span",{className:"flex-1 text-gray-900",children:((xe=b==null?void 0:b.basic)==null?void 0:xe.major)??"-"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pr,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uACFC\uC815\uC124\uBA85"})]})}),e.jsx("div",{className:"p-6",children:j?e.jsx("textarea",{value:I.courseDescription,onChange:ne=>Q({...I,courseDescription:ne.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}):(Te=b==null?void 0:b.basic)!=null&&Te.courseDescription?e.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:b.basic.courseDescription}):e.jsx("p",{className:"text-gray-400 italic",children:"\uACFC\uC815\uC124\uBA85\uC774 \uB4F1\uB85D\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(VC,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[v.length,"\uAC1C \uACFC\uBAA9"]}),e.jsxs("button",{onClick:pe,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00"})]})]})]})}),e.jsx("div",{className:"p-6",children:S?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 italic mb-4",children:"\uC18C\uC18D\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsxs("button",{onClick:pe,className:"inline-flex items-center gap-2 px-4 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uACFC\uBAA9 \uCD94\uAC00\uD558\uAE30"})]})]}):e.jsx("div",{className:"space-y-3",children:v.map(ne=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:ne.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ne.course_id_conv??ne.course_cd??`ID: ${ne.id}`,ne.year&&` \xB7 ${ne.year}\uB144`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${ne.status_label==="\uC9C4\uD589\uC911"?"bg-green-100 text-green-700":ne.status_label==="\uC885\uB8CC"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-700"}`,children:ne.status_label??"\uB300\uAE30"}),e.jsxs("button",{onClick:()=>R(Qm(ne,h)),className:"flex items-center gap-1 px-3 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors",title:"\uACFC\uBAA9 \uAD00\uB9AC",children:[e.jsx(Jc,{className:"w-4 h-4"}),e.jsx("span",{children:"\uAD00\uB9AC"})]}),e.jsxs("button",{onClick:()=>ee(ne.id),disabled:M===ne.id,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-red-700 bg-red-50 rounded hover:bg-red-100 transition-colors disabled:opacity-50",title:"\uACFC\uC815\uC5D0\uC11C \uBD84\uB9AC",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{children:M===ne.id?"\uBD84\uB9AC \uC911...":"\uBD84\uB9AC"})]})]})]},ne.id))})})]})]}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uCD94\uAC00"}),e.jsx("button",{onClick:()=>J(!1),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"\uACFC\uBAA9\uBA85 \uB610\uB294 \uACFC\uBAA9\uCF54\uB4DC\uB85C \uAC80\uC0C9...",value:P,onChange:ne=>L(ne.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:D?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"\uACFC\uBAA9 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}):re.length===0?e.jsx("p",{className:"text-center text-gray-400 py-8",children:P?"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.":"\uCD94\uAC00\uD560 \uC218 \uC788\uB294 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"space-y-2",children:re.map(ne=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:ne.course_nm}),e.jsxs("p",{className:"text-sm text-gray-500",children:[ne.course_id_conv??ne.course_cd??`ID: ${ne.id}`,ne.year&&` \xB7 ${ne.year}\uB144`]})]}),e.jsxs("button",{onClick:()=>be(ne.id),disabled:A===ne.id,className:"flex items-center gap-1 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:A===ne.id?"\uCD94\uAC00 \uC911...":"\uCD94\uAC00"})]})]},ne.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:()=>J(!1),className:"w-full px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"\uB2EB\uAE30"})})]})})]})}function Ou(n){const u=Number.parseInt(String(n||"").trim(),10),o=Number.isFinite(u)&&u>0?u:15;return Math.min(o,200)}function Vm(n,u){const o=new Map;u.forEach(x=>o.set(String(x.id),x));const m=[];for(let x=1;x<=n;x+=1){const p=String(x),B=o.get(p)??u[x-1];B?m.push({...B,id:p}):m.push({id:p,title:"",description:"",videos:[]})}return m}function ld({initialStep:n,onStepChange:u}={}){const[o,m]=c.useState(n??"basic"),[x,p]=c.useState(!0);c.useEffect(()=>{const _=n??"basic";m(j=>j===_?j:_)},[n]),c.useEffect(()=>{u==null||u(o)},[o,u]);const[B,F]=c.useState(!1),[v,H]=c.useState(null),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState([]),[y,q]=c.useState({subjectName:"",selectedCourse:null,categoryId:0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]});c.useEffect(()=>{if(!x)return;const _=Ou(y.hours);y.sessions.length!==_&&q(j=>{const O=Ou(j.hours);return j.sessions.length===O?j:{...j,sessions:Vm(O,j.sessions)}})},[x,y.hours,y.sessions.length]),c.useEffect(()=>{let _=!0;return T(!0),R(null),le.getCourseCategories().then(j=>{if(!_)return;if(j.rst_code!=="0000")throw new Error(j.rst_message);const O=j.rst_data??[];J(O);const $=O.find(d=>d.category_nm==="\uC790\uC728\uAC15\uC88C")??O.find(d=>(d.category_nm??"").includes("\uC790\uC728"));$&&q(d=>d.categoryId>0?d:{...d,categoryId:Number($.id)})}).catch(j=>{_&&R(j instanceof Error?j.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}).finally(()=>{_&&T(!1)}),()=>{_=!1}},[]);const P=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Hr},{id:"learners",label:"\uD559\uC2B5\uC790 \uC120\uD0DD",icon:Qu},{id:"curriculum",label:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131",icon:Gc},{id:"confirm",label:"\uCD5C\uC885 \uD655\uC778",icon:ys}],L=P.findIndex(_=>_.id===o),D=()=>{const _=L+1;_<P.length&&m(P[_].id)},k=()=>{const _=L-1;_>=0&&m(P[_].id)},A=_=>{q(j=>({...j,..._}))},g=()=>{const _=G.find(j=>j.category_nm==="\uC790\uC728\uAC15\uC88C")??G.find(j=>(j.category_nm??"").includes("\uC790\uC728"));m("basic"),p(!0),q({subjectName:"",selectedCourse:null,categoryId:_?Number(_.id):0,year:"2024",semester:"1\uD559\uAE30",credits:"",hours:"15",startDate:"",endDate:"",description:"",objectives:"",courseFileName:"",courseFileUrl:"",selectedLearners:[],sessions:[{id:"1",title:"",description:"",videos:[]}]})},M=async()=>{H(null);const _=y.subjectName.trim();if(!_){H("\uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!y.year.trim()){H("\uB144\uB3C4\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!y.startDate||!y.endDate){H("\uC218\uC5C5\uC2DC\uC791\uC77C\uACFC \uC218\uC5C5 \uC885\uB8CC\uC77C\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}F(!0);try{const j=y.selectedCourse?Number(y.selectedCourse.id):0,O=String(Ou(y.hours)),$=await le.createCourse({courseName:_,year:y.year.trim(),studyStartDate:y.startDate,studyEndDate:y.endDate,programId:j>0?j:void 0,categoryId:y.categoryId>0?y.categoryId:void 0,semester:y.semester,credit:y.credits,lessonTime:O,content1:y.description,content2:y.objectives,courseFile:y.courseFileName||void 0});if($.rst_code!=="0000")throw new Error($.rst_message);const d=Number($.rst_data);if(!d)throw new Error("\uACFC\uBAA9 \uC0DD\uC131 \uACB0\uACFC(course_id)\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");if(y.selectedLearners.length>0){const f=y.selectedLearners.map(U=>Number(U.id)).filter(U=>Number.isFinite(U)&&U>0);if(f.length>0){const U=await le.addCourseStudents({courseId:d,userIds:f});if(U.rst_code!=="0000")throw new Error(U.rst_message)}}for(let f=0;f<y.sessions.length;f+=1){const U=y.sessions[f],I=U.title.trim()||`${f+1}\uCC28\uC2DC`,Q=await le.insertCurriculumSection({courseId:d,sectionName:I});if(Q.rst_code!=="0000")throw new Error(Q.rst_message);const z=Number(Q.rst_data);if(z)for(const w of U.videos){const b=w.lessonId?Number(w.lessonId):0,h=w.url.trim();if(!b&&!h)continue;const W=await le.addCurriculumLesson({courseId:d,sectionId:z,lessonId:b>0?b:void 0,url:b>0?void 0:h,title:w.title.trim()||void 0});if(W.rst_code!=="0000")throw new Error(W.rst_message)}}alert("\uACFC\uBAA9\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uB2F4\uB2F9\uACFC\uBAA9 \uBA54\uB274\uC5D0\uC11C \uD655\uC778\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4)"),g()}catch(j){H(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uC0C8 \uACFC\uBAA9 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uB2E8\uACC4\uBCC4\uB85C \uAD50\uC721\uACFC\uBAA9\uC744 \uAC1C\uC124\uD558\uACE0 \uC124\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:v}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:P.map((_,j)=>{const O=_.icon,$=_.id===o,d=j<L;return e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${$||d?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${$||d?"text-blue-600":"text-gray-500"}`,children:_.label})]}),j<P.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${d?"bg-blue-600":"bg-gray-200"}`})]},_.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[o==="basic"&&e.jsx(Wm,{formData:y,updateFormData:A,courseCategories:G,categoryLoading:S,categoryError:N}),o==="learners"&&e.jsx(Km,{formData:y,updateFormData:A}),o==="curriculum"&&e.jsx(Gm,{formData:y,updateFormData:A,onTouched:()=>p(!1)}),o==="confirm"&&e.jsx(qm,{formData:y,courseCategories:G}),e.jsxs("div",{className:"flex items-center justify-between pt-8 mt-8 border-t border-gray-200",children:[e.jsx("button",{onClick:k,disabled:L===0,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),L<P.length-1?e.jsx("button",{onClick:D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uB2E4\uC74C"}):e.jsx("button",{onClick:M,disabled:B,className:`px-6 py-2 bg-green-600 text-white rounded-lg transition-colors ${B?"opacity-60 cursor-not-allowed":"hover:bg-green-700"}`,children:B?"\uC800\uC7A5 \uC911...":"\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function Wm({formData:n,updateFormData:u,courseCategories:o,categoryLoading:m,categoryError:x}){const[p,B]=c.useState(!1),[F,v]=c.useState(!1),[H,S]=c.useState(null),T=Me.useRef(null),N=y=>{u({selectedCourse:y}),B(!1)},R=()=>{var y;(y=T.current)==null||y.click()},G=()=>{u({courseFileName:"",courseFileUrl:""})},J=async y=>{var P,L;const q=(P=y.target.files)==null?void 0:P[0];if(y.target.value="",!!q){if(q.size>10*1024*1024){S("\uC774\uBBF8\uC9C0\uB294 10MB \uC774\uD558\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}v(!0),S(null);try{const D=await le.uploadCourseImage({file:q});if(D.rst_code!=="0000")throw new Error(D.rst_message);const k=Array.isArray(D.rst_data)?(L=D.rst_data)==null?void 0:L[0]:D.rst_data;if(!(k!=null&&k.file_name))throw new Error("\uC5C5\uB85C\uB4DC \uACB0\uACFC\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");u({courseFileName:String(k.file_name),courseFileUrl:String(k.file_url||"")})}catch(D){S(D instanceof Error?D.message:"\uC5C5\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{v(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uAE30\uBCF8 \uC815\uBCF4 \uC785\uB825"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC18C\uC18D \uACFC\uC815"}),e.jsxs("button",{onClick:()=>B(!0),className:"w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 hover:bg-gray-200 transition-colors flex items-center justify-between",children:[e.jsx("span",{children:n.selectedCourse?n.selectedCourse.name:"\uACFC\uC815 \uC120\uD0DD"}),e.jsx($l,{className:"w-4 h-4"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:String(n.categoryId),disabled:m,onChange:y=>u({categoryId:Number(y.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"0",children:m?"\uCE74\uD14C\uACE0\uB9AC \uBD88\uB7EC\uC624\uB294 \uC911...":"[\uBBF8\uC9C0\uC815]"}),o.map(y=>e.jsx("option",{value:String(y.id),children:y.label||y.name_conv||y.category_nm},y.id))]}),x&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:x})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uBAA9\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.subjectName,onChange:y=>u({subjectName:y.target.value}),placeholder:"\uC608: AI \uAE30\uCD08 \uD504\uB85C\uADF8\uB798\uBC0D",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uBA54\uC778 \uC774\uBBF8\uC9C0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:R,disabled:F,className:`flex-1 px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-left text-gray-700 transition-colors flex items-center justify-between ${F?"opacity-60 cursor-not-allowed":"hover:bg-gray-200"}`,children:[e.jsx("span",{children:F?"\uC5C5\uB85C\uB4DC \uC911...":n.courseFileName?"\uC774\uBBF8\uC9C0 \uBCC0\uACBD":"\uD30C\uC77C \uC5C5\uB85C\uB4DC"}),e.jsx($l,{className:"w-4 h-4"})]}),n.courseFileName&&e.jsx("button",{type:"button",onClick:G,className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uC0AD\uC81C"})]}),e.jsx("input",{ref:T,type:"file",accept:"image/*",className:"hidden",onChange:J}),H&&e.jsx("div",{className:"text-sm text-red-600",children:H}),n.courseFileUrl&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:n.courseFileUrl,alt:"\uBA54\uC778 \uC774\uBBF8\uC9C0",className:"w-full h-32 object-cover"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4/\uD559\uAE30"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n.year,onChange:y=>u({year:y.target.value}),placeholder:"2024",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:n.semester,onChange:y=>u({semester:y.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"1\uD559\uAE30"}),e.jsx("option",{children:"2\uD559\uAE30"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC2DC\uC218"}),e.jsx("input",{type:"number",value:n.hours,onChange:y=>u({hours:y.target.value}),onBlur:()=>{const y=String(Ou(n.hours));String(n.hours||"").trim()!==y&&u({hours:y})},placeholder:"48",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC218\uC5C5 \uAE30\uAC04"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",value:n.startDate,onChange:y=>u({startDate:y.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-500",children:"~"}),e.jsx("input",{type:"date",value:n.endDate,onChange:y=>u({endDate:y.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC18C\uAC1C"}),e.jsx("textarea",{value:n.description,onChange:y=>u({description:y.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9 \uC138\uBD80\uB0B4\uC6A9"}),e.jsx("textarea",{value:n.objectives,onChange:y=>u({objectives:y.target.value}),placeholder:"\uACFC\uBAA9 \uC18C\uAC1C \uB0B4\uC6A9",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx(Xc,{isOpen:p,onClose:()=>B(!1),onSelect:N,selectedCourse:n.selectedCourse})]})}function Km({formData:n,updateFormData:u}){const[o,m]=c.useState(""),[x,p]=c.useState(""),[B,F]=c.useState("\uC804\uCCB4"),[v,H]=c.useState("\uC804\uCCB4"),[S,T]=c.useState([]),[N,R]=c.useState(1),[G,J]=c.useState(0),y=30,[q,P]=c.useState(!1),[L,D]=c.useState(null);Me.useEffect(()=>{const d=setTimeout(()=>p(o),250);return()=>clearTimeout(d)},[o]),Me.useEffect(()=>{let d=!1;return(async()=>{P(!0),D(null);try{const U=v!=="\uC804\uCCB4"?v:B!=="\uC804\uCCB4"?B:void 0,I=await le.getLearners({keyword:x,deptKeyword:U,page:N,limit:y});if(I.rst_code!=="0000")throw new Error(I.rst_message);const Q=I.rst_data??[],z=Q.map(w=>{const b=String(w.dept_path||""),h=b.split(" > ").map(ie=>ie.trim()).filter(Boolean),W=h[0]||String(w.dept_nm||"-")||"-",oe=(h.length>0?h[h.length-1]:String(w.dept_nm||"-"))||"-";return{id:String(w.id),name:String(w.name||w.user_nm||"-"),campus:W,major:oe,studentId:String(w.student_id||""),email:String(w.email||""),deptPath:b}});d||(T(z),J(Number(I.rst_total??I.rst_count??Q.length??0)))}catch(U){d||D(U instanceof Error?U.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{d||P(!1)}})(),()=>{d=!0}},[x,B,v,N]);const k=["\uC804\uCCB4",...Array.from(new Set(S.map(d=>d.campus).filter(Boolean)))],A=["\uC804\uCCB4",...Array.from(new Set(S.filter(d=>B==="\uC804\uCCB4"||d.campus===B).map(d=>d.major).filter(Boolean)))],g=d=>{const f=n.selectedLearners.some(U=>U.id===d.id);u(f?{selectedLearners:n.selectedLearners.filter(U=>U.id!==d.id)}:{selectedLearners:[...n.selectedLearners,d]})},M=()=>{u({selectedLearners:[...S]})},_=()=>{u({selectedLearners:[]})},j=Math.max(1,Math.ceil((G||0)/y)),O=N>1,$=N<j;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uD559\uC2B5\uC790 \uC120\uD0DD"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC774\uB984 \uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:o,onChange:d=>{m(d.target.value),R(1)},placeholder:"\uD559\uC2B5\uC790 \uC774\uB984 \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCEA0\uD37C\uC2A4"}),e.jsx("select",{value:B,onChange:d=>{F(d.target.value),H("\uC804\uCCB4"),R(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:k.map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5"}),e.jsx("select",{value:v,onChange:d=>{H(d.target.value),R(1)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(d=>e.jsx("option",{value:d,children:d},d))})]})]}),L&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:L}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:M,disabled:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uC804\uCCB4 \uC120\uD0DD"}),e.jsx("button",{onClick:_,disabled:q,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD604\uC7AC \uBAA9\uB85D \uC804\uCCB4 \uD574\uC81C"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:q?"\uBD88\uB7EC\uC624\uB294 \uC911...":`\uAC80\uC0C9 \uACB0\uACFC: ${G}\uBA85 / \uC120\uD0DD\uB41C: ${n.selectedLearners.length}\uBA85`})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:S.map(d=>{const f=n.selectedLearners.some(U=>U.id===d.id);return e.jsxs("div",{onClick:()=>g(d),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${f?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-900",children:d.name}),f&&e.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(ys,{className:"w-3 h-3 text-white"})})]}),e.jsx("div",{className:"text-sm text-gray-600",children:d.campus}),e.jsx("div",{className:"text-sm text-gray-600",children:d.major})]},d.id)})}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{type:"button",disabled:q||!O,onClick:()=>R(d=>Math.max(1,d-1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uC774\uC804"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[N," / ",j]}),e.jsx("button",{type:"button",disabled:q||!$,onClick:()=>R(d=>Math.min(j,d+1)),className:"px-3 py-2 border border-gray-300 rounded-lg text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"\uB2E4\uC74C"})]})]})}function Gm({formData:n,updateFormData:u,onTouched:o}){const[m,x]=c.useState(!1),[p,B]=c.useState(null),F=p?n.sessions.find(y=>y.id===p)??null:null,v=()=>{o==null||o();const y={id:String(n.sessions.length+1),title:"",description:"",videos:[]};u({sessions:[...n.sessions,y]})},H=(y,q)=>{o==null||o();const P=n.sessions.map(L=>L.id===y?{...L,...q}:L);u({sessions:P})},S=y=>{o==null||o(),n.sessions.length>1&&u({sessions:n.sessions.filter(q=>q.id!==y)})},T=y=>{o==null||o();const q=n.sessions.find(P=>P.id===y);if(q){const P={id:`${y}-video-${Date.now()}-${Math.random()}`,title:"",url:""};H(y,{videos:[...q.videos,P]})}},N=(y,q,P)=>{o==null||o();const L=n.sessions.find(D=>D.id===y);if(L){const D=L.videos.map(k=>k.id===q?{...k,...P}:k);H(y,{videos:D})}},R=(y,q)=>{o==null||o();const P=n.sessions.find(L=>L.id===y);P&&H(y,{videos:P.videos.filter(L=>L.id!==q)})},G=y=>{if(o==null||o(),p){const q=n.sessions.find(P=>P.id===p);if(q){const P={id:`${p}-video-${Date.now()}-${Math.random()}`,title:y.title,url:"",lessonId:String(y.lessonId??y.id)};H(p,{videos:[...q.videos,P]})}}x(!1)},J=y=>{B(y),x(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCC28\uC2DC\uBCC4 \uAD6C\uC131"}),e.jsx("div",{className:"space-y-6",children:n.sessions.map((y,q)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 relative",children:[n.sessions.length>1&&e.jsx("button",{onClick:()=>S(y.id),className:"absolute top-4 right-4 text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(yt,{className:"w-5 h-5"})}),e.jsxs("h4",{className:"text-gray-900 mb-4",children:[q+1,"\uCC28\uC2DC"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:y.title,onChange:P=>H(y.id,{title:P.target.value}),placeholder:"\uC608: Python \uAE30\uCD08 \uBB38\uBC95",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uCC28\uC2DC \uC124\uBA85"}),e.jsx("textarea",{value:y.description,onChange:P=>H(y.id,{description:P.target.value}),placeholder:"\uC774 \uCC28\uC2DC\uC5D0\uC11C \uD559\uC2B5\uD560 \uB0B4\uC6A9\uC744 \uC124\uBA85\uD558\uC138\uC694",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"block text-sm text-gray-700",children:["\uAC15\uC758 \uC601\uC0C1 (",y.videos.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>J(y.id),className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uCF58\uD150\uCE20 \uAC80\uC0C9"}),e.jsxs("button",{type:"button",onClick:()=>T(y.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"}),"\uC601\uC0C1 \uCD94\uAC00"]})]})]}),y.videos.length>0?e.jsx("div",{className:"space-y-3",children:y.videos.map((P,L)=>e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-lg text-sm shrink-0",children:L+1}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uC601\uC0C1 \uC81C\uBAA9"}),e.jsx("input",{type:"text",value:P.title,onChange:D=>N(y.id,P.id,{title:D.target.value}),placeholder:"\uC601\uC0C1 \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"\uB808\uC2A8 ID \uB610\uB294 URL"}),e.jsx("input",{type:"text",value:P.lessonId?`\uB808\uC2A8 ID: ${P.lessonId}`:P.url,onChange:D=>{P.lessonId||N(y.id,P.id,{url:D.target.value})},disabled:!!P.lessonId,placeholder:P.lessonId?"":"\uC678\uBD80 URL\uC744 \uC785\uB825\uD558\uC138\uC694",className:`w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${P.lessonId?"bg-gray-100 text-gray-500":""}`})]})]}),e.jsx("button",{type:"button",onClick:()=>R(y.id,P.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors shrink-0",children:e.jsx(yt,{className:"w-4 h-4"})})]})},P.id))}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"\uC601\uC0C1\uC744 \uCD94\uAC00\uD574\uC8FC\uC138\uC694"})})]})]})]},y.id))}),e.jsxs("button",{onClick:v,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ft,{className:"w-5 h-5"}),"\uCC28\uC2DC \uCD94\uAC00"]}),e.jsx(Vu,{isOpen:m,onClose:()=>x(!1),onSelect:G,recommendContext:{courseName:n.subjectName,courseIntro:n.description,courseDetail:n.objectives,lessonTitle:(F==null?void 0:F.title)??"",lessonDescription:(F==null?void 0:F.description)??""},excludeLessonIds:n.sessions.flatMap(y=>y.videos).map(y=>y.lessonId?Number(String(y.lessonId).replace(/[^0-9]/g,"")):0).filter(y=>Number.isFinite(y)&&y>0)})]})}function qm({formData:n,courseCategories:u}){const o=u.find(x=>Number(x.id)===Number(n.categoryId)),m=(o==null?void 0:o.label)||(o==null?void 0:o.name_conv)||(o==null?void 0:o.category_nm)||"-";return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uC885 \uD655\uC778"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uACFC\uBAA9\uBA85:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:n.subjectName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC18C\uC18D \uACFC\uC815:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:n.selectedCourse?n.selectedCourse.name:"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uCE74\uD14C\uACE0\uB9AC:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:m})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uB144\uB3C4/\uD559\uAE30:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[n.year," ",n.semester]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uC2DC\uC218:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:n.hours||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"\uD559\uC810:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:n.credits||"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uD559\uC2B5\uC790"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uC120\uD0DD\uB41C \uD559\uC2B5\uC790:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[n.selectedLearners.length,"\uBA85"]})]}),n.selectedLearners.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.selectedLearners.map(x=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:x.name},x.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-4 pb-2 border-b border-gray-200",children:"\uCC28\uC2DC \uAD6C\uC131"}),e.jsxs("div",{className:"text-sm mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"\uCD1D \uCC28\uC2DC:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[n.sessions.length,"\uCC28\uC2DC"]})]}),e.jsx("div",{className:"space-y-3",children:n.sessions.map((x,p)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-gray-900 mb-1",children:[p+1,"\uCC28\uC2DC: ",x.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]}),x.description&&e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:x.description}),x.videos.length>0&&e.jsxs("div",{className:"mt-3 pl-4 border-l-2 border-blue-300",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["\uAC15\uC758 \uC601\uC0C1 ",x.videos.length,"\uAC1C"]}),e.jsx("div",{className:"space-y-1",children:x.videos.map((B,F)=>e.jsxs("div",{className:"text-sm text-gray-600",children:[F+1,". ",B.title||"(\uC81C\uBAA9 \uC5C6\uC74C)"]},B.id))})]})]},x.id))})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-900",children:'\uC704 \uB0B4\uC6A9\uC744 \uD655\uC778\uD558\uACE0 "\uACFC\uBAA9 \uAC1C\uC124 \uC644\uB8CC" \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uACFC\uBAA9 \uAC1C\uC124\uC744 \uC644\uB8CC\uD558\uC138\uC694.'})})]})}const Jm={"degree-major":"\uD559\uC704\uC804\uACF5","degree-major-advanced":"\uD559\uC704\uC804\uACF5\uC2EC\uD654","professional-tech":"\uC804\uBB38\uAE30\uC220","high-tech":"\uD558\uC774\uD14C\uD06C","master-craftsman":"\uAE30\uB2A5\uC7A5","high-school-consignment":"\uACE0\uAD50\uC704\uD0C1","new-seniors":"\uC2E0\uC911\uB144"},Xm={beginner:"\uCD08\uAE09",intermediate:"\uC911\uAE09",advanced:"\uACE0\uAE09"};function Zm(n){return{version:1,basic:{courseCategory:{value:n.courseCategory,label:n.courseCategory==="regular"?"\uC815\uADDC\uACFC\uC815":n.courseCategory==="non-regular"?"\uBE44\uC815\uADDC\uACFC\uC815":n.courseCategory},classification:{value:n.classification,label:Jm[n.classification]??n.classification},courseName:n.courseName,department:n.department,major:n.major,departmentName:n.departmentName,courseDescription:n.courseDescription},training:{trainingPeriodText:n.trainingPeriodText,startDateYmd:n.startDateYmd,endDateYmd:n.endDateYmd,trainingLevel:{value:n.trainingLevel,label:Xm[n.trainingLevel]??n.trainingLevel},trainingTarget:n.trainingTarget,trainingGoal:n.trainingGoal},curriculum:n.curriculumItems,teachingPlans:n.teachingPlans,evaluations:n.evaluations}}function Uc(n){const u=n.replace(/[^0-9]/g,"");return u.length===8?u:""}function ex(n){const u=n.trim();if(!u)return null;const o=u.match(/(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})\s*(?:-|~||)\s*(\d{4}[.\-\/]\d{2}[.\-\/]\d{2}|\d{8})/);if(!o)return null;const m=Uc(o[1]),x=Uc(o[2]);return!m||!x?null:{start:m,end:x}}function tx({onCreated:n,initialStep:u,onStepChange:o}={}){const[m,x]=c.useState(u??"basic");c.useEffect(()=>{const Be=u??"basic";x(we=>we===Be?we:Be)},[u]),c.useEffect(()=>{o==null||o(m)},[m,o]);const[p,B]=c.useState(""),[F,v]=c.useState(""),[H,S]=c.useState(""),[T,N]=c.useState(""),[R,G]=c.useState(""),[J,y]=c.useState(""),[q,P]=c.useState(""),[L,D]=c.useState(""),[k,A]=c.useState(""),[g,M]=c.useState(""),[_,j]=c.useState(""),[O,$]=c.useState(!1),[d,f]=c.useState(null),[U,I]=c.useState([]),[Q,z]=c.useState([]),[w,b]=c.useState([]),[h,W]=c.useState([]),[oe,ie]=c.useState([]),[pe,be]=c.useState(""),[ee,re]=c.useState(!1),ce=[{id:"basic",label:"\uAE30\uBCF8 \uC815\uBCF4",icon:Hr},{id:"subjects",label:"\uC18C\uC18D \uACFC\uBAA9",icon:Bt}],ue=ce.findIndex(Be=>Be.id===m);c.useEffect(()=>{m==="subjects"&&de()},[m]);const de=async()=>{re(!0);try{const Be=await le.getPrograms();if(Be.rst_code==="0000"&&Be.rst_data){const we=Be.rst_data.map(Ye=>{var bt,Dt,It,at,Qt,Zt,tr,es,mt,Es,sr,xt,Cs,K,Pe,Ee,Ue;let ke=null;try{Ye.plan_json&&(ke=JSON.parse(Ye.plan_json))}catch{}let je="-";const Xe=((bt=ke==null?void 0:ke.training)==null?void 0:bt.startDateYmd)||Ye.start_date||"";Xe&&Xe.length>=4&&(je=Xe.substring(0,4));const Ge=((Dt=ke==null?void 0:ke.training)==null?void 0:Dt.trainingPeriodText)||Ye.training_period||"-";return{id:String(Ye.id),name:Ye.course_nm||((It=ke==null?void 0:ke.basic)==null?void 0:It.courseName)||`\uACFC\uC815 ${Ye.id}`,year:je,semester:"",credits:"",classification:((Qt=(at=ke==null?void 0:ke.basic)==null?void 0:at.classification)==null?void 0:Qt.label)||((tr=(Zt=ke==null?void 0:ke.basic)==null?void 0:Zt.classification)==null?void 0:tr.value)||"\uBBF8\uBD84\uB958",department:((es=ke==null?void 0:ke.basic)==null?void 0:es.department)||"",major:((mt=ke==null?void 0:ke.basic)==null?void 0:mt.major)||"",departmentName:((Es=ke==null?void 0:ke.basic)==null?void 0:Es.departmentName)||"",trainingPeriod:Ge,trainingLevel:((xt=(sr=ke==null?void 0:ke.training)==null?void 0:sr.trainingLevel)==null?void 0:xt.label)||((K=(Cs=ke==null?void 0:ke.training)==null?void 0:Cs.trainingLevel)==null?void 0:K.value)||"-",trainingTarget:((Pe=ke==null?void 0:ke.training)==null?void 0:Pe.trainingTarget)||"",trainingGoal:((Ee=ke==null?void 0:ke.training)==null?void 0:Ee.trainingGoal)||"",instructor:((Ue=ke==null?void 0:ke.basic)==null?void 0:Ue.instructor)||"",students:0,subjects:Number(Ye.course_cnt??0)}});ie(we)}}catch(Be){console.error("\uACFC\uBAA9 \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328:",Be)}finally{re(!1)}},Z=()=>(f(null),p?F?H.trim()?!0:(f("\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uBD84\uB958\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1):(f("\uACFC\uC815 \uC720\uD615\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694."),!1)),ae=()=>{if(m==="basic"){if(!Z())return;x("subjects")}},xe=()=>{m==="subjects"&&x("basic")},Te=Be=>{h.find(we=>we.id===Be.id)||W([...h,Be])},ne=Be=>{W(h.filter(we=>we.id!==Be))},ye=oe.filter(Be=>Be.name.toLowerCase().includes(pe.toLowerCase())&&!h.find(we=>we.id===Be.id)),Fe=async()=>{f(null);const Be=ex(q);$(!0);try{const we=JSON.stringify(Zm({courseCategory:p,classification:F,courseName:H.trim(),department:T.trim(),major:R.trim(),departmentName:J.trim(),courseDescription:_.trim(),trainingPeriodText:q.trim(),startDateYmd:(Be==null?void 0:Be.start)||"",endDateYmd:(Be==null?void 0:Be.end)||"",trainingLevel:L,trainingTarget:k.trim(),trainingGoal:g.trim(),curriculumItems:U,teachingPlans:Q,evaluations:w})),Ye=await le.createProgram({courseName:H.trim(),startDate:(Be==null?void 0:Be.start)||"",endDate:(Be==null?void 0:Be.end)||"",planJson:we});if(Ye.rst_code!=="0000")throw new Error(Ye.rst_message);const ke=Number(Ye.rst_data??0);if(ke>0&&h.length>0)for(const je of h){const Xe=Number(je.id);if(!Xe)continue;const Ge=await le.setCourseProgram({courseId:Xe,programId:ke});if(Ge.rst_code!=="0000")throw new Error(Ge.rst_message)}alert("\uACFC\uC815\uC774 \uAC1C\uC124\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),n==null||n()}catch(we){f(we instanceof Error?we.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{$(!1)}};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uAC1C\uC124"}),e.jsx("p",{className:"text-gray-600",children:"\uC0C8\uB85C\uC6B4 \uAD50\uC721 \uACFC\uC815\uC744 \uAC1C\uC124\uD569\uB2C8\uB2E4."})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:ce.map((Be,we)=>{const Ye=Be.icon,ke=Be.id===m,je=we<ue;return e.jsxs(Me.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${ke||je?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsx("span",{className:`ml-3 ${ke?"text-blue-600 font-medium":je?"text-blue-600":"text-gray-500"}`,children:Be.label})]}),we<ce.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${je?"bg-blue-600":"bg-gray-200"}`})]},Be.id)})})}),m==="basic"&&e.jsx(sx,{courseCategory:p,setCourseCategory:B,classification:F,setClassification:v,courseName:H,setCourseName:S,departmentName:J,setDepartmentName:y,major:R,setMajor:G,courseDescription:_,setCourseDescription:j}),m==="subjects"&&e.jsx(rx,{selectedSubjects:h,availableSubjects:ye,searchTerm:pe,setSearchTerm:be,addSubject:Te,removeSubject:ne,loading:ee,courseName:H}),e.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6",children:[e.jsx("button",{onClick:xe,disabled:ue===0,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\uC774\uC804"}),m==="basic"?e.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"\uB2E4\uC74C"}),e.jsx(bs,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:Fe,disabled:O,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"w-5 h-5"}),e.jsx("span",{children:O?"\uC800\uC7A5 \uC911...":"\uACFC\uC815 \uAC1C\uC124 \uC644\uB8CC"})]})]})]})}function sx({courseCategory:n,setCourseCategory:u,classification:o,setClassification:m,courseName:x,setCourseName:p,departmentName:B,setDepartmentName:F,major:v,setMajor:H,courseDescription:S,setCourseDescription:T}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uAE30\uBCF8 \uC815\uBCF4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uC720\uD615 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n,onChange:N=>{const R=N.target.value;u(R),R==="non-regular"&&o&&!["professional-tech","master-craftsman","new-seniors","high-tech"].includes(o)&&m("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),e.jsx("option",{value:"regular",disabled:!0,className:"text-gray-400",children:"\uC815\uADDC\uACFC\uC815"}),e.jsx("option",{value:"non-regular",children:"\uBE44\uC815\uADDC\uACFC\uC815"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-2",children:["\uACFC\uC815 \uBD84\uB958 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o,onChange:N=>m(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!n,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD558\uC138\uC694"}),n==="regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"degree-major",children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{value:"degree-major-advanced",children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"high-school-consignment",children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"})]}),n==="non-regular"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"professional-tech",children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{value:"master-craftsman",children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{value:"new-seniors",children:"\uC2E0\uC911\uB144"}),e.jsx("option",{value:"high-tech",children:"\uD558\uC774\uD14C\uD06C"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uD559\uACFC\uBA85"}),e.jsx("input",{type:"text",value:B,onChange:N=>F(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uD559\uACFC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC804\uACF5/\uC9C1\uC885"}),e.jsx("input",{type:"text",value:v,onChange:N=>H(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC804\uACF5/\uC9C1\uC885\uC744 \uC785\uB825\uD558\uC138\uC694"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815\uBA85"}),e.jsx("input",{type:"text",value:x,onChange:N=>p(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uACFC\uC815\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-gray-900 mb-4",children:"\uACFC\uC815\uC124\uBA85"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uC815 \uC18C\uAC1C"}),e.jsx("textarea",{value:S,onChange:N=>T(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y min-h-[120px]",placeholder:"\uACFC\uC815\uC5D0 \uB300\uD55C \uC18C\uAC1C \uBC0F \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",rows:5}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"\uACFC\uC815\uC758 \uBAA9\uC801, \uB300\uC0C1, \uD2B9\uC9D5 \uB4F1\uC744 \uC790\uC720\uB86D\uAC8C \uC791\uC131\uD574 \uC8FC\uC138\uC694."})]})]})]})}function rx({selectedSubjects:n,availableSubjects:u,searchTerm:o,setSearchTerm:m,addSubject:x,removeSubject:p,loading:B,courseName:F}){const[v,H]=Me.useState("plism"),[S,T]=Me.useState(null),[N,R]=Me.useState(!1),[G,J]=Me.useState([]),[y,q]=Me.useState(!1),[P,L]=Me.useState(null),[D,k]=Me.useState(""),[A,g]=Me.useState(!1),[M,_]=Me.useState(null),[j,O]=Me.useState(""),[$,d]=Me.useState(""),[f,U]=Me.useState(!1),[I,Q]=Me.useState([]),[z,w]=Me.useState(!1),[b,h]=Me.useState(null),[W,oe]=Me.useState(null),[ie,pe]=Me.useState([]),[be,ee]=Me.useState([]),[re,ce]=Me.useState(!1),[ue,de]=Me.useState(!1),[Z,ae]=Me.useState(null),[xe,Te]=Me.useState(!1),[ne,ye]=Me.useState(null),Fe=async je=>{_(je),O(`${je.name} (\uBCF5\uC0AC\uBCF8)`),d(""),h(null),g(!0)},Be=()=>{oe(null),pe([]),ee([]),ae(null)},we=()=>{g(!1),_(null),O(""),d(""),h(null)};Me.useEffect(()=>{if(!A)return;let je=!1;return(async()=>{w(!0),h(null);try{const Ge=await le.getTutors();if(Ge.rst_code!=="0000")throw new Error(Ge.rst_message);const Dt=(Ge.rst_data??[]).map(It=>({id:Number(It.user_id),name:String(It.tutor_nm||"")}));je||Q(Dt)}catch(Ge){je||h(Ge instanceof Error?Ge.message:"\uAD50\uC218/\uAC15\uC0AC \uBAA9\uB85D \uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{je||w(!1)}})(),()=>{je=!0}},[A]);const Ye=async()=>{var je;if(M){if(!j.trim()){alert("\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694.");return}if(!$){alert("\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC\uB97C \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");return}U(!0);try{const Xe=await le.copyCourse({sourceCourseId:Number(M.id),courseName:j.trim(),tutorId:Number($)});if(Xe.rst_code!=="0000")throw new Error(Xe.rst_message);const Ge={...M,id:String(Xe.rst_data),name:j.trim(),instructor:((je=I.find(bt=>bt.id===Number($)))==null?void 0:je.name)??""};we(),oe(Ge)}catch(Xe){const Ge=Xe instanceof Error?Xe.message:"\uACFC\uBAA9 \uBCF5\uC0AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";h(Ge),alert(Ge)}finally{U(!1)}}};Me.useEffect(()=>{if(v!=="plism")return;let je=!1;const Ge=setTimeout(async()=>{q(!0),L(null);try{const bt=await le.getMyCoursesCombined({tab:"prism",keyword:D||void 0});if(bt.rst_code!=="0000")throw new Error(bt.rst_message);const It=(bt.rst_data??[]).map(at=>({id:String(at.courseId||at.id),name:String(at.subjectName||at.course_nm||""),year:String(at.period||at.year||"-").split("-")[0],semester:"",credits:"",classification:String(at.courseType||at.category_nm||"\uBBF8\uBD84\uB958"),department:String(at.programName||at.dept_nm||""),major:"",departmentName:String(at.programName||""),trainingPeriod:String(at.period||"-"),trainingLevel:"-",trainingTarget:"",trainingGoal:"",instructor:"",students:Number(at.student_cnt||0),subjects:0}));je||J(It)}catch(bt){je||L(bt instanceof Error?bt.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{je||q(!1)}},300);return()=>{je=!0,clearTimeout(Ge)}},[v,D]);const ke=G.filter(je=>!n.find(Xe=>Xe.id===je.id));return e.jsxs(e.Fragment,{children:[A&&M&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"\uACFC\uBAA9 \uBCF5\uC0AC"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["\uC6D0\uBCF8: ",M.name]})]}),e.jsx("button",{onClick:we,className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C8 \uACFC\uBAA9\uBA85"}),e.jsx("input",{type:"text",value:j,onChange:je=>O(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uC0C8 \uACFC\uBAA9\uBA85\uC744 \uC785\uB825\uD574 \uC8FC\uC138\uC694."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2F4\uB2F9 \uAD50\uC218/\uAC15\uC0AC"}),e.jsxs("select",{value:$,onChange:je=>d(je.target.value?Number(je.target.value):""),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:z,children:[e.jsx("option",{value:"",children:"\uC120\uD0DD\uD574 \uC8FC\uC138\uC694"}),I.map(je=>e.jsx("option",{value:je.id,children:je.name},je.id))]}),z&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"\uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911..."}),b&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:b})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:we,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",disabled:f,children:"\uCDE8\uC18C"}),e.jsx("button",{type:"button",onClick:Ye,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:f,children:"\uBCF5\uC0AC \uD6C4 \uCC28\uC2DC \uD3B8\uC9D1"})]})]})}),W&&e.jsx(ed,{courseId:Number(W.id),courseName:W.name,onClose:Be,onSaveComplete:()=>{x(W),Be()}}),N&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>R(!1),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"\uC18C\uC18D \uACFC\uBAA9 \uC2E0\uADDC \uAC1C\uC124"})]})}),e.jsx("div",{className:"p-6",children:e.jsx(ld,{})})]}),S&&e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10 shadow-sm",children:[e.jsxs("button",{onClick:()=>T(null),className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(yt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2EB\uAE30"})]}),e.jsxs("button",{onClick:()=>{x(S),T(null)},className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ft,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC774 \uACFC\uC815 \uCD94\uAC00"})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(ad,{course:{id:S.id,name:S.name,classification:S.classification,department:S.department,major:S.major,departmentName:S.departmentName,trainingPeriod:S.trainingPeriod,trainingLevel:S.trainingLevel,trainingTarget:S.trainingTarget,trainingGoal:S.trainingGoal,instructor:S.instructor,year:S.year,students:S.students,subjects:S.subjects},onBack:()=>T(null)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-blue-800",children:[e.jsxs("strong",{children:['"',F,'"']})," \uACFC\uC815\uC5D0 \uD3EC\uD568\uB420 \uACFC\uBAA9\uC744 \uC120\uD0DD\uD558\uC138\uC694."]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-gray-900 mb-4",children:["\uC120\uD0DD\uB41C \uC18C\uC18D \uACFC\uBAA9 (",n.length,"\uAC1C)"]}),n.length>0?e.jsx("div",{className:"space-y-2",children:n.map(je=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:je.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[je.year," ",je.semester," ",je.credits&&`\u2022 ${je.credits}\uD559\uC810`]})]}),e.jsx("button",{onClick:()=>p(je.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(Nt,{className:"w-5 h-5"})})]},je.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uC120\uD0DD\uB41C \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm",children:"\uC544\uB798\uC5D0\uC11C \uACFC\uBAA9\uC744 \uAC80\uC0C9\uD558\uC5EC \uCD94\uAC00\uD558\uC138\uC694."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uBAA9 \uAC80\uC0C9"})}),e.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:e.jsx("button",{type:"button",onClick:()=>H("plism"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${v==="plism"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"PLISM"})}),v==="plism"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:D,onChange:je=>k(je.target.value),placeholder:"\uACFC\uBAA9\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),P?e.jsx("div",{className:"text-center py-8 text-red-500",children:e.jsx("p",{children:P})}):y?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):ke.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("p",{className:"text-sm mt-1",children:'\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB97C \uC2DC\uB3C4\uD558\uAC70\uB098 "\uC2E0\uADDC \uAC1C\uC124"\uC744 \uD074\uB9AD\uD558\uC138\uC694.'})]}):e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:ke.map(je=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:je.classification}),e.jsx("span",{className:"text-sm text-gray-500",children:je.year})]}),e.jsx("p",{className:"font-medium text-gray-900",children:je.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[je.departmentName||je.department||"-",je.students>0&&` \u2022 \uC218\uAC15\uC0DD ${je.students}\uBA85`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>x(je),className:"flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"\uACFC\uBAA9 \uBC14\uB85C \uCD94\uAC00",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:"\uCD94\uAC00"})]}),e.jsx("button",{type:"button",onClick:()=>Fe(je),className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"\uCC28\uC2DC \uD3B8\uC9D1 \uD6C4 \uCD94\uAC00",children:e.jsx("span",{children:"\uCC28\uC2DC \uD3B8\uC9D1"})})]})]},je.id))})]})]})]})]})}const nx=["info","info-basic","info-evaluation","info-completion","curriculum","students","attendance","exam","assignment","assignment-management","assignment-feedback","materials","qna","grades","completion"],ux=new Set(nx),ax=(n={},u={})=>{const o=Object.keys(n),m=Object.keys(u);if(o.length!==m.length)return!1;for(const x of o)if(n[x]!==u[x])return!1;return!0},lx=["\uC804\uCCB4","\uC11C\uC6B8\uC815\uC218","\uC11C\uC6B8\uAC15\uC11C","\uC131\uB0A8","\uBD84\uB2F9\uC735\uD569","\uC81C\uC8FC","\uC778\uCC9C","\uB0A8\uC778\uCC9C","\uD654\uC131","\uAD11\uBA85\uC735\uD569","\uCD98\uCC9C","\uC6D0\uC8FC","\uAC15\uB989","\uB300\uC804","\uCCAD\uC8FC","\uC544\uC0B0","\uCDA9\uB0A8","\uCDA9\uC8FC","\uAD11\uC8FC","\uC804\uBD81","\uC804\uB0A8","\uC775\uC0B0","\uC21C\uCC9C","\uB300\uAD6C","\uAD6C\uBBF8","\uB0A8\uB300\uAD6C","\uD3EC\uD56D","\uC601\uC8FC","\uC601\uB0A8\uC735\uD569\uAE30\uC220","\uCC3D\uC6D0","\uBD80\uC0B0","\uC6B8\uC0B0","\uB3D9\uBD80\uC0B0","\uC9C4\uC8FC","\uC11D\uC720\uD654\uD559\uACF5\uC815","\uBC18\uB3C4\uCCB4\uC735\uD569","\uBC14\uC774\uC624","\uB85C\uBD07","\uD56D\uACF5","\uC2E0\uAE30\uC220\uAD50\uC721\uC6D0"],ix=["\uC804\uCCB4","\uC804\uACF5\uD544\uC218","\uC804\uACF5\uAD50\uACFC","\uC804\uACF5\uC120\uD0DD","\uAD50\uC591\uC120\uD0DD","\uAD50\uC591\uAD50\uACFC","\uAD50\uC591\uD544\uC218"],ox=["\uC804\uCCB4","off","elearning"];function cx({routeSubPath:n,routeParams:u,onRouteChange:o}){const m=String(new Date().getFullYear()),x=c.useRef({subPath:n??void 0,params:u??{}});x.current={subPath:n??void 0,params:u??{}};const p=c.useCallback(K=>{if(!o)return;const Pe=x.current;Pe.subPath===K.subPath&&ax(Pe.params,K.params)||o(K)},[o]),B=c.useCallback((K,Pe)=>{const Ee=Number(K);return Number.isNaN(Ee)||Ee<=0?Pe:Math.floor(Ee)},[]),F=(u==null?void 0:u.source)==="prism"||(u==null?void 0:u.source)==="haksa"?u.source:(u==null?void 0:u.listTab)==="prism"||(u==null?void 0:u.listTab)==="haksa"?u.listTab:(u==null?void 0:u.tab)==="prism"||(u==null?void 0:u.tab)==="haksa"?u.tab:"haksa",v=(u==null?void 0:u.year)??m,H=(u==null?void 0:u.keyword)??"",S=B(u==null?void 0:u.page,1),T=B(u==null?void 0:u.pageSize,20),N=(u==null?void 0:u.sortOrder)==="asc"?"asc":"desc",[R,G]=c.useState(F),[J,y]=c.useState(["\uC804\uCCB4",m]),[q,P]=c.useState(v),[L,D]=c.useState((u==null?void 0:u.courseType)??"\uC804\uCCB4"),[k,A]=c.useState((u==null?void 0:u.status)??"\uC804\uCCB4"),[g,M]=c.useState(H),[_,j]=c.useState(H),[O,$]=c.useState(null),[d,f]=c.useState(null),[U,I]=c.useState(null),[Q,z]=c.useState([]),[w,b]=c.useState(!1),[h,W]=c.useState(null),[oe,ie]=c.useState(null),[pe,be]=c.useState(S),[ee,re]=c.useState(T),[ce,ue]=c.useState(0),[de,Z]=c.useState((u==null?void 0:u.haksaCategory)??"\uC804\uCCB4"),[ae,xe]=c.useState((u==null?void 0:u.haksaGrad)??"\uC804\uCCB4"),[Te,ne]=c.useState((u==null?void 0:u.haksaCurriculum)??"\uC804\uCCB4"),[ye,Fe]=c.useState(N),Be=c.useRef(null),we=K=>(K||"").toLowerCase().replace(/\s+/g," ").trim(),Ye=K=>{const Pe=String((K==null?void 0:K.haksa_course_code)??"").trim(),Ee=String((K==null?void 0:K.haksa_open_year)??"").trim(),Ue=String((K==null?void 0:K.haksa_open_term)??"").trim(),Qe=String((K==null?void 0:K.haksa_bunban_code)??"").trim(),Oe=String((K==null?void 0:K.haksa_group_code)??"").trim(),Ne=[Pe,Ee,Ue,Qe,Oe].filter(Boolean);if(Ne.length===5)return`H_${Ne.join("_")}`;const Je=String((K==null?void 0:K.course_id_conv)??(K==null?void 0:K.course_cd)??(K==null?void 0:K.id)??"").trim();return`H_${Pe||"UNKNOWN"}_${Qe||"0"}_${Je||"0"}`},ke=c.useCallback(K=>{for(const Pe of K){const Ee=u==null?void 0:u[Pe];if(Ee)return Ee}return""},[u]),je=c.useCallback(()=>{const K={};return R!=="haksa"&&(K.source=R),q&&(K.year=q),_&&(K.keyword=_),pe>1&&(K.page=String(pe)),ee!==20&&(K.pageSize=String(ee)),R==="prism"&&(L!=="\uC804\uCCB4"&&(K.courseType=L),k!=="\uC804\uCCB4"&&(K.status=k)),R==="haksa"&&(de!=="\uC804\uCCB4"&&(K.haksaCategory=de),ae!=="\uC804\uCCB4"&&(K.haksaGrad=ae),Te!=="\uC804\uCCB4"&&(K.haksaCurriculum=Te),ye!=="desc"&&(K.sortOrder=ye)),K},[R,L,de,Te,ae,pe,ee,_,ye,k,q]);c.useEffect(()=>{o&&n!=="manage"&&(O||p({subPath:void 0,params:je()}))},[je,o,p,n,O]),c.useEffect(()=>{if(n==="manage")return;const K=(u==null?void 0:u.source)==="prism"||(u==null?void 0:u.source)==="haksa"?u.source:(u==null?void 0:u.listTab)==="prism"||(u==null?void 0:u.listTab)==="haksa"?u.listTab:(u==null?void 0:u.tab)==="prism"||(u==null?void 0:u.tab)==="haksa"?u.tab:"haksa",Pe=(u==null?void 0:u.year)??m,Ee=(u==null?void 0:u.keyword)??"",Ue=B(u==null?void 0:u.page,1),Qe=B(u==null?void 0:u.pageSize,20),Oe=(u==null?void 0:u.courseType)??"\uC804\uCCB4",Ne=(u==null?void 0:u.status)??"\uC804\uCCB4",Je=(u==null?void 0:u.haksaCategory)??"\uC804\uCCB4",ct=(u==null?void 0:u.haksaGrad)??"\uC804\uCCB4",Vt=(u==null?void 0:u.haksaCurriculum)??"\uC804\uCCB4",Fs=(u==null?void 0:u.sortOrder)==="asc"?"asc":"desc";K!==R&&G(K),Pe!==q&&P(Pe),Ee!==g&&(M(Ee),j(Ee)),Ue!==pe&&be(Ue),Qe!==ee&&re(Qe),Oe!==L&&D(Oe),Ne!==k&&A(Ne),Je!==de&&Z(Je),ct!==ae&&xe(ct),Vt!==Te&&ne(Vt),Fs!==ye&&Fe(Fs)},[m,B,u,n]),c.useEffect(()=>{let K=!1;return(async()=>{try{const Ee=await le.getCourseYears();if(Ee.rst_code!=="0000")throw new Error(Ee.rst_message);const Ue=(Ee.rst_data??[]).map(Ne=>String(Ne.year||"").trim()).filter(Boolean),Qe=Array.from(new Set(Ue)).sort((Ne,Je)=>Je.localeCompare(Ne)),Oe=["\uC804\uCCB4",...Qe];if(K)return;y(Oe.length>1?Oe:["\uC804\uCCB4",m]),P(Ne=>Ne&&Oe.includes(Ne)?Ne:Qe[0]?Qe[0]:"\uC804\uCCB4")}catch{K||y(["\uC804\uCCB4",m])}})(),()=>{K=!0}},[m]);const Xe=c.useMemo(()=>{if(R==="haksa")return Q.filter(Ee=>{const Ue=de==="\uC804\uCCB4"||(Ee.haksaCategory||"").toLowerCase()===de.toLowerCase(),Qe=ae==="\uC804\uCCB4"||(Ee.haksaGradName||"").includes(ae),Oe=Te==="\uC804\uCCB4"||(Ee.haksaCurriculumName||"")===Te;return Ue&&Qe&&Oe});const K=L==="\uC804\uCCB4"||course.courseType===L,Pe=k==="\uC804\uCCB4"||course.status===k;return Q.filter(Ee=>K&&Pe)},[R,Q,L,k,de,ae,Te]);c.useEffect(()=>{const K=setTimeout(()=>{j(g.trim())},300);return()=>clearTimeout(K)},[g]),c.useEffect(()=>{be(1)},[R,q,_,ee,de,ae,Te,ye]),c.useEffect(()=>{let K=!1;return(async()=>{b(!0),ie(null);try{const Ee=await le.getMyCoursesCombined({tab:R,year:q==="\uC804\uCCB4"?void 0:q,keyword:_||void 0,page:pe,pageSize:ee,haksaCategory:R==="haksa"&&de!=="\uC804\uCCB4"?de:void 0,haksaGrad:R==="haksa"&&ae!=="\uC804\uCCB4"?ae:void 0,haksaCurriculum:R==="haksa"&&Te!=="\uC804\uCCB4"?Te:void 0,sortOrder:R==="haksa"?ye:void 0});if(Ee.rst_code!=="0000")throw new Error(Ee.rst_message);const Ue=Ee.rst_data??[],Qe=Number(Ee.rst_total_count??Ue.length),Oe=Ue.map(Ne=>{const Je=Ne.status_label??"\uB300\uAE30",ct=[(Ne.course_type_conv||"").trim(),(Ne.onoff_type_conv||"").trim()].filter(Boolean);return{id:R==="haksa"?Ye(Ne):String(Ne.id),mappedCourseId:Ne.mapped_course_id?Number(Ne.mapped_course_id):void 0,sourceType:R,courseId:Ne.course_id_conv||Ne.course_cd||String(Ne.id),courseType:ct.length>0?ct.join(" / "):"\uBBF8\uC9C0\uC815",subjectName:Ne.course_nm_conv||Ne.subject_nm_conv||Ne.course_nm||"-",programId:Number(Ne.program_id??0),programName:Ne.program_nm_conv||"-",period:Ne.period_conv||"-",students:Number(Ne.student_cnt??0),status:Je,haksaCategory:Ne.haksa_category||"",haksaDeptName:Ne.haksa_dept_name||"",haksaWeek:Ne.haksa_week||"",haksaOpenTerm:Ne.haksa_open_term||"",haksaCourseCode:Ne.haksa_course_code||"",haksaVisible:Ne.haksa_visible||"",haksaStartdate:Ne.haksa_startdate||"",haksaBunbanCode:Ne.haksa_bunban_code||"",haksaGrade:Ne.haksa_grade||"",haksaGradName:Ne.haksa_grad_name||"",haksaDayCd:Ne.haksa_day_cd||"",haksaClassroom:Ne.haksa_classroom||"",haksaCurriculumCode:Ne.haksa_curriculum_code||"",haksaCourseEname:Ne.haksa_course_ename||"",haksaTypeSyllabus:Ne.haksa_type_syllabus||"",haksaOpenYear:Ne.haksa_open_year||"",haksaDeptCode:Ne.haksa_dept_code||"",haksaCourseName:Ne.haksa_course_name||"",haksaGroupCode:Ne.haksa_group_code||"",haksaEnddate:Ne.haksa_enddate||"",haksaEnglish:Ne.haksa_english||"",haksaHour1:Ne.haksa_hour1||"",haksaCurriculumName:Ne.haksa_curriculum_name||"",haksaGradCode:Ne.haksa_grad_code||"",haksaIsSyllabus:Ne.haksa_is_syllabus||""}});K||(z(Oe),ue(Number.isNaN(Qe)?Ue.length:Qe))}catch(Ee){K||ie(Ee instanceof Error?Ee.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{K||(b(!1),W(R))}})(),()=>{K=!0}},[q,R,_,pe,ee,de,ae,Te,ye]),c.useEffect(()=>{const K=Math.max(1,Math.ceil(ce/ee));pe>K&&be(K)},[ce,ee,pe]);const Ge=c.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(Q.map(Pe=>Pe.courseType).filter(Pe=>Pe&&Pe!=="\uBBF8\uC9C0\uC815"))).sort((Pe,Ee)=>Pe.localeCompare(Ee))],[Q]),bt=K=>{switch(K){case"\uB300\uAE30":return"bg-gray-100 text-gray-700";case"\uC2E0\uCCAD\uAE30\uAC04":return"bg-blue-100 text-blue-700";case"\uD559\uC2B5\uAE30\uAC04":return"bg-green-100 text-green-700";case"\uC885\uB8CC":return"bg-gray-200 text-gray-600";default:return"bg-gray-100 text-gray-700"}},Dt=Math.max(1,Math.ceil(ce/ee)),It=c.useMemo(()=>{const K=Math.max(1,pe-2),Pe=Math.min(Dt,pe+2);return Array.from({length:Pe-K+1},(Ee,Ue)=>K+Ue)},[pe,Dt]),at=(K,Pe)=>{const Ee=we(K),Ue=Number(K),Qe=we(Pe);if(Qe){const Oe=Q.find(Ne=>{const Je=we(Ne.subjectName),ct=we(Ne.programName);return Je===Qe||ct===Qe});if(Oe)return Oe}return Q.find(Oe=>{const Ne=Number(Oe.id),Je=Number(Oe.mappedCourseId??NaN),ct=Number(Oe.courseId),Vt=Ee&&(we(Oe.id)===Ee||we(Oe.courseId)===Ee||we(String(Oe.mappedCourseId??""))===Ee);if(!Number.isNaN(Ue)&&Ne===Ue||!Number.isNaN(Ue)&&Je===Ue||!Number.isNaN(Ue)&&ct===Ue||Vt)return!0;if(!Qe)return!1;const ts=we(Oe.subjectName),vs=we(Oe.programName);return ts===Qe||ts.includes(Qe)||Qe.includes(ts)||vs===Qe||vs.includes(Qe)})},Qt=c.useCallback(async(K,Pe)=>{if(f(Pe??null),K.sourceType!=="haksa"){$(K);return}if(K.mappedCourseId&&K.mappedCourseId>0){$(K);return}if(!K.haksaCourseCode||!K.haksaOpenYear||!K.haksaOpenTerm||!K.haksaBunbanCode||!K.haksaGroupCode){alert("\uD559\uC0AC \uACFC\uBAA9 \uD0A4\uAC00 \uBE44\uC5B4 \uC788\uC5B4 \uACFC\uC815 \uB9E4\uD551\uC744 \uC9C4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}I(K.id);try{const Ee=await le.resolveHaksaCourse({courseCode:K.haksaCourseCode,openYear:K.haksaOpenYear,openTerm:K.haksaOpenTerm,bunbanCode:K.haksaBunbanCode,groupCode:K.haksaGroupCode});if(Ee.rst_code!=="0000")throw new Error(Ee.rst_message);const Ue=Array.isArray(Ee.rst_data)?Ee.rst_data[0]:Ee.rst_data,Qe=Number((Ue==null?void 0:Ue.mapped_course_id)??0);if(!Qe||Number.isNaN(Qe))throw new Error("\uB9E4\uD551\uB41C \uACFC\uC815ID\uB97C \uCC3E\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.");$({...K,mappedCourseId:Qe})}catch(Ee){alert(Ee instanceof Error?Ee.message:"\uD559\uC0AC \uACFC\uBAA9 \uB9E4\uD551 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{I(null)}},[]),Zt=ke(["courseId","course_id","id"]),tr=ke(["courseName","course_nm","courseNameConv","name"]),es=ke(["cmTab","cm_tab","tab","targetTab","tab_id"]),mt=ux.has(es)?es:void 0,Es=ke(["source","source_type","sourceType","listTab"]),xt=n==="manage"&&(Zt||tr)?{courseId:Zt,courseName:tr,targetTab:mt,sourceType:Es==="haksa"||Es==="prism"?Es:!mt&&(es==="haksa"||es==="prism")?es:void 0}:null;c.useEffect(()=>{if(!xt)return;if(O){const Je=we(xt.courseId),ct=we(xt.courseName),Vt=we(O.id),Fs=we(O.courseId),ts=we(O.subjectName),vs=we(String(O.mappedCourseId??""));if(Je&&(Vt===Je||Fs===Je||vs&&vs===Je)||ct&&ts===ct)return}if(h!==R)return;const K=xt.courseId,Pe=we(K),Ee=!!Pe,Ue=!!we(xt.courseName);if(!Ee&&!Ue)return;const Qe=`${Pe}-${we(xt.courseName)}-${xt.targetTab??""}`;(!Be.current||Be.current.key!==Qe)&&(Be.current={key:Qe,stage:"init",triedSources:{prism:!1,haksa:!1}});const Oe=Be.current,Ne=at(K,xt.courseName);if(Ne){Oe.stage="done",Qt(Ne,xt.targetTab);return}if(Oe.stage==="init"){const Je=xt.sourceType;if(Je==="haksa"||Je==="prism"){if(Oe.triedSources[Je]=!0,R!==Je){Oe.stage="switched",G(Je);return}}else if(Oe.triedSources.prism=!0,R!=="prism"){Oe.stage="switched",G("prism");return}}if(Oe.stage==="switched"||Oe.stage==="init"){Oe.stage="widened",P("\uC804\uCCB4"),D("\uC804\uCCB4"),A("\uC804\uCCB4"),Z("\uC804\uCCB4"),xe("\uC804\uCCB4"),ne("\uC804\uCCB4"),Fe("desc"),re(100),be(1),M(""),j("");return}if(Oe.stage==="widened"&&(Oe.stage="searched"),Oe.stage==="searched"&&!w){const Je=Math.max(1,Math.ceil(ce/ee));if(pe<Je&&pe<10){be(Vt=>Vt+1);return}const ct=R==="prism"?"haksa":"prism";if(!Oe.triedSources[ct]){Oe.triedSources[ct]=!0,Oe.stage="switched",G(ct);return}Oe.stage="done"}},[R,Qt,h,w,pe,ee,xt,O,ce]);const Cs=c.useRef(mt);return c.useEffect(()=>{if(n!=="manage"){Cs.current=mt;return}mt!==Cs.current&&(Cs.current=mt,mt&&f(mt))},[n,mt]),c.useEffect(()=>{if(!o||!O)return;const K=d??mt??"info-basic",Pe=O.subjectName||O.courseId;p({subPath:"manage",params:{courseId:O.id,source:O.sourceType,cmTab:K,courseName:Pe}})},[o,p,mt,O,d]),c.useEffect(()=>{n!=="manage"&&O&&($(null),f(null))},[n,O]),O?e.jsx(sd,{course:O,initialTab:d??mt??void 0,onTabChange:K=>f(K),onBack:()=>{$(null),f(null),p({subPath:void 0,params:je()})}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uB2F4\uB2F9 \uACFC\uBAA9"}),e.jsx("p",{className:"text-gray-600",children:"\uB2F4\uB2F9\uD558\uACE0 \uC788\uB294 \uACFC\uBAA9 \uBAA9\uB85D\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>G("haksa"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${R==="haksa"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uC815\uADDC"}),e.jsx("button",{onClick:()=>G("prism"),className:`px-6 py-2.5 rounded-lg font-medium transition-all ${R==="prism"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"\uBE44\uC815\uADDC"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:R==="haksa"?e.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:q,onChange:K=>P(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:J.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:de,onChange:K=>Z(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:ox.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB2E8\uACFC\uB300\uD559"}),e.jsx("select",{value:ae,onChange:K=>xe(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:lx.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uACFC\uBAA9\uAD6C\uBD84"}),e.jsx("select",{value:Te,onChange:K=>ne(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:ix.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC815\uB82C"}),e.jsxs("select",{value:ye,onChange:K=>Fe(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"desc",children:"\uAC15\uC88C\uCF54\uB4DC \uB0B4\uB9BC\uCC28\uC21C"}),e.jsx("option",{value:"asc",children:"\uAC15\uC88C\uCF54\uB4DC \uC624\uB984\uCC28\uC21C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:K=>M(K.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uB144\uB3C4"}),e.jsx("select",{value:q,onChange:K=>P(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:J.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC720\uD615"}),e.jsx("select",{value:L,onChange:K=>D(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Ge.map(K=>e.jsx("option",{value:K,children:K},K))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uC0C1\uD0DC"}),e.jsxs("select",{value:k,onChange:K=>A(K.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"\uC804\uCCB4",children:"\uC804\uCCB4"}),e.jsx("option",{value:"\uB300\uAE30",children:"\uB300\uAE30"}),e.jsx("option",{value:"\uC2E0\uCCAD\uAE30\uAC04",children:"\uC2E0\uCCAD\uAE30\uAC04"}),e.jsx("option",{value:"\uD559\uC2B5\uAE30\uAC04",children:"\uD559\uC2B5\uAE30\uAC04"}),e.jsx("option",{value:"\uC885\uB8CC",children:"\uC885\uB8CC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"\uAC80\uC0C9"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:g,onChange:K=>M(K.target.value),placeholder:"\uACFC\uBAA9\uBA85, \uACFC\uC815\uBA85, \uACFC\uC815ID \uAC80\uC0C9",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC694\uCCAD"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uBAA9\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:R==="haksa"?"\uD559\uACFC/\uC804\uACF5":"\uC18C\uC18D \uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uAE30\uAC04"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC218\uAC15\uC0DD"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uC0C1\uD0DC"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:oe?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:oe})})}):w?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})})}):Xe.length>0?Xe.map((K,Pe)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:(pe-1)*ee+Pe+1}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${K.sourceType==="prism"?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:K.sourceType==="prism"?"LMS":"\uD559\uC0AC"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:K.courseId}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:K.sourceType==="haksa"&&K.haksaCategory?K.haksaCategory:K.courseType}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:K.subjectName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:K.sourceType==="haksa"&&K.haksaDeptName?K.haksaDeptName:K.programName}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:K.period}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-gray-900",children:[e.jsx(Qu,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:K.students})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs rounded-full ${bt(K.status)}`,children:K.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{className:"flex items-center gap-1 px-4 py-1.5 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100 transition-colors disabled:opacity-60",title:"\uACFC\uBAA9 \uAD00\uB9AC",onClick:()=>void Qt(K),disabled:U===K.id,children:[e.jsx(Jc,{className:"w-4 h-4"}),e.jsx("span",{children:U===K.id?"\uC5F0\uB3D9 \uC911...":"\uAD00\uB9AC"})]})})})]},K.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-12 text-center text-gray-500",children:e.jsx("p",{children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."})})})})]})})}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"\uCD1D"}),e.jsx("span",{className:"text-blue-600",children:ce}),e.jsx("span",{children:"\uAC1C\uC758 \uACFC\uBAA9"}),e.jsxs("span",{className:"text-gray-400",children:["/ \uD604\uC7AC ",Xe.length,"\uAC1C \uD45C\uC2DC"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"page-size",className:"text-gray-600",children:"\uD398\uC774\uC9C0\uB2F9"}),e.jsx("select",{id:"page-size",value:ee,onChange:K=>re(Number(K.target.value)),className:"px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[20,50,100].map(K=>e.jsx("option",{value:K,children:K},K))})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>be(1),disabled:pe===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uCC98\uC74C"}),e.jsx("button",{type:"button",onClick:()=>be(K=>Math.max(1,K-1)),disabled:pe===1,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uC774\uC804"}),It.map(K=>e.jsx("button",{type:"button",onClick:()=>be(K),className:`px-3 py-1.5 text-sm border rounded-md ${K===pe?"bg-blue-600 text-white border-blue-600":"border-gray-300"}`,children:K},K)),e.jsx("button",{type:"button",onClick:()=>be(K=>Math.min(Dt,K+1)),disabled:pe===Dt,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB2E4\uC74C"}),e.jsx("button",{type:"button",onClick:()=>be(Dt),disabled:pe===Dt,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md disabled:opacity-40",children:"\uB05D"})]})]})}function dx(n){if(!n)return null;try{const u=JSON.parse(n);return!u||typeof u!="object"?null:u}catch{return null}}function Cx(n){const u=[n.startDateYmd,n.startDate].filter(Boolean);for(const x of u){const p=String(x);if(p.length>=4&&/^\d{4}/.test(p))return p.substring(0,4)}const m=(n.trainingPeriod||"").match(/(\\d{4})/);return m?m[1]:"-"}function mx(){const[n,u]=c.useState(""),[o,m]=c.useState("\uC804\uCCB4"),[x,p]=c.useState("\uC804\uCCB4"),[B,F]=c.useState("list"),[v,H]=c.useState(null),[S,T]=c.useState([]),[N,R]=c.useState(!1),[G,J]=c.useState(null),y=async()=>{R(!0),J(null);try{const L=await le.getPrograms();if(L.rst_code!=="0000")throw new Error(L.rst_message);const k=(L.rst_data??[]).map(A=>{var j,O,$,d,f,U,I,Q,z,w,b,h,W,oe,ie,pe,be,ee,re,ce,ue;const g=dx(A.plan_json),M=((j=g==null?void 0:g.training)==null?void 0:j.trainingPeriodText)||A.training_period||"-",_=Cx({startDateYmd:(O=g==null?void 0:g.training)==null?void 0:O.startDateYmd,startDate:A.start_date,trainingPeriod:M});return{id:String(A.id),courseCategory:((d=($=g==null?void 0:g.basic)==null?void 0:$.courseCategory)==null?void 0:d.label)||((U=(f=g==null?void 0:g.basic)==null?void 0:f.courseCategory)==null?void 0:U.value)||"-",classification:((Q=(I=g==null?void 0:g.basic)==null?void 0:I.classification)==null?void 0:Q.label)||((w=(z=g==null?void 0:g.basic)==null?void 0:z.classification)==null?void 0:w.value)||"\uBBF8\uBD84\uB958",name:A.course_nm||((b=g==null?void 0:g.basic)==null?void 0:b.courseName)||`\uACFC\uC815 ${A.id}`,department:((h=g==null?void 0:g.basic)==null?void 0:h.department)||"",major:((W=g==null?void 0:g.basic)==null?void 0:W.major)||"",departmentName:((oe=g==null?void 0:g.basic)==null?void 0:oe.departmentName)||"",trainingPeriod:M,trainingLevel:((pe=(ie=g==null?void 0:g.training)==null?void 0:ie.trainingLevel)==null?void 0:pe.label)||((ee=(be=g==null?void 0:g.training)==null?void 0:be.trainingLevel)==null?void 0:ee.value)||"-",trainingTarget:((re=g==null?void 0:g.training)==null?void 0:re.trainingTarget)||"",trainingGoal:((ce=g==null?void 0:g.training)==null?void 0:ce.trainingGoal)||"",instructor:((ue=g==null?void 0:g.basic)==null?void 0:ue.instructor)||"",year:_,students:0,subjects:Number(A.course_cnt??0)}});T(k)}catch(L){J(L instanceof Error?L.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{R(!1)}};c.useEffect(()=>{y()},[]);const q=c.useMemo(()=>["\uC804\uCCB4",...Array.from(new Set(S.map(D=>D.year).filter(D=>D&&D!=="-"))).sort((D,k)=>k.localeCompare(D))],[S]),P=c.useMemo(()=>{const L=n.trim().toLowerCase();return S.filter(D=>{const k=[D.name,D.department,D.major,D.departmentName,D.instructor,D.trainingLevel,D.trainingTarget,D.trainingGoal].map(_=>String(_||"").toLowerCase()).filter(Boolean),A=L===""||k.some(_=>_.includes(L)),g=x==="\uC804\uCCB4"||D.year===x,M=o==="\uC804\uCCB4"||D.classification===o;return A&&g&&M})},[S,n,x,o]);return v?e.jsx(ad,{course:v,onBack:()=>{H(null),y()}}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:"\uACFC\uC815 \uD0D0\uC0C9"}),e.jsx("p",{className:"text-gray-600",children:"\uAC1C\uC124\uB41C \uBAA8\uB4E0 \uAD50\uC721 \uACFC\uC815\uC744 \uD655\uC778\uD558\uACE0 \uAD00\uB9AC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:L=>u(L.target.value),placeholder:"\uACFC\uC815\uBA85, \uC804\uACF5, \uD559\uACFC\uBA85, \uAD50\uC218\uBA85\uC73C\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:o,onChange:L=>m(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"\uC804\uCCB4"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5"}),e.jsx("option",{children:"\uD559\uC704\uC804\uACF5\uC2EC\uD654"}),e.jsx("option",{children:"\uC804\uBB38\uAE30\uC220"}),e.jsx("option",{children:"\uD558\uC774\uD14C\uD06C"}),e.jsx("option",{children:"\uAE30\uB2A5\uC7A5"}),e.jsx("option",{children:"\uACE0\uAD50\uC704\uD0C1"}),e.jsx("option",{children:"\uC2E0\uC911\uB144"})]}),e.jsx("select",{value:x,onChange:L=>p(L.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:q.map(L=>e.jsx("option",{value:L,children:L},L))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F("grid"),className:`p-2 rounded-lg transition-colors ${B==="grid"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx($C,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F("list"),className:`p-2 rounded-lg transition-colors ${B==="list"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e.jsx(Bt,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:P.length}),"\uAC1C\uC758 \uACFC\uC815"]})}),G?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:G})}):N?e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}):e.jsxs(e.Fragment,{children:[B==="grid"?e.jsx("div",{className:"grid grid-cols-3 gap-6",children:P.map(L=>e.jsxs("div",{onClick:()=>H(L),className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[L.thumbnail?e.jsx("img",{src:L.thumbnail,alt:L.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Bt,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-3 py-1 bg-white bg-opacity-90 rounded-full text-xs text-gray-900",children:L.classification})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:L.name}),e.jsx("p",{className:"text-sm text-gray-600",children:[L.department,L.major].filter(Boolean).join(" \xB7 ")||"-"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:L.departmentName||"-"})]})})]},L.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-20",children:"\uACFC\uC815ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-28",children:"\uACFC\uC815 \uC720\uD615"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700 whitespace-nowrap w-24",children:"\uACFC\uC815 \uBD84\uB958"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm text-gray-700",children:"\uACFC\uC815\uBA85"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm text-gray-700 whitespace-nowrap w-24",children:"\uC18C\uC18D \uACFC\uBAA9"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P.map(L=>e.jsxs("tr",{onClick:()=>H(L),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 whitespace-nowrap",children:L.id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 rounded text-xs",children:L.courseCategory||"-"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:L.classification})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 break-words",children:L.name})}),e.jsxs("td",{className:"px-4 py-4 text-center text-sm text-gray-600 whitespace-nowrap",children:[L.subjects,"\uAC1C"]})]},L.id))})]})}),P.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(Bt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})})]})]})}function xx({onNavigate:n,onOpenCourse:u}={}){const[o,m]=c.useState(!1),[x,p]=c.useState(null),[B,F]=c.useState(null),[v,H]=c.useState([]),[S,T]=c.useState([]),[N,R]=c.useState([]);c.useEffect(()=>{let D=!1;return(async()=>{m(!0),p(null);try{const A=await le.getDashboard();if(A.rst_code!=="0000")throw new Error(A.rst_message);if(D)return;F(A.rst_data??null),H(A.rst_courses??[]),T(A.rst_submissions??[]),R(A.rst_qna??[])}catch(A){D||p(A instanceof Error?A.message:"\uB300\uC2DC\uBCF4\uB4DC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{D||m(!1)}})(),()=>{D=!0}},[]);const G=c.useMemo(()=>[{title:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9",value:(B==null?void 0:B.active_course_cnt)??0,icon:Bt,color:"bg-blue-100 text-blue-600",bgColor:"bg-blue-50"},{title:"\uBBF8\uD655\uC778 \uACFC\uC81C",value:(B==null?void 0:B.pending_homework_cnt)??0,icon:Zs,color:"bg-orange-100 text-orange-600",bgColor:"bg-orange-50"},{title:"\uBBF8\uB2F5\uBCC0 Q&A",value:(B==null?void 0:B.unanswered_qna_cnt)??0,icon:Yr,color:"bg-purple-100 text-purple-600",bgColor:"bg-purple-50"}],[B==null?void 0:B.active_course_cnt,B==null?void 0:B.pending_homework_cnt,B==null?void 0:B.unanswered_qna_cnt]),J=c.useMemo(()=>v.slice(0,3),[v]),y=c.useMemo(()=>S.slice(0,3),[S]),q=c.useMemo(()=>N.slice(0,3),[N]),P=()=>{n==null||n("courses")},L=D=>{if(u){u(D);return}n==null||n("courses")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 mb-1",children:"\uB300\uC2DC\uBCF4\uB4DC"}),e.jsx("p",{className:"text-gray-600",children:"\uAD50\uC218\uC790 \uD65C\uB3D9 \uD604\uD669\uC744 \uD55C\uB208\uC5D0 \uD655\uC778\uD558\uC138\uC694"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:G.map((D,k)=>e.jsxs("div",{className:`${D.bgColor} border border-gray-200 rounded-lg p-6 transition-all hover:shadow-md`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`${D.color} p-3 rounded-lg`,children:e.jsx(D.icon,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:D.value}),e.jsx("div",{className:"text-sm text-gray-600",children:D.title})]})]},k))}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:x}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uC9C4\uD589 \uC911\uC778 \uAC15\uC88C"})]}),e.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),o?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):v.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uC9C4\uD589 \uC911\uC778 \uACFC\uBAA9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:J.map(D=>{const k=Math.round(Number(D.avg_progress_ratio??0)),A=Number(D.student_cnt??0),g=Number(D.pending_homework_cnt??0),M=Number(D.unanswered_qna_cnt??0);return e.jsxs("button",{type:"button",onClick:()=>L({courseId:D.id,courseName:D.course_nm,targetTab:"attendance"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:D.course_nm}),e.jsx("p",{className:"text-sm text-gray-600",children:D.period_conv||"-"})]}),(g>0||M>0)&&e.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&e.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:["\uBBF8\uD655\uC778 \uACFC\uC81C ",g,"\uAC74"]}),M>0&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:["\uBBF8\uB2F5\uBCC0 Q&A ",M,"\uAC74"]})]})]}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qu,{className:"w-4 h-4"}),A,"\uBA85"]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"\uD3C9\uADE0 \uC9C4\uB3C4\uC728"}),e.jsxs("span",{className:"text-gray-900",children:[k,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,k))}%`}})})]})]},D.id)})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uACFC\uC81C \uBAA9\uB85D"})]}),e.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),o?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):S.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC \uC81C\uCD9C\uB41C \uACFC\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:y.map(D=>{const k=!!D.confirmed,A=`${D.user_nm||"-"} \xB7 ${D.course_nm}`,g=D.submitted_at||"-";return e.jsxs("button",{type:"button",onClick:()=>L({courseId:D.course_id,courseName:D.course_nm,targetTab:"assignment-feedback"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1",children:D.homework_nm}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:A})]}),k?e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full whitespace-nowrap",children:"\uD655\uC778\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uD655\uC778"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx($u,{className:"w-4 h-4"}),e.jsx("span",{children:g})]})]},`${D.homework_id}-${D.course_user_id}`)})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"\uCD5C\uADFC Q&A"})]}),e.jsx("button",{onClick:P,className:"text-sm text-blue-600 hover:text-blue-700",children:"\uC804\uCCB4\uBCF4\uAE30"})]})}),o?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uBD88\uB7EC\uC624\uB294 \uC911..."}):N.length===0?e.jsx("div",{className:"p-10 text-center text-gray-500",children:"\uCD5C\uADFC Q&A\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}):e.jsx("div",{className:"divide-y divide-gray-200",children:q.map(D=>e.jsxs("button",{type:"button",onClick:()=>L({courseId:D.course_id,courseName:D.course_nm,targetTab:"qna"}),className:"w-full text-left p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-gray-900 mb-1 line-clamp-1",children:D.subject}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[D.user_nm||"-"," \xB7 ",D.course_nm]})]}),D.answered?e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full whitespace-nowrap",children:"\uB2F5\uBCC0\uC644\uB8CC"}):e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full whitespace-nowrap",children:"\uBBF8\uB2F5\uBCC0"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx($u,{className:"w-4 h-4"}),e.jsx("span",{children:D.reg_date_conv||"-"})]})]},D.post_id))})]})]})}function Hc({activeTab:n}){const[u,o]=c.useState(""),[m,x]=c.useState(""),[p,B]=c.useState([]),[F,v]=c.useState([]),[H,S]=c.useState(0),[T,N]=c.useState(1),[R,G]=c.useState(!1),[J,y]=c.useState(!1),[q,P]=c.useState(null),L=30;Me.useEffect(()=>{N(1),B([]),S(0)},[u,m,n]),Me.useEffect(()=>{let g=!1;const M=setTimeout(()=>{(async()=>{const j=T===1;y(j),G(!j),P(null);try{const O=n==="favorites"?await le.getKollusWishlistList({keyword:u,page:T,limit:L}):await le.getKollusList({keyword:u,categoryKey:m||void 0,page:T,limit:L});if(O.rst_code!=="0000")throw new Error(O.rst_message);const d=(O.rst_data??[]).map(U=>({id:String(U.id||U.media_content_key),mediaKey:U.media_content_key,title:U.title,description:U.original_file_name?`\uC6D0\uBCF8\uD30C\uC77C\uC774\uB984: ${U.original_file_name}`:"",category:U.category_nm||"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C",categoryKey:U.category_key,snapshotUrl:U.snapshot_url,originalFileName:U.original_file_name||"",thumbnail:U.thumbnail||U.snapshot_url||"",duration:U.duration||"-",totalTime:Number(U.total_time??0),contentWidth:Number(U.content_width??0),contentHeight:Number(U.content_height??0),isFavorite:!!U.is_favorite})),f=Array.isArray(O.rst_categories)?O.rst_categories:[];g||(B(U=>j?d:[...U,...d]),S(Number(O.rst_total??d.length)),n!=="favorites"&&f.length>0&&v(f))}catch(O){g||P(O instanceof Error?O.message:"\uC870\uD68C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{g||(y(!1),G(!1))}})()},250);return()=>{g=!0,clearTimeout(M)}},[n,u,m,T]);const D=F,k=async(g,M)=>{g.preventDefault(),g.stopPropagation();try{const _=await le.toggleKollusWishlist({mediaContentKey:M.mediaKey,title:M.title,snapshotUrl:M.snapshotUrl||M.thumbnail,categoryKey:M.categoryKey,categoryName:M.category,originalFileName:M.originalFileName,totalTime:M.totalTime,contentWidth:M.contentWidth,contentHeight:M.contentHeight});if(_.rst_code!=="0000")throw new Error(_.rst_message);const j=Number(_.rst_data??0)===1;B(O=>n==="favorites"&&!j?O.filter($=>$.mediaKey!==M.mediaKey):O.map($=>$.mediaKey===M.mediaKey?{...$,isFavorite:j}:$))}catch(_){P(_ instanceof Error?_.message:"\uCC1C \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}},A=g=>{if(!g.mediaKey)return;const M=`/kollus/preview.jsp?key=${encodeURIComponent(g.mediaKey)}`,_=Math.max(Number(g.contentWidth??0),900),j=Math.max(Number(g.contentHeight??0),506);window.open(M,"_blank",`width=${_},height=${j},resizable=yes,scrollbars=yes`)||P("\uD31D\uC5C5\uC774 \uCC28\uB2E8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uD31D\uC5C5 \uD5C8\uC6A9 \uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-gray-900 mb-2",children:n==="all"?"\uC804\uCCB4 \uCF58\uD150\uCE20":"\uCC1C\uD55C \uCF58\uD150\uCE20"}),e.jsx("p",{className:"text-gray-600",children:n==="all"?"\uBAA8\uB4E0 \uAD50\uC721 \uCF58\uD150\uCE20\uB97C \uAC80\uC0C9\uD558\uACE0 \uACFC\uC815\uC5D0 \uD65C\uC6A9\uD558\uC138\uC694.":"\uC990\uACA8\uCC3E\uAE30\uD55C \uCF58\uD150\uCE20\uB9CC \uBAA8\uC544\uC11C \uD655\uC778\uD558\uC138\uC694."})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:u,onChange:g=>o(g.target.value),placeholder:"\uCF58\uD150\uCE20 \uC81C\uBAA9\uC774\uB098 \uD0DC\uADF8\uB85C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n!=="favorites"&&e.jsxs("select",{value:m,onChange:g=>x(g.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4"}),D.map(g=>e.jsx("option",{value:g.key,children:g.name},g.key))]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["\uCD1D ",e.jsx("span",{className:"text-blue-600",children:H}),"\uAC1C\uC758 \uCF58\uD150\uCE20"]})]})}),q&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:q}),J&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-16 text-center text-gray-500",children:e.jsx("p",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})}),!J&&e.jsx("div",{className:"grid grid-cols-3 gap-6",children:p.map(g=>e.jsxs("div",{className:"group bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",role:"button",tabIndex:0,onClick:()=>A(g),onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&A(g)},children:[e.jsxs("div",{className:"relative h-40 bg-gray-100",children:[g.thumbnail?e.jsx("img",{src:g.thumbnail,alt:g.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Bt,{className:"w-12 h-12 text-gray-300"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-black bg-opacity-60 flex items-center justify-center",children:e.jsx(qc,{className:"w-6 h-6 text-white ml-0.5"})})}),e.jsx("div",{className:"absolute top-2 left-2 bg-white px-2 py-1 rounded text-xs",children:g.category}),e.jsx("button",{type:"button",onClick:M=>k(M,g),className:"absolute top-2 right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors",title:g.isFavorite?"\uCC1C \uD574\uC81C":"\uCC1C\uD558\uAE30",children:e.jsx(HC,{className:`w-4 h-4 ${g.isFavorite?"fill-red-500 text-red-500":"text-gray-400"}`})}),g.duration&&g.duration!=="-"&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:g.duration})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-gray-900 mb-2 line-clamp-1",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:g.description})]})]},g.id))}),!J&&!q&&p.length===0&&e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(Bt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uAC80\uC0C9 \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"}),e.jsx("p",{className:"text-sm mt-2",children:"\uB2E4\uB978 \uAC80\uC0C9\uC5B4\uB098 \uD544\uD130\uB97C \uC2DC\uB3C4\uD574\uBCF4\uC138\uC694"})]})}),!J&&p.length<H&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"button",onClick:()=>N(g=>g+1),disabled:R,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:R?"\uBD88\uB7EC\uC624\uB294 \uC911...":"\uB354\uBCF4\uAE30"})})]})}const gx=n=>({id:String(n.id),name:n.category_nm,parentId:n.parent_id>0?String(n.parent_id):null,createdAt:new Date().toISOString()}),hx=n=>{const u=new Map,o=[];return n.forEach(m=>{u.set(m.id,{...m,children:[]})}),n.forEach(m=>{const x=u.get(m.id);m.parentId&&u.has(m.parentId)?u.get(m.parentId).children.push(x):o.push(x)}),o};function px(){const[n,u]=c.useState([]),[o,m]=c.useState(new Set),[x,p]=c.useState(!0),[B,F]=c.useState(!1),[v,H]=c.useState(null),[S,T]=c.useState(!1),[N,R]=c.useState(null),[G,J]=c.useState(""),[y,q]=c.useState(null),P=async()=>{try{p(!0),H(null);const j=await le.getQuestionCategories();if(j.rst_code!=="0000")throw new Error(j.rst_message);const O=(j.rst_data??[]).map(gx);u(O)}catch(j){H(j instanceof Error?j.message:"\uCE74\uD14C\uACE0\uB9AC\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{p(!1)}};c.useEffect(()=>{P()},[]);const L=hx(n),D=j=>{m(O=>{const $=new Set(O);return $.has(j)?$.delete(j):$.add(j),$})},k=(j=null)=>{R(null),J(""),q(j),T(!0)},A=j=>{R(j),J(j.name),q(j.parentId),T(!0)},g=async()=>{if(G.trim())try{if(F(!0),H(null),N){const j=await le.updateQuestionCategory({id:Number(N.id),categoryName:G.trim(),parentId:y?Number(y):0});if(j.rst_code!=="0000")throw new Error(j.rst_message)}else{const j=await le.createQuestionCategory({categoryName:G.trim(),parentId:y?Number(y):0});if(j.rst_code!=="0000")throw new Error(j.rst_message)}await P(),T(!1),R(null),J("")}catch(j){H(j instanceof Error?j.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}},M=async j=>{if(n.some($=>$.parentId===j)){alert("\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC788\uC5B4 \uC0AD\uC81C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(confirm("\uC774 \uCE74\uD14C\uACE0\uB9AC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{F(!0);const $=await le.deleteQuestionCategory({id:Number(j)});if($.rst_code!=="0000")throw new Error($.rst_message);await P()}catch($){H($ instanceof Error?$.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}},_=(j,O=0)=>{const $=o.has(j.id),d=j.children&&j.children.length>0;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 hover:bg-gray-50 border-b border-gray-100 ${O>0?"bg-gray-50/50":""}`,style:{paddingLeft:`${16+O*24}px`},children:[d?e.jsx("button",{onClick:()=>D(j.id),className:"p-1 hover:bg-gray-200 rounded",children:$?e.jsx(hr,{className:"w-4 h-4 text-gray-500"}):e.jsx(bs,{className:"w-4 h-4 text-gray-500"})}):e.jsx("span",{className:"w-6"}),e.jsx(Ic,{className:"w-4 h-4 text-indigo-500"}),e.jsx("span",{className:"flex-1 text-gray-800",children:j.name}),e.jsx("button",{onClick:()=>k(j.id),className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"\uD558\uC704 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00",disabled:B,children:e.jsx(ft,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(j),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:B,children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(j.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:B,children:e.jsx(Nt,{className:"w-4 h-4"})})]}),$&&d&&e.jsx("div",{children:j.children.map(f=>_(f,O+1))})]},j.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C \uCE74\uD14C\uACE0\uB9AC"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uBB38\uC81C\uB97C \uBD84\uB958\uD560 \uCE74\uD14C\uACE0\uB9AC\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:()=>k(null),disabled:B,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(ft,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"})]})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:v}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:x?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(os,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):L.length>0?e.jsx("div",{children:L.map(j=>_(j))}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Ic,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uCE74\uD14C\uACE0\uB9AC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:()=>k(null),className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00\uD558\uAE30"})]})}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N?"\uCE74\uD14C\uACE0\uB9AC \uC218\uC815":"\uCE74\uD14C\uACE0\uB9AC \uCD94\uAC00"}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uCE74\uD14C\uACE0\uB9AC\uBA85 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:G,onChange:j=>J(j.target.value),placeholder:"\uCE74\uD14C\uACE0\uB9AC\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC0C1\uC704 \uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:y||"",onChange:j=>q(j.target.value||null),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC5C6\uC74C (\uCD5C\uC0C1\uC704)"}),n.filter(j=>j.id!==(N==null?void 0:N.id)).map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:g,disabled:!G.trim()||B,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[B?e.jsx(os,{className:"w-4 h-4 animate-spin"}):e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const fx=n=>n===1||n===2?"multiple_choice":n===3||n===4?"short_answer":"multiple_choice",Yc=n=>n==="multiple_choice"?1:n==="short_answer"?3:1,yx=n=>{const u=fx(n.question_type),o=[];if(n.question_type===1||n.question_type===2)for(let m=1;m<=(n.item_cnt||4);m++){const x=`item${m}`,p=n[x];if(p){const B=(n.answer||"").split("||");o.push({id:String(m),text:p,isCorrect:B.includes(String(m))})}}return{id:String(n.id),categoryId:n.category_id?String(n.category_id):null,type:u,title:n.question,content:n.question_text||"",choices:u==="multiple_choice"?o:void 0,correctAnswer:u!=="multiple_choice"?n.answer:void 0,points:n.score||5,createdAt:n.reg_date||new Date().toISOString()}},Qc={multiple_choice:"\uAC1D\uAD00\uC2DD",short_answer:"\uC8FC\uAD00\uC2DD",ox:"OX\uD615"},bx={multiple_choice:"bg-blue-100 text-blue-700",short_answer:"bg-green-100 text-green-700",ox:"bg-purple-100 text-purple-700"};function vx(){const[n,u]=c.useState([]),[o,m]=c.useState([]),[x,p]=c.useState(!0),[B,F]=c.useState(!1),[v,H]=c.useState(null),[S,T]=c.useState(""),[N,R]=c.useState(""),[G,J]=c.useState(""),[y,q]=c.useState(!1),[P,L]=c.useState(null),[D,k]=c.useState({categoryId:"",type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),A=async()=>{try{p(!0),H(null);const d=await le.getQuestionCategories();d.rst_code==="0000"&&m(d.rst_data??[]);const f=G==="multiple_choice"?1:G==="short_answer"?3:void 0,U=await le.getQuestionBankList({categoryId:N?Number(N):void 0,questionType:f,keyword:S||void 0,limit:100});if(U.rst_code!=="0000")throw new Error(U.rst_message);const I=(U.rst_data??[]).map(yx);u(I)}catch(d){H(d instanceof Error?d.message:"\uBB38\uC81C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{p(!1)}};c.useEffect(()=>{A()},[S,N,G]);const g=()=>{L(null),k({categoryId:null,type:"multiple_choice",title:"",content:"",points:5,choices:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:""}),q(!0)},M=d=>{L(d),k({categoryId:d.categoryId,type:d.type,title:d.title,content:d.content,points:d.points,choices:d.choices||[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}],correctAnswer:d.correctAnswer||""}),q(!0)},_=async()=>{if(D.title.trim())try{F(!0),H(null);let d="";if(D.type==="multiple_choice"){const U=D.choices.findIndex(I=>I.isCorrect);d=U>=0?String(U+1):"1"}else D.type,d=D.correctAnswer;const f=D.type==="multiple_choice"?D.choices.map(U=>U.text).filter(U=>U.trim()):void 0;if(P){const U=await le.updateQuestion({id:Number(P.id),categoryId:D.categoryId?Number(D.categoryId):void 0,questionType:Yc(D.type),question:D.title.trim(),questionText:D.content.trim(),answer:d,points:D.points,items:f});if(U.rst_code!=="0000")throw new Error(U.rst_message)}else{const U=await le.createQuestion({categoryId:D.categoryId?Number(D.categoryId):void 0,questionType:Yc(D.type),question:D.title.trim(),questionText:D.content.trim(),answer:d,points:D.points,items:f});if(U.rst_code!=="0000")throw new Error(U.rst_message)}await A(),q(!1)}catch(d){H(d instanceof Error?d.message:"\uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}},j=async d=>{if(confirm("\uC774 \uBB38\uC81C\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{F(!0);const f=await le.deleteQuestion({id:Number(d)});if(f.rst_code!=="0000")throw new Error(f.rst_message);await A()}catch(f){H(f instanceof Error?f.message:"\uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{F(!1)}},O=d=>{if(!d)return"-";const f=o.find(U=>String(U.id)===d);return(f==null?void 0:f.category_nm)||"-"},$=(d,f,U)=>{k(I=>({...I,choices:I.choices.map((Q,z)=>z===d?{...Q,[f]:U}:f==="isCorrect"&&U===!0?{...Q,isCorrect:!1}:Q)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"\uBB38\uC81C\uC740\uD589"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"\uC2DC\uD5D8\uC5D0 \uC0AC\uC6A9\uD560 \uBB38\uC81C\uB97C \uAD00\uB9AC\uD569\uB2C8\uB2E4."})]}),e.jsxs("button",{onClick:g,disabled:B,className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[e.jsx(ft,{className:"w-5 h-5"}),e.jsx("span",{children:"\uBB38\uC81C \uCD94\uAC00"})]})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:v}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:S,onChange:d=>T(d.target.value),placeholder:"\uBB38\uC81C \uAC80\uC0C9...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),e.jsxs("select",{value:N,onChange:d=>R(d.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uCE74\uD14C\uACE0\uB9AC"}),o.map(d=>e.jsx("option",{value:d.id,children:d.category_nm},d.id))]}),e.jsxs("select",{value:G,onChange:d=>J(d.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uC804\uCCB4 \uC720\uD615"}),e.jsx("option",{value:"multiple_choice",children:"\uAC1D\uAD00\uC2DD"}),e.jsx("option",{value:"short_answer",children:"\uC8FC\uAD00\uC2DD"}),e.jsx("option",{value:"ox",children:"OX\uD615"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:x?e.jsxs("div",{className:"flex items-center justify-center py-16 text-gray-400",children:[e.jsx(os,{className:"w-8 h-8 animate-spin mr-2"}),e.jsx("span",{children:"\uBD88\uB7EC\uC624\uB294 \uC911..."})]}):n.length>0?e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uBB38\uC81C"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"\uC720\uD615"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"\uBC30\uC810"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"\uAD00\uB9AC"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:d.title}),d.content&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-md",children:d.content})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${bx[d.type]}`,children:Qc[d.type]})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:O(d.categoryId)}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-900",children:[d.points,"\uC810"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>M(d),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\uC218\uC815",disabled:B,children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(d.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"\uC0AD\uC81C",disabled:B,children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},d.id))})]}):e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx(Ru,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"\uB4F1\uB85D\uB41C \uBB38\uC81C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}),e.jsx("button",{onClick:g,className:"mt-4 text-indigo-600 hover:underline",children:"+ \uCCAB \uBC88\uC9F8 \uBB38\uC81C \uCD94\uAC00\uD558\uAE30"})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["\uCD1D ",n.length,"\uAC1C \uBB38\uC81C"]}),y&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>q(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P?"\uBB38\uC81C \uC218\uC815":"\uBB38\uC81C \uCD94\uAC00"}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uC720\uD615"}),e.jsx("div",{className:"flex gap-3",children:["multiple_choice","short_answer","ox"].map(d=>e.jsx("button",{type:"button",onClick:()=>k(f=>({...f,type:d})),className:`flex-1 py-3 px-4 rounded-lg border-2 transition-colors ${D.type===d?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300"}`,children:Qc[d]},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uCE74\uD14C\uACE0\uB9AC"}),e.jsxs("select",{value:D.categoryId||"",onChange:d=>k(f=>({...f,categoryId:d.target.value||null})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"\uCE74\uD14C\uACE0\uB9AC \uC5C6\uC74C"}),o.map(d=>e.jsx("option",{value:d.id,children:d.category_nm},d.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uBB38\uC81C \uC81C\uBAA9 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:D.title,onChange:d=>k(f=>({...f,title:d.target.value})),placeholder:"\uBB38\uC81C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBB38\uC81C \uB0B4\uC6A9"}),e.jsx("textarea",{value:D.content,onChange:d=>k(f=>({...f,content:d.target.value})),placeholder:"\uBB38\uC81C \uB0B4\uC6A9\uC744 \uC785\uB825\uD558\uC138\uC694",rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none"})]}),D.type==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC120\uD0DD\uC9C0"}),e.jsx("div",{className:"space-y-3",children:D.choices.map((d,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>$(f,"isCorrect",!0),className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${d.isCorrect?"border-green-500 bg-green-500 text-white":"border-gray-300 hover:border-green-400"}`,children:d.isCorrect&&e.jsx("span",{className:"text-xs",children:"\u2713"})}),e.jsxs("span",{className:"text-sm text-gray-500 w-6",children:[f+1,"."]}),e.jsx("input",{type:"text",value:d.text,onChange:U=>$(f,"text",U.target.value),placeholder:`\uC120\uD0DD\uC9C0 ${f+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},d.id))}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"\uC6D0\uD615 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uC815\uB2F5\uC744 \uC120\uD0DD\uD558\uC138\uC694."})]}),D.type==="short_answer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsx("input",{type:"text",value:D.correctAnswer,onChange:d=>k(f=>({...f,correctAnswer:d.target.value})),placeholder:"\uC815\uB2F5\uC744 \uC785\uB825\uD558\uC138\uC694",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),D.type==="ox"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uC815\uB2F5"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>k(d=>({...d,correctAnswer:"O"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${D.correctAnswer==="O"?"border-green-500 bg-green-50 text-green-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"O"}),e.jsx("button",{type:"button",onClick:()=>k(d=>({...d,correctAnswer:"X"})),className:`flex-1 py-4 text-2xl font-bold rounded-lg border-2 transition-colors ${D.correctAnswer==="X"?"border-red-500 bg-red-50 text-red-600":"border-gray-200 hover:border-gray-300 text-gray-400"}`,children:"X"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uBC30\uC810"}),e.jsx("input",{type:"number",value:D.points,onChange:d=>k(f=>({...f,points:parseInt(d.target.value)||0})),min:1,className:"w-32 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"\uC810"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uCDE8\uC18C"}),e.jsxs("button",{onClick:_,disabled:!D.title.trim()||B,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[B?e.jsx(os,{className:"w-4 h-4 animate-spin"}):e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"\uC800\uC7A5"})]})]})]})]})]})}const jx=["dashboard","explore","courses","create-course","content-all","content-favorites","exam-categories","exam-questions","exam-management","subject-create"],Bx=new Set(jx),Nx=["basic","subjects"],Dx=new Set(Nx),wx=["basic","learners","curriculum","confirm"],Ax=new Set(wx),kx=(n,u)=>{const o=Object.keys(n),m=Object.keys(u);if(o.length!==m.length)return!1;for(const x of o)if(n[x]!==u[x])return!1;return!0},_x=(n,u)=>n.menu===u.menu&&n.subPath===u.subPath&&kx(n.params,u.params),Vc=n=>{const u=n.replace(/^#\/?/,"").trim();if(!u)return{menu:"dashboard",params:{},isFallback:!1};const[o,m]=u.split("?"),x=o.split("/").filter(Boolean),p=x[0]??"",B=Bx.has(p),F={};return m&&new URLSearchParams(m).forEach((H,S)=>{H&&(F[S]=H)}),{menu:B?p:"dashboard",subPath:x.length>1?x.slice(1).join("/"):void 0,params:F,isFallback:!B}},Sx=n=>{const u=[n.menu,n.subPath].filter(Boolean).join("/"),o=new URLSearchParams;Object.entries(n.params).forEach(([x,p])=>{p&&o.set(x,p)});const m=o.toString();return`#/${u}${m?`?${m}`:""}`};function Ex(){const[n,u]=c.useState(()=>{const g=Vc(window.location.hash);return{menu:g.menu,subPath:g.subPath,params:g.params}}),[o,m]=c.useState(!1),[x,p]=c.useState(!1),[B,F]=c.useState(0),v=n.menu,H=v==="content-all"||v==="content-favorites",S=v==="exam-categories"||v==="exam-questions"||v==="exam-management",T=c.useCallback((g,M=!1)=>{const _=Sx(g);if(window.location.hash===_)return;const j=`${window.location.pathname}${window.location.search}${_}`;M?window.history.replaceState(null,"",j):window.location.hash=_},[]),N=c.useCallback((g,M)=>{u(_=>_x(_,g)?_:g),(g.menu==="content-all"||g.menu==="content-favorites")&&m(!0),(g.menu==="exam-categories"||g.menu==="exam-questions"||g.menu==="exam-management")&&p(!0),(M==null?void 0:M.syncHash)!==!1&&T(g,M==null?void 0:M.replaceHash)},[T]),R=c.useCallback(g=>{N({menu:g,params:{}})},[N]),G=c.useCallback(g=>{const M={courseId:String(g.courseId),cmTab:g.targetTab??"attendance",source:"prism"};g.courseName&&(M.courseName=g.courseName),N({menu:"courses",subPath:"manage",params:M})},[N]),J=c.useCallback(g=>{N({menu:"courses",subPath:g.subPath,params:g.params})},[N]);c.useEffect(()=>{const g=()=>{const M=Vc(window.location.hash);if(M.isFallback){N({menu:"dashboard",params:{}},{syncHash:!0,replaceHash:!0});return}N({menu:M.menu,subPath:M.subPath,params:M.params},{syncHash:!1})};return g(),window.addEventListener("hashchange",g),()=>window.removeEventListener("hashchange",g)},[N]);const y=()=>{o?m(!o):R("content-all")},q=()=>{x?p(!x):R("exam-categories")},P=()=>{F(g=>g+1)},L=n.menu==="create-course"&&Dx.has(n.params.step??"")?n.params.step:void 0,D=n.menu==="subject-create"&&Ax.has(n.params.step??"")?n.params.step:void 0,k=c.useCallback(g=>{N({menu:"create-course",params:g==="basic"?{}:{step:g}})},[N]),A=c.useCallback(g=>{N({menu:"subject-create",params:g==="basic"?{}:{step:g}})},[N]);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:e.jsx(Tl,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900",children:"\uAD50\uC218\uC790 LMS"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learning Management System"})]})]}),e.jsx("button",{onClick:P,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"\uD604\uC7AC \uD654\uBA74 \uC0C8\uB85C\uACE0\uCE68",children:e.jsx(tm,{className:"w-5 h-5"})})]})})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-64 bg-white border-r border-gray-200 fixed top-[73px] left-0 h-[calc(100vh-73px)] overflow-y-auto z-40",children:e.jsxs("nav",{className:"p-4 flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>R("dashboard"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${v==="dashboard"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Tl,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB300\uC2DC\uBCF4\uB4DC"})]}),e.jsxs("button",{onClick:()=>R("explore"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${v==="explore"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(EC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uD0D0\uC0C9"})]}),e.jsxs("button",{onClick:()=>R("courses"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${v==="courses"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:"\uB2F4\uB2F9\uACFC\uBAA9"})]}),e.jsxs("button",{onClick:()=>R("create-course"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${v==="create-course"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(RC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uC815\uAC1C\uC124"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:y,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${H?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(KC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uCF58\uD150\uCE20 \uB77C\uC774\uBE0C\uB7EC\uB9AC"})]}),o?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(bs,{className:"w-4 h-4"})]}),o&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>R("content-all"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${v==="content-all"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC804\uCCB4 \uCF58\uD150\uCE20"})]}),e.jsxs("button",{onClick:()=>R("content-favorites"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${v==="content-favorites"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uCC1C\uD55C \uCF58\uD150\uCE20"})]})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:q,className:`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors text-left ${S?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zr,{className:"w-5 h-5"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]}),x?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(bs,{className:"w-4 h-4"})]}),x&&e.jsxs("div",{className:"ml-4 mt-1 flex flex-col gap-1",children:[e.jsxs("button",{onClick:()=>R("exam-categories"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${v==="exam-categories"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uCE74\uD14C\uACE0\uB9AC"})]}),e.jsxs("button",{onClick:()=>R("exam-questions"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${v==="exam-questions"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uBB38\uC81C\uC740\uD589"})]}),e.jsxs("button",{onClick:()=>R("exam-management"),className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors text-left text-sm ${v==="exam-management"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current"}),e.jsx("span",{children:"\uC2DC\uD5D8\uAD00\uB9AC"})]})]})]}),e.jsxs("button",{onClick:()=>R("subject-create"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${v==="subject-create"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(yC,{className:"w-5 h-5"}),e.jsx("span",{children:"\uACFC\uBAA9\uAC1C\uC124"})]})]})}),e.jsx("div",{className:"w-64 flex-shrink-0"}),e.jsx("main",{className:"flex-1 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:v==="dashboard"?e.jsx(xx,{onNavigate:g=>R(g),onOpenCourse:G},B):v==="explore"?e.jsx(mx,{},B):v==="courses"?e.jsx(cx,{routeSubPath:n.subPath,routeParams:n.params,onRouteChange:J},B):v==="create-course"?e.jsx(tx,{initialStep:L,onStepChange:k,onCreated:()=>R("explore")},B):v==="content-all"?e.jsx(Hc,{activeTab:"all"},B):v==="content-favorites"?e.jsx(Hc,{activeTab:"favorites"},`${B}-fav`):v==="exam-categories"?e.jsx(px,{},B):v==="exam-questions"?e.jsx(vx,{},B):v==="exam-management"?e.jsx(Bm,{},B):v==="subject-create"?e.jsx(ld,{initialStep:D,onStepChange:A},B):e.jsx("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-16 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(Tl,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"\uCEE8\uD150\uCE20 \uC601\uC5ED"}),e.jsx("p",{className:"text-sm mt-2",children:"\uBA54\uB274\uB97C \uC120\uD0DD\uD558\uBA74 \uAD00\uB828 \uB0B4\uC6A9\uC774 \uD45C\uC2DC\uB429\uB2C8\uB2E4"})]})})})})]})]})}cC.createRoot(document.getElementById("root")).render(e.jsx(Me.StrictMode,{children:e.jsx(Ex,{})}));
