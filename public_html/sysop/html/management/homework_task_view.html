<script language="javascript" type="text/javascript">initEditor("summernote");</script>

<form name="form1" method="POST">
<input type="hidden" name="mode" value="">

<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01">기본정보</td>
	<td class="c_td01"></td>
</tr>
</table>

<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="120"><col><col width="120"><col>
<tr>
	<td class="f_th01">과제</td>
	<td class="f_td01" colspan="3">{{homework.homework_nm}}</td>
</tr>
<tr>
	<td class="f_th01">회원</td>
	<td class="f_td01">{{user.user_nm}} ({{user.login_id}})</td>
	<td class="f_th01">부여일시</td>
	<td class="f_td01">{{info.reg_date_conv}}</td>
</tr>
</table>

<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01">추가 과제 부여</td>
	<td class="c_td01"></td>
</tr>
</table>

<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="120"><col>
<tr>
	<td class="f_th01">과제 내용</td>
	<td class="f_td01">
		<textarea name="task" style="width:100%; height:220px;" id="task">{{info.task}}</textarea>
		<p class="desc01" style="margin-top:6px;">
			왜 필요하냐면, 학생마다 피드백 이후에 추가 과제를 여러 번(횟수 제한 없이) 줄 수 있어야 하기 때문입니다.
		</p>
	</td>
</tr>
<!--@if(info.mod_block)-->
<tr>
	<td class="f_th01">첨부파일</td>
	<td class="f_td01">
		<!--@loop(assign_files)-->
		<div class="file_con">{{assign_files.__ord}}. {{assign_files.ext}} <a href="../main/download_file.jsp?ek={{assign_files.ek}}&file={{assign_files.filename_conv}}">{{assign_files.filename}}</a></div>
		<!--/loop(assign_files)-->
		<!--@nif(assign_files)-->등록된 첨부파일이 없습니다.<!--/nif(assign_files)-->
		<iframe id="fileupload_assign" name="fileupload_assign" frameborder="0" src="attach.jsp?md=homework_task_assign_{{tid}}&mid={{cuid}}" width="100%" height="130" scrolling="no"></iframe>
	</td>
</tr>
<!--/if(info.mod_block)-->
</table>

<table class="b_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td>
		<button type="button" class="bttn2" onclick="window.close()">닫기</button>
	</td>
	<td class="b_td01">
		<!--@if(info.add_block)-->
		<button type="button" class="bttn2" id="btn_assign" onclick="submitMode('add');">등록</button>
		<!--/if(info.add_block)-->
		<!--@if(info.mod_block)-->
		<button type="button" class="bttn2" id="btn_assign" onclick="submitMode('mod');">저장</button>
		<button type="button" class="bttn2" onclick="BtnConfirmGo('추가 과제를 삭제하시겠습니까?\\n삭제하면 학생 화면에서도 보이지 않습니다.', 'homework_task_view.jsp?cid={{cid}}&hid={{hid}}&cuid={{cuid}}&tid={{tid}}&mode=del&dek={{dek}}');">삭제</button>
		<!--/if(info.mod_block)-->
	</td>
</tr>
</table>

<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01">학생 제출</td>
	<td class="c_td01"></td>
</tr>
</table>

<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="120"><col>
<!--@if(info.submit_block)-->
<tr>
	<td class="f_th01">제출일시</td>
	<td class="f_td01">{{info.submit_date_conv}}</td>
</tr>
<tr>
	<td class="f_th01">제목</td>
	<td class="f_td01">{{info.subject}}</td>
</tr>
<tr>
	<td class="f_th01">내용</td>
	<td class="f_td01">
		<div style="width:100%; overflow-x:auto;word-wrap:break-word;">
			{{info.content}}
		</div>
	</td>
</tr>
<tr>
	<td class="f_th01">첨부파일</td>
	<td class="f_td01">
		<!--@loop(submit_files)-->
		<div class="file_con">{{submit_files.__ord}}. {{submit_files.ext}} <a href="../main/download_file.jsp?ek={{submit_files.ek}}&file={{submit_files.filename_conv}}">{{submit_files.filename}}</a></div>
		<!--/loop(submit_files)-->
		<!--@nif(submit_files)-->제출된 첨부파일이 없습니다.<!--/nif(submit_files)-->
	</td>
</tr>
<!--/if(info.submit_block)-->
<!--@nif(info.submit_block)-->
<tr>
	<td class="f_th01">상태</td>
	<td class="f_td01">미제출</td>
</tr>
<!--/nif(info.submit_block)-->
</table>

<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01">피드백</td>
	<td class="c_td01"></td>
</tr>
</table>

<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="120"><col>
<tr>
	<td class="f_th01">피드백</td>
	<td class="f_td01">
		<textarea name="feedback" style="width:100%; height:260px;" id="feedback">{{info.feedback}}</textarea>
		<!--@if(info.mod_block)-->
		<iframe id="fileupload_feedback" name="fileupload_feedback" frameborder="0" src="attach.jsp?md=homework_task_feedback_{{tid}}&mid={{cuid}}&tgt=feedback" width="100%" height="130" scrolling="no"></iframe>
		<!--/if(info.mod_block)-->
	</td>
</tr>
<!--@if(info.confirm_block)-->
<tr>
	<td class="f_th01">피드백일시</td>
	<td class="f_td01">{{info.confirm_date_conv}}</td>
</tr>
<!--/if(info.confirm_block)-->
</table>

<table class="b_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td></td>
	<td class="b_td01">
		<!--@if(info.mod_block)-->
		<button type="button" class="bttn2" onclick="submitMode('feedback');">피드백 저장</button>
		<!--@if(info.confirm_block)-->
		<button type="button" class="bttn2" onclick="BtnConfirmGo('피드백을 초기화하시겠습니까?\\n(첨부파일은 그대로 남습니다)', 'homework_task_view.jsp?cid={{cid}}&hid={{hid}}&cuid={{cuid}}&tid={{tid}}&mode=fdel&dek={{fdek}}');">피드백 초기화</button>
		<!--/if(info.confirm_block)-->
		<!--/if(info.mod_block)-->
		<!--@nif(info.mod_block)-->
		<span class="desc01">먼저 ‘추가 과제’를 등록해 주세요.</span>
		<!--/nif(info.mod_block)-->
	</td>
</tr>
</table>
</form>

{{form_script}}

<script language="JavaScript">
function submitMode(mode) {
	var f = document.forms['form1'];
	if(!f) return false;
	f['mode'].value = mode;
	if(!validate(f)) return false;
	if(mode == "add" && !confirm("추가 과제를 등록하시겠습니까?")) return false;
	if(mode == "mod" && !confirm("추가 과제를 저장하시겠습니까?")) return false;
	if(mode == "feedback" && !confirm("피드백을 저장하시겠습니까?")) return false;
	f.submit();
}
</script>
