<style type="text/css">
* { box-sizing:border-box; font-family: "Malgun Gothic", "맑은 고딕", Arial, Dotum, Gulim; }
html, body, #container { background-color:#f8f8f8; width:100%; height:auto; text-align:center; }

#top { background-color:#0d4991; /* #235c9f */ min-width:1100px; width:100%; display:none; }
#lmslogo { width:210px; height:50px; background-color:#0d4991; }
#lmslogo img { width:210px; height:50px; border:0 none; }

#login { width:800px; margin:80px auto 0; background-color:#f5f5f5; border:1px solid #dedede; border-radius:4px; text-align:center; }
#login #sitelogo { border-top:5px solid #0d4991; border-radius:4px 4px 0 0; padding:20px 10px 20px; width:100%; vertical-align:middle; background-color:#ffffff; font-size: 20pt; font-weight: bold;}
#login #sitelogo img { max-width:100%; max-height:200px; }
#login #description { padding-bottom:10px; border: 1px solid #dedede; border-radius:4px; width: 90%; margin: auto; background-color: white; margin-top: 10px;}

#login #login_box { width:300px; margin:0 auto; }
/* #login #login_box label { display:block; width:100%; text-align:left; margin-top:30px; } */
#login #login_box input { display:block; width:100%; text-align:left; margin-top:10px; padding:5px 10px; height:42px; font-size:20px;}
#login #login_box button { width:100%; background-color:#0d4991; color:#ffffff; font-size:16px; border:1px solid #0d4991; border-radius:4px; padding:10px; margin:5px 0; }

#copyright { margin:20px 0 80px 0; font-size:14px; color:#999999; }
</style>


<div id="login">
    <div id="sitelogo">
        <!--@nif(expired_block)-->비밀번호변경<!--/nif(expired_block)-->
        <!--@if(expired_block)-->비밀번호 변경안내<!--/if(expired_block)-->
    </div>
    <div id="description">
        <!--@if(expired_block)-->
                <h3>회원님께서는 {{SITE_INFO.passwd_day}}일 동안 비밀번호를 변경하지 않으셨습니다. 또는 비밀번호를 초기화 하였습니다.</h3>
                회원님의 개인정보보호를 위해 주기적인 비밀번호 변경을 요청 드립니다.<br /><br/>
                <div style="display: inline-block;text-align:left;">
                    - 비밀번호 생성 규칙은 숫자, 문자, 특수문자을 이용한 조합규칙 및 비밀번호 최소길이(9자 이상) 입니다. <br/>
                    - 추측하기 쉬운 비밀번호의 사용 금지를 권고하고 있습니다. (생일, 전화번호, admin, user, 연속문자, 서비스명 등) <br/>
                    - 이용자 비밀번호의 변경주기는 {{SITE_INFO.passwd_day}}일로 변경주기에 따른 비밀번호 변경정책에 따라야 합니다.
                </div>
        <!--/if(expired_block)-->
    </div>
    <div id="login_box">
        <form name="form1" method="post" target="sysfrmblank" onsubmit="return goSubmit(this);">
            <input type="hidden" name="returl" value="{{returl}}">
            <input type="hidden" name="domain" value="{{domain}}">
            <input type="hidden" name="session_id" value="{{session_id}}">
            <input type="hidden" value="check" name="mode">

            <input tabindex="1" type="password" name="passwd_old" id="passwd_old" placeholder="기존 비밀번호">
            <input tabindex="2" type="password" name="passwd" id="passwd" onblur="setPasswork()" placeholder="신규 비밀번호" />
            <script>
                function setPasswork() {
                    var f = document.forms['form1'];
                    var area = document.getElementById("checkPasswordArea");
                    var passwd = f["passwd"].value;
                    var passwd2 = f["passwd2"].value;
                    if(passwd == "") { area.innerHTML = "영문, 숫자, 특수문자 조합 9자 이상 입력하세요."; return; }

                    var pattern = /^(?=.*?[A-Za-z])(?=.*?[0-9])(?=.*?[\W_]).{9,}$/;
                    if(!pattern.test(passwd)) {
                        area.innerHTML = "<span class=\"bad\">영문, 숫자, 특수문자 조합 9자 이상 입력하세요.</span>"
                        return;
                    }
                    if(passwd && !passwd2) {
                        area.innerHTML = "비밀번호 확인란에 비밀번호를 입력하세요.";
                        f['passwd2'].focus();
                        return;
                    }
                    if(passwd != passwd2) {
                        area.innerHTML = "<span class=\"bad\">두 비밀번호가 일치하지 않습니다.</span>";
                        return;
                    }
                    area.innerHTML = "<span class=\"good\">두 비밀번호가 일치합니다.</span>";
                }
            </script>

            <input tabindex="3" type="password" name="passwd2" id="passwd2" style="margin-bottom: 8px;" onblur="setPasswork()" placeholder="비밀번호 확인" />

            <small><span id="checkPasswordArea">영문, 숫자, 특수문자 조합 9자 이상 입력하세요.</span></small>

            <button tabindex="4" type="submit">변경하기</button>
            <button tabindex="5" type="button" onclick="location.href='/sysop/main/index.jsp';" style="margin-bottom: 30px; background-color: gray; border-color: gray;" >취소하고 돌아가기</button>

        </form>
        {{form_script}}
    </div>
</div>

<div id="copyright">ⓒ Malgnsoft Inc.</div>
<script>
    function resetAllPassword() {
        var el1 = document.getElementsByName('passwd');
        var el2 = document.getElementsByName('passwd2');
        var el3 = document.getElementsByName('passwd_old');
        for(var i = 0; i < el1.length; i++) el1[i].value = '';
        for(var j = 0; j < el2.length; j++) el2[j].value = '';
        for(var j = 0; j < el3.length; j++) el3[j].value = '';
    }

    function goSubmit(f) {
       if(!validate(f)) return false;
        return true;
    }
    $(document).ready(function() {
        <!--@if(SITE_INFO.verify_email_yn)-->
        setVerify();
        setSuccess();
        <!--/if(SITE_INFO.verify_email_yn)-->
        $("#modify_passwd").addClass("on");
    });
</script>