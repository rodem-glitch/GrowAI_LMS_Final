# 미래형 직업 교육 플랫폼 개발 범위

## 1. 개요

본 문서는 한국폴리텍대학의 AI 기반 학습관리시스템인 GrowAILMS 개발 범위를 정의합니다. 기존의 레거시 시스템(MalgnLMS)을 현대화된 기술 스택으로 마이그레이션하며, AI 기능을 통합하여 사용자 경험을 향상시키고 운영 효율성을 극대화하는 것을 목표로 합니다.

## 2. 시스템 아키텍처 개요

GrowAILMS는 3개의 주요 서비스와 공유 데이터베이스 및 벡터 데이터베이스로 구성된 마이크로서비스 지향 아키텍처를 채택합니다. 모든 서비스는 Google Cloud Run을 통해 배포 및 관리됩니다.

### 2.1. 전체 시스템 구성 (Cloud Run 기반)

```
┌───────────────────────────────────────────────────────────────────┐
│                          GrowAILMS System                         │
│                                                                   │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐       │
│  │   Legacy     │    │  Backend API │    │  Frontend    │       │
│  │  (구 시스템)  │    │  (신규 API)   │    │ (교수자 LMS)  │       │
│  └──────────────┘    └──────────────┘    └──────────────┘       │
│        │                     │                     │              │
│        ▼                     ▼                     ▼              │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐    │
│  │  Cloud Run      │ │  Cloud Run      │ │  Cloud Run      │    │
│  │ (Tomcat 9, JSP) │ │ (Spring Boot)   │ │ (Nginx, React)  │    │
│  └─────────────────┘ └─────────────────┘ └─────────────────┘    │
│        │         │           │         │           │              │
│        └─────────┼───────────┼─────────┼───────────┘              │
│                  │           │         │                          │
│                  ▼           ▼         ▼                          │
│         ┌─────────────────┐ ┌─────────────────┐                  │
│         │   Cloud SQL     │ │   Qdrant        │                  │
│         │    (MySQL)      │ │ Vector Database │                  │
│         └─────────────────┘ └─────────────────┘                  │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

## 3. 컴포넌트별 상세 개발 범위

### 3.1. Frontend (교수자 LMS)

*   **경로:** `project/`
*   **기술 스택:** React 18, TypeScript, Vite
*   **빌드 도구:** Vite
*   **UI 프레임워크:** `shadcn/ui` 활용 (MIT License)
*   **배포 환경:** Google Cloud Run (Nginx를 통한 정적 파일 서빙)
*   **주요 기능:**
    *   교수자용 학습 관리 시스템 UI (강의 개설, 학생 관리, 과제/시험 관리 등)
    *   RESTful API (Backend API) 연동을 통한 데이터 처리
    *   `project/api/tutorLmsApi.ts`를 통해 API 통신 관리
    *   `project/components` 내의 다양한 UI 컴포넌트 (Dashboard, CourseManagement, QuestionBankPage 등) 개발
    *   `project/imports`를 통해 레거시 시스템과의 연동 또는 특정 기능 모듈화
*   **특징:**
    *   `vite.config.ts`에서 프로덕션 빌드 시 `console.log`, `debugger` 제거 및 소스맵 비활성화 등 보안 및 성능 최적화 적용
    *   한글 인코딩 문제 방지를 위해 빌드 산출물 `charset: 'ascii'` 설정
    *   캐시 무효화 및 추측 방지를 위한 파일명 해시 적용 (`entryFileNames: 'assets/[name]-[hash].js'`)
*   **운영 고려사항:**
    *   **성능 최적화:** 빌드 시 코드 스플리팅, 이미지 최적화, 불필요한 console/debugger 제거 등을 통해 로딩 속도 향상. CDN을 통한 정적 자산 배포 고려.
    *   **운영 편리성:** Nginx를 통한 정적 파일 서빙은 관리 오버헤드가 적음. Cloud Run의 자동 스케일링 기능을 활용하여 트래픽 변화에 유연하게 대응.
    *   **확장성:** React 컴포넌트 기반으로 모듈화되어 있어 기능 추가 및 확장이 용이.

### 3.2. Backend API

*   **경로:** `polytech-lms-api/`
*   **기술 스택:** Java 17, Spring Boot 3.2.5, eGovFrame 4.2
*   **ORM:** MyBatis 3.5, JPA
*   **빌드 도구:** Gradle
*   **배포 환경:** Google Cloud Run (Embedded Tomcat)
*   **주요 기능:**
    *   **AI/ML 통합:**
        *   Google Gemini를 활용한 콘텐츠 요약, 키워드 추출 (`contentsummary` 패키지)
        *   Spring AI를 이용한 임베딩 모델 (Google GenAI `gemini-embedding-001`) 및 벡터 스토어 (Qdrant) 연동 (`recocontent`, `studentcontentrecommend`, `tutorcontentrecommend`, `job/classify` 패키지)
        *   AI 기반 통계 분석 (`statistics` 패키지)
    *   **외부 서비스 연동:**
        *   Kollus: 비디오 콘텐츠 관리 및 스트리밍 연동 (`contentsummary` 패키지)
        *   KOSIS: 통계 데이터 연동 (`statistics` 패키지)
        *   Work24, JobKorea: 채용 정보 연동 및 직종 분류/추천 (`job` 패키지)
    *   **보안 기능:**
        *   SQL Injection 방지 (MyBatis `#{}` 바인딩)
        *   XSS 방지 (입력값 검증 및 HTML 이스케이프)
        *   민감 정보 로그 출력 금지
        *   인증/인가: JWT 기반 (stateless)
    *   **모듈화된 서비스:** `job`, `contentsummary`, `recocontent`, `studentcontentrecommend`, `tutorcontentrecommend`, `statistics`, `antifraud`, `global`, `security` 등 도메인별 패키지 구성
*   **Spring Framework Layer Architecture (예상):**
    *   **Controller Layer:** HTTP 요청 처리, DTO를 통한 데이터 유효성 검사, Service Layer 호출 (`@RestController` 사용)
    *   **Service Layer:** 비즈니스 로직 처리, 트랜잭션 관리, 여러 Repository/Client 조합하여 데이터 처리
    *   **Repository Layer:** 데이터베이스 및 Qdrant (Vector Store) 접근, MyBatis (XML 또는 Annotation 기반) 및 JPA 사용
    *   **Client Layer:** 외부 API (Kollus, KOSIS, Work24, JobKorea, Gemini REST API) 호출 담당
    *   **Config Layer:** `@Configuration`을 통한 빈 정의 및 환경 설정 (`application.yml` 기반)
    *   **Security Layer:** 인증(JWT) 및 권한 관리, XSS/SQL Injection 방지 등 보안 로직 적용
*   **운영 고려사항:**
    *   **성능 최적화:** Spring Boot Actuator를 통한 모니터링, 데이터베이스 쿼리 최적화, 캐싱 전략 (예: Work24, JobKorea API 응답 캐싱), 비동기 처리 도입 (AI/STT 작업 등).
    *   **운영 편리성:** 환경 변수를 통한 민감 정보(DB 비밀번호, API 키) 관리. `spring-boot-devtools` 비활성화를 통한 안정적인 운영 환경 확보. Cloud Run의 로깅/모니터링 기능 활용.
    *   **확장성:** Cloud Run의 자동 스케일링, 마이크로서비스 아키텍처 기반의 독립적인 배포 및 확장 용이성. Spring AI를 통한 임베딩 및 벡터 스토어 플러그인 교체 용이.

### 3.3. Database

*   **유형:** RDBMS (MySQL)
*   **환경:** Google Cloud SQL
*   **스키마:** `public_html/lms.sql` (레거시 스키마), `polytech-lms-api/sql/` (신규 스키마 및 마이그레이션 스크립트)
*   **주요 테이블 (예시):**
    *   `LM_COURSE`, `LM_LESSON`, `LM_COURSE_USER`: 과정, 레슨, 수강생 정보 관리
    *   `LM_EXAM`, `LM_HOMEWORK`, `LM_FORUM`, `LM_SURVEY`: 평가, 과제, 토론, 설문 관련 정보
    *   `LM_KOLLUS_LOG`, `LM_KOLLUS_FILE`: Kollus 연동 로그 및 파일 관리
    *   `LM_QUESTION`, `LM_QUESTION_CATEGORY`: 문제은행 관리
    *   `TB_RECO_CONTENT`, `TB_KOLLUS_TRANSCRIPT`, `TB_JOB_WORK24_JOBKOREA_OCCUPATION_MAP`: AI/추천/Job 관련 신규 데이터 저장
*   **운영 고려사항:**
    *   **성능 최적화:** Cloud SQL 인스턴스 성능 튜닝, 인덱스 최적화, 쿼리 모니터링 및 최적화. 불필요한 대용량 데이터 로드를 방지하기 위한 페이징 처리.
    *   **운영 편리성:** Cloud SQL의 자동 백업 및 복구 기능 활용. 읽기 전용 복제본(Read Replica)을 통해 읽기 부하 분산.
    *   **확장성:** Cloud SQL의 수직/수평 확장 기능 (인스턴스 타입 변경, 읽기 복제본 추가). 필요 시 데이터베이스 샤딩 고려.

### 3.4. Vector Database

*   **유형:** Qdrant Vector Database
*   **환경:** `config/qdrant.yaml`에 설정 정의, 로컬 개발 환경에서는 `localhost:6333` (REST), `localhost:6334` (gRPC)
*   **주요 기능:**
    *   **벡터 임베딩 저장:** 학습 콘텐츠, 교육 과정, 사용자 프로필, AI 추천 결과 등에 대한 벡터 임베딩 저장
    *   **유사도 검색:** 저장된 벡터를 기반으로 유사한 콘텐츠, 과정, 사용자 등을 빠르게 검색
    *   **컬렉션:**
        *   `lms_contents`: 학습 콘텐츠 벡터 (동영상, 문서, 퀴즈)
        *   `lms_courses`: 교육과정 벡터 (과정명, 설명, 목표)
        *   `lms_users`: 사용자 프로필 벡터 (학습이력, 관심분야)
        *   `lms_recommendations`: AI 추천 벡터 (협업필터링, 콘텐츠기반)
*   **임베딩 모델:** Google GenAI `gemini-embedding-001` (Spring AI 설정 기준), `text-embedding-004` (Qdrant config 파일 기준 - `gemini-embedding-001`으로 통일 필요)
*   **운영 고려사항:**
    *   **성능 최적화:** Qdrant 인덱싱 파라미터 튜닝 (`hnsw_config`), 적절한 `vector_size` 및 `distance` (Cosine) 선택. 쿼럼 및 복제 설정 (`hnsw_config`)을 통한 고가용성 및 성능 유지.
    *   **운영 편리성:** Qdrant 대시보드를 통한 모니터링. 백업 및 복구 전략 수립 (스냅샷).
    *   **확장성:** Qdrant 클러스터링을 통한 수평 확장. 데이터 증가에 따른 샤딩 및 노드 추가.

### 3.5. Interface Endpoint

*   **Frontend-Backend API:**
    *   **통신 방식:** RESTful API (JSON 기반)
    *   **인증:** JWT (JSON Web Token)를 통한 인증 및 인가
    *   **Backend API URL:** `http://localhost:8081` (로컬), `api.growai.co.kr` (운영)
    *   **Frontend 호출 예시:** `project/api/tutorLmsApi.ts`
    *   **주요 API 범주:** 사용자 관리, 과정 관리, 학습 콘텐츠 관리, 평가/과제/토론 관리, 통계 조회, AI 추천 등
*   **Backend API - 외부 서비스:**
    *   **Kollus API:** 비디오 콘텐츠 업로드, 메타데이터 조회 등
    *   **KOSIS API:** 통계 데이터 조회
    *   **Work24/JobKorea API:** 채용 정보 조회
    *   **Google Gemini API:** 텍스트 생성, 요약, 임베딩 생성 (직접 REST 호출 또는 Spring AI 연동)
*   **운영 고려사항:**
    *   **성능 최적화:** API 응답 시간 최적화, 불필요한 데이터 전송 최소화. API Gateway (예: Google API Gateway)를 통한 캐싱, 트래픽 관리.
    *   **운영 편리성:** API 문서화 (Swagger/OpenAPI)를 통해 개발자 및 외부 시스템 연동 용이성 확보.
    *   **확장성:** API Gateway를 통해 부하 분산 및 라우팅 관리. 각 마이크로서비스는 독립적으로 확장 가능.

### 3.6. Network Configuration

*   **배포 모델:** Google Cloud Run 기반 서버리스 컨테이너
*   **로드 밸런싱:** Google Cloud Load Balancing (Cloud Run에 내장) 및 도메인 매핑을 통한 트래픽 라우팅
*   **서비스 도메인:**
    *   Legacy: `legacy.growai.co.kr`
    *   Backend API: `api.growai.co.kr`
    *   Frontend (교수자 LMS): `growai.co.kr`, `www.growai.co.kr`
*   **SSL/TLS:** Google 관리 인증서를 통한 자동 HTTPS 적용
*   **Containerization:** Docker (`Dockerfile` 사용)
    *   `polytech-lms-api/Dockerfile`: Backend API 컨테이너 빌드
    *   Frontend (`project/Dockerfile`): Frontend SPA 컨테이너 빌드
*   **CI/CD 환경:** GitHub Actions 및 Google Cloud Build
    *   `polytech-lms-api/cloudbuild.yaml`: Backend API의 Cloud Build 설정 (Gradle 빌드, Docker 이미지 빌드 및 Artifact Registry 푸시, Cloud Run 배포)
    *   GitHub Actions Workflow (`.github/workflows/gcp-deploy.yml`, `frontend-deploy.yml` 등)를 통해 변경 사항 감지 및 자동 배포
*   **운영 고려사항:**
    *   **성능 최적화:** Cloud Run의 자동 스케일링을 통한 트래픽 급증 대비. 캐싱 전략 (CDN 활용)으로 정적 자산 로딩 속도 향상.
    *   **운영 편리성:** Cloud Run의 통합 로깅 및 모니터링. GitHub Actions를 통한 자동화된 배포 프로세스.
    *   **확장성:** Cloud Run의 유연한 스케일링 (min-instances, max-instances 설정), GCP 기반 네트워크 인프라의 고확장성.

### 3.7. Spring Framework Layer Architecture (Backend API)

Backend API (`polytech-lms-api/`)는 Spring Boot를 기반으로 한 계층형 아키텍처를 따르며, 주요 패키지는 다음과 같습니다.

*   `kr.polytech.lms.PolytechLmsApiApplication.java`: Spring Boot 애플리케이션의 메인 엔트리 포인트. `@SpringBootApplication`, `@ConfigurationPropertiesScan`, `@EnableScheduling` 어노테이션을 통해 컴포넌트 스캔, 설정 프로퍼티 로드, 스케줄링 기능을 활성화합니다.
*   `controller`: REST API 엔드포인트를 정의하고 HTTP 요청을 처리합니다. DTO를 통해 요청 및 응답 데이터를 구조화합니다.
    *   예: `JobController`, `StudentContentRecommendController`, `ContentSummaryController`, `StatisticsDashboardApiController`, `VectorIndexController`
*   `service`: 비즈니스 로직을 구현합니다. 여러 `repository` 또는 `client`를 조합하여 복잡한 작업을 수행하고, 트랜잭션을 관리합니다. AI/ML 관련 로직도 이 계층에서 주로 처리됩니다.
    *   예: `JobService`, `RecoContentSummaryGenerator`, `StudentContentRecommendService`, `StatisticsService`, `VectorStoreService`, `QueryEmbeddingService`
*   `repository`: 데이터베이스 (MySQL) 및 벡터 데이터베이스 (Qdrant)와의 상호작용을 담당합니다. MyBatis, Spring Data JPA 등을 활용합니다.
    *   예: `JobRepository`, `ContentSummaryRepository`, `RecoContentRepository`, `GlobalHealthRepository`, `SgisCompanyRepository`, `KosisPopulationRepository`
*   `client`: 외부 API (Kollus, KOSIS, Work24, JobKorea, Gemini REST API)와의 통신을 위한 인터페이스 및 구현을 포함합니다. HTTP 클라이언트 (RestTemplate, WebClient 등)를 사용하여 외부 서비스를 호출합니다.
    *   예: `KollusApiClient`, `KosisClient`, `Work24Client`, `JobKoreaClient`, `GeminiClient`, `SttClient`
*   `config`: 애플리케이션의 설정과 관련된 클래스들을 포함합니다. `@Configuration` 어노테이션을 사용하여 빈 정의, 데이터 소스 설정, 보안 설정, AI 서비스 설정 등을 담당합니다.
    *   예: `VectorSearchConfig`, `SecurityConfiguration`, `JobKoreaProperties`, `KollusProperties`, `GeminiProperties`
*   `security`: 인증, 인가, XSS/SQL Injection 방지 등 애플리케이션 보안과 관련된 기능을 제공합니다.
    *   예: `HtmlSanitizer`, `OutputEncoder`, `ParameterValidator`, `SecureQueryBuilder`, `SecurityConfiguration`
*   `dto`/`entity`: 데이터 전송 객체(DTO)와 데이터베이스 엔티티를 정의합니다.

이 계층 구조는 각 책임이 명확하게 분리되어 있어 코드의 유지보수성과 확장성을 높입니다. 특히 `service` 계층은 여러 `repository`와 `client`를 오케스트레이션하여 비즈니스 흐름을 완성합니다.

---

## 4. 운영 단계 산출물 및 시스템 운영 방안

효율적이고 안정적인 시스템 운영을 위해 다음 산출물과 운영 방안을 마련합니다.

### 4.1. 운영 단계 산출물 목록

1.  **시스템 아키텍처 문서 (본 문서 포함):**
    *   최종 아키텍처 다이어그램 (논리적/물리적)
    *   각 서비스별 상세 설계 문서 (API 명세서, 데이터 모델 정의서)
    *   네트워크 구성도 및 보안 정책
2.  **배포 및 운영 가이드:**
    *   CI/CD 파이프라인 운영 매뉴얼 (`.github/workflows`, `cloudbuild.yaml` 설명)
    *   Cloud Run 배포 및 롤백 절차서
    *   Docker 이미지 관리 및 버전 정책
    *   환경 변수 및 시크릿(Secrets) 관리 방안
3.  **모니터링 및 로깅 가이드:**
    *   Cloud Monitoring 대시보드 구성 및 주요 메트릭 정의 (CPU, Memory, Request Latency, Error Rate 등)
    *   Cloud Logging을 활용한 로그 분석 및 문제 해결 절차
    *   알림(Alert) 설정 및 담당자 지정 (Slack, Email 연동)
    *   AI/ML 기능 (Gemini, Qdrant)에 대한 특정 모니터링 지표 (예: 임베딩 호출 성공률, 벡터 검색 속도)
4.  **장애 대응 및 복구 계획 (DRP):**
    *   서비스별 장애 시나리오 및 대응 절차 (예: Cloud Run 인스턴스 문제, DB 연결 문제, 외부 API 장애)
    *   Cloud SQL 자동 백업 및 수동 복구 절차서
    *   Qdrant 백업 및 복구 방안 (스냅샷 활용)
    *   Docker 이미지 롤백 절차
5.  **성능 튜닝 및 최적화 보고서:**
    *   정기적인 성능 테스트 및 부하 테스트 결과
    *   DB 쿼리 최적화 현황 및 개선 방안
    *   AI/ML 모델 서빙 성능 분석 및 최적화 방안
6.  **보안 취약점 점검 보고서:**
    *   Trivy 스캔 결과 및 조치 이력
    *   정기적인 보안 감사 및 취약점 점검 계획
    *   OWASP Top 10 체크리스트 기반 보안 가이드라인 준수 현황
7.  **비용 관리 보고서:**
    *   GCP 비용 모니터링 및 분석 보고서
    *   비용 절감 방안 도출 및 적용 현황

### 4.2. 시스템 운영 방안

#### 4.2.1. 성능 최적화 방안

*   **클라우드 리소스 최적화:** Cloud Run의 CPU, 메모리, 최소/최대 인스턴스 설정을 트래픽 패턴에 맞춰 동적으로 조정. 불필요한 리소스는 절감 (예: 개발/스테이징 환경).
*   **데이터베이스 최적화:**
    *   Cloud SQL의 인덱스 최적화, 정기적인 쿼리 성능 분석 및 개선.
    *   읽기 부하 분산을 위한 읽기 전용 복제본(Read Replica) 적극 활용.
*   **AI/ML 워크로드 관리:**
    *   대규모 임베딩 생성 및 벡터 인덱싱 작업은 백그라운드 작업 또는 배치 처리로 분리하여 주 서비스에 영향 최소화.
    *   Qdrant 클러스터링 및 샤딩을 통한 벡터 검색 성능 향상.
*   **캐싱 전략 도입:**
    *   Frontend의 정적 자산은 CDN (Cloud CDN)을 통해 캐싱하여 로딩 속도 향상.
    *   Backend API는 자주 요청되는 데이터에 대해 Redis 등 분산 캐시 시스템을 도입하여 DB 부하 감소.
    *   외부 API (Work24, JobKorea) 응답은 내부 캐싱 정책 (`application.yml` 설정)에 따라 관리.

#### 4.2.2. 운영 편리성 확보 방안

*   **자동화된 CI/CD:** GitHub Actions와 Cloud Build를 활용하여 코드 변경 시 자동 빌드, 테스트, 배포 프로세스 확립. 롤백 절차 간소화.
*   **통합 모니터링 및 알림:** Cloud Monitoring 및 Cloud Logging을 통해 시스템 전반의 상태를 실시간으로 모니터링하고, 이상 감지 시 Slack, 이메일 등으로 자동 알림. 대시보드를 통해 운영 현황을 한눈에 파악.
*   **중앙 집중식 로그 관리:** 모든 서비스 로그를 Cloud Logging으로 수집하여 통합 검색 및 분석 용이성 확보. 로그 보관 기간 정책 수립.
*   **환경 변수 관리:** 민감 정보(API 키, DB 비밀번호 등)는 환경 변수 또는 Secret Manager를 통해 안전하게 관리하고 코드에 하드코딩 방지.
*   **문서화:** 모든 시스템 구성, 배포, 운영, 장애 대응 절차를 상세히 문서화하여 온보딩 및 인수인계 용이성 확보.

#### 4.2.3. 확장성 확보 방안

*   **Cloud Run의 자동 스케일링:** 각 서비스는 트래픽에 따라 자동으로 인스턴스 수를 조절하므로, 급작스러운 사용자 증가에도 유연하게 대응 가능.
*   **마이크로서비스 아키텍처:** Frontend, Backend API, Legacy 서비스가 독립적으로 배포 및 확장 가능하여 특정 서비스의 부하가 전체 시스템에 미치는 영향 최소화.
*   **데이터베이스 확장:** Cloud SQL의 고가용성 및 확장성 기능을 활용. 필요 시 데이터 샤딩 또는 NoSQL 도입 검토.
*   **벡터 데이터베이스 확장:** Qdrant 클러스터링을 통해 벡터 스토어의 용량 및 처리량 확장.
*   **메시지 큐/스트림 활용:** 대규모 비동기 작업(예: 대용량 STT 처리, 임베딩 업데이트) 처리를 위해 Cloud Pub/Sub과 같은 메시지 큐 시스템을 도입하여 서비스 간 결합도를 낮추고 처리량 증대.
*   **AI/ML 모델 관리:** GenAI 모델 변경 또는 추가 시 Spring AI 추상화를 통해 유연하게 대응 가능.

---
**작성일:** 2026년 2월 7일
**버전:** 1.0
**작성자:** Gemini CLI
