# Security (보안) - 필수 체크리스트

이 문서는 `everything-claude-code/rules/security.md`의 “커밋 전 보안 체크” 철학을 참고해,
MalgnLMS(JSP+DAO 레거시)에 맞게 한글로 정리한 것입니다.

---

## 1) 커밋 전 필수 보안 체크(강제)
- [ ] 하드코딩 비밀값 없음(API 키/토큰/비밀번호/DB 접속정보)
- [ ] 사용자 입력값 검증/정규화(숫자/날짜/ID 등)
- [ ] SQL 인젝션 방지(가능하면 바인딩/Prepared 방식 사용)
- [ ] XSS 방지(템플릿 출력값/HTML 삽입 주의)
- [ ] 권한/인증 확인(특히 sysop/tutor_lms/api)
- [ ] 에러 메시지에 민감정보 노출 금지(쿼리/키/토큰/서버경로)

---

## 2) MalgnLMS에서 특히 자주 터지는 포인트

### 2-1) SQL 인젝션
- 가능하면 `find(..., new Object[]{...})` 같은 바인딩 형태를 우선합니다.
- 레거시 코드처럼 문자열로 붙여야 할 때는:
  - 숫자는 `m.ri()`, `m.parseInt()` 등으로 숫자화
  - 문자열은 최소한 `'` 이스케이프(`m.replace(x, \"'\", \"''\")`) 등 안전 처리

### 2-2) 권한 체크 누락
- `tutor_lms/api/*` 같은 엔드포인트는 **조회/저장 권한**을 꼭 확인합니다.
- “관리자면 OK, 교수자면 본인 과목만” 같은 룰을 코드로 명확히 둡니다.

---

## 3) 보안 이슈 발견 시 대응(강제)
1) 즉시 중단하고 사용자에게 알립니다.
2) 노출된 비밀값이 있으면 즉시 폐기/교체(회전)합니다.
3) 동일 패턴이 다른 파일에도 있는지 `rg`로 전수 확인합니다.

